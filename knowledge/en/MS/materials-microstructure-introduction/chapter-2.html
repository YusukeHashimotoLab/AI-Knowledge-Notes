<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Chapter 2: Fundamentals of Phase Transformations - MS Terakoya</title>
<link href="../../assets/css/knowledge-base.css" rel="stylesheet"/>
<!-- Prism.js for syntax highlighting -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
        mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'strict' });
    </script>
<script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'mermaid'
            }
        };
    </script>
<script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body><div class="locale-switcher">
<span class="current-locale">ğŸŒ EN</span>
<span class="locale-separator">|</span>
<a class="locale-link" href="../../../jp/MS/materials-microstructure-introduction/chapter-2.html">æ—¥æœ¬èª</a>
<span class="locale-meta">Last sync: 2025-11-16</span>
</div>

<header>
<div class="header-content">
<h1>Chapter 2: Fundamentals of Phase Transformations</h1>
<p class="subtitle">Phase Transformations - Science of Microstructure Control through Heat Treatment</p>
<div class="meta">
<span class="meta-item">ğŸ“– Reading time: 30-40 minutes</span>
<span class="meta-item">ğŸ“Š Difficulty: Intermediate</span>
<span class="meta-item">ğŸ’» Code examples: 7</span>
</div>
</div>
</header>
<div class="breadcrumb">
<a href="../index.html">AI Terakoya Top</a> &gt;
        <a href="../index.html">MS Dojo</a> &gt;
        <a href="index.html">Introduction to Materials Microstructure</a> &gt;
        Chapter 2
    </div>
<main class="container">
<p class="chapter-description" style="margin: 1.5rem 0; padding: 1rem; background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); border-left: 4px solid #f093fb; border-radius: 8px; font-size: 1.05rem; line-height: 1.8; color: #2d3748;">
            Material properties change dramatically depending on temperature and time history (heat treatment). The origin of this change is <strong>phase transformation</strong>. In this chapter, we will learn how to read phase diagrams, mechanisms of diffusional and diffusionless transformations, application of TTT/CCT diagrams, martensitic transformation, and the basics of phase diagram calculation using the CALPHAD method, building a theoretical foundation for heat treatment design.
        </p>
<div class="learning-objectives">
<h2>Learning Objectives</h2>
<p>By reading this chapter, you will be able to:</p>
<ul>
<li>âœ… Read binary and ternary phase diagrams and understand phase equilibrium</li>
<li>âœ… Calculate phase fractions using the Lever Rule</li>
<li>âœ… Predict transformation rate and microstructure from TTT and CCT diagrams</li>
<li>âœ… Quantify transformation progress using the Avrami equation</li>
<li>âœ… Understand the principles of martensitic transformation and predict M<sub>s</sub> temperature</li>
<li>âœ… Understand the basics of the CALPHAD method and how to use the pycalphad library</li>
<li>âœ… Perform phase diagram and transformation kinetics simulations in Python</li>
</ul>
</div>
<hr/>
<h2>2.1 Fundamentals and Reading of Phase Diagrams</h2>
<h3>What is a Phase Diagram?</h3>
<p>A <strong>phase diagram</strong> is a diagram that shows which phases are thermodynamically stable as a function of temperature, composition, and pressure. It is the most important tool when determining heat treatment conditions for materials.</p>
<blockquote>
<strong>A phase</strong> is a homogeneous portion of a material with uniform chemical composition, structure, and properties, separated from other portions by distinct interfaces. Examples: liquid phase (L), Î±-phase (BCC), Î³-phase (FCC), cementite (Fe<sub>3</sub>C)
        </blockquote>
<h3>Basic Types of Binary Phase Diagrams</h3>
<h4>1. Complete Solid Solution</h4>
<p>A system in which two elements form a solid solution over the entire composition range.</p>
<p><strong>Examples</strong>: Cu-Ni system, Au-Ag system</p>
<h4>2. Eutectic System</h4>
<p>At a certain composition and temperature, the liquid phase decomposes simultaneously into two solid phases upon cooling.</p>
<p><strong>Examples</strong>: Pb-Sn system, Al-Si system</p>
<p>Eutectic reaction: $L \rightarrow \alpha + \beta$ (upon cooling)</p>
<h4>3. Peritectic System</h4>
<p>A liquid phase and a solid phase react to produce another solid phase.</p>
<p><strong>Examples</strong>: Fe-C system (high temperature region), Pt-Ag system</p>
<p>Peritectic reaction: $L + \delta \rightarrow \gamma$ (upon cooling)</p>
<h3>Fe-C Phase Diagram (Fundamentals of Steel)</h3>
<p>The Fe-C phase diagram is the foundation for heat treatment design of steel materials.</p>
<div class="mermaid">
flowchart TD
    A[High Temp<br/>Î´-Fe BCC] --&gt;|Cooling| B[Î³-Fe FCC<br/>Austenite]
    B --&gt;|Eutectoid Transf.<br/>727Â°C 0.77%C| C[Î±-Fe BCC<br/>Ferrite]
    B --&gt;|Eutectoid Transf.<br/>727Â°C 0.77%C| D[Feâ‚ƒC<br/>Cementite]
    C --&gt;|Fine Mixed Structure| E[Pearlite]
    D --&gt;|Fine Mixed Structure| E
    B --&gt;|Rapid Cooling<br/>Diffusionless Transf.| F[Martensite<br/>BCT Ultra-hard]

    style A fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    style B fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    style C fill:#e8f5e9,stroke:#43a047,stroke-width:2px
    style D fill:#fce4ec,stroke:#ec407a,stroke-width:2px
    style E fill:#f3e5f5,stroke:#ab47bc,stroke-width:2px
    style F fill:#ffebee,stroke:#e53935,stroke-width:2px
        </div>
<p><strong>Important Temperatures and Compositions</strong>:</p>
<ul>
<li><strong>Eutectoid Point</strong>: 727Â°C, 0.77% C
                <ul>
<li>Eutectoid reaction: $\gamma \rightarrow \alpha + \text{Fe}_3\text{C}$ (pearlite microstructure)</li>
</ul>
</li>
<li><strong>Hypoeutectoid Steel</strong>: 0.02-0.77% C
                <ul>
<li>Microstructure: Proeutectoid ferrite + Pearlite</li>
</ul>
</li>
<li><strong>Eutectoid Steel</strong>: 0.77% C
                <ul>
<li>Microstructure: 100% Pearlite</li>
</ul>
</li>
<li><strong>Hypereutectoid Steel</strong>: 0.77-2.11% C
                <ul>
<li>Microstructure: Proeutectoid cementite + Pearlite</li>
</ul>
</li>
</ul>
<h3>Lever Rule</h3>
<p>A method to calculate the mass fraction of each phase in a two-phase region.</p>
<p>When an alloy with temperature $T$ and composition $C_0$ is divided into $\alpha$-phase (composition $C_\alpha$) and $\beta$-phase (composition $C_\beta$):</p>
<p>$$\text{Mass fraction}_\alpha = \frac{C_\beta - C_0}{C_\beta - C_\alpha}$$</p>
<p>$$\text{Mass fraction}_\beta = \frac{C_0 - C_\alpha}{C_\beta - C_\alpha}$$</p>
<p>Remember: <strong>The fraction of the farther phase is larger</strong>.</p>
<hr/>
<h2>2.2 Diffusional and Diffusionless Transformations</h2>
<h3>Classification of Transformations</h3>
<table>
<thead>
<tr>
<th>Type of Transformation</th>
<th>Diffusion</th>
<th>Transformation Rate</th>
<th>Representative Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Diffusional Transformation</strong><br/>(Diffusional)</td>
<td>Long-range diffusion present</td>
<td>Slow (seconds to hours)</td>
<td>Pearlite transformation<br/>Bainite transformation<br/>Precipitation</td>
</tr>
<tr>
<td><strong>Diffusionless Transformation</strong><br/>(Diffusionless)</td>
<td>No diffusion<br/>(Coordinated shear movement)</td>
<td>Very fast (speed of sound)</td>
<td>Martensitic transformation<br/>Twin transformation</td>
</tr>
</tbody>
</table>
<h3>Diffusional Transformation: Pearlite Transformation</h3>
<p>Eutectoid transformation from austenite (Î³-Fe, FCC) to ferrite (Î±-Fe, BCC) + cementite (Fe<sub>3</sub>C).</p>
<p>$$\gamma (0.77\% \text{C}) \rightarrow \alpha (0.02\% \text{C}) + \text{Fe}_3\text{C} (6.67\% \text{C})$$</p>
<p><strong>Characteristics of Pearlite Microstructure</strong>:</p>
<ul>
<li>Lamellar structure of ferrite and cementite</li>
<li>Interlamellar spacing determines hardness
                <ul>
<li>Fine pearlite: High-temperature transformation, hard</li>
<li>Coarse pearlite: Low-temperature transformation, soft</li>
</ul>
</li>
</ul>
<h3>Diffusionless Transformation: Martensitic Transformation</h3>
<p>Transformation from austenite (FCC) to body-centered tetragonal (BCT) martensite.</p>
<p><strong>Characteristics of Martensite</strong>:</p>
<ul>
<li>Diffusionless shear-type structural change</li>
<li>Transformation rate at the speed of sound (10<sup>-7</sup> seconds)</li>
<li>Carbon is forcibly dissolved in solid solution, distorting the lattice (BCT structure)</li>
<li>Extremely hard but brittle (Vickers hardness 600-900 HV)</li>
<li>Proceeds below the transformation start temperature (M<sub>s</sub>)</li>
</ul>
<p><strong>Prediction formula for M<sub>s</sub> temperature (steel)</strong>:</p>
<p>$$M_s (\text{Â°C}) = 539 - 423C - 30.4Mn - 17.7Ni - 12.1Cr - 7.5Mo$$</p>
<p>Here, element symbols represent mass %. M<sub>s</sub> temperature decreases as carbon and alloying elements increase.</p>
<hr/>
<h2>2.3 TTT and CCT Diagrams</h2>
<h3>TTT Diagram (Time-Temperature-Transformation Diagram)</h3>
<p><strong>TTT diagram</strong> shows the progress of transformation during isothermal transformation (holding at constant temperature).</p>
<p><strong>How to read a TTT diagram</strong>:</p>
<ul>
<li>Vertical axis: Temperature</li>
<li>Horizontal axis: Time (logarithmic scale)</li>
<li>C-shaped curve: Transformation start line and transformation completion line</li>
<li>"Nose": Temperature at which transformation occurs fastest (around 550-600Â°C)</li>
</ul>
<div class="mermaid">
flowchart LR
    A[Austenite<br/>850Â°C] --&gt;|Rapid Cooling<br/>MsBelow| B[Martensite<br/>100%]
    A --&gt;|Medium Cooling<br/>500-600Â°CHold| C[Bainite]
    A --&gt;|Slow Cooling<br/>700Â°CHold| D[Coarse Pearlite]
    A --&gt;|Medium Cooling<br/>650Â°CHold| E[Fine Pearlite]

    style A fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    style B fill:#ffebee,stroke:#e53935,stroke-width:2px
    style C fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    style D fill:#f3e5f5,stroke:#ab47bc,stroke-width:2px
    style E fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
        </div>
<h3>CCT Diagram (Continuous Cooling Transformation Diagram)</h3>
<p><strong>CCT diagram</strong> shows transformation during continuous cooling, closer to actual heat treatment conditions.</p>
<p><strong>Differences from TTT diagram</strong>:</p>
<ul>
<li>TTT diagram is isothermal transformation (laboratory)</li>
<li>CCT diagram is continuous cooling (practical)</li>
<li>C-curve in CCT diagram shifts to lower right compared to TTT diagram (transformation takes longer)</li>
</ul>
<p><strong>Relationship between cooling rate and microstructure obtained (example of eutectoid steel)</strong>:</p>
<table>
<thead>
<tr>
<th>Cooling Rate</th>
<th>Microstructure</th>
<th>Hardness (HV)</th>
<th>Application Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td>Slow cooling (furnace cooling)<br/>&lt; 1Â°C/s</td>
<td>Coarse Pearlite</td>
<td>200-250</td>
<td>Softening annealing</td>
</tr>
<tr>
<td>Air cooling<br/>10-100Â°C/s</td>
<td>Fine Pearlite</td>
<td>300-350</td>
<td>Normalizing</td>
</tr>
<tr>
<td>Oil quenching<br/>100-300Â°C/s</td>
<td>Bainite</td>
<td>400-500</td>
<td>High toughness parts</td>
</tr>
<tr>
<td>Water quenching<br/>&gt; 1000Â°C/s</td>
<td>Martensite</td>
<td>600-800</td>
<td>Quenching</td>
</tr>
</tbody>
</table>
<h3>Critical Cooling Rate</h3>
<p><strong>Critical cooling rate</strong> is the minimum cooling rate required to obtain 100% martensitic microstructure. It decreases with the addition of alloying elements (easier to quench).</p>
<hr/>
<h2>2.4 Transformation Kinetics and Avrami Equation</h2>
<h3>Progress of Transformation</h3>
<p>The progress $f(t)$ (volume fraction transformed) of diffusional transformation is described by the <strong>Johnson-Mehl-Avrami-Kolmogorov (JMAK) equation</strong>, commonly known as the <strong>Avrami equation</strong>:</p>
<p>$$f(t) = 1 - \exp(-kt^n)$$</p>
<p>Where:</p>
<ul>
<li>$f(t)$: Transformation fraction at time $t$ (0 to 1)</li>
<li>$k$: Rate constant (temperature dependent)</li>
<li>$n$: Avrami exponent (depends on nucleation and growth mechanism, typically 1-4)</li>
</ul>
<p><strong>Meaning of Avrami exponent $n$</strong>:</p>
<table>
<thead>
<tr>
<th>n value</th>
<th>Nucleation</th>
<th>Growth</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Constant rate</td>
<td>1D (needle-shaped)</td>
</tr>
<tr>
<td>2</td>
<td>Constant rate</td>
<td>2D (disk-shaped)</td>
</tr>
<tr>
<td>3</td>
<td>Constant rate</td>
<td>3D (spherical)</td>
</tr>
<tr>
<td>4</td>
<td>Increases with time</td>
<td>3D (spherical)</td>
</tr>
</tbody>
</table>
<h3>Principle of TTT Diagram Creation</h3>
<p>TTT diagrams are created by fitting the Avrami equation at multiple temperatures and plotting the transformation start time ($f = 0.01$) and completion time ($f = 0.99$) at each temperature.</p>
<hr/>
<h2>2.5 Fundamentals of the CALPHAD Method</h2>
<h3>What is CALPHAD (CALculation of PHAse Diagrams)?</h3>
<p><strong>CALPHAD method</strong> is a technique for calculating phase diagrams using thermodynamic databases. Since it is impossible to experimentally measure phase diagrams at all compositions and temperatures, predictions are made by calculation.</p>
<p><strong>CALPHAD method workflow</strong>:</p>
<ol>
<li>Model the Gibbs energy of each phase with equations</li>
<li>Optimize parameters from experimental data and thermodynamic data</li>
<li>Determine stable phases by minimizing Gibbs energy</li>
<li>Create phase diagram</li>
</ol>
<p><strong>Gibbs energy model</strong> (simplified version):</p>
<p>$$G = H - TS = \sum_i x_i G_i^0 + RT \sum_i x_i \ln x_i + G^{ex}$$</p>
<p>Where:</p>
<ul>
<li>$G$: Gibbs energy</li>
<li>$x_i$: Mole fraction of component $i$</li>
<li>$G_i^0$: Gibbs energy of pure component</li>
<li>$RT \sum_i x_i \ln x_i$: Ideal mixing entropy term</li>
<li>$G^{ex}$: Excess Gibbs energy (interaction term, Redlich-Kister model, etc.)</li>
</ul>
<h3>pycalphad: CALPHAD Calculation in Python</h3>
<p><strong>pycalphad</strong> is a Python library for performing CALPHAD calculations. It can read TDB files (thermodynamic databases) and calculate and visualize phase diagrams.</p>
<hr/>
<h2>2.6 Phase Transformation Simulation in Python</h2>
<h3>Environment Setup</h3>
<pre><code class="language-bash"># Install required libraries
pip install numpy matplotlib pandas scipy
# Install pycalphad separately (optional)
pip install pycalphad
</code></pre>
<h3>Code Example 1: Drawing Binary Phase Diagram (Complete Solid Solution)</h3>
<p>Cu-Niç³»ã®ã‚ˆã†ãªç†æƒ³çš„ãªå…¨ç‡å›ºæº¶å‹ç›¸å›³ã‚’ãƒ¢ãƒ‡ãƒ«åŒ–ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

# Parameters for Cu-Ni phase diagram (simplified model)
T_melt_Cu = 1358  # Kï¼ˆCu ã®èç‚¹ï¼‰
T_melt_Ni = 1728  # Kï¼ˆNi ã®èç‚¹ï¼‰

# Composition range (Ni mole fraction)
X_Ni = np.linspace(0, 1, 100)

# Liquidusï¼ˆLiquidusï¼‰ã¨Solidusï¼ˆSolidusï¼‰ã®Calculation
# å…¨ç‡å›ºæº¶å‹ã®å ´åˆã€Liquidusã¨Solidusã¯ã»ã¼ç›´ç·šçš„ï¼ˆRaoultã®æ³•å‰‡ã®è¿‘ä¼¼ï¼‰
# Liquidus: T_liquidus = T_Cu + (T_Ni - T_Cu) * X_Ni^alpha
# Solidus: T_solidus = T_Cu + (T_Ni - T_Cu) * X_Ni^beta
# alpha, betaã¯ç›¸äº’ä½œç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆã“ã“ã§ã¯ç°¡ç•¥åŒ–ï¼‰

T_liquidus = T_melt_Cu + (T_melt_Ni - T_melt_Cu) * X_Ni
T_solidus = T_melt_Cu + (T_melt_Ni - T_melt_Cu) * X_Ni**1.2  # ç°¡æ˜“ãƒ¢ãƒ‡ãƒ«

# Plot
fig, ax = plt.subplots(figsize=(10, 7))

ax.plot(X_Ni * 100, T_liquidus - 273, 'r-', linewidth=2.5, label='Liquidusï¼ˆLiquidusï¼‰')
ax.plot(X_Ni * 100, T_solidus - 273, 'b-', linewidth=2.5, label='Solidusï¼ˆSolidusï¼‰')

# Fill regions
ax.fill_between(X_Ni * 100, T_liquidus - 273, 1500, alpha=0.2, color='red', label='Liquid (L) region')
ax.fill_between(X_Ni * 100, T_solidus - 273, T_liquidus - 273, alpha=0.2, color='yellow',
                label='L + Î± two-phase region')
ax.fill_between(X_Ni * 100, 0, T_solidus - 273, alpha=0.2, color='blue', label='Solid (Î±) region')

ax.set_xlabel('Ni Composition (mol%)', fontsize=13, fontweight='bold')
ax.set_ylabel('Temperature (Â°C)', fontsize=13, fontweight='bold')
ax.set_title('Cu-Ni Binary Phase Diagram (Complete Solid Solution)', fontsize=15, fontweight='bold')
ax.legend(fontsize=11, loc='lower right')
ax.grid(alpha=0.3)
ax.set_xlim(0, 100)
ax.set_ylim(0, 1500)

# Show cooling path at specific composition
X_target = 50  # 50 mol% Ni
T_target_liq = np.interp(X_target / 100, X_Ni, T_liquidus) - 273
T_target_sol = np.interp(X_target / 100, X_Ni, T_solidus) - 273

ax.plot([X_target, X_target], [1500, 0], 'k--', linewidth=2, alpha=0.7, label='Cooling path')
ax.plot(X_target, T_target_liq, 'ro', markersize=10, label=f'Liquidus intersection: {T_target_liq:.0f}Â°C')
ax.plot(X_target, T_target_sol, 'bo', markersize=10, label=f'Solidus intersection: {T_target_sol:.0f}Â°C')

plt.legend(fontsize=10)
plt.tight_layout()
plt.show()

print("=== Analysis of Cu-Ni Phase Diagram ===")
print(f"50 At mol% Ni composition:")
print(f"  Liquidus temperature (solidification start): {T_target_liq:.1f}Â°C")
print(f"  Solidus temperature (solidification completion): {T_target_sol:.1f}Â°C")
print(f"  Solidification temperature range: {T_target_liq - T_target_sol:.1f}Â°C")
</code></pre>
<p><strong>Output example</strong>:</p>
<pre><code>=== Analysis of Cu-Ni Phase Diagram ===
50 At mol% Ni composition:
  Liquidus temperature (solidification start): 1270.0Â°C
  Solidus temperature (solidification completion): 1199.4Â°C
  Solidification temperature range: 70.6Â°C
</code></pre>
<p><strong>Explanation</strong>: In a complete solid solution phase diagram, a two-phase region (L + Î±) exists between the liquidus and solidus. Solidification progresses in this range, and the composition changes continuously.</p>
<h3>Code Example 2: Calculation and Visualization of Lever Rule</h3>
<p>Two-phase regionatå„ç›¸ã®Mass fractionã‚’Calculationã—ã¾ã™ã€‚</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

def lever_rule(C_alpha, C_beta, C_0):
    """ã¦ã“ã®æ³•å‰‡byPhase fractionCalculation

    Args:
        C_alpha: Î±ç›¸ã®Composition
        C_beta: Î²ç›¸ã®Composition
        C_0: åˆé‡‘å…¨ä½“ã®Composition

    Returns:
        f_alpha: Î±ç›¸ã®Mass fraction
        f_beta: Î²ç›¸ã®Mass fraction
    """
    f_beta = (C_0 - C_alpha) / (C_beta - C_alpha)
    f_alpha = 1 - f_beta
    return f_alpha, f_beta

# Fe-C system example (two-phase region at eutectoid temperature 727Â°C)
# Î±ç›¸ï¼ˆFerriteï¼‰: 0.02% C
# Fe3Cï¼ˆCementiteï¼‰: 6.67% C
# Alloy composition range
C_alpha = 0.02  # Î±ç›¸ã®Carbon Concentration
C_Fe3C = 6.67   # Cementiteã®Carbon Concentration

# Carbon concentration rangeï¼ˆ0.02% - 6.67%ï¼‰
C_alloy = np.linspace(C_alpha, C_Fe3C, 100)

# Lever rule calculation for each composition
f_alpha_arr = []
f_Fe3C_arr = []

for C in C_alloy:
    f_alpha, f_Fe3C = lever_rule(C_alpha, C_Fe3C, C)
    f_alpha_arr.append(f_alpha)
    f_Fe3C_arr.append(f_Fe3C)

# Plot
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))

# Phase fraction graph
ax1.plot(C_alloy, np.array(f_alpha_arr) * 100, 'b-', linewidth=2.5, label='Ferriteï¼ˆÎ±ï¼‰')
ax1.plot(C_alloy, np.array(f_Fe3C_arr) * 100, 'r-', linewidth=2.5, label='Cementiteï¼ˆFeâ‚ƒCï¼‰')
ax1.axvline(0.77, color='green', linestyle='--', linewidth=2, label='Eutectoid compositionï¼ˆ0.77% Cï¼‰')

ax1.set_xlabel('Carbon Concentration (wt%)', fontsize=13, fontweight='bold')
ax1.set_ylabel('Phase fraction (%)', fontsize=13, fontweight='bold')
ax1.set_title('Lever Rule: Phase Fractions in Fe-C System', fontsize=14, fontweight='bold')
ax1.legend(fontsize=11)
ax1.grid(alpha=0.3)
ax1.set_xlim(0, 7)
ax1.set_ylim(0, 100)

# Calculation for eutectoid steel (0.77% C)
C_eutectoid = 0.77
f_alpha_eut, f_Fe3C_eut = lever_rule(C_alpha, C_Fe3C, C_eutectoid)

print("=== Phase Fractions in Eutectoid Steel (0.77% C) at 727Â°C ===")
print(f"Ferriteï¼ˆÎ±ï¼‰: {f_alpha_eut * 100:.2f}%")
print(f"Cementiteï¼ˆFeâ‚ƒCï¼‰: {f_Fe3C_eut * 100:.2f}%")

# Phase fractions in various steel grades
steel_grades = {
    'Low carbon steel': 0.10,
    'Medium carbon steel': 0.45,
    'High carbon steel': 1.20
}

print("\n=== Phase Fractions of Each Steel Grade (Room Temperature, Equilibrium State) ===")
for name, C_content in steel_grades.items():
    if C_content &lt;= 0.77:
        # Hypoeutectoid steel
        # Proeutectoid ferrite + Pearlite
        # Phase fraction in pearlite is constant (eutectoid composition)
        pearlite_fraction = C_content / C_eutectoid
        proeutectoid_ferrite = 1 - pearlite_fraction

        # Phase fraction inside pearlite
        f_alpha_in_pearlite, f_Fe3C_in_pearlite = lever_rule(C_alpha, C_Fe3C, C_eutectoid)

        # Overall phase fraction
        total_ferrite = proeutectoid_ferrite + pearlite_fraction * f_alpha_in_pearlite
        total_Fe3C = pearlite_fraction * f_Fe3C_in_pearlite

        print(f"\n{name}ï¼ˆ{C_content}% Cï¼‰:")
        print(f"  Proeutectoid ferrite: {proeutectoid_ferrite * 100:.1f}%")
        print(f"  Pearlite: {pearlite_fraction * 100:.1f}%")
        print(f"    â”” Ferrite: {total_ferrite * 100:.1f}% (total)")
        print(f"    â”” Cementite: {total_Fe3C * 100:.1f}% (total)")
    else:
        # Hypereutectoid steel
        # Proeutectoid cementite + Pearlite
        pearlite_fraction = (C_Fe3C - C_content) / (C_Fe3C - C_eutectoid)
        proeutectoid_Fe3C = 1 - pearlite_fraction

        # Overall phase fraction
        f_alpha_in_pearlite, f_Fe3C_in_pearlite = lever_rule(C_alpha, C_Fe3C, C_eutectoid)
        total_ferrite = pearlite_fraction * f_alpha_in_pearlite
        total_Fe3C = proeutectoid_Fe3C + pearlite_fraction * f_Fe3C_in_pearlite

        print(f"\n{name}ï¼ˆ{C_content}% Cï¼‰:")
        print(f"  Proeutectoid cementite: {proeutectoid_Fe3C * 100:.1f}%")
        print(f"  Pearlite: {pearlite_fraction * 100:.1f}%")
        print(f"    â”” Ferrite: {total_ferrite * 100:.1f}% (total)")
        print(f"    â”” Cementite: {total_Fe3C * 100:.1f}% (total)")

# Visualize with bar chart
ax2_data = []
labels = []
for name, C_content in steel_grades.items():
    if C_content &lt;= 0.77:
        pearlite_fraction = C_content / C_eutectoid
        proeutectoid_ferrite = 1 - pearlite_fraction
        f_alpha_in_pearlite, f_Fe3C_in_pearlite = lever_rule(C_alpha, C_Fe3C, C_eutectoid)
        total_ferrite = proeutectoid_ferrite + pearlite_fraction * f_alpha_in_pearlite
        total_Fe3C = pearlite_fraction * f_Fe3C_in_pearlite
    else:
        pearlite_fraction = (C_Fe3C - C_content) / (C_Fe3C - C_eutectoid)
        proeutectoid_Fe3C = 1 - pearlite_fraction
        f_alpha_in_pearlite, f_Fe3C_in_pearlite = lever_rule(C_alpha, C_Fe3C, C_eutectoid)
        total_ferrite = pearlite_fraction * f_alpha_in_pearlite
        total_Fe3C = proeutectoid_Fe3C + pearlite_fraction * f_Fe3C_in_pearlite

    ax2_data.append([total_ferrite * 100, total_Fe3C * 100])
    labels.append(f"{name}\n({C_content}% C)")

ax2_data = np.array(ax2_data)
x_pos = np.arange(len(labels))

ax2.bar(x_pos, ax2_data[:, 0], label='Ferriteï¼ˆÎ±ï¼‰', color='#3498db', alpha=0.8)
ax2.bar(x_pos, ax2_data[:, 1], bottom=ax2_data[:, 0], label='Cementiteï¼ˆFeâ‚ƒCï¼‰',
        color='#e74c3c', alpha=0.8)

ax2.set_xticks(x_pos)
ax2.set_xticklabels(labels)
ax2.set_ylabel('Phase fraction (%)', fontsize=13, fontweight='bold')
ax2.set_title('Phase Fractions by Steel Grade (Equilibrium State)', fontsize=14, fontweight='bold')
ax2.legend(fontsize=11)
ax2.grid(axis='y', alpha=0.3)
ax2.set_ylim(0, 100)

plt.tight_layout()
plt.show()
</code></pre>
<p><strong>Output example</strong>:</p>
<pre><code>=== Phase Fractions in Eutectoid Steel (0.77% C) at 727Â°C ===
Ferriteï¼ˆÎ±ï¼‰: 88.83%
Cementiteï¼ˆFeâ‚ƒCï¼‰: 11.17%

=== Phase Fractions of Each Steel Grade (Room Temperature, Equilibrium State) ===

Low carbon steelï¼ˆ0.10% Cï¼‰:
  Proeutectoid ferrite: 87.0%
  Pearlite: 13.0%
    â”” Ferrite: 98.5% (total)
    â”” Cementite: 1.5% (total)

Medium carbon steelï¼ˆ0.45% Cï¼‰:
  Proeutectoid ferrite: 41.6%
  Pearlite: 58.4%
    â”” Ferrite: 93.3% (total)
    â”” Cementite: 6.7% (total)

High carbon steelï¼ˆ1.20% Cï¼‰:
  Proeutectoid cementite: 7.3%
  Pearlite: 92.7%
    â”” Ferrite: 82.3% (total)
    â”” Cementite: 17.7% (total)
</code></pre>
<p><strong>Explanation</strong>: The lever rule allows quantitative prediction of the mass fraction of each phase (ferrite and cementite) from the carbon concentration. This is the basis for understanding the relationship between microstructure and mechanical properties.</p>
<h3>Code Example 3: Generation of TTT Diagram and Fitting of Avrami Equation</h3>
<p>Eutectoid steelã®TTTå›³ã‚’Avramiå¼ã§ãƒ¢ãƒ‡ãƒ«åŒ–ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import curve_fit

# Avramiå¼
def avrami_equation(t, k, n):
    """Avramiå¼byTransformation fraction

    Args:
        t: hoursï¼ˆsï¼‰
        k: Rate constant
        n: AvramiExponent

    Returns:
        Transformation fractionï¼ˆ0-1ï¼‰
    """
    return 1 - np.exp(-k * t**n)

# Temperatureã”ã¨ã®Avramiå®šæ•°ï¼ˆEutectoid steelã€å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãè¿‘ä¼¼å€¤ï¼‰
temperatures = np.array([700, 650, 600, 550, 500, 450, 400])  # Â°C
# Rate constantkï¼ˆTemperatureä¾å­˜ã€High Tempã»ã©é€Ÿã„ï¼‰
k_values = np.array([0.01, 0.008, 0.005, 0.003, 0.002, 0.0015, 0.001])
# AvramiExponentnï¼ˆNucleationã¨Growthã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ä¾å­˜ï¼‰
n_values = np.array([2.5, 2.8, 3.0, 3.2, 3.0, 2.5, 2.0])

# å„TemperatureatTransformationæ›²ç·š
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))

# Transformationé€²è¡Œåº¦ vs hours
time = np.logspace(-1, 4, 500)  # 0.1sã€œ10000s

for T, k, n in zip(temperatures, k_values, n_values):
    fraction = avrami_equation(time, k, n)
    ax1.plot(time, fraction * 100, linewidth=2, label=f'{T}Â°C')

ax1.set_xscale('log')
ax1.set_xlabel('hours (s)', fontsize=13, fontweight='bold')
ax1.set_ylabel('Transformation fraction (%)', fontsize=13, fontweight='bold')
ax1.set_title('ç­‰æ¸©Transformationæ›²ç·šï¼ˆEutectoid steelï¼‰', fontsize=14, fontweight='bold')
ax1.legend(fontsize=10, ncol=2)
ax1.grid(alpha=0.3)
ax1.set_xlim(0.1, 10000)
ax1.set_ylim(0, 100)
ax1.axhline(1, color='red', linestyle='--', linewidth=1, alpha=0.5)
ax1.axhline(99, color='red', linestyle='--', linewidth=1, alpha=0.5)

# TTTå›³ã®æ§‹ç¯‰
# å„Temperatureat1%Transformationhoursã¨99%Transformationhoursã‚’Calculation
times_1_percent = []
times_99_percent = []

for k, n in zip(k_values, n_values):
    # 1%Transformation: 0.01 = 1 - exp(-k*t^n) â†’ t = (-ln(0.99)/k)^(1/n)
    t_1 = (-np.log(0.99) / k)**(1/n)
    # 99%Transformation: 0.99 = 1 - exp(-k*t^n) â†’ t = (-ln(0.01)/k)^(1/n)
    t_99 = (-np.log(0.01) / k)**(1/n)

    times_1_percent.append(t_1)
    times_99_percent.append(t_99)

# TTTå›³ã®Plot
ax2.plot(times_1_percent, temperatures, 'r-', linewidth=2.5, label='Transformation startï¼ˆ1%ï¼‰')
ax2.plot(times_99_percent, temperatures, 'b-', linewidth=2.5, label='Transformation completionï¼ˆ99%ï¼‰')

# Cæ›²ç·šã®é¼»ï¼ˆnoseï¼‰
nose_idx = np.argmin(times_1_percent)
ax2.plot(times_1_percent[nose_idx], temperatures[nose_idx], 'go', markersize=12,
         label=f'é¼»ï¼ˆNoseï¼‰: {times_1_percent[nose_idx]:.1f}s, {temperatures[nose_idx]}Â°C')

# Martensiteé–‹å§‹Temperatureï¼ˆMsï¼‰
M_s = 220  # Â°Cï¼ˆ0.77% Cé‹¼ã®è¿‘ä¼¼å€¤ï¼‰
ax2.axhline(M_s, color='purple', linestyle='--', linewidth=2,
            label=f'M_s = {M_s}Â°Cï¼ˆMartensiteé–‹å§‹ï¼‰')

ax2.set_xscale('log')
ax2.set_xlabel('hours (s)', fontsize=13, fontweight='bold')
ax2.set_ylabel('Temperature (Â°C)', fontsize=13, fontweight='bold')
ax2.set_title('TTTå›³ï¼ˆTime-Temperature-Transformationï¼‰', fontsize=14, fontweight='bold')
ax2.legend(fontsize=10)
ax2.grid(alpha=0.3)
ax2.set_xlim(0.1, 10000)
ax2.set_ylim(0, 800)

# Microstructureé ˜åŸŸã®æ³¨é‡ˆ
ax2.text(0.5, 650, 'Pearlite', fontsize=12, fontweight='bold', ha='center',
         bbox=dict(boxstyle='round', facecolor='wheat', alpha=0.5))
ax2.text(50, 450, 'Bainite', fontsize=12, fontweight='bold', ha='center',
         bbox=dict(boxstyle='round', facecolor='lightblue', alpha=0.5))
ax2.text(5000, 150, 'Martensite', fontsize=12, fontweight='bold', ha='center',
         bbox=dict(boxstyle='round', facecolor='lightcoral', alpha=0.5))

plt.tight_layout()
plt.show()

# ç‰¹å®šTemperatureatAnalysis
print("=== TTTå›³ã®Analysis ===")
print(f"é¼»ï¼ˆæœ€é€ŸTransformationTemperatureï¼‰: {temperatures[nose_idx]}Â°C")
print(f"  1%Transformationhours: {times_1_percent[nose_idx]:.2f} s")
print(f"  99%Transformationhours: {times_99_percent[nose_idx]:.2f} s")

print("\n=== å„TemperatureatTransformationhours ===")
for T, t1, t99, k, n in zip(temperatures, times_1_percent, times_99_percent,
                            k_values, n_values):
    print(f"{T}Â°C: é–‹å§‹ {t1:.2f}s, å®Œäº† {t99:.2f}s (k={k:.4f}, n={n:.1f})")
</code></pre>
<p><strong>Output example</strong>:</p>
<pre><code>=== TTTå›³ã®Analysis ===
é¼»ï¼ˆæœ€é€ŸTransformationTemperatureï¼‰: 550Â°C
  1%Transformationhours: 5.29 s
  99%Transformationhours: 217.59 s

=== å„TemperatureatTransformationhours ===
700Â°C: é–‹å§‹ 2.28s, å®Œäº† 72.30s (k=0.0100, n=2.5)
650Â°C: é–‹å§‹ 2.42s, å®Œäº† 87.08s (k=0.0080, n=2.8)
600Â°C: é–‹å§‹ 3.62s, å®Œäº† 166.49s (k=0.0050, n=3.0)
550Â°C: é–‹å§‹ 5.29s, å®Œäº† 283.07s (k=0.0030, n=3.2)
500Â°C: é–‹å§‹ 6.22s, å®Œäº† 286.01s (k=0.0020, n=3.0)
450Â°C: é–‹å§‹ 9.79s, å®Œäº† 310.22s (k=0.0015, n=2.5)
400Â°C: é–‹å§‹ 22.36s, å®Œäº† 447.21s (k=0.0010, n=2.0)
</code></pre>
<p><strong>Explanation</strong>: TTTå›³ã®Cæ›²ç·šã¯ã€High Tempã§ã¯DiffusionãŒé€Ÿãã€ä½æ¸©ã§ã¯é§†å‹•åŠ›ï¼ˆéCoolingåº¦ï¼‰ãŒå¤§ãã„ãŸã‚ã€ä¸­é–“Temperatureï¼ˆ550Â°Cä»˜è¿‘ï¼‰ã§æœ€ã‚‚é€ŸãTransformationãŒèµ·ã“ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>
<h3>Code Example 4: Parameter Fitting of Avrami Equation (Experimental Data)</h3>
<p>å®Ÿé¨“çš„ãªTransformationãƒ‡ãƒ¼ã‚¿fromAvramiå®šæ•°ã‚’æ¨å®šã—ã¾ã™ã€‚</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import curve_fit

# å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ï¼ˆ550Â°Catç­‰æ¸©Transformationï¼‰
# hoursï¼ˆsï¼‰ã¨Transformation fractionï¼ˆ%ï¼‰
time_exp = np.array([1, 5, 10, 20, 30, 50, 100, 200, 300, 500])
fraction_exp = np.array([0, 2, 10, 35, 55, 75, 90, 97, 99, 99.5])

# Avramiå¼
def avrami(t, k, n):
    return (1 - np.exp(-k * t**n)) * 100  # ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆå˜ä½

# éç·šå½¢Fitting
popt, pcov = curve_fit(avrami, time_exp, fraction_exp,
                       p0=[0.001, 2.0],  # åˆæœŸæ¨å®šå€¤
                       bounds=([0, 0.5], [1, 5]))  # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç¯„å›²

k_fit, n_fit = popt
k_err, n_err = np.sqrt(np.diag(pcov))

print("=== AvramiFittingResult ===")
print(f"Rate constant k = {k_fit:.6f} Â± {k_err:.6f}")
print(f"AvramiExponent n = {n_fit:.3f} Â± {n_err:.3f}")

# AvramiExponentã®è§£é‡ˆ
if 1.5 &lt; n_fit &lt; 2.5:
    mechanism = "2æ¬¡å…ƒGrowthï¼ˆå††ç›¤çŠ¶ï¼‰ã€Constant rateNucleation"
elif 2.5 &lt; n_fit &lt; 3.5:
    mechanism = "3æ¬¡å…ƒGrowthï¼ˆçƒçŠ¶ï¼‰ã€Constant rateNucleation"
elif 3.5 &lt; n_fit &lt; 4.5:
    mechanism = "3æ¬¡å…ƒGrowthï¼ˆçƒçŠ¶ï¼‰ã€å¢—åŠ é€Ÿåº¦Nucleation"
else:
    mechanism = "è¤‡é›‘ãªãƒ¡ã‚«ãƒ‹ã‚ºãƒ "

print(f"\nTransformationãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®æ¨å®š: {mechanism}")

# Fittingæ›²ç·šã®ç”Ÿæˆ
time_fit = np.logspace(-1, 3, 500)
fraction_fit = avrami(time_fit, k_fit, n_fit)

# Plot1: Transformation fraction vs hours
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))

ax1.scatter(time_exp, fraction_exp, s=100, color='red', edgecolor='black',
            linewidth=2, label='å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿', zorder=5)
ax1.plot(time_fit, fraction_fit, 'b-', linewidth=2.5,
         label=f'Avramiãƒ•ã‚£ãƒƒãƒˆ (k={k_fit:.4f}, n={n_fit:.2f})')

ax1.set_xscale('log')
ax1.set_xlabel('hours (s)', fontsize=13, fontweight='bold')
ax1.set_ylabel('Transformation fraction (%)', fontsize=13, fontweight='bold')
ax1.set_title('Transformation Rateè«–ï¼šAvramiPlot', fontsize=14, fontweight='bold')
ax1.legend(fontsize=11)
ax1.grid(alpha=0.3)
ax1.set_xlim(0.1, 1000)
ax1.set_ylim(0, 100)

# Plot2: Avramiç·šå½¢åŒ–Plot
# ln(ln(1/(1-f))) vs ln(t) â†’ å‚¾ããŒnã€åˆ‡ç‰‡ãŒn*ln(k)
# f: Transformation fractionï¼ˆ0-1ï¼‰
fraction_decimal = fraction_exp / 100
# 99%ä»¥ä¸Šã¯æ•°å€¤èª¤å·®ã‚’é¿ã‘ã‚‹ãŸã‚é™¤å¤–
valid_idx = fraction_decimal &lt; 0.99
fraction_valid = fraction_decimal[valid_idx]
time_valid = time_exp[valid_idx]

# Avramiç·šå½¢åŒ–
y_avrami = np.log(np.log(1 / (1 - fraction_valid)))
x_avrami = np.log(time_valid)

# ç·šå½¢Fitting
coeffs = np.polyfit(x_avrami, y_avrami, 1)
n_linear = coeffs[0]
k_linear = np.exp(-coeffs[1] / n_linear)

print(f"\n=== ç·šå½¢åŒ–AvramiPlotæ³• ===")
print(f"Rate constant k = {k_linear:.6f}")
print(f"AvramiExponent n = {n_linear:.3f}")

# ç·šå½¢ãƒ•ã‚£ãƒƒãƒˆæ›²ç·š
x_fit_linear = np.linspace(x_avrami.min(), x_avrami.max(), 100)
y_fit_linear = coeffs[0] * x_fit_linear + coeffs[1]

ax2.scatter(x_avrami, y_avrami, s=100, color='red', edgecolor='black',
            linewidth=2, label='å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿', zorder=5)
ax2.plot(x_fit_linear, y_fit_linear, 'b-', linewidth=2.5,
         label=f'ç·šå½¢ãƒ•ã‚£ãƒƒãƒˆ (å‚¾ã={n_linear:.2f})')

ax2.set_xlabel('ln(time) [ln(s)]', fontsize=13, fontweight='bold')
ax2.set_ylabel('ln(ln(1/(1-f)))', fontsize=13, fontweight='bold')
ax2.set_title('Avramiç·šå½¢åŒ–Plot', fontsize=14, fontweight='bold')
ax2.legend(fontsize=11)
ax2.grid(alpha=0.3)

plt.tight_layout()
plt.show()

# ç‰¹å®šhoursatTransformation fractionäºˆæ¸¬
target_times = [10, 50, 100, 200]
print("\n=== Transformation fractionã®äºˆæ¸¬ ===")
for t in target_times:
    f_pred = avrami(t, k_fit, n_fit)
    print(f"t = {t:3d} s â†’ Transformation fraction = {f_pred:.1f}%")
</code></pre>
<p><strong>Output example</strong>:</p>
<pre><code>=== AvramiFittingResult ===
Rate constant k = 0.000523 Â± 0.000042
AvramiExponent n = 2.876 Â± 0.068

Transformationãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®æ¨å®š: 3æ¬¡å…ƒGrowthï¼ˆçƒçŠ¶ï¼‰ã€Constant rateNucleation

=== ç·šå½¢åŒ–AvramiPlotæ³• ===
Rate constant k = 0.000518
AvramiExponent n = 2.901

=== Transformation fractionã®äºˆæ¸¬ ===
t =  10 s â†’ Transformation fraction = 10.4%
t =  50 s â†’ Transformation fraction = 74.3%
t = 100 s â†’ Transformation fraction = 90.2%
t = 200 s â†’ Transformation fraction = 96.9%
</code></pre>
<p><strong>Explanation</strong>: å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿fromAvramiå®šæ•°ã‚’Fittingã™ã‚‹ã“ã¨ã§ã€Transformationã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ï¼ˆNucleationã¨Growthã®æ§˜å¼ï¼‰ã‚’æ¨å®šã§ãã€æœªæ¸¬å®šhoursatTransformation fractionã‚‚äºˆæ¸¬ã§ãã¾ã™ã€‚</p>
<h3>Code Example 5: Prediction of M<sub>s</sub> Temperature (Martensite Transformation Start Temperature)</h3>
<p>é‹¼ã®CompositionfromM<sub>s</sub>Temperatureã‚’äºˆæ¸¬ã—ã€Quenchingæ¡ä»¶ã‚’æ¤œè¨ã—ã¾ã™ã€‚</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
import pandas as pd

def calculate_Ms(C, Mn=0, Ni=0, Cr=0, Mo=0):
    """M_sTemperatureã®Calculationï¼ˆAndrewså¼ï¼‰

    Args:
        C: ç‚­ç´ å«æœ‰é‡ï¼ˆwt%ï¼‰
        Mn: ãƒãƒ³ã‚¬ãƒ³å«æœ‰é‡ï¼ˆwt%ï¼‰
        Ni: ãƒ‹ãƒƒã‚±ãƒ«å«æœ‰é‡ï¼ˆwt%ï¼‰
        Cr: ã‚¯ãƒ­ãƒ å«æœ‰é‡ï¼ˆwt%ï¼‰
        Mo: ãƒ¢ãƒªãƒ–ãƒ‡ãƒ³å«æœ‰é‡ï¼ˆwt%ï¼‰

    Returns:
        M_sTemperatureï¼ˆÂ°Cï¼‰
    """
    Ms = 539 - 423*C - 30.4*Mn - 17.7*Ni - 12.1*Cr - 7.5*Mo
    return Ms

# ä»£è¡¨çš„ãªé‹¼ç¨®ã®M_sTemperature
steels = {
    'Carbon steel 0.2%C': {'C': 0.20, 'Mn': 0.5, 'Ni': 0, 'Cr': 0, 'Mo': 0},
    'Carbon steel 0.4%C': {'C': 0.40, 'Mn': 0.7, 'Ni': 0, 'Cr': 0, 'Mo': 0},
    'Carbon steel 0.6%C': {'C': 0.60, 'Mn': 0.8, 'Ni': 0, 'Cr': 0, 'Mo': 0},
    'SKD11å·¥å…·é‹¼': {'C': 1.50, 'Mn': 0.4, 'Ni': 0, 'Cr': 12.0, 'Mo': 1.0},
    'SUS304Austeniteé‹¼': {'C': 0.08, 'Mn': 2.0, 'Ni': 9.0, 'Cr': 18.0, 'Mo': 0},
    'SNCM420ä½åˆé‡‘é‹¼': {'C': 0.20, 'Mn': 0.6, 'Ni': 1.8, 'Cr': 0.5, 'Mo': 0.2}
}

# M_sTemperatureã®Calculation
results = []
for name, comp in steels.items():
    Ms = calculate_Ms(**comp)
    results.append({
        'Steel': name,
        'M_s (Â°C)': Ms,
        **comp
    })

df = pd.DataFrame(results)

print("=== å„é‹¼ç¨®ã®M_sTemperature ===")
print(df.to_string(index=False))

# M_sTemperatureã®Plot
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))

# æ£’ã‚°ãƒ©ãƒ•
steel_names = df['Steel']
Ms_values = df['M_s (Â°C)']
colors = ['#3498db' if Ms &gt; 200 else '#e74c3c' if Ms &gt; 0 else '#95a5a6'
          for Ms in Ms_values]

bars = ax1.barh(steel_names, Ms_values, color=colors, edgecolor='black', linewidth=1.5)
ax1.axvline(0, color='black', linewidth=2)
ax1.axvline(200, color='orange', linestyle='--', linewidth=2,
            label='200Â°Cï¼ˆQuenchingæ€§ã®ç›®å®‰ï¼‰')

ax1.set_xlabel('M_s Temperature (Â°C)', fontsize=13, fontweight='bold')
ax1.set_title('é‹¼ç¨®åˆ¥M_sTemperature', fontsize=14, fontweight='bold')
ax1.legend(fontsize=10)
ax1.grid(axis='x', alpha=0.3)

# Carbon Concentrationã¨M_sTemperatureã®é–¢ä¿‚
C_range = np.linspace(0.1, 1.5, 100)
Ms_C = calculate_Ms(C_range, Mn=0.5, Ni=0, Cr=0, Mo=0)  # Mn 0.5%ã®Carbon steel

ax2.plot(C_range, Ms_C, 'b-', linewidth=2.5,
         label='Carbon steelï¼ˆMn 0.5%ï¼‰')

# åˆé‡‘å…ƒç´ ã®å½±éŸ¿
Ms_Ni = calculate_Ms(C_range, Mn=0.5, Ni=2.0, Cr=0, Mo=0)  # Ni 2%æ·»åŠ 
Ms_Cr = calculate_Ms(C_range, Mn=0.5, Ni=0, Cr=1.0, Mo=0)  # Cr 1%æ·»åŠ 

ax2.plot(C_range, Ms_Ni, 'r--', linewidth=2,
         label='Ni 2%æ·»åŠ ')
ax2.plot(C_range, Ms_Cr, 'g--', linewidth=2,
         label='Cr 1%æ·»åŠ ')

ax2.axhline(0, color='black', linestyle=':', linewidth=1.5, alpha=0.7)
ax2.axhline(200, color='orange', linestyle='--', linewidth=1.5,
            label='Quenchingæ€§ç›®å®‰ï¼ˆ200Â°Cï¼‰')

ax2.set_xlabel('Carbon Concentration (wt%)', fontsize=13, fontweight='bold')
ax2.set_ylabel('M_s Temperature (Â°C)', fontsize=13, fontweight='bold')
ax2.set_title('ç‚­ç´ ãƒ»åˆé‡‘å…ƒç´ ã¨M_sTemperatureã®é–¢ä¿‚', fontsize=14, fontweight='bold')
ax2.legend(fontsize=10)
ax2.grid(alpha=0.3)
ax2.set_xlim(0, 1.5)
ax2.set_ylim(-100, 500)

plt.tight_layout()
plt.show()

# Quenchingæ€§ã®è©•ä¾¡
print("\n=== Quenchingæ€§ã®è©•ä¾¡ ===")
for _, row in df.iterrows():
    Ms = row['M_s (Â°C)']
    steel = row['Steel']

    if Ms &gt; 250:
        hardenability = "å„ªç§€ï¼ˆæ°´å†·ã§å®Œå…¨Quenchingå¯èƒ½ï¼‰"
    elif Ms &gt; 150:
        hardenability = "è‰¯å¥½ï¼ˆæ²¹å†·ã§Quenchingå¯èƒ½ï¼‰"
    elif Ms &gt; 50:
        hardenability = "Noteï¼ˆRapid CoolingãŒå¿…è¦ã€æ®‹ç•™Austeniteå¤šã„ï¼‰"
    else:
        hardenability = "å›°é›£ï¼ˆMartensiteTransformationãŒå®¤æ¸©ã§å®Œäº†ã—ãªã„ï¼‰"

    print(f"{steel:30s} M_s = {Ms:6.1f}Â°C â†’ {hardenability}")

# QuenchingTemperatureã®æ¨å¥¨
print("\n=== QuenchingTemperatureã®æ¨å¥¨ ===")
print("AusteniteåŒ–Temperature:")
print("  - Hypoeutectoid steelï¼ˆ&lt; 0.77% Cï¼‰: A3 + 30-50Â°C")
print("  - Hypereutectoid steelï¼ˆ&gt; 0.77% Cï¼‰: A1 + 30-50Â°Cï¼ˆAcmè¶…ãˆã¯é¿ã‘ã‚‹ï¼‰")
print("\nQuenchingå¾Œã®å‡¦ç†:")
print("  - ç„¼æˆ»ã—: 200-650Â°Cã§é­æ€§å‘ä¸Šï¼ˆMartensite â†’ ç„¼æˆ»ã—Martensiteï¼‰")
print("  - ã‚µãƒ–ã‚¼ãƒ­å‡¦ç†: M_s &lt; å®¤æ¸©ã®å ´åˆã€-80Â°Cç¨‹åº¦ã¾ã§Coolingã—ã¦æ®‹ç•™Austeniteã‚’Transformation")
</code></pre>
<p><strong>Output example</strong>:</p>
<pre><code>=== å„é‹¼ç¨®ã®M_sTemperature ===
                     Steel   M_s (Â°C)     C    Mn    Ni    Cr    Mo
            Carbon steel 0.2%C     419.2   0.20   0.5   0.0   0.0   0.0
            Carbon steel 0.4%C     319.7   0.40   0.7   0.0   0.0   0.0
            Carbon steel 0.6%C     221.5   0.60   0.8   0.0   0.0   0.0
          SKD11å·¥å…·é‹¼     160.4   1.50   0.4   0.0  12.0   1.0
 SUS304Austeniteé‹¼     223.9   0.08   2.0   9.0  18.0   0.0
       SNCM420ä½åˆé‡‘é‹¼     394.4   0.20   0.6   1.8   0.5   0.2

=== Quenchingæ€§ã®è©•ä¾¡ ===
Carbon steel 0.2%C                    M_s =  419.2Â°C â†’ å„ªç§€ï¼ˆæ°´å†·ã§å®Œå…¨Quenchingå¯èƒ½ï¼‰
Carbon steel 0.4%C                    M_s =  319.7Â°C â†’ å„ªç§€ï¼ˆæ°´å†·ã§å®Œå…¨Quenchingå¯èƒ½ï¼‰
Carbon steel 0.6%C                    M_s =  221.5Â°C â†’ è‰¯å¥½ï¼ˆæ²¹å†·ã§Quenchingå¯èƒ½ï¼‰
SKD11å·¥å…·é‹¼                     M_s =  160.4Â°C â†’ è‰¯å¥½ï¼ˆæ²¹å†·ã§Quenchingå¯èƒ½ï¼‰
SUS304Austeniteé‹¼           M_s =  223.9Â°C â†’ è‰¯å¥½ï¼ˆæ²¹å†·ã§Quenchingå¯èƒ½ï¼‰
SNCM420ä½åˆé‡‘é‹¼                  M_s =  394.4Â°C â†’ å„ªç§€ï¼ˆæ°´å†·ã§å®Œå…¨Quenchingå¯èƒ½ï¼‰
</code></pre>
<p><strong>Explanation</strong>: M<sub>s</sub>TemperatureãŒé«˜ã„ã»ã©ã€MartensiteTransformationãŒå®¤æ¸©ã§å®Œå…¨ã«é€²è¡Œã—ã‚„ã™ãã€QuenchingãŒå®¹æ˜“ã§ã™ã€‚åˆé‡‘å…ƒç´ ï¼ˆç‰¹ã«Niã€Crã€Moï¼‰ã®æ·»åŠ ã¯M<sub>s</sub>Temperatureã‚’ä½ä¸‹ã•ã›ã¾ã™ã€‚</p>
<h3>Code Example 6: Simulation of Microstructure Evolution (Simplified Phase Field Method)</h3>
<p>ç›¸TransformationbyMicrostructureã®hoursç™ºå±•ã‚’Visualizationã—ã¾ã™ã€‚</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
from matplotlib.animation import FuncAnimation
from IPython.display import HTML

# ç°¡æ˜“ãƒ•ã‚§ãƒ¼ã‚ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ³•byç›¸TransformationSimulation
class PhaseTransformationSimulator:
    def __init__(self, size=100, n_nuclei=10):
        """
        Args:
            size: æ ¼å­ã‚µã‚¤ã‚º
            n_nuclei: åˆæœŸNucleationã‚µã‚¤ãƒˆæ•°
        """
        self.size = size
        self.n_nuclei = n_nuclei
        self.phi = np.zeros((size, size))  # Order parameter (0: Î±ç›¸, 1: Î²ç›¸)
        self._initialize_nuclei()

    def _initialize_nuclei(self):
        """ãƒ©ãƒ³ãƒ€ãƒ ãªä½ç½®ã«æ ¸ã‚’ç”Ÿæˆ"""
        np.random.seed(42)
        for _ in range(self.n_nuclei):
            x = np.random.randint(5, self.size - 5)
            y = np.random.randint(5, self.size - 5)
            # å°ã•ãªæ ¸ã‚’é…ç½®
            self.phi[x-2:x+3, y-2:y+3] = 1.0

    def evolve(self, dt=0.1, mobility=0.5):
        """hoursç™ºå±•ï¼ˆCahn-Allenæ–¹ç¨‹å¼ã®ç°¡æ˜“ç‰ˆï¼‰

        Args:
            dt: hoursåˆ»ã¿
            mobility: ç•Œé¢ç§»å‹•åº¦
        """
        # å‹¾é…Calculationï¼ˆLaplacianï¼‰
        laplacian = (
            np.roll(self.phi, 1, axis=0) + np.roll(self.phi, -1, axis=0) +
            np.roll(self.phi, 1, axis=1) + np.roll(self.phi, -1, axis=1) -
            4 * self.phi
        )

        # é§†å‹•åŠ›é …ï¼ˆäºŒé‡äº•æˆ¸ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ï¼‰
        driving_force = self.phi - self.phi**3

        # hoursç™ºå±•ï¼ˆCahn-Allenæ–¹ç¨‹å¼ï¼‰
        self.phi += dt * mobility * (laplacian + driving_force)

        # ç‰©ç†çš„ç¯„å›²ã«åˆ¶é™
        self.phi = np.clip(self.phi, 0, 1)

    def get_phase_fraction(self):
        """Î²ç›¸ã®ä½“ç©minç‡"""
        return np.mean(self.phi)

# SimulationExecution
sim = PhaseTransformationSimulator(size=100, n_nuclei=15)

# hoursç™ºå±•ã®è¨˜éŒ²
n_steps = 50
step_interval = 5
snapshots = []
phase_fractions = []
times = []

for step in range(n_steps + 1):
    if step % step_interval == 0:
        snapshots.append(sim.phi.copy())
        phase_fractions.append(sim.get_phase_fraction())
        times.append(step)

    sim.evolve(dt=0.2, mobility=0.3)

# Microstructureé€²åŒ–ã®Visualization
fig, axes = plt.subplots(2, 3, figsize=(15, 10))
axes = axes.flatten()

for idx, (ax, snapshot, time) in enumerate(zip(axes[:5], snapshots[:5], times[:5])):
    im = ax.imshow(snapshot, cmap='coolwarm', vmin=0, vmax=1, interpolation='bicubic')
    ax.set_title(f'Step {time}: Î²Phase fraction = {phase_fractions[idx]*100:.1f}%',
                 fontsize=12, fontweight='bold')
    ax.axis('off')
    plt.colorbar(im, ax=ax, fraction=0.046, pad=0.04, label='Order Parameter Ï†')

# Transformation fractionã®hoursç™ºå±•
ax = axes[5]
ax.plot(times, np.array(phase_fractions) * 100, 'o-', linewidth=2.5,
        markersize=8, color='#f093fb')
ax.set_xlabel('Time Steps', fontsize=12, fontweight='bold')
ax.set_ylabel('Î²ç›¸ä½“ç©minç‡ (%)', fontsize=12, fontweight='bold')
ax.set_title('ç›¸Progress of Transformation', fontsize=13, fontweight='bold')
ax.grid(alpha=0.3)
ax.set_ylim(0, 100)

plt.tight_layout()
plt.show()

# AvramiFitting
from scipy.optimize import curve_fit

def avrami(t, k, n):
    return (1 - np.exp(-k * t**n)) * 100

# hoursã‚¹ãƒ†ãƒƒãƒ—ã‚’så˜ä½ã«å¤‰æ›ï¼ˆä»»æ„ã®ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰
times_sec = np.array(times) * 0.1  # å„ã‚¹ãƒ†ãƒƒãƒ— = 0.1sã¨ä»®å®š
fractions_percent = np.array(phase_fractions) * 100

# Fittingï¼ˆTransformationãŒé€²è¡Œã—ã¦ã„ã‚‹ç¯„å›²ã®ã¿ï¼‰
valid_idx = (fractions_percent &gt; 1) &amp; (fractions_percent &lt; 99)
if np.sum(valid_idx) &gt; 5:
    popt, _ = curve_fit(avrami, times_sec[valid_idx], fractions_percent[valid_idx],
                        p0=[0.1, 2.0], bounds=([0, 0.5], [10, 5]))
    k_sim, n_sim = popt

    print("\n=== Simulationã®AvramiFitting ===")
    print(f"Rate constant k = {k_sim:.4f}")
    print(f"AvramiExponent n = {n_sim:.2f}")
else:
    print("\nTransformationãŒã¾ã é€²è¡Œã—ã¦ã„ãªã„ãŸã‚ã€AvramiFittingã‚’ã‚¹ã‚­ãƒƒãƒ—")

print(f"\næœ€çµ‚Î²Phase fraction: {phase_fractions[-1]*100:.1f}%")
print("ï¼ˆå¹³è¡¡çŠ¶æ…‹ã«è¿‘ã¥ã„ã¦ã„ã¾ã™ï¼‰")
</code></pre>
<p><strong>Output example</strong>:</p>
<pre><code>=== Simulationã®AvramiFitting ===
Rate constant k = 0.1234
AvramiExponent n = 2.34

æœ€çµ‚Î²Phase fraction: 98.7%
ï¼ˆå¹³è¡¡çŠ¶æ…‹ã«è¿‘ã¥ã„ã¦ã„ã¾ã™ï¼‰
</code></pre>
<p><strong>Explanation</strong>: ãƒ•ã‚§ãƒ¼ã‚ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ³•byã€Nucleationã¨Growthbyç›¸Transformationã®ç©ºé–“çš„ãªé€²å±•ã‚’Visualizationã§ãã¾ã™ã€‚å¾—ã‚‰ã‚ŒãŸTransformationæ›²ç·šã¯Avramiå¼ã§Fittingã§ãã€å®Ÿé¨“ã¨ç†è«–ã®æ©‹æ¸¡ã—ã¨ãªã‚Šã¾ã™ã€‚</p>
<h3>Code Example 7: Calculation of Fe-C Binary Phase Diagram using pycalphad</h3>
<p>CALPHADæ³•ã‚’ç”¨ã„ã¦ã€Fe-Cç³»Phase diagramã‚’Calculationã—ã¾ã™ã€‚</p>
<pre><code class="language-python"># æ³¨: pycalphadã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦
# pip install pycalphad

try:
    from pycalphad import Database, binplot, equilibrium
    from pycalphad import variables as v
    import matplotlib.pyplot as plt
    import numpy as np

    # ç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®èª­ã¿è¾¼ã¿ï¼ˆCALPHADå½¢å¼ã®TDBãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
    # ã“ã“ã§ã¯ç°¡ç•¥åŒ–ã®ãŸã‚ã€Fe-Cç³»ã®åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
    # å®Ÿéš›ã«ã¯TcFe.TDBç­‰ã®å…¬é–‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨

    print("=== pycalphadbyFe-CPhase diagramCalculation ===")
    print("æ³¨: ã“ã®Exampleã¯ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚")
    print("å®Ÿéš›ã®Calculationã«ã¯é©åˆ‡ãªTDBãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰ãŒå¿…è¦ã§ã™ã€‚")

    # Fe-Cç³»ã®ç°¡æ˜“çš„ãªãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿéš›ã®TDBãƒ•ã‚¡ã‚¤ãƒ«ã¯è¤‡é›‘ï¼‰
    tdb_string = """
    $ Fe-C system (simplified for demonstration)
    ELEMENT FE   BCC_A2    55.847    4489.0   27.28    !
    ELEMENT C    GRAPHITE  12.011    1054.0    5.74    !
    ELEMENT VA   VACUUM      0.0        0.0    0.0     !

    PHASE BCC_A2  %  2 1 3 !
    CONSTITUENT BCC_A2  :FE,C : VA :  !

    PHASE FCC_A1  %  2 1 1 !
    CONSTITUENT FCC_A1  :FE,C : VA :  !

    PHASE CEMENTITE  %  2 3 1 !
    CONSTITUENT CEMENTITE  :FE : C :  !
    """

    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ–‡å­—åˆ—fromä½œæˆ
    db = Database(tdb_string)

    print("\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å«ã¾ã‚Œã‚‹ç›¸:")
    print(db.phases.keys())

    print("\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å«ã¾ã‚Œã‚‹å…ƒç´ :")
    print(db.elements)

    # Phase diagramCalculationã®è¨­å®š
    # Temperatureç¯„å›²: 500-1600 K
    # Compositionç¯„å›²: 0-1 ãƒ¢ãƒ«minç‡ C
    temperature = np.linspace(500, 1600, 100)
    composition = np.linspace(0, 0.05, 50)  # 0-5 mol% C (å·¥å­¦çš„ã«ã¯0-1.2 wt% Cç¨‹åº¦)

    print("\nPhase diagramã®Calculationã‚’é–‹å§‹ã—ã¾ã™...")
    print("ï¼ˆã“ã®Exampleã¯ç°¡ç•¥ç‰ˆã®ãŸã‚ã€å®Ÿéš›ã®Fe-Cå›³ã¨ã¯ç•°ãªã‚Šã¾ã™ï¼‰")

    # binplotã‚’ä½¿ã£ãŸPhase diagramã®æç”»ï¼ˆå®Ÿéš›ã®TDBãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´åˆï¼‰
    # fig = plt.figure(figsize=(10, 8))
    # binplot(db, ['FE', 'C', 'VA'], ['BCC_A2', 'FCC_A1', 'CEMENTITE'],
    #         {v.X('C'): composition, v.T: temperature, v.P: 101325},
    #         ax=fig.gca())

    # ä»£ã‚ã‚Šã«ã€æ¦‚å¿µçš„ãªèª¬æ˜ã¨å›³ã‚’è¡¨ç¤º
    fig, ax = plt.subplots(figsize=(10, 8))

    # å®Ÿéš›ã®Fe-CPhase diagramã®ä¸»è¦ãªç·šã‚’æ‰‹å‹•ã§æç”»ï¼ˆæ•™è‚²ç›®çš„ï¼‰
    # A1ï¼ˆå…±æTemperatureï¼‰
    ax.axhline(727, color='red', linestyle='--', linewidth=2, label='A1 (å…±æTemperature, 727Â°C)')

    # A3ï¼ˆÎ±â†’Î³Transformation startç·šã€Hypoeutectoid steelï¼‰
    C_A3 = np.linspace(0, 0.77, 50)
    T_A3 = 910 - 203 * C_A3  # ç°¡æ˜“è¿‘ä¼¼
    ax.plot(C_A3, T_A3, 'b-', linewidth=2.5, label='A3 (Î± â†’ Î³)')

    # Acmï¼ˆÎ³â†’Î³+Fe3Cç·šã€Hypereutectoid steelï¼‰
    C_Acm = np.linspace(0.77, 2.11, 50)
    T_Acm = 727 + 38 * (C_Acm - 0.77)  # ç°¡æ˜“è¿‘ä¼¼
    ax.plot(C_Acm, T_Acm, 'g-', linewidth=2.5, label='Acm (Î³ â†’ Î³ + Feâ‚ƒC)')

    # Eutectoid point
    ax.plot(0.77, 727, 'ro', markersize=12, label='Eutectoid point (0.77% C, 727Â°C)')

    # é ˜åŸŸã®æ³¨é‡ˆ
    ax.text(0.3, 850, 'Î± (BCC)', fontsize=14, fontweight='bold', ha='center')
    ax.text(0.5, 750, 'Î³ (FCC)\nAustenite', fontsize=14, fontweight='bold', ha='center')
    ax.text(1.2, 650, 'Î± + Feâ‚ƒC\nPearlite', fontsize=14, fontweight='bold', ha='center')

    ax.set_xlabel('Carbon Concentration (wt%)', fontsize=13, fontweight='bold')
    ax.set_ylabel('Temperature (Â°C)', fontsize=13, fontweight='bold')
    ax.set_title('Fe-C Binary systemPhase diagramï¼ˆæ¦‚å¿µå›³ï¼‰', fontsize=15, fontweight='bold')
    ax.legend(fontsize=11, loc='upper right')
    ax.grid(alpha=0.3)
    ax.set_xlim(0, 2.5)
    ax.set_ylim(0, 1000)

    plt.tight_layout()
    plt.show()

    print("\n=== pycalphadã®å®Ÿéš›ã®ä½¿ç”¨æ³• ===")
    print("1. é©åˆ‡ãªTDBãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰ã‚’å…¥æ‰‹")
    print("   Example: TCFE (é‰„é‹¼ç³»), COST507 (å¤šå…ƒç³»)")
    print("2. Database()ã§TDBãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿")
    print("3. equilibrium()ã§å¹³è¡¡Calculation")
    print("4. binplot()ã§Binary systemPhase diagramã‚’æç”»")
    print("\nå…¬é–‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:")
    print("- NIST-JANAFç†±åŒ–å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹")
    print("- SGTE (Scientific Group Thermodata Europe)")
    print("- CompuTherm Pandatï¼ˆå•†ç”¨ï¼‰")

except ImportError:
    print("=== pycalphadãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“ ===")
    print("pycalphadã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯:")
    print("  pip install pycalphad")
    print("\nä»£ã‚ã‚Šã«ã€Fe-CPhase diagramã®æ¦‚å¿µå›³ã‚’æç”»ã—ã¾ã™...\n")

    # pycalphadãªã—ã§ã‚‚æ¦‚å¿µå›³ã‚’è¡¨ç¤º
    fig, ax = plt.subplots(figsize=(10, 8))

    # A1ï¼ˆå…±æTemperatureï¼‰
    ax.axhline(727, color='red', linestyle='--', linewidth=2, label='A1 (å…±æTemperature, 727Â°C)')

    # A3
    C_A3 = np.linspace(0, 0.77, 50)
    T_A3 = 910 - 203 * C_A3
    ax.plot(C_A3, T_A3, 'b-', linewidth=2.5, label='A3 (Î± â†’ Î³)')

    # Acm
    C_Acm = np.linspace(0.77, 2.11, 50)
    T_Acm = 727 + 38 * (C_Acm - 0.77)
    ax.plot(C_Acm, T_Acm, 'g-', linewidth=2.5, label='Acm (Î³ â†’ Î³ + Feâ‚ƒC)')

    # Eutectoid point
    ax.plot(0.77, 727, 'ro', markersize=12, label='Eutectoid point')

    # é ˜åŸŸã®æ³¨é‡ˆ
    ax.text(0.3, 850, 'Î±-Fe (BCC)\nFerrite', fontsize=13, fontweight='bold',
            ha='center', bbox=dict(boxstyle='round', facecolor='lightblue', alpha=0.7))
    ax.text(0.5, 750, 'Î³-Fe (FCC)\nAustenite', fontsize=13, fontweight='bold',
            ha='center', bbox=dict(boxstyle='round', facecolor='lightyellow', alpha=0.7))
    ax.text(1.2, 650, 'Î± + Feâ‚ƒC\nPearlite', fontsize=13, fontweight='bold',
            ha='center', bbox=dict(boxstyle='round', facecolor='lightcoral', alpha=0.7))

    ax.set_xlabel('Carbon Concentration (wt%)', fontsize=13, fontweight='bold')
    ax.set_ylabel('Temperature (Â°C)', fontsize=13, fontweight='bold')
    ax.set_title('Fe-C Binary systemPhase diagramï¼ˆæ•™è‚²ç”¨æ¦‚å¿µå›³ï¼‰', fontsize=15, fontweight='bold')
    ax.legend(fontsize=11, loc='upper right')
    ax.grid(alpha=0.3)
    ax.set_xlim(0, 2.5)
    ax.set_ylim(600, 950)

    plt.tight_layout()
    plt.show()

    print("=== Fe-CPhase diagramã®Important Temperatures and Compositions ===")
    print("Eutectoid point: 727Â°C, 0.77 wt% C")
    print("  åå¿œ: Î³ â†’ Î± + Feâ‚ƒC (PearliteMicrostructure)")
    print("\nHypoeutectoid steelï¼ˆ&lt; 0.77% Cï¼‰:")
    print("  Proeutectoid ferrite + Pearlite")
    print("Hypereutectoid steelï¼ˆ&gt; 0.77% Cï¼‰:")
    print("  Proeutectoid cementite + Pearlite")
</code></pre>
<p><strong>Output example</strong>:</p>
<pre><code>=== pycalphadãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“ ===
pycalphadã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯:
  pip install pycalphad

ä»£ã‚ã‚Šã«ã€Fe-CPhase diagramã®æ¦‚å¿µå›³ã‚’æç”»ã—ã¾ã™...

=== Fe-CPhase diagramã®Important Temperatures and Compositions ===
Eutectoid point: 727Â°C, 0.77 wt% C
  åå¿œ: Î³ â†’ Î± + Feâ‚ƒC (PearliteMicrostructure)

Hypoeutectoid steelï¼ˆ&lt; 0.77% Cï¼‰:
  Proeutectoid ferrite + Pearlite
Hypereutectoid steelï¼ˆ&gt; 0.77% Cï¼‰:
  Proeutectoid cementite + Pearlite
</code></pre>
<p><strong>Explanation</strong>: CALPHADæ³•ã¯ã€å®Ÿé¨“çš„ã«æ¸¬å®šãŒå›°é›£ãªå¤šå…ƒç³»Phase diagramã‚„æº–å®‰å®šç›¸ã‚’äºˆæ¸¬ã™ã‚‹å¼·åŠ›ãªæ‰‹æ³•ã§ã™ã€‚pycalphadã‚’ä½¿ãˆã°ã€Pythonã§Phase diagramCalculationã¨Gibbsã‚¨ãƒãƒ«ã‚®ãƒ¼æœ€å°åŒ–ãŒã§ãã¾ã™ã€‚</p>
<hr/>
<h2>2.7 Summary of This Chapter</h2>
<h3>What We Learned</h3>
<ol>
<li><strong>ç›¸å›³ã®åŸºç¤</strong>
<ul>
<li>Basic Types of Binary Phase Diagramsï¼šå…¨ç‡å›ºæº¶å‹ã€å…±æ™¶å‹ã€åŒ…æ™¶å‹</li>
<li>Fe-Cç³»ç›¸å›³ï¼šEutectoid pointï¼ˆ727Â°Cã€0.77% Cï¼‰ã€PearliteMicrostructure</li>
<li>ã¦ã“ã®æ³•å‰‡ï¼šTwo-phase regionatPhase fractionCalculation</li>
</ul>
</li>
<li><strong>Classification of Transformations</strong>
<ul>
<li>Diffusionå‹Transformationï¼šPearliteã€Bainiteï¼ˆé…ã„ã€Temperatureä¾å­˜ï¼‰</li>
<li>ç„¡Diffusionå‹Transformationï¼šMartensiteï¼ˆæ¥µã‚ã¦é€Ÿã„ã€éŸ³é€Ÿãƒ¬ãƒ™ãƒ«ï¼‰</li>
</ul>
</li>
<li><strong>TTTå›³ã¨CCTå›³</strong>
<ul>
<li>TTTå›³ï¼šç­‰æ¸©Transformationã€Cå­—æ›²ç·šã€é¼»ï¼ˆæœ€é€ŸTransformationTemperatureï¼‰</li>
<li>CCTå›³ï¼šé€£ç¶šCoolingã€å®Ÿç”¨çš„ãªç†±å‡¦ç†è¨­è¨ˆ</li>
<li>Cooling Rateã¨Microstructureã®é–¢ä¿‚ï¼šå¾å†·ï¼ˆPearliteï¼‰â†’ æ²¹å†·ï¼ˆBainiteï¼‰â†’ æ°´å†·ï¼ˆMartensiteï¼‰</li>
</ul>
</li>
<li><strong>Transformation Rateè«–</strong>
<ul>
<li>Avramiå¼ï¼š$f(t) = 1 - \exp(-kt^n)$</li>
<li>AvramiExponent$n$ï¼šNucleationã¨Growthã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’åæ˜ ï¼ˆé€šå¸¸1-4ï¼‰</li>
<li>å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿fromã®Fittingbyãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¨å®š</li>
</ul>
</li>
<li><strong>MartensiteTransformation</strong>
<ul>
<li>M<sub>s</sub>Temperatureã®äºˆæ¸¬å¼ï¼šCompositionä¾å­˜ï¼ˆCã€Mnã€Niã€Crã€Moï¼‰</li>
<li>Quenchingæ€§ã®è©•ä¾¡ï¼šM<sub>s</sub> &gt; 250Â°Cã§æ°´å†·å¯èƒ½</li>
<li>æ®‹ç•™Austeniteå•é¡Œï¼šM<sub>s</sub>ãŒä½ã„å ´åˆã€ã‚µãƒ–ã‚¼ãƒ­å‡¦ç†ãŒå¿…è¦</li>
</ul>
</li>
<li><strong>CALPHADæ³•</strong>
<ul>
<li>Gibbsã‚¨ãƒãƒ«ã‚®ãƒ¼æœ€å°åŒ–byç›¸å›³Calculation</li>
<li>pycalphadãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½¿ç”¨æ³•</li>
<li>å¤šå…ƒç³»ãƒ»æº–å®‰å®šç›¸ã®äºˆæ¸¬ã«æœ‰åŠ¹</li>
</ul>
</li>
<li><strong>PythonSimulation</strong>
<ul>
<li>ç›¸å›³ã®æç”»ã¨ã¦ã“ã®æ³•å‰‡Calculation</li>
<li>TTTå›³ã®æ§‹ç¯‰ã¨Avramiå¼Fitting</li>
<li>M<sub>s</sub>Temperatureäºˆæ¸¬ã¨Quenchingæ€§è©•ä¾¡</li>
<li>ãƒ•ã‚§ãƒ¼ã‚ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ³•byMicrostructureé€²åŒ–ã®Visualization</li>
</ul>
</li>
</ol>
<h3>Important Points</h3>
<ul>
<li>ç›¸å›³ã¯ç†±å‡¦ç†è¨­è¨ˆã®åŸºç›¤ï¼šã©ã®ç›¸ãŒå®‰å®šã‹ã‚’çŸ¥ã‚‹</li>
<li>Cooling RateãŒMicrostructureã‚’æ±ºå®šï¼šTTT/CCTå›³ã§äºˆæ¸¬å¯èƒ½</li>
<li>MartensiteTransformationã¯é‹¼ã®Quenchingã®æœ¬è³ªï¼šM<sub>s</sub>TemperatureãŒé‡è¦</li>
<li>Avramiå¼byTransformation Rateã‚’å®šé‡åŒ–ï¼šå®Ÿé¨“â†’ãƒ¢ãƒ‡ãƒ«â†’äºˆæ¸¬</li>
<li>CALPHADæ³•ã¯æœªçŸ¥ã®å¤šå…ƒç³»Phase diagramã‚’Calculationçš„ã«äºˆæ¸¬</li>
<li>Materials Informaticsã§ã¯ã€ç›¸Transformationã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŒ–ã¨ãƒ¢ãƒ‡ãƒ«åŒ–ãŒé‡è¦</li>
</ul>
<h3>Next Chapter</h3>
<p>ç¬¬3ç« ã§ã¯ã€<strong>Precipitationã¨å›ºæº¶</strong>ã‚’å­¦ã³ã¾ã™ï¼š</p>
<ul>
<li>å›ºæº¶ä½“ã®ç¨®é¡ã¨å›ºæº¶é™</li>
<li>Precipitationã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ï¼šNucleationã¨Growth</li>
<li>æ™‚åŠ¹ç¡¬åŒ–ã¨GPï¼ˆGuinier-Prestonï¼‰ã‚¾ãƒ¼ãƒ³</li>
<li>Orowanæ©Ÿæ§‹byPrecipitationå¼·åŒ–</li>
<li>PythonbyPrecipitationç‰©minå¸ƒã®Analysis</li>
<li>Microstructureç”»åƒfromã®Precipitationç‰©å®šé‡</li>
</ul>
<hr/>
<h2>æ¼”ç¿’å•é¡Œ</h2>
<h3>Easyï¼ˆåŸºç¤ç¢ºèªï¼‰</h3>
<details>
<summary><strong>Q1:</strong> 0.45% Cé‹¼ã‚’727Â°Cã§å¹³è¡¡çŠ¶æ…‹ã«ã—ãŸã¨ãã€PearliteMicrostructureã®å‰²åˆã¯ä½•%ã§ã™ã‹ï¼Ÿï¼ˆEutectoid compositionã¯0.77% Cï¼‰</summary>
<p><strong>æ­£è§£</strong>: 58.4%</p>
<p><strong>Explanation</strong>:</p>
<p>Pearliteminç‡ = $\frac{C_{\text{alloy}}}{C_{\text{eutectoid}}} = \frac{0.45}{0.77} = 0.584 = 58.4\%$</p>
<p>æ®‹ã‚Šã®41.6%ã¯Proeutectoid ferriteã§ã™ã€‚</p>
</details>
<details>
<summary><strong>Q2:</strong> MartensiteTransformationã¨Diffusionå‹Transformationï¼ˆPearliteTransformationï¼‰ã®ä¸»ãªé•ã„ã‚’3ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</summary>
<p><strong>æ­£è§£Example</strong>:</p>
<ol>
<li><strong>Diffusion</strong>: Martensiteã¯ç„¡Diffusionã€Pearliteã¯Diffusionã‚’ä¼´ã†</li>
<li><strong>Transformation Rate</strong>: Martensiteã¯éŸ³é€Ÿãƒ¬ãƒ™ãƒ«ï¼ˆ10<sup>-7</sup>sï¼‰ã€Pearliteã¯sã€œhoursã‚ªãƒ¼ãƒ€ãƒ¼</li>
<li><strong>Compositionå¤‰åŒ–</strong>: Martensiteã¯è¦ªç›¸ã¨åŒã˜Compositionã€Pearliteã¯Ferriteã¨Cementiteã«minè§£</li>
</ol>
</details>
<h3>Mediumï¼ˆå¿œç”¨ï¼‰</h3>
<details>
<summary><strong>Q3:</strong> ã‚ã‚‹é‹¼ï¼ˆ0.35% Cã€1.2% Mnã€0.5% Crï¼‰ã®M<sub>s</sub>Temperatureã‚’Calculationã—ã¦ãã ã•ã„ã€‚ã“ã®é‹¼ã¯æ°´å†·ã§å®Œå…¨ã«MartensiteåŒ–ã§ãã¾ã™ã‹ï¼Ÿ</summary>
<p><strong>æ­£è§£</strong>: M<sub>s</sub> = 335.6Â°Cã€å®Œå…¨MartensiteåŒ–å¯èƒ½</p>
<p><strong>Explanation</strong>:</p>
<p>$$M_s = 539 - 423 \times 0.35 - 30.4 \times 1.2 - 12.1 \times 0.5$$</p>
<p>$$M_s = 539 - 148.05 - 36.48 - 6.05 = 348.42 \approx 335.6 \, \text{Â°C}$$</p>
<p>M<sub>s</sub> &gt; 250Â°Cãªã®ã§ã€æ°´å†·ã§å®Œå…¨ãªMartensiteMicrostructureãŒå¾—ã‚‰ã‚Œã¾ã™ï¼ˆæ®‹ç•™Austeniteã¯ã»ã¨ã‚“ã©æ®‹ã‚Šã¾ã›ã‚“ï¼‰ã€‚</p>
</details>
<details>
<summary><strong>Q4:</strong> TTTå›³ã§ã€Œé¼»ï¼ˆnoseï¼‰ã€ãŒ550Â°Cä»˜è¿‘ã«ã‚ã‚‹ç†ç”±ã‚’ã€Diffusionã¨é§†å‹•åŠ›ã®è¦³ç‚¹fromèª¬æ˜ã—ã¦ãã ã•ã„ã€‚</summary>
<p><strong>æ­£è§£</strong>:</p>
<p>Transformation Rateã¯ã€<strong>ç†±åŠ›å­¦çš„é§†å‹•åŠ›</strong>ã¨<strong>åŸå­ã®Diffusioné€Ÿåº¦</strong>ã®ç©ã§æ±ºã¾ã‚Šã¾ã™ã€‚</p>
<ul>
<li><strong>High Tempï¼ˆ700Â°Cä»˜è¿‘ï¼‰</strong>: Diffusionã¯é€Ÿã„ãŒã€é§†å‹•åŠ›ï¼ˆéCoolingåº¦ï¼‰ãŒå°ã•ã„ â†’ TransformationãŒé…ã„</li>
<li><strong>ä½æ¸©ï¼ˆ400Â°CBelowï¼‰</strong>: é§†å‹•åŠ›ã¯å¤§ãã„ãŒã€DiffusionãŒæ¥µã‚ã¦é…ã„ â†’ TransformationãŒé…ã„</li>
<li><strong>ä¸­é–“Temperatureï¼ˆ550Â°Cä»˜è¿‘ï¼‰</strong>: é§†å‹•åŠ›ã¨Diffusioné€Ÿåº¦ã®ãƒãƒ©ãƒ³ã‚¹ãŒæœ€é© â†’ TransformationãŒæœ€é€Ÿï¼ˆé¼»ï¼‰</li>
</ul>
<p>ã“ã®ãŸã‚ã€TTTå›³ã¯Cå­—å‹ï¼ˆé¼»ã‚’æŒã¤å½¢çŠ¶ï¼‰ã«ãªã‚Šã¾ã™ã€‚</p>
</details>
<h3>Hardï¼ˆç™ºå±•ï¼‰</h3>
<details>
<summary><strong>Q5:</strong> ã‚ã‚‹Eutectoid steelã‚’600Â°Cã§ç­‰æ¸©Transformationã•ã›ãŸã¨ã“ã‚ã€10så¾Œã«Transformation fractionãŒ15%ã€100så¾Œã«90%ã§ã—ãŸã€‚Avramiå¼ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ$k$ã¨$n$ï¼‰ã‚’æ¨å®šã—ã€50så¾Œã®Transformation fractionã‚’äºˆæ¸¬ã—ã¦ãã ã•ã„ã€‚</summary>
<p><strong>è§£ç­”</strong>:</p>
<p>Avramiå¼ï¼š$f(t) = 1 - \exp(-kt^n)$</p>
<p><strong>ã‚¹ãƒ†ãƒƒãƒ—1</strong>: 2ã¤ã®ãƒ‡ãƒ¼ã‚¿ç‚¹fromé€£ç«‹æ–¹ç¨‹å¼ã‚’ç«‹ã¦ã‚‹</p>
<p>$$0.15 = 1 - \exp(-k \cdot 10^n)$$</p>
<p>$$0.90 = 1 - \exp(-k \cdot 100^n)$$</p>
<p>å¤‰å½¢ã™ã‚‹ã¨ï¼š</p>
<p>$$\exp(-k \cdot 10^n) = 0.85$$</p>
<p>$$\exp(-k \cdot 100^n) = 0.10$$</p>
<p>å¯¾æ•°ã‚’ã¨ã‚‹ï¼š</p>
<p>$$-k \cdot 10^n = \ln(0.85) \approx -0.1625$$</p>
<p>$$-k \cdot 100^n = \ln(0.10) \approx -2.3026$$</p>
<p><strong>ã‚¹ãƒ†ãƒƒãƒ—2</strong>: æ¯”ã‚’ã¨ã£ã¦$n$ã‚’æ±‚ã‚ã‚‹</p>
<p>$$\frac{100^n}{10^n} = \frac{2.3026}{0.1625}$$</p>
<p>$$10^n = 14.17$$</p>
<p>$$n = \frac{\ln(14.17)}{\ln(10)} = \frac{2.651}{2.303} \approx 1.15$$</p>
<p>ã—ã‹ã—ã€$n &lt; 1.5$ã¯éç¾å®Ÿçš„ï¼ˆé€šå¸¸2-4ï¼‰ã€‚å®Ÿéš›ã«ã¯æ¸¬å®šèª¤å·®ã‚„Fittingèª¤å·®ãŒã‚ã‚‹ãŸã‚ã€ã‚ˆã‚Šå³å¯†ãªæ–¹æ³•asï¼š</p>
<p><strong>ç·šå½¢åŒ–AvramiPlot</strong>:</p>
<p>$$\ln\ln\left(\frac{1}{1-f}\right) = n \ln t + n \ln k$$</p>
<p>2ç‚¹ã§Calculationï¼š</p>
<p>$(t_1, f_1) = (10, 0.15)$: $y_1 = \ln\ln(1/0.85) = \ln(0.1625) = -1.817$</p>
<p>$(t_2, f_2) = (100, 0.90)$: $y_2 = \ln\ln(1/0.10) = \ln(2.303) = 0.834$</p>
<p>å‚¾ãï¼ˆ$n$ï¼‰:</p>
<p>$$n = \frac{y_2 - y_1}{\ln t_2 - \ln t_1} = \frac{0.834 - (-1.817)}{\ln(100) - \ln(10)} = \frac{2.651}{2.303} = 1.15$$</p>
<p>â€»ã“ã®$n = 1.15$ã¯å®Ÿéš›ã®å€¤ã‚ˆã‚Šå°ã•ã„ã§ã™ã€‚å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã«èª¤å·®ãŒã‚ã‚‹å ´åˆã‚„ã€äºŒæ®µéšTransformationã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚é€šå¸¸ã¯$n \approx 2-3$ãŒæœŸå¾…ã•ã‚Œã¾ã™ã€‚</p>
<p><strong>ä»®ã«$n = 2.5$ã¨ä»®å®šã—ãŸå ´åˆ</strong>ï¼ˆã‚ˆã‚Šç¾å®Ÿçš„ï¼‰ï¼š</p>
<p>$$k = \frac{-\ln(1-0.15)}{10^{2.5}} = \frac{0.1625}{316.23} \approx 0.000514$$</p>
<p>50så¾Œã®äºˆæ¸¬ï¼š</p>
<p>$$f(50) = 1 - \exp(-0.000514 \times 50^{2.5}) = 1 - \exp(-0.000514 \times 1118) = 1 - \exp(-0.575) = 1 - 0.563 = 0.437 = 43.7\%$$</p>
<p><strong>æœ€çµ‚ç­”ãˆ</strong>: ç´„44%</p>
<p>ï¼ˆå®Ÿéš›ã«ã¯ã€ã‚ˆã‚Šå¤šãã®ãƒ‡ãƒ¼ã‚¿ç‚¹ã¨éç·šå½¢FittingãŒå¿…è¦ã§ã™ï¼‰</p>
</details>
<details>
<summary><strong>Q6:</strong> Fe-Cå¹³è¡¡Phase diagramã«ãŠã„ã¦ã€Eutectoid steelï¼ˆ0.76% Cï¼‰ã¨Hypoeutectoid steelï¼ˆ0.35% Cï¼‰ã‚’850Â°Cfromç‚‰å†·ã—ãŸéš›ã®æœ€çµ‚Microstructureã‚’ã€ã¦ã“ã®æ³•å‰‡ã‚’ç”¨ã„ã¦å®šé‡çš„ã«Calculationã—ã¦ãã ã•ã„ï¼ˆFerriteã¨Pearliteã®ä½“ç©minç‡ï¼‰ã€‚</summary>
<p><strong>æ­£è§£</strong>:</p>
<p><strong>Eutectoid steelï¼ˆ0.76% Cï¼‰</strong>:</p>
<ul>
<li>Ferrite: 0%</li>
<li>Pearlite: 100%</li>
</ul>
<p><strong>Hypoeutectoid steelï¼ˆ0.35% Cï¼‰</strong>:</p>
<ul>
<li>Proeutectoid ferrite: ç´„54%</li>
<li>Pearlite: ç´„46%</li>
</ul>
<p><strong>Explanation</strong>:</p>
<p><strong>Hypoeutectoid steelã®Calculation</strong>ï¼ˆã¦ã“ã®æ³•å‰‡ï¼‰:</p>
<p>A1TransformationTemperatureï¼ˆ727Â°Cï¼‰atAusteniteComposition: 0.76% C</p>
<p>A3ç·šï¼ˆFerritePrecipitationé–‹å§‹Temperatureï¼‰atå¹³è¡¡ï¼šFerriteï¼ˆ0.02% Cï¼‰ã¨Austeniteï¼ˆ0.76% Cï¼‰</p>
<p>Pearliteã®ä½“ç©minç‡:</p>
<p>$$f_{\text{pearlite}} = \frac{C_{\text{alloy}} - C_{\alpha}}{C_{\gamma} - C_{\alpha}} = \frac{0.35 - 0.02}{0.76 - 0.02} = \frac{0.33}{0.74} = 0.446 \approx 45\%$$</p>
<p>Proeutectoid ferriteã®ä½“ç©minç‡:</p>
<p>$$f_{\text{proeutectoid ferrite}} = 1 - f_{\text{pearlite}} = 1 - 0.446 = 0.554 \approx 55\%$$</p>
<p>ã—ãŸãŒã£ã¦ã€Hypoeutectoid steelã®æœ€çµ‚Microstructureã¯ç´„55%ã®Proeutectoid ferriteã¨ç´„45%ã®Pearliteã§ã™ã€‚</p>
</details>
<details>
<summary><strong>Q7:</strong> BainiteTransformationã¨MartensiteTransformationã®ä¸»ãªç›¸é•ç‚¹ã‚’ã€Transformationæ©Ÿæ§‹ãƒ»å½¢æ…‹ãƒ»Microstructureç‰¹æ€§ã®è¦³ç‚¹from3ã¤ä»¥ä¸Šèª¬æ˜ã—ã¦ãã ã•ã„ã€‚</summary>
<p><strong>è§£ç­”Example</strong>:</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>BainiteTransformation</th>
<th>MartensiteTransformation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Transformationæ©Ÿæ§‹</strong></td>
<td>Diffusionå‹ï¼ˆéƒ¨minçš„ï¼‰ï¼šç‚­ç´ ã¯Diffusionã™ã‚‹ãŒã€é‰„åŸå­ã¯Diffusionã—ãªã„</td>
<td>ç„¡Diffusionå‹ï¼šã›ã‚“æ–­Transformationã€åŸå­ã¯å”èª¿çš„ã«ç§»å‹•</td>
</tr>
<tr>
<td><strong>TransformationTemperature</strong></td>
<td>B<sub>s</sub> ï½ M<sub>s</sub>ï¼ˆ250-550Â°Cï¼‰</td>
<td>M<sub>s</sub> ï½ M<sub>f</sub>ï¼ˆ200Â°CBelowï¼‰</td>
</tr>
<tr>
<td><strong>å½¢æ…‹</strong></td>
<td>Ferriteé‡çŠ¶çµæ™¶ + å¾®ç´°ç‚­åŒ–ç‰©ã®æ··åˆMicrostructure</td>
<td>ãƒ©ã‚¹çŠ¶ã¾ãŸã¯ãƒ—ãƒ¬ãƒ¼ãƒˆçŠ¶Martensiteï¼ˆç‚­åŒ–ç‰©ãªã—ï¼‰</td>
</tr>
<tr>
<td><strong>ç¡¬åº¦</strong></td>
<td>HV 350-550ï¼ˆä¸­ç¨‹åº¦ï¼‰</td>
<td>HV 600-900ï¼ˆéå¸¸ã«é«˜ã„ï¼‰</td>
</tr>
<tr>
<td><strong>å»¶æ€§</strong></td>
<td>æ¯”è¼ƒçš„è‰¯å¥½ï¼ˆç‚­åŒ–ç‰©ãŒå¾®ç´°ãªãŸã‚ï¼‰</td>
<td>ä½ã„ï¼ˆHigh carbon steelã§ã¯è„†æ€§çš„ï¼‰</td>
</tr>
<tr>
<td><strong>ç”¨é€”</strong></td>
<td>ãƒãƒé‹¼ã€ãƒ¬ãƒ¼ãƒ«ã€å·¥å…·é‹¼ï¼ˆå¼·åº¦ã¨é±æ€§ã®ãƒãƒ©ãƒ³ã‚¹ï¼‰</td>
<td>åˆƒç‰©ã€å·¥å…·ã€Quenchingé‹¼ï¼ˆæœ€é«˜ç¡¬åº¦ãŒå¿…è¦ï¼‰</td>
</tr>
</tbody>
</table>
<p><strong>è¿½åŠ èª¬æ˜</strong>:</p>
<ul>
<li><strong>ä¸Šéƒ¨Bainiteï¼ˆUpper Bainiteï¼‰</strong>: ç²—ã„Ferriteé‡ + é‡é–“ã®ç‚­åŒ–ç‰©</li>
<li><strong>ä¸‹éƒ¨Bainiteï¼ˆLower Bainiteï¼‰</strong>: å¾®ç´°ãªFerriteé‡ + é‡å†…éƒ¨ã®å¾®ç´°ç‚­åŒ–ç‰©ï¼ˆMartensiteã«è¿‘ã„ï¼‰</li>
</ul>
</details>
<details>
<summary><strong>Q8:</strong> CALPHADæ³•ã‚’ç”¨ã„ã¦ã€Fe-0.5%C-1.5%Mnåˆé‡‘ã®A3TransformationTemperatureã‚’Calculationã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’Pythonã§ä½œæˆã—ã¦ãã ã•ã„ï¼ˆç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹aspycalphadä½¿ç”¨ï¼‰ã€‚</summary>
<p><strong>è§£ç­”Example</strong>ï¼ˆæ¦‚å¿µã‚³ãƒ¼ãƒ‰ï¼‰:</p>
<pre><code class="language-python">
from pycalphad import Database, equilibrium, variables as v
import matplotlib.pyplot as plt
import numpy as np

# CALPHADç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿ï¼ˆExample: TCFe11ï¼‰
db = Database('TCFe11.tdb')

# æˆminç³»ã®å®šç¾©
components = ['FE', 'C', 'MN', 'VA']  # VA = vacancy
phases = list(db.phases.keys())

# åˆé‡‘Composition
alloy_composition = {v.X('C'): 0.005, v.X('MN'): 0.015}  # é‡é‡%ã‚’ãƒ¢ãƒ«minç‡ã«å¤‰æ›

# Temperatureç¯„å›²ã®è¨­å®šï¼ˆ700-1000Â°Cï¼‰
temperatures = np.linspace(700 + 273.15, 1000 + 273.15, 100)

# åœ§åŠ›å›ºå®šï¼ˆ1æ°—åœ§ï¼‰
pressure = 101325  # Pa

# å„Temperatureatå¹³è¡¡Calculation
phase_fractions = []
for temp in temperatures:
    eq = equilibrium(db, components, phases,
                     {v.T: temp, v.P: pressure, **alloy_composition})

    # FCCï¼ˆAusteniteï¼‰ã®minç‡ã‚’å–å¾—
    fcc_fraction = eq.Phase.sel(Phase='FCC_A1').values[0]
    phase_fractions.append(fcc_fraction)

# A3Temperatureã®æ¨å®šï¼ˆFCCminç‡ãŒ0.5ã«ãªã‚‹Temperatureï¼‰
phase_fractions = np.array(phase_fractions)
a3_index = np.argmin(np.abs(phase_fractions - 0.5))
a3_temperature = temperatures[a3_index] - 273.15  # Â°Cã«å¤‰æ›

print(f"A3TransformationTemperature: {a3_temperature:.1f} Â°C")

# Plot
plt.plot(temperatures - 273.15, phase_fractions, label='FCC (Austenite)')
plt.axhline(y=0.5, color='r', linestyle='--', label=f'A3 = {a3_temperature:.1f} Â°C')
plt.xlabel('Temperature (Â°C)')
plt.ylabel('Phase Fraction')
plt.title('Fe-0.5C-1.5Mn: A3 Transformation Temperature')
plt.legend()
plt.grid(True)
plt.show()
</code></pre>
<p><strong>Note</strong>:</p>
<ul>
<li>å®Ÿéš›ã«ã¯ã€pycalphadã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨é©åˆ‡ãªç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆTDBï¼‰ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…è¦</li>
<li>TDBãƒ•ã‚¡ã‚¤ãƒ«ã¯å•†ç”¨ï¼ˆThermo-Calcã€FactSageï¼‰ã¾ãŸã¯å…¬é–‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆOpen Calphadï¼‰fromå…¥æ‰‹</li>
<li>A3Temperatureã®å®šç¾©ã¯ã€FCCï¼ˆAusteniteï¼‰fromBCCï¼ˆFerriteï¼‰toTransformation startTemperature</li>
</ul>
<p><strong>æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›</strong>:</p>
<p>Fe-0.5%C-1.5%Mnåˆé‡‘ã®A3Temperatureã¯ç´„ <strong>820-840Â°C</strong> ã¨äºˆæ¸¬ã•ã‚Œã¾ã™ï¼ˆç‚­ç´ ã¨ãƒãƒ³ã‚¬ãƒ³byA3Temperatureã®ä½ä¸‹åŠ¹æœï¼‰ã€‚</p>
</details>
<!-- Learning Objectivesã®ç¢ºèª -->
<section class="learning-check">
<h2>âœ“ Learning Objectivesã®ç¢ºèª</h2>
<p>ã“ã®ç« ã‚’å®Œäº†ã™ã‚‹ã¨ã€Belowã‚’èª¬æ˜ãƒ»Executionã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š</p>
<h3>åŸºæœ¬ç†è§£</h3>
<ul>
<li>âœ… Fe-Cå¹³è¡¡Phase diagramã‚’èª­ã¿å–ã‚Šã€å„ç›¸é ˜åŸŸã¨TransformationTemperatureã‚’èª¬æ˜ã§ãã‚‹</li>
<li>âœ… å…±æãƒ»äºœå…±æãƒ»Hypereutectoid steelã®é•ã„ã¨ã€ãã‚Œãã‚Œã®Microstructureå½¢æˆéç¨‹ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
<li>âœ… TTTå›³ã¨CCTå›³ã®æ„å‘³ã‚’ç†è§£ã—ã€ç†±å‡¦ç†ãƒ—ãƒ­ã‚»ã‚¹ã¨æœ€çµ‚Microstructureã®é–¢ä¿‚ã‚’èª¬æ˜ã§ãã‚‹</li>
<li>âœ… MartensiteTransformationã¨BainiteTransformationã®åŸºæœ¬ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’è¿°ã¹ã‚‹ã“ã¨ãŒã§ãã‚‹</li>
</ul>
<h3>å®Ÿè·µã‚¹ã‚­ãƒ«</h3>
<ul>
<li>âœ… ã¦ã“ã®æ³•å‰‡ã‚’ç”¨ã„ã¦ã€ä»»æ„ã®TemperatureinPhase fractionã‚’å®šé‡çš„ã«Calculationã§ãã‚‹</li>
<li>âœ… M<sub>s</sub>Temperatureã®çµŒé¨“å¼ã‚’ç”¨ã„ã¦ã€åˆé‡‘æˆminfromMartensiteTransformation startTemperatureã‚’äºˆæ¸¬ã§ãã‚‹</li>
<li>âœ… Avramiå¼ã‚’ç”¨ã„ã¦ã€ç­‰æ¸©Transformationã®é€²è¡Œã‚’å®šé‡çš„ã«ãƒ¢ãƒ‡ãƒ«åŒ–ã§ãã‚‹</li>
<li>âœ… Pythonã¨CALPHADæ³•ã‚’ç”¨ã„ã¦ã€ç›¸TransformationTemperatureã®CalculationSimulationãŒã§ãã‚‹</li>
</ul>
<h3>å¿œç”¨åŠ›</h3>
<ul>
<li>âœ… ç›®çš„Microstructureï¼ˆPearliteã€Bainiteã€Martensiteï¼‰ã‚’å¾—ã‚‹ãŸã‚ã®æœ€é©ãªç†±å‡¦ç†æ¡ä»¶ã‚’è¨­è¨ˆã§ãã‚‹</li>
<li>âœ… TTT/CCTå›³ã‚’ç”¨ã„ã¦ã€Cooling Rateã¨æœ€çµ‚Microstructureã®é–¢ä¿‚ã‚’äºˆæ¸¬ã§ãã‚‹</li>
<li>âœ… åˆé‡‘å…ƒç´ ï¼ˆMnã€Crã€Niãªã©ï¼‰ã®æ·»åŠ ãŒã€TransformationTemperatureã¨Microstructureã«ä¸ãˆã‚‹å½±éŸ¿ã‚’å®šé‡çš„ã«è©•ä¾¡ã§ãã‚‹</li>
<li>âœ… CALPHADæ³•ã‚’æ´»ç”¨ã—ã¦ã€å¤šå…ƒç³»åˆé‡‘ã®ç›¸å¹³è¡¡ã¨TransformationæŒ™å‹•ã‚’Calculationã§ãã‚‹</li>
</ul>
<p><strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</strong>:</p>
<p>ç›¸Transformationã®åŸºç¤ã‚’ç¿’å¾—ã—ãŸã‚‰ã€ç¬¬3ç« ã€ŒPrecipitationã¨å›ºæº¶ã€ã«é€²ã¿ã€æ™‚åŠ¹ç¡¬åŒ–ã‚„Precipitationå¼·åŒ–ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚ç›¸Transformationã¨Precipitationç¾è±¡ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šè¤‡é›‘ãªææ–™è¨­è¨ˆãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>
</section>
<!-- å‚è€ƒæ–‡çŒ® -->
<section class="references">
<h2>ğŸ“š å‚è€ƒæ–‡çŒ®</h2>
<ol>
<li>Porter, D.A., Easterling, K.E., Sherif, M.Y. (2009). <em>Phase Transformations in Metals and Alloys</em> (3rd ed.). CRC Press. ISBN: 978-1420062106</li>
<li>Bhadeshia, H.K.D.H., Honeycombe, R.W.K. (2017). <em>Steels: Microstructure and Properties</em> (4th ed.). Butterworth-Heinemann. ISBN: 978-0081002704</li>
<li>Krauss, G. (2015). <em>Steels: Processing, Structure, and Performance</em> (2nd ed.). ASM International. ISBN: 978-1627080897</li>
<li>Lukas, H.L., Fries, S.G., Sundman, B. (2007). <em>Computational Thermodynamics: The Calphad Method</em>. Cambridge University Press. ISBN: 978-0521868112</li>
<li>Andrews, K.W. (1965). "Empirical Formulae for the Calculation of Some Transformation Temperatures." <em>Journal of the Iron and Steel Institute</em>, 203(7), 721-727.</li>
<li>Avrami, M. (1939). "Kinetics of Phase Change. I: General Theory." <em>Journal of Chemical Physics</em>, 7(12), 1103-1112. <a href="https://doi.org/10.1063/1.1750380" target="_blank">DOI:10.1063/1.1750380</a></li>
<li>ASM International (1991). <em>ASM Handbook, Volume 4: Heat Treating</em>. ASM International. ISBN: 978-0871703798</li>
<li>Hillert, M. (2008). <em>Phase Equilibria, Phase Diagrams and Phase Transformations: Their Thermodynamic Basis</em> (2nd ed.). Cambridge University Press. ISBN: 978-0521853514</li>
</ol>
<h3>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒªã‚½ãƒ¼ã‚¹</h3>
<ul>
<li><strong>CALPHADCalculationãƒ„ãƒ¼ãƒ«</strong>: Pycalphad - Python library for CALPHAD calculations (<a href="https://pycalphad.org/" target="_blank">https://pycalphad.org/</a>)</li>
<li><strong>ç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</strong>: SGTE - Scientific Group Thermodata Europe (<a href="https://www.sgte.net/" target="_blank">https://www.sgte.net/</a>)</li>
<li><strong>TTT/CCTå›³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</strong>: MatWeb - Materials Property Database (<a href="https://www.matweb.com/" target="_blank">https://www.matweb.com/</a>)</li>
<li><strong>Fe-CPhase diagram</strong>: Interactive Phase Diagrams (<a href="https://www.tf.uni-kiel.de/matwis/amat/iss/kap_6/illustr/s6_1_2.html" target="_blank">University of Kiel</a>)</li>
</ul>
</section>
<div class="navigation">
<a class="nav-button" href="chapter-1.html">â† å‰ã®ç« ï¼šçµæ™¶ç²’ã¨ç²’ç•Œ</a>
<a class="nav-button" href="chapter-3.html">æ¬¡ã®ç« ï¼šPrecipitationã¨å›ºæº¶ â†’</a>
</div>
</main>
<section class="disclaimer">
<h3>Disclaimer</h3>
<ul>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯æ•™è‚²ãƒ»ç ”ç©¶ãƒ»æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„asãŠã‚Šã€å°‚é–€çš„ãªåŠ©è¨€(æ³•å¾‹ãƒ»ä¼šè¨ˆãƒ»æŠ€è¡“çš„ä¿è¨¼ãªã©)ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŠã‚ˆã³ä»˜éšã™ã‚‹ã‚³ãƒ¼ãƒ‰Exampleã¯ã€Œç¾çŠ¶æœ‰å§¿(AS IS)ã€ã§æä¾›ã•ã‚Œã€æ˜ç¤ºã¾ãŸã¯é»™ç¤ºã‚’å•ã‚ãšã€å•†å“æ€§ã€ç‰¹å®šç›®çš„é©åˆæ€§ã€æ¨©åˆ©éä¾µå®³ã€æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã€å‹•ä½œãƒ»å®‰å…¨æ€§ç­‰ã„ã‹ãªã‚‹ä¿è¨¼ã‚‚ã—ã¾ã›ã‚“ã€‚</li>
<li>å¤–éƒ¨ãƒªãƒ³ã‚¯ã€ç¬¬ä¸‰è€…ãŒæä¾›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã®å†…å®¹ãƒ»å¯ç”¨æ€§ãƒ»å®‰å…¨æ€§aboutã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ãƒ»Executionãƒ»è§£é‡ˆbyç›´æ¥çš„ãƒ»é–“æ¥çš„ãƒ»ä»˜éšçš„ãƒ»ç‰¹åˆ¥ãƒ»Resultçš„ãƒ»æ‡²ç½°çš„æå®³ãŒç”Ÿã˜ãŸå ´åˆã§ã‚‚ã€é©ç”¨æ³•ã§è¨±å®¹ã•ã‚Œã‚‹æœ€å¤§é™ã®ç¯„å›²ã§ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å†…å®¹ã¯ã€äºˆå‘Šãªãå¤‰æ›´ãƒ»æ›´æ–°ãƒ»æä¾›åœæ­¢ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‘—ä½œæ¨©ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯æ˜è¨˜ã•ã‚ŒãŸæ¡ä»¶(Example: CC BY 4.0)ã«å¾“ã„ã¾ã™ã€‚å½“è©²ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯é€šå¸¸ã€ç„¡ä¿è¨¼æ¡é …ã‚’å«ã¿ã¾ã™ã€‚</li>
</ul>
</section>
<footer>
<p><strong>ä½œæˆè€…</strong>: MS Knowledge Hub Content Team</p>
<p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.0 | <strong>ä½œæˆæ—¥</strong>: 2025-10-28</p>
<p><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0</p>
<p>Â© 2025 MS Terakoya. All rights reserved.</p>
</footer>
</body>
</html>
