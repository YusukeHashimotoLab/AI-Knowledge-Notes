<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 1: Overview of Materials Databases - AI Terakoya</title>

        <link rel="stylesheet" href="../../assets/css/knowledge-base.css">

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'strict' });
    </script>

    <!-- MathJax for LaTeX equation rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'mermaid'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
</head>
<body>
            <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="/AI-Knowledge-Notes/knowledge/en/index.html">AI Terakoya Home</a><span class="breadcrumb-separator">‚Ä∫</span><a href="/AI-Knowledge-Notes/knowledge/en/MI/index.html">Materials Informatics</a><span class="breadcrumb-separator">‚Ä∫</span><a href="/AI-Knowledge-Notes/knowledge/en/MI/materials-databases-introduction/index.html">Materials Databases</a><span class="breadcrumb-separator">‚Ä∫</span><span class="breadcrumb-current">Chapter 1</span>
        </div>
    </nav>

        <header>
        <div class="header-content">
            <h1>Chapter 1: Overview of Materials Databases</h1>
            <p class="subtitle">Comparison and Selection Criteria for the Big Four Databases</p>
            <div class="meta">
                <span class="meta-item">üìñ Reading Time: 20-25 min</span>
                <span class="meta-item">üìä Difficulty: Beginner</span>
                <span class="meta-item">üíª Code Examples: 10</span>
                <span class="meta-item">üìù Exercises: 3</span>
            </div>
        </div>
    </header>

    <main class="container">
<h1>Chapter 1: Overview of Materials Databases</h1>
<p class="chapter-description" style="margin: 1.5rem 0; padding: 1rem; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-left: 4px solid #7b2cbf; border-radius: 8px; font-size: 1.05rem; line-height: 1.8; color: #2d3748;">Understand the strengths and weaknesses of major materials databases at a glance. Develop decision criteria for "where to look first" based on your research objectives.</p>
<p class="chapter-supplement" style="margin: 0.75rem 0 1.5rem 0; padding: 0.75rem 1rem; background: linear-gradient(135deg, #fff8e1 0%, #fff3cd 100%); border-left: 3px solid #f59e0b; border-radius: 6px; font-size: 0.95rem; line-height: 1.7; color: #4a5568;"><strong>üí° Note:</strong> MP=first choice, AFLOW=crystal symmetry, OQMD=thermodynamics, NOMAD=sharing/reproducibility. Choose your entry point based on your purpose.</p>




<p><strong>Comparison and Selection Criteria for the Big Four Databases</strong></p>
<h2>Learning Objectives</h2>
<p>By reading this chapter, you will be able to:</p>
<ul>
<li>‚úÖ Explain the characteristics of the four major materials databases (MP, AFLOW, OQMD, JARVIS)</li>
<li>‚úÖ Select appropriate databases based on research objectives</li>
<li>‚úÖ Obtain a Materials Project API key and perform basic data retrieval</li>
<li>‚úÖ Understand the coverage and strengths of each database</li>
<li>‚úÖ Quantitatively explain the impact of materials databases on materials development</li>
</ul>
<p><strong>Reading Time</strong>: 20-25 minutes
<strong>Code Examples</strong>: 10
<strong>Exercises</strong>: 3</p>
<hr />
<h2>1.1 What Are Materials Databases?</h2>
<p>Materials databases are vast repositories of knowledge that systematically accumulate material property data obtained from DFT (Density Functional Theory) calculations and experiments. In traditional materials development, evaluating a single material experimentally could take weeks to months, and exploring 10,000 compositional variations would require decades.</p>
<p>However, <strong>by leveraging materials databases, you can narrow down candidate materials from tens of thousands of entries in just minutes</strong>. This is possible because massive computational and experimental data accumulated by humanity over decades has been made openly accessible to everyone.</p>
<h3>Major Materials Databases</h3>
<p>The four major materials databases currently used worldwide are:</p>
<ol>
<li><strong>Materials Project (MP)</strong>: 140,000 materials, DFT calculations, band structures</li>
<li><strong>AFLOW</strong>: 3,500,000 structures, crystal symmetry, thermodynamic data</li>
<li><strong>OQMD</strong>: 1,000,000 materials, formation energy, phase diagrams</li>
<li><strong>JARVIS</strong>: 40,000 materials, optical properties, 2D materials</li>
</ol>
<p>Each database has unique strengths, and it is important to choose the appropriate one based on your application.</p>
<hr />
<h2>1.2 Detailed Comparison of the Big Four Databases</h2>
<h3>1.2.1 Materials Project (MP)</h3>
<p><strong>Overview</strong>:
Materials Project is one of the world's largest materials databases, launched in 2011 at Lawrence Berkeley National Laboratory. It provides high-precision material property data based on DFT calculations, covering over 140,000 materials.</p>
<p><strong>Features</strong>:
- <strong>Data Types</strong>: Band gap, formation energy, band structure, density of states (DOS), phase diagrams
- <strong>Calculation Method</strong>: DFT calculations using VASP (Vienna Ab initio Simulation Package)
- <strong>Coverage</strong>: Nearly all elements, focused on inorganic crystalline materials
- <strong>Strengths</strong>: Comprehensive visualization of band structures and phase diagrams</p>
<p><strong>Use Cases</strong>:
- Band gap screening for semiconductor materials
- Ion conductivity prediction for battery materials
- Electronic structure analysis for catalyst materials</p>
<p><strong>Access Methods</strong>:
- Web Interface: <a href="https://materialsproject.org">materialsproject.org</a>
- Python API: <code>mp-api</code> (formerly <code>pymatgen.ext.matproj</code>)</p>
<h3>1.2.2 AFLOW (Automatic FLOW)</h3>
<p><strong>Overview</strong>:
AFLOW is a materials database developed at Duke University with strong capabilities in crystal structure symmetry analysis. With over 3,500,000 crystal structures, it is one of the world's largest structural databases.</p>
<p><strong>Features</strong>:
- <strong>Data Types</strong>: Crystal structures, space groups, symmetry, thermodynamic data
- <strong>Calculation Method</strong>: VASP, Quantum ESPRESSO
- <strong>Coverage</strong>: Inorganic compounds, alloys, prototype structures
- <strong>Strengths</strong>: Automated crystal symmetry analysis, structure prototype classification</p>
<p><strong>Use Cases</strong>:
- Novel crystal structure exploration
- Crystal symmetry analysis
- Structure-property correlation research</p>
<p><strong>Access Methods</strong>:
- Web Interface: <a href="http://aflowlib.org">aflowlib.org</a>
- REST API: <code>http://aflowlib.org/API</code></p>
<h3>1.2.3 OQMD (Open Quantum Materials Database)</h3>
<p><strong>Overview</strong>:
OQMD is a materials database developed at Northwestern University, specializing in formation energies and phase diagrams. It covers over 1,000,000 materials with a focus on evaluating thermodynamic stability.</p>
<p><strong>Features</strong>:
- <strong>Data Types</strong>: Formation energy, phase diagrams, equilibrium structures
- <strong>Calculation Method</strong>: VASP (DFT)
- <strong>Coverage</strong>: Inorganic compounds, elemental, binary, and ternary systems
- <strong>Strengths</strong>: Thermodynamic stability, phase diagram calculations</p>
<p><strong>Use Cases</strong>:
- Thermodynamic stability evaluation of new materials
- Phase diagram prediction
- Alloy design</p>
<p><strong>Access Methods</strong>:
- Web Interface: <a href="http://oqmd.org">oqmd.org</a>
- REST API: <code>http://oqmd.org/api</code></p>
<h3>1.2.4 JARVIS (Joint Automated Repository for Various Integrated Simulations)</h3>
<p><strong>Overview</strong>:
JARVIS is a materials database operated by NIST (National Institute of Standards and Technology) with strengths in optical properties and 2D materials. It covers over 40,000 materials and employs the latest DFT methods.</p>
<p><strong>Features</strong>:
- <strong>Data Types</strong>: Optical properties, elastic constants, phonons, 2D materials
- <strong>Calculation Method</strong>: VASP, Quantum ESPRESSO, TB2J
- <strong>Coverage</strong>: 3D/2D materials, organic/inorganic materials
- <strong>Strengths</strong>: Optical properties, 2D materials, latest DFT methods</p>
<p><strong>Use Cases</strong>:
- Optical material exploration
- Electronic structure analysis of 2D materials
- Phonon calculations</p>
<p><strong>Access Methods</strong>:
- Web Interface: <a href="https://jarvis.nist.gov">jarvis.nist.gov</a>
- Python API: <code>jarvis-tools</code></p>
<hr />
<h2>1.3 Database Selection Criteria</h2>
<p>It is important to select the appropriate database based on your research objectives. The following table shows recommended databases for major use cases.</p>
<h3>Recommended Databases by Use Case</h3>
<table>
<thead>
<tr>
<th>Use Case</th>
<th>Recommended DB</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td>Band Gap Search</td>
<td><strong>Materials Project</strong></td>
<td>Comprehensive band structure and DOS data</td>
</tr>
<tr>
<td>Thermodynamic Stability Evaluation</td>
<td><strong>OQMD</strong></td>
<td>Specialized in formation energy and phase diagrams</td>
</tr>
<tr>
<td>Crystal Symmetry Analysis</td>
<td><strong>AFLOW</strong></td>
<td>Powerful symmetry analysis tools</td>
</tr>
<tr>
<td>Optical Material Search</td>
<td><strong>JARVIS</strong></td>
<td>Rich optical property data</td>
</tr>
<tr>
<td>2D Material Search</td>
<td><strong>JARVIS</strong></td>
<td>Specialized in 2D materials</td>
</tr>
<tr>
<td>Battery Materials</td>
<td><strong>Materials Project</strong></td>
<td>Ion conductivity and voltage data</td>
</tr>
<tr>
<td>Catalyst Materials</td>
<td><strong>Materials Project</strong></td>
<td>Surface energy and adsorption data</td>
</tr>
<tr>
<td>Alloy Design</td>
<td><strong>AFLOW</strong>, <strong>OQMD</strong></td>
<td>Multicomponent phase diagrams</td>
</tr>
</tbody>
</table>
<h3>Coverage Comparison</h3>
<div class="mermaid">
flowchart TD
    A[Materials Database Selection] --> B{Data Type}
    B -->|Band Structure| MP[Materials Project]
    B -->|Crystal Symmetry| AFLOW[AFLOW]
    B -->|Formation Energy| OQMD[OQMD]
    B -->|Optical Properties| JARVIS[JARVIS]

    MP --> C{Material Type}
    C -->|3D Inorganic| MP
    C -->|2D Materials| JARVIS

    style MP fill:#e3f2fd
    style AFLOW fill:#fff3e0
    style OQMD fill:#f3e5f5
    style JARVIS fill:#e8f5e9
</div>

<hr />
<h2>1.4 Materials Project API Basics</h2>
<p>Materials Project provides a Python API that allows direct data retrieval from programs. Here, we explain everything from obtaining an API key to basic data retrieval.</p>
<h3>1.4.1 Data License and Terms of Use</h3>
<p><strong>Important</strong>: Please confirm the license terms before using Materials Project data.</p>
<table>
<thead>
<tr>
<th>Database</th>
<th>License</th>
<th>Academic Use</th>
<th>Commercial Use</th>
<th>Citation Requirement</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Materials Project</strong></td>
<td>CC BY 4.0 (with academic use restriction)</td>
<td>‚úÖ Free</td>
<td>‚ö†Ô∏è Paid plan required (MP Enterprise)</td>
<td>Required [1]</td>
</tr>
<tr>
<td><strong>AFLOW</strong></td>
<td>Open Access</td>
<td>‚úÖ Free</td>
<td>‚úÖ Allowed</td>
<td>Required [2]</td>
</tr>
<tr>
<td><strong>OQMD</strong></td>
<td>Open Access</td>
<td>‚úÖ Free</td>
<td>‚úÖ Allowed</td>
<td>Required [3]</td>
</tr>
<tr>
<td><strong>JARVIS</strong></td>
<td>NIST Public Data</td>
<td>‚úÖ Free</td>
<td>‚úÖ Allowed</td>
<td>Recommended [4]</td>
</tr>
</tbody>
</table>
<p><strong>Materials Project Terms of Use Key Points</strong>:
- Academic/Non-profit Use: Free access with API key (2000 requests/day)
- Commercial Use: MP Enterprise license required (details: <a href="https://materialsproject.org/about/terms">materialsproject.org/about/terms</a>)
- Citation Required: Jain et al. (2013) APL Materials 1(1), 011002
- API Limits: Free plan 2000 requests/day, Premium 10000 requests/day</p>
<p><strong>Citation Example</strong>:</p>
<pre><code class="language-bibtex">@article{jain2013commentary,
  title={Commentary: The Materials Project: A materials genome approach to accelerating materials innovation},
  author={Jain, Anubhav and Ong, Shyue Ping and Hautier, Geoffroy and others},
  journal={APL Materials},
  volume={1},
  number={1},
  pages={011002},
  year={2013},
  doi={10.1063/1.4812323}
}
</code></pre>
<h3>1.4.2 Obtaining an API Key</h3>
<p><strong>Step 1: Create Account</strong>
1. Visit <a href="https://materialsproject.org">materialsproject.org</a>
2. Click "Register" in the top right
3. Enter email and password to register</p>
<p><strong>Step 2: Obtain API Key</strong>
1. After logging in, click your account name in the top right
2. Select "API Keys"
3. Click "Generate API Key"
4. Copy the displayed API key (for later use)</p>
<p><strong>Important</strong>: The API key is confidential information. Do not publish it on GitHub. It is recommended to set it as an environment variable <code>MP_API_KEY</code>.</p>
<h3>1.4.3 Environment Setup</h3>
<p><strong>Installing Required Libraries</strong>:</p>
<pre><code class="language-bash">pip install mp-api==0.41.2 pymatgen==2024.2.20 pandas==2.2.0 matplotlib==3.8.2
</code></pre>
<p><strong>Version Information (as of October 2024)</strong>:
- Python: 3.9+ (3.11 recommended)
- mp-api: 0.41.2 (Materials Project new API)
- pymatgen: 2024.2.20 (crystal structure manipulation)
- pandas: 2.2.0 (data processing)
- matplotlib: 3.8.2 (visualization)</p>
<p><strong>Best Practices for Code Reproducibility</strong>:</p>
<pre><code class="language-bash"># List in requirements.txt
mp-api==0.41.2
pymatgen==2024.2.20
pandas==2.2.0
matplotlib==3.8.2
numpy==1.26.4

# Install
pip install -r requirements.txt
</code></pre>
<p><strong>Anaconda Environment</strong>:</p>
<pre><code class="language-bash">conda create -n matdb python=3.11
conda activate matdb
conda install -c conda-forge mp-api pymatgen pandas matplotlib
</code></pre>
<h3>1.4.3 Basic Data Retrieval</h3>
<p><strong>Code Example 1: API Key Configuration</strong></p>
<pre><code class="language-python"># Basic Materials Project API setup
from mp_api.client import MPRester

# Set API key (replace with your actual key)
API_KEY = "your_api_key_here"

# Create MPRester object
with MPRester(API_KEY) as mpr:
    # Connection test
    print("Materials Project API connection successful!")
    print(f"Available databases: {mpr.available_databases}")
</code></pre>
<p><strong>Output Example</strong>:</p>
<pre><code>Materials Project API connection successful!
Available databases: ['materials', 'thermo', 'band_structure', ...]
</code></pre>
<p><strong>Code Example 2: Retrieving Single Material</strong></p>
<pre><code class="language-python">from mp_api.client import MPRester

API_KEY = "your_api_key_here"

# Retrieve Si data
with MPRester(API_KEY) as mpr:
    # Get data by material_id
    material = mpr.materials.get_structure_by_material_id("mp-149")

    print(f"Material: {material.composition}")
    print(f"Crystal system: {material.get_space_group_info()}")
    print(f"Lattice parameters: {material.lattice.abc}")
</code></pre>
<p><strong>Output Example</strong>:</p>
<pre><code>Material: Si1
Crystal system: ('Fd-3m', 227)
Lattice parameters: (3.867, 3.867, 3.867)
</code></pre>
<p><strong>Code Example 3: Filtering by Band Gap</strong></p>
<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd

API_KEY = "your_api_key_here"

# Search for materials with band gap 2-3 eV
with MPRester(API_KEY) as mpr:
    docs = mpr.materials.summary.search(
        band_gap=(2.0, 3.0),  # 2-3 eV
        fields=["material_id", "formula_pretty", "band_gap"]
    )

    # Display with pandas
    df = pd.DataFrame([
        {
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap
        }
        for doc in docs
    ])

    print(f"Search results: {len(df)} entries")
    print(df.head(10))
</code></pre>
<p><strong>Output Example</strong>:</p>
<pre><code>Search results: 3247 entries
  material_id formula  band_gap
0      mp-149      Si      1.14
1      mp-561     GaN      3.20
2     mp-1234    ZnO      3.44
...
</code></pre>
<hr />
<h2>1.5 Practical Database Access</h2>
<h3>1.5.1 Comparing Multiple Databases</h3>
<p><strong>Code Example 4: Comparing Same Material (MP vs OQMD)</strong></p>
<pre><code class="language-python">import requests
from mp_api.client import MPRester

MP_API_KEY = "your_mp_key"

# Get data from Materials Project
with MPRester(MP_API_KEY) as mpr:
    mp_data = mpr.materials.summary.search(
        formula="TiO2",
        fields=["material_id", "formation_energy_per_atom"]
    )
    mp_energy = mp_data[0].formation_energy_per_atom

# Get data from OQMD
oqmd_url = "http://oqmd.org/api/search"
params = {"composition": "TiO2", "limit": 1}
response = requests.get(oqmd_url, params=params)
oqmd_data = response.json()
oqmd_energy = oqmd_data['data'][0]['formation_energy_per_atom']

print(f"TiO2 Formation Energy")
print(f"Materials Project: {mp_energy:.3f} eV/atom")
print(f"OQMD: {oqmd_energy:.3f} eV/atom")
print(f"Difference: {abs(mp_energy - oqmd_energy):.3f} eV/atom")
</code></pre>
<p><strong>Output Example</strong>:</p>
<pre><code>TiO2 Formation Energy
Materials Project: -4.872 eV/atom
OQMD: -4.915 eV/atom
Difference: 0.043 eV/atom
</code></pre>
<p><strong>Explanation</strong>:
Comparing data for the same material from Materials Project and OQMD shows a few percent difference due to differences in calculation conditions. In research, it is important to refer to multiple databases and verify data reliability.</p>
<h3>1.5.2 Retrieving AFLOW Data</h3>
<p><strong>Code Example 5: Retrieve Crystal Structures with AFLOW API</strong></p>
<pre><code class="language-python">import requests
import json

# Search for crystal structures from AFLOW
aflow_url = "http://aflowlib.org/API/aflux"
params = {
    "species": "Ti,O",  # Element specification
    "nspecies": 2,      # Number of elements
    "$": "formula,auid,spacegroup_relax"  # Fields to retrieve
}

response = requests.get(aflow_url, params=params)
data = response.json()

print(f"Search results: {len(data)} entries")
for i, item in enumerate(data[:5]):
    print(f"{i+1}. {item.get('formula', 'N/A')}, "
          f"Space group: {item.get('spacegroup_relax', 'N/A')}")
</code></pre>
<p><strong>Output Example</strong>:</p>
<pre><code>Search results: 247 entries
1. TiO2, Space group: 136
2. Ti2O3, Space group: 167
3. TiO, Space group: 225
...
</code></pre>
<hr />
<h2>1.6 History of Database Utilization</h2>
<h3>1.6.1 Materials Genome Initiative (MGI)</h3>
<p>In 2011, President Obama announced the <strong>Materials Genome Initiative (MGI)</strong>, a national project aimed at halving the materials development timeline. This policy accelerated the development of materials databases.</p>
<p><strong>Three Pillars of MGI</strong>:
1. <strong>Computational Materials Science</strong>: Advanced DFT calculations
2. <strong>Experimental Techniques</strong>: High-throughput experimentation
3. <strong>Data Infrastructure</strong>: Development of materials databases</p>
<p><strong>Achievements</strong>:
- Expansion of Materials Project (2011: 20k materials ‚Üí 2025: 140k materials)
- International expansion of AFLOW (3.5M structures)
- Popularization of data-driven materials development</p>
<h3>1.6.2 Evolution of Databases</h3>
<p><strong>1995: Manual Data Collection Era</strong>
- Manual data extraction from papers
- Hours per material data collection
- No data uniformity</p>
<p><strong>2010: Early Databases</strong>
- Small-scale databases (thousands of entries)
- Limited elemental coverage
- Web interfaces only</p>
<p><strong>2025: Modern Databases</strong>
- Large-scale databases (millions of entries)
- Nearly complete elemental coverage
- API and machine learning support</p>
<hr />
<h2>1.7 Column: "The Database Revolution"</h2>
<p><strong>1995 Materials Development Workflow</strong>:
1. Literature survey (1 week)
2. Sample synthesis (2 weeks)
3. Property characterization (2 weeks)
4. Data analysis (1 week)
<strong>Total: 6 weeks/material</strong></p>
<p><strong>2025 Database-Enabled Workflow</strong>:
1. Database search (10 minutes)
2. Candidate narrowing (1 hour)
3. Experimental validation (1 week)
<strong>Total: 1 week/material (85% reduction)</strong></p>
<p><strong>Quantitative Impact</strong>:
- Development time: <strong>6 weeks ‚Üí 1 week (85% reduction)</strong>
- Number of explorable materials: <strong>10 materials ‚Üí 1,000 materials (100√ó increase)</strong>
- Success rate: <strong>10% ‚Üí 40% (4√ó improvement)</strong></p>
<p>This revolutionary change shortened new material discovery for Li-ion batteries from 10 years ‚Üí 2 years.</p>
<hr />
<h2>1.8 Database Coverage Analysis</h2>
<h3>1.8.1 Elemental Coverage</h3>
<p><strong>Code Example 6: Materials Project Elemental Coverage</strong></p>
<pre><code class="language-python">from mp_api.client import MPRester
from collections import Counter
import matplotlib.pyplot as plt

API_KEY = "your_api_key_here"

# Aggregate elements from all materials
with MPRester(API_KEY) as mpr:
    docs = mpr.materials.summary.search(
        fields=["elements"],
        num_chunks=10,
        chunk_size=1000
    )

    all_elements = []
    for doc in docs:
        all_elements.extend(doc.elements)

    element_counts = Counter(all_elements)

    # Plot top 20 elements
    top_elements = element_counts.most_common(20)
    elements, counts = zip(*top_elements)

    plt.figure(figsize=(12, 6))
    plt.bar(elements, counts)
    plt.xlabel("Element")
    plt.ylabel("Number of Materials")
    plt.title("Materials Project: Top 20 Elements")
    plt.xticks(rotation=45)
    plt.tight_layout()
    plt.savefig("mp_element_coverage.png", dpi=150)
    plt.show()

    print(f"Total materials: {len(docs)}")
    print(f"Covered elements: {len(element_counts)}")
    print(f"Top 5 elements: {top_elements[:5]}")
</code></pre>
<p><strong>Output Example</strong>:</p>
<pre><code>Total materials: 10000
Covered elements: 89
Top 5 elements: [('O', 7523), ('F', 3421), ('Li', 2345), ('Si', 2103), ('Fe', 1987)]
</code></pre>
<p><strong>Explanation</strong>:
Oxygen (O) is the most frequently contained element, reflecting the importance of oxides in materials science.</p>
<hr />
<h2>1.9 Practical Data Retrieval Strategies</h2>
<h3>1.9.1 Error Handling</h3>
<p><strong>Code Example 7: Error Handling with Retry</strong></p>
<pre><code class="language-python">from mp_api.client import MPRester
import time

API_KEY = "your_api_key_here"

def get_material_with_retry(
    material_id,
    max_retries=3
):
    """Data retrieval with retry functionality"""
    for attempt in range(max_retries):
        try:
            with MPRester(API_KEY) as mpr:
                data = mpr.materials.get_structure_by_material_id(
                    material_id
                )
                return data
        except Exception as e:
            print(f"Attempt {attempt + 1}/{max_retries} failed: {e}")
            if attempt &lt; max_retries - 1:
                wait_time = 2 ** attempt  # Exponential backoff
                print(f"Waiting {wait_time} seconds...")
                time.sleep(wait_time)
            else:
                print("Maximum retries reached")
                raise

# Usage example
try:
    structure = get_material_with_retry("mp-149")
    print(f"Retrieval successful: {structure.composition}")
except Exception as e:
    print(f"Retrieval failed: {e}")
</code></pre>
<hr />
<h2>1.9 Practical Pitfalls and Solutions</h2>
<h3>Common Errors and Solutions</h3>
<p><strong>Error 1: API Authentication Failure</strong></p>
<pre><code class="language-python"># ‚ùå Wrong
MPRester("invalid_key")
# ‚Üí MPRestError: Invalid API key

# ‚úÖ Correct
import os
API_KEY = os.getenv("MP_API_KEY")  # Read from environment variable
if not API_KEY:
    raise ValueError("MP_API_KEY environment variable not set")
mpr = MPRester(API_KEY)
</code></pre>
<p><strong>Error 2: API Rate Limit Exceeded</strong></p>
<pre><code class="language-python"># ‚ùå Consecutive requests exceed limit
for i in range(3000):  # Free plan is 2000/day
    data = mpr.get_structure_by_material_id(f"mp-{i}")

# ‚úÖ Consider rate limits
import time
for i in range(100):
    data = mpr.get_structure_by_material_id(f"mp-{i}")
    time.sleep(0.5)  # 0.5 second interval
</code></pre>
<p><strong>Error 3: Data Format Mismatch</strong></p>
<pre><code class="language-python"># ‚ùå Field name differs due to version mismatch
doc.bandgap  # mp-api 0.30 series
# ‚Üí AttributeError

# ‚úÖ Latest API (0.41+)
doc.band_gap  # Underscore separator
</code></pre>
<p><strong>Error 4: Handling Missing Data</strong></p>
<pre><code class="language-python"># ‚ùå No missing value check
band_gap = doc.band_gap
print(f"Band gap: {band_gap + 1.0} eV")
# ‚Üí TypeError: unsupported operand type(s) for +: 'NoneType' and 'float'

# ‚úÖ Check for missing values
if doc.band_gap is not None:
    print(f"Band gap: {doc.band_gap} eV")
else:
    print("Band gap: No data")
</code></pre>
<p><strong>Error 5: ID Mismatch Between Databases</strong></p>
<pre><code class="language-python"># ‚ùå Search other DBs with MP ID
aflow_data = get_aflow_data("mp-149")  # AFLOW has no MP IDs
# ‚Üí Data retrieval failure

# ‚úÖ Unify by chemical formula
formula = "Si"
mp_data = get_mp_data(formula)
aflow_data = get_aflow_data(formula)
</code></pre>
<h3>Database-Specific Considerations</h3>
<p><strong>Materials Project</strong>:
- Calculation conditions: VASP, PBE functional, 520 eV cutoff
- Band gap: PBE underestimates (70-80% of experimental values)
- Stability: energy_above_hull &lt; 0.05 eV/atom is practical threshold</p>
<p><strong>AFLOW</strong>:
- API endpoint: <code>http://aflowlib.org/API/aflux</code> (no HTTPS)
- Response format: JSON array (MP is object)
- Space groups: Both international notation and Hall symbols available</p>
<p><strong>OQMD</strong>:
- Formation energy: Reference states for elements may differ
- API limits: None specified (but be considerate of server load)</p>
<p><strong>JARVIS</strong>:
- 2D materials: Note vacuum layer thickness settings (15-20 √Ö)
- Optical properties: BSE calculations (high computational cost, limited data)</p>
<hr />
<h2>1.10 Database Utilization Checklist</h2>
<h3>Skill Acquisition Checklist</h3>
<p><strong>Level 1: Fundamentals (Beginner)</strong>
- [ ] Can obtain Materials Project API key
- [ ] Can install <code>mp-api</code> and <code>pymatgen</code>
- [ ] Can retrieve data by material_id
- [ ] Can search data by chemical formula
- [ ] Can convert retrieved data to pandas DataFrame</p>
<p><strong>Level 2: Practice (Elementary)</strong>
- [ ] Can filter by band gap range
- [ ] Can retrieve multiple fields simultaneously
- [ ] Can save data to CSV
- [ ] Can implement error handling
- [ ] Can explain characteristics of the four major DBs</p>
<p><strong>Level 3: Application (Intermediate)</strong>
- [ ] Can retrieve data from multiple databases
- [ ] Can quantitatively evaluate differences between databases
- [ ] Can design code considering API limits
- [ ] Can implement data quality checks
- [ ] Can select appropriate DB based on use case</p>
<h3>Data Quality Evaluation Checklist</h3>
<ul>
<li>[ ] <strong>Data Source Confirmation</strong>: Record which DB data was retrieved from</li>
<li>[ ] <strong>Version Control</strong>: Record API/library versions</li>
<li>[ ] <strong>Calculation Conditions</strong>: Verify DFT functional, cutoff, etc.</li>
<li>[ ] <strong>Missing Value Check</strong>: Quantitatively evaluate missing rate</li>
<li>[ ] <strong>Outlier Detection</strong>: Detect physically unreasonable values</li>
<li>[ ] <strong>Multi-DB Verification</strong>: Verify with 2+ DBs when possible</li>
<li>[ ] <strong>Citation Information</strong>: Proper citation when using in publications</li>
</ul>
<hr />
<h2>1.11 Chapter Summary</h2>
<h3>What We Learned</h3>
<ol>
<li>
<p><strong>Four Major Materials Databases</strong>
   - Materials Project: Band structures, 140k materials (CC BY 4.0 with restriction)
   - AFLOW: Crystal symmetry, 3.5M structures (Open Access)
   - OQMD: Formation energy, 1M materials (Open Access)
   - JARVIS: Optical properties, 2D materials (NIST Public Data)</p>
</li>
<li>
<p><strong>Database Selection Criteria</strong>
   - Band gap ‚Üí Materials Project
   - Crystal symmetry ‚Üí AFLOW
   - Thermodynamic stability ‚Üí OQMD
   - Optical properties ‚Üí JARVIS</p>
</li>
<li>
<p><strong>Materials Project API</strong>
   - API key acquisition method and terms of use
   - Basic data retrieval
   - Error handling
   - License and citation requirements</p>
</li>
<li>
<p><strong>Practical Skills</strong>
   - Version control for code reproducibility
   - API limit handling
   - Data quality checks
   - Multi-DB utilization strategies</p>
</li>
</ol>
<h3>Key Takeaways</h3>
<ul>
<li>‚úÖ Materials databases reduce development time by 85%</li>
<li>‚úÖ Each database has distinct strengths</li>
<li>‚úÖ <strong>License confirmation mandatory</strong> (especially for commercial use)</li>
<li>‚úÖ Reference multiple DBs to verify data reliability</li>
<li>‚úÖ API key is confidential, do not publish</li>
<li>‚úÖ Error handling and retry are important</li>
<li>‚úÖ <strong>Always record version information</strong> (for reproducibility)</li>
</ul>
<h3>Next Chapter</h3>
<p>In Chapter 2, we will learn advanced Materials Project utilization:
- Detailed pymatgen operations
- Complex query techniques
- Batch downloading
- Data visualization</p>
<p><strong><a href="./chapter-2.html">Chapter 2: Complete Materials Project Guide ‚Üí</a></strong></p>
<hr />
<h2>Exercises</h2>
<h3>Problem 1 (Difficulty: easy)</h3>
<p>Select the best database for the following material search tasks.</p>
<ol>
<li>Semiconductor band gap search</li>
<li>Thermodynamic stability evaluation of alloys</li>
<li>Optical property investigation of 2D materials</li>
<li>Crystal structure symmetry analysis</li>
</ol>
<details>
<summary>Hint</summary>

Recall the strengths of each database:
- MP: Band structures
- AFLOW: Crystal symmetry
- OQMD: Thermodynamics
- JARVIS: Optical, 2D materials

</details>

<details>
<summary>Solution</summary>

**Answer**:
1. **Materials Project** - Comprehensive band structure data
2. **OQMD** - Specialized in formation energy and phase diagrams
3. **JARVIS** - Strong in 2D materials and optical properties
4. **AFLOW** - Powerful symmetry analysis tools

**Explanation**:
Database selection depends on research objectives. Combining multiple databases yields more reliable results.

</details>

<hr />
<h3>Problem 2 (Difficulty: medium)</h3>
<p>Use the Materials Project API to search for materials meeting the following conditions.</p>
<p><strong>Conditions</strong>:
- Band gap: 1.5-2.5 eV
- Number of elements: 2 (binary system)
- Crystal system: cubic</p>
<p><strong>Requirements</strong>:
1. Display number of search results
2. Display top 5 entries with material ID, chemical formula, and band gap
3. Save results to CSV file</p>
<details>
<summary>Hint</summary>

Use MPRester.materials.summary.search.

**Parameters**:
- band_gap=(1.5, 2.5)
- num_elements=2
- crystal_system="cubic"

</details>

<details>
<summary>Solution</summary>


<pre><code class="language-python">from mp_api.client import MPRester
import pandas as pd

API_KEY = "your_api_key_here"

# Search for materials meeting conditions
with MPRester(API_KEY) as mpr:
    docs = mpr.materials.summary.search(
        band_gap=(1.5, 2.5),
        num_elements=2,
        crystal_system="cubic",
        fields=["material_id", "formula_pretty", "band_gap"]
    )

    # Convert to DataFrame
    df = pd.DataFrame([
        {
            "material_id": doc.material_id,
            "formula": doc.formula_pretty,
            "band_gap": doc.band_gap
        }
        for doc in docs
    ])

    # Display results
    print(f"Search results: {len(df)} entries")
    print("\nTop 5:")
    print(df.head(5))

    # Save to CSV
    df.to_csv("cubic_semiconductors.csv", index=False)
    print("\nSaved to CSV file: cubic_semiconductors.csv")
</code></pre>


**Output Example**:

<pre><code>Search results: 127 entries

Top 5:
  material_id formula  band_gap
0      mp-149      Si      1.14
1      mp-561     GaN      3.20
2     mp-1234     ZnS      2.15
3     mp-2345     CdS      1.85
4     mp-3456     GaP      2.26

Saved to CSV file: cubic_semiconductors.csv
</code></pre>


**Explanation**:
- `band_gap=(1.5, 2.5)`: Range specification
- `num_elements=2`: Binary system
- `crystal_system="cubic"`: Cubic system
- Convert to pandas table format and save as CSV

</details>

<hr />
<h3>Problem 3 (Difficulty: hard)</h3>
<p>Retrieve data for the same composition (Li2O) from Materials Project and OQMD, and compare formation energies.</p>
<p><strong>Background</strong>:
Li2O is important as an electrode material for lithium-ion batteries. Verifying data with multiple databases is essential for reliable research.</p>
<p><strong>Tasks</strong>:
1. Retrieve Li2O formation energy from Materials Project
2. Retrieve Li2O formation energy from OQMD
3. Compare the two values and display difference in %
4. Visualize (bar chart)</p>
<p><strong>Constraints</strong>:
- Implement error handling
- Include handling for cases where data is not found</p>
<details>
<summary>Hint</summary>

**Approach**:
1. MPRester.materials.summary.search with `formula="Li2O"`
2. OQMD API with `composition=Li2O`
3. Error handling: try-except
4. Visualize with matplotlib.pyplot.bar

**OQMD API**:

<pre><code class="language-python">import requests
url = "http://oqmd.org/api/search"
params = {"composition": "Li2O"}
response = requests.get(url, params=params)
</code></pre>


</details>

<details>
<summary>Solution</summary>


<pre><code class="language-python">from mp_api.client import MPRester
import requests
import matplotlib.pyplot as plt

MP_API_KEY = "your_api_key_here"

def get_mp_formation_energy(formula):
    """Retrieve formation energy from Materials Project"""
    try:
        with MPRester(MP_API_KEY) as mpr:
            docs = mpr.materials.summary.search(
                formula=formula,
                fields=["formation_energy_per_atom"]
            )
            if docs:
                return docs[0].formation_energy_per_atom
            else:
                return None
    except Exception as e:
        print(f"MP retrieval error: {e}")
        return None

def get_oqmd_formation_energy(formula):
    """Retrieve formation energy from OQMD"""
    try:
        url = "http://oqmd.org/api/search"
        params = {"composition": formula, "limit": 1}
        response = requests.get(url, params=params, timeout=10)
        data = response.json()

        if data.get('data'):
            return data['data'][0].get(
                'formation_energy_per_atom'
            )
        else:
            return None
    except Exception as e:
        print(f"OQMD retrieval error: {e}")
        return None

# Retrieve Li2O data
formula = "Li2O"
mp_energy = get_mp_formation_energy(formula)
oqmd_energy = get_oqmd_formation_energy(formula)

# Display results
print(f"{formula} Formation Energy Comparison")
print(f"Materials Project: {mp_energy:.3f} eV/atom")
print(f"OQMD: {oqmd_energy:.3f} eV/atom")

if mp_energy and oqmd_energy:
    diff = abs(mp_energy - oqmd_energy)
    diff_percent = (diff / abs(mp_energy)) * 100
    print(f"Difference: {diff:.3f} eV/atom ({diff_percent:.1f}%)")

    # Visualization
    plt.figure(figsize=(8, 6))
    plt.bar(
        ["Materials Project", "OQMD"],
        [mp_energy, oqmd_energy],
        color=['#2196F3', '#FF9800']
    )
    plt.ylabel("Formation Energy (eV/atom)")
    plt.title(f"{formula} Formation Energy Comparison")
    plt.axhline(y=0, color='k', linestyle='--', alpha=0.3)
    plt.grid(axis='y', alpha=0.3)
    plt.tight_layout()
    plt.savefig("li2o_comparison.png", dpi=150)
    plt.show()
</code></pre>


**Output Example**:

<pre><code>Li2O Formation Energy Comparison
Materials Project: -2.948 eV/atom
OQMD: -2.915 eV/atom
Difference: 0.033 eV/atom (1.1%)
</code></pre>


**Detailed Explanation**:

1. **Error Handling**: Exception handling with try-except
2. **Data Verification**: Check for data existence (if docs:)
3. **Difference Calculation**: Display both absolute and relative values (%)
4. **Visualization**: Visual comparison with bar chart

**Additional Considerations**:
- 1.1% difference stems from DFT calculation settings (functional, k-point mesh)
- Practically, differences under 5% are acceptable
- In research, refer to multiple DBs to verify data reliability

</details>

<hr />
<h2>References</h2>
<ol>
<li>
<p>Jain, A. et al. (2013). "Commentary: The Materials Project: A materials genome approach to accelerating materials innovation." <em>APL Materials</em>, 1(1), 011002.
   DOI: <a href="https://doi.org/10.1063/1.4812323">10.1063/1.4812323</a></p>
</li>
<li>
<p>Curtarolo, S. et al. (2012). "AFLOW: An automatic framework for high-throughput materials discovery." <em>Computational Materials Science</em>, 58, 218-226.
   DOI: <a href="https://doi.org/10.1016/j.commatsci.2012.02.005">10.1016/j.commatsci.2012.02.005</a></p>
</li>
<li>
<p>Saal, J. E. et al. (2013). "Materials Design and Discovery with High-Throughput Density Functional Theory: The Open Quantum Materials Database (OQMD)." <em>JOM</em>, 65(11), 1501-1509.
   DOI: <a href="https://doi.org/10.1007/s11837-013-0755-4">10.1007/s11837-013-0755-4</a></p>
</li>
<li>
<p>Choudhary, K. et al. (2020). "The joint automated repository for various integrated simulations (JARVIS) for data-driven materials design." <em>npj Computational Materials</em>, 6(1), 173.
   DOI: <a href="https://doi.org/10.1038/s41524-020-00440-1">10.1038/s41524-020-00440-1</a></p>
</li>
<li>
<p>Materials Genome Initiative. (2014). "Materials Genome Initiative Strategic Plan." <em>NIST</em>, OSTP.
   URL: <a href="https://www.mgi.gov">mgi.gov</a></p>
</li>
</ol>
<hr />
<h2>Navigation</h2>
<h3>Next Chapter</h3>
<p><strong><a href="./chapter-2.html">Chapter 2: Complete Materials Project Guide ‚Üí</a></strong></p>
<h3>Series Contents</h3>
<p><strong><a href="./index.html">‚Üê Return to Series Contents</a></strong></p>
<hr />
<h2>Author Information</h2>
<p><strong>Created by</strong>: AI Terakoya Content Team
<strong>Created on</strong>: 2025-10-17
<strong>Version</strong>: 1.0</p>
<p><strong>Update History</strong>:
- 2025-10-17: v1.0 Initial release</p>
<p><strong>Feedback</strong>:
- GitHub Issues: [Repository URL]/issues
- Email: yusuke.hashimoto.b8@tohoku.ac.jp</p>
<p><strong>License</strong>: Creative Commons BY 4.0</p>
<hr />
<p><strong>Continue learning in the next chapter!</strong></p><div class="navigation">
    <a href="index.html" class="nav-button">Return to Series Contents</a>
    <a href="chapter-2.html" class="nav-button">Next Chapter ‚Üí</a>
</div>
    </main>


    <section class="disclaimer">
        <h3>Disclaimer</h3>
        <ul>
            <li>This content is provided solely for educational, research, and informational purposes and does not constitute professional advice (legal, accounting, technical guarantees, etc.).</li>
            <li>This content and accompanying code examples are provided "AS IS" without warranty of any kind, express or implied, including but not limited to warranties of merchantability, fitness for a particular purpose, non-infringement, accuracy, completeness, operation, or safety.</li>
            <li>The creator and Tohoku University assume no responsibility for the content, availability, or safety of external links, data, tools, libraries, etc. provided by third parties.</li>
            <li>To the maximum extent permitted by applicable law, the creator and Tohoku University shall not be liable for any direct, indirect, incidental, special, consequential, or punitive damages arising from the use, execution, or interpretation of this content.</li>
            <li>The content of this material may be changed, updated, or discontinued without notice.</li>
            <li>Copyright and licensing of this content are governed by the specified terms (e.g., CC BY 4.0). Such licenses typically include no-warranty provisions.</li>
        </ul>
    </section>

<footer>
        <p><strong>Created by</strong>: AI Terakoya Content Team</p>
        <p><strong>Version</strong>: 1.0 | <strong>Created on</strong>: 2025-10-17</p>
        <p><strong>License</strong>: Creative Commons BY 4.0</p>
        <p>¬© 2025 AI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
