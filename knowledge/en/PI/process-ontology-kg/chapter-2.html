<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Chapter 2ï¼šProcessOntologyã®è¨­è¨ˆã¨OWLãƒ¢ãƒ‡ãƒªãƒ³ã‚° - owlready2ã«ã‚ˆã‚‹åŒ–å­¦Processè£…ç½®ã®åŒ…æ‹¬çš„Ontologyæ§‹ç¯‰">
    <title>Chapter 2ï¼šProcessOntologyã®è¨­è¨ˆã¨OWLãƒ¢ãƒ‡ãƒªãƒ³ã‚° - ProcessOntologyå…¥é–€ | PI Knowledge Hub</title>

        <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.8; color: #333; background: #f5f5f5;
        }
        header {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; padding: 2rem 1rem; text-align: center;
        }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        .subtitle { opacity: 0.9; font-size: 1.1rem; }
        .container { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
        .back-link {
            display: inline-block; margin-bottom: 2rem; padding: 0.5rem 1rem;
            background: white; color: #11998e; text-decoration: none;
            border-radius: 6px; font-weight: 600;
        }
        .content-box {
            background: white; padding: 2rem; border-radius: 12px;
            margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h2 {
            color: #11998e; margin: 2rem 0 1rem 0;
            padding-bottom: 0.5rem; border-bottom: 3px solid #11998e;
        }
        h3 { color: #2c3e50; margin: 1.5rem 0 1rem 0; }
        h4 { color: #2c3e50; margin: 1rem 0 0.5rem 0; }
        p { margin-bottom: 1rem; }
        ul, ol { margin-left: 2rem; margin-bottom: 1rem; }
        li { margin-bottom: 0.5rem; }
        pre {
            background: #1e1e1e; color: #d4d4d4; padding: 1.5rem;
            border-radius: 8px; overflow-x: auto; margin: 1rem 0;
            border-left: 4px solid #11998e;
        }
        code {
            font-family: 'Courier New', monospace; font-size: 0.9rem;
        }
        .key-point {
            background: #e8f5e9; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #4caf50; margin: 1rem 0;
        }
        .tech-note {
            background: #e3f2fd; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #2196f3; margin: 1rem 0;
        }
        .formula {
            background: #f0f7ff; padding: 1rem; border-radius: 6px;
            margin: 1rem 0; overflow-x: auto;
        }
        table {
            width: 100%; border-collapse: collapse; margin: 1rem 0;
        }
        th, td {
            border: 1px solid #ddd; padding: 0.75rem; text-align: left;
        }
        th {
            background: #11998e; color: white; font-weight: 600;
        }
        tr:nth-child(even) { background: #f9f9f9; }
        .nav-buttons {
            display: flex; justify-content: space-between; margin-top: 3rem;
        }
        .nav-buttons a {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; text-decoration: none; border-radius: 6px;
            font-weight: 600;
        }
        footer {
            background: #2c3e50; color: white; text-align: center;
            padding: 2rem 1rem; margin-top: 4rem;
        }
        @media (max-width: 768px) {
            h1 { font-size: 1.6rem; }
            .container { padding: 0 0.5rem; }
            pre { padding: 1rem; }
        }
    
        
    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>

    <!-- Mermaid for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
            <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="../../index.html">AI Terakoya Top</a><span class="breadcrumb-separator">â€º</span><a href="../../PI/index.html">Process Informatics</a><span class="breadcrumb-separator">â€º</span><a href="../../PI/process-ontology-kg/index.html">Process Ontology Kg</a><span class="breadcrumb-separator">â€º</span><span class="breadcrumb-current">Chapter 2</span>
        </div>
    </nav>

        <header>
        <div class="container">
            <h1>Chapter 2ï¼šProcessOntologyã®è¨­è¨ˆã¨OWLãƒ¢ãƒ‡ãƒªãƒ³ã‚°</h1>
            <p class="subtitle">owlready2ã«ã‚ˆã‚‹åŒ–å­¦Processè£…ç½®ã®åŒ…æ‹¬çš„Ontologyæ§‹ç¯‰</p>
            <div class="meta">
                <span class="meta">ğŸ“– Reading Time: 35-40 minutes</span>
                <span class="meta">ğŸ’» Code Examples: 7</span>
                <span class="meta">ğŸ“Š Difficulty: Advanced</span>
            </div>
        </div>
    </header>

    <main class="container">
        <section>
            <h2>2.1 OWLï¼ˆWeb Ontology Languageï¼‰ã®åŸºç¤</h2>

            <p>OWLã¯RDFSã‚’æ‹¡å¼µã—ã€ã‚ˆã‚Šè¡¨ç¾åŠ›ã®é«˜ã„Ontologyã‚’è¨˜è¿°ã§ãã‚‹æ¨™æº–è¨€èªã§ã™ã€‚åŒ–å­¦Processè£…ç½®ã®è¤‡é›‘ãªé–¢ä¿‚æ€§ã€åˆ¶ç´„æ¡ä»¶ã€æ¨è«–ãƒ«ãƒ¼ãƒ«ã‚’å½¢å¼çš„ã«å®šç¾©ã§ãã¾ã™ã€‚</p>

            <div class="info-box">
                <p><strong>ğŸ’¡ OWLã®3ã¤ã®ã‚µãƒ–è¨€èª</strong></p>
                <ul>
                    <li><strong>OWL Lite</strong>: åŸºæœ¬çš„ãªéšå±¤æ§‹é€ ã¨ã‚·ãƒ³ãƒ—ãƒ«ãªåˆ¶ç´„</li>
                    <li><strong>OWL DL</strong>: è¨˜è¿°è«–ç†ãƒ™ãƒ¼ã‚¹ã€æ¨è«–å¯èƒ½æ€§ã‚’ä¿è¨¼ï¼ˆæœ¬ Seriesã§ä½¿ç”¨ï¼‰</li>
                    <li><strong>OWL Full</strong>: æœ€å¤§ã®è¡¨ç¾åŠ›ã ãŒæ¨è«–ã¯ä¿è¨¼ã•ã‚Œãªã„</li>
                </ul>
            </div>

            <h3>Example 1: owlready2ã«ã‚ˆã‚‹OWLã‚¯ãƒ©ã‚¹ã¨ä½“ã®å®šç¾©</h3>
            <p>åŒ–å­¦Processè£…ç½®ã®åŸºæœ¬ã‚¯ãƒ©ã‚¹éšå±¤ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚</p>

<pre><code># ===================================
# Example 1: OWLã‚¯ãƒ©ã‚¹ã¨ä½“ã®å®šç¾©
# ===================================

from owlready2 import *

# Ontologyã®ä½œæˆ
onto = get_ontology("http://example.org/process.owl")

with onto:
    # ===== ã‚¯ãƒ©ã‚¹å®šç¾© =====

    # æœ€ä¸Šä½ã‚¯ãƒ©ã‚¹: ProcessEquipment
    class ProcessEquipment(Thing):
        """Processè£…ç½®ã®åŸºåº•ã‚¯ãƒ©ã‚¹"""
        pass

    # ã‚µãƒ–ã‚¯ãƒ©ã‚¹: Reactorï¼ˆåå¿œå™¨ï¼‰
    class Reactor(ProcessEquipment):
        """åå¿œå™¨ã‚¯ãƒ©ã‚¹"""
        pass

    # ã•ã‚‰ã«è©³ç´°ãªã‚µãƒ–ã‚¯ãƒ©ã‚¹: CSTRï¼ˆé€£ç¶šæ’¹æ‹Œæ§½å‹åå¿œå™¨ï¼‰
    class CSTR(Reactor):
        """é€£ç¶šæ’¹æ‹Œæ§½å‹åå¿œå™¨"""
        pass

    # ã‚µãƒ–ã‚¯ãƒ©ã‚¹: HeatExchangerï¼ˆç†±äº¤æ›å™¨ï¼‰
    class HeatExchanger(ProcessEquipment):
        """ç†±äº¤æ›å™¨ã‚¯ãƒ©ã‚¹"""
        pass

    # ã‚µãƒ–ã‚¯ãƒ©ã‚¹: Separatorï¼ˆ minutesé›¢è£…ç½®ï¼‰
    class Separator(ProcessEquipment):
        """ minutesé›¢è£…ç½®ã‚¯ãƒ©ã‚¹"""
        pass

    # ===== ä½“ï¼ˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼‰ã®ä½œæˆ =====

    # CSTRåå¿œå™¨R-101
    r101 = CSTR("R-101")
    r101.label = ["é€£ç¶šæ’¹æ‹Œæ§½å‹åå¿œå™¨R-101"]
    r101.comment = ["ä¸»è¦åå¿œå™¨ã€ã‚¨ã‚¹ãƒ†ãƒ«åŒ–åå¿œç”¨"]

    # ç†±äº¤æ›å™¨HX-201
    hx201 = HeatExchanger("HX-201")
    hx201.label = ["å†·å´å™¨HX-201"]

    #  minutesé›¢å™¨SEP-301
    sep301 = Separator("SEP-301")
    sep301.label = ["æ°—æ¶² minutesé›¢å™¨SEP-301"]

# Ontologyã®ä¿å­˜
onto.save(file="process_ontology_v1.owl", format="rdfxml")

# ===== ã‚¯ãƒ©ã‚¹éšå±¤ã®å¯è¦–åŒ– =====
print("=== ã‚¯ãƒ©ã‚¹éšå±¤ ===")
for cls in onto.classes():
    if cls != Thing:
        ancestors = list(cls.ancestors())
        ancestors.remove(cls)
        ancestors.remove(Thing)
        if ancestors:
            print(f"{cls.name} âŠ‚ {ancestors[0].name}")
        else:
            print(f"{cls.name} (ãƒˆãƒƒãƒ—Level)")

print("\n=== ä½“ä¸€è¦§ ===")
for individual in onto.individuals():
    print(f"- {individual.name}: {individual.__class__.name}")
    if individual.label:
        print(f"  ãƒ©ãƒ™ãƒ«: {individual.label[0]}")

print(f"\nâœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v1.owl")
print(f"ç·ã‚¯ãƒ©ã‚¹æ•°: {len(list(onto.classes()))}")
print(f"ç·ä½“æ•°: {len(list(onto.individuals()))}")
</code></pre>

            <div class="example-output">
                <strong>å‡ºåŠ›ä¾‹:</strong><br>
                === ã‚¯ãƒ©ã‚¹éšå±¤ ===<br>
                ProcessEquipment (ãƒˆãƒƒãƒ—Level)<br>
                Reactor âŠ‚ ProcessEquipment<br>
                CSTR âŠ‚ Reactor<br>
                HeatExchanger âŠ‚ ProcessEquipment<br>
                Separator âŠ‚ ProcessEquipment<br>
                <br>
                === ä½“ä¸€è¦§ ===<br>
                - R-101: CSTR<br>
                &nbsp;&nbsp;ãƒ©ãƒ™ãƒ«: é€£ç¶šæ’¹æ‹Œæ§½å‹åå¿œå™¨R-101<br>
                - HX-201: HeatExchanger<br>
                &nbsp;&nbsp;ãƒ©ãƒ™ãƒ«: å†·å´å™¨HX-201<br>
                - SEP-301: Separator<br>
                &nbsp;&nbsp;ãƒ©ãƒ™ãƒ«: æ°—æ¶² minutesé›¢å™¨SEP-301<br>
                <br>
                âœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v1.owl<br>
                ç·ã‚¯ãƒ©ã‚¹æ•°: 5<br>
                ç·ä½“æ•°: 3
            </div>
        </section>

        <section>
            <h2>2.2 ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆObject Propertiesï¼‰</h2>

            <p>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€è£…ç½®é–“ã®æ¥ç¶šé–¢ä¿‚ã‚„Processãƒ•ãƒ­ãƒ¼ã‚’è¡¨ç¾ã—ã¾ã™ã€‚</p>

            <h3>Example 2: è£…ç½®æ¥ç¶šé–¢ä¿‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾©</h3>
            <p>è£…ç½®é–“ã®å…¥å‡ºåŠ›æ¥ç¶šã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§è¡¨ç¾ã—ã¾ã™ã€‚</p>

<pre><code># ===================================
# Example 2: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾©
# ===================================

from owlready2 import *

onto = get_ontology("http://example.org/process.owl")

with onto:
    # ===== ã‚¯ãƒ©ã‚¹å®šç¾© =====
    class ProcessEquipment(Thing):
        pass

    class Reactor(ProcessEquipment):
        pass

    class HeatExchanger(ProcessEquipment):
        pass

    class Stream(Thing):
        """ç‰©è³ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚¯ãƒ©ã‚¹"""
        pass

    # ===== ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾© =====

    # hasInput: è£…ç½®ã¸ã®å…¥åŠ›ã‚¹ãƒˆãƒªãƒ¼ãƒ 
    class hasInput(ProcessEquipment >> Stream):
        """è£…ç½®ã¸ã®å…¥åŠ›ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ç¤ºã™"""
        pass

    # hasOutput: è£…ç½®ã‹ã‚‰ã®å‡ºåŠ›ã‚¹ãƒˆãƒªãƒ¼ãƒ 
    class hasOutput(ProcessEquipment >> Stream):
        """è£…ç½®ã‹ã‚‰ã®å‡ºåŠ›ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ç¤ºã™"""
        pass

    # connectedTo: è£…ç½®é–“ã®æ¥ç¶šï¼ˆå¯¾ç§°æ€§ã‚ã‚Šï¼‰
    class connectedTo(ProcessEquipment >> ProcessEquipment, SymmetricProperty):
        """è£…ç½®é–“ã®ç‰©ç†çš„æ¥ç¶šã‚’ç¤ºã™ï¼ˆå¯¾ç§°çš„ï¼‰"""
        pass

    # feedsTo: ä¸Šæµã‹ã‚‰ä¸‹æµã¸ã®æ¥ç¶šï¼ˆæ¨ç§»æ€§ã‚ã‚Šï¼‰
    class feedsTo(ProcessEquipment >> ProcessEquipment, TransitiveProperty):
        """ä¸Šæµè£…ç½®ã‹ã‚‰ä¸‹æµè£…ç½®ã¸ã®æµã‚Œã‚’ç¤ºã™ï¼ˆæ¨ç§»çš„ï¼‰"""
        pass

    # ===== ä½“ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¨­å®š =====

    # ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ä½œæˆ
    s1 = Stream("S-001")
    s1.label = ["åŸæ–™ãƒ•ã‚£ãƒ¼ãƒ‰"]

    s2 = Stream("S-002")
    s2.label = ["åå¿œç”Ÿæˆç‰©"]

    s3 = Stream("S-003")
    s3.label = ["å†·å´å¾Œç”Ÿæˆç‰©"]

    # è£…ç½®ã®ä½œæˆ
    r101 = Reactor("R-101")
    hx201 = HeatExchanger("HX-201")

    # ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¨­å®š
    r101.hasInput = [s1]
    r101.hasOutput = [s2]

    hx201.hasInput = [s2]
    hx201.hasOutput = [s3]

    # è£…ç½®é–“æ¥ç¶š
    r101.connectedTo = [hx201]
    r101.feedsTo = [hx201]

# ===== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ¤œè¨¼ =====
print("=== Processãƒ•ãƒ­ãƒ¼ ===")
print(f"{r101.name} â†’ hasInput â†’ {r101.hasInput[0].name}")
print(f"{r101.name} â†’ hasOutput â†’ {r101.hasOutput[0].name}")
print(f"{hx201.name} â†’ hasInput â†’ {hx201.hasInput[0].name}")

print("\n=== è£…ç½®æ¥ç¶š ===")
print(f"{r101.name} â†’ connectedTo â†’ {r101.connectedTo[0].name}")
print(f"{r101.name} â†’ feedsTo â†’ {r101.feedsTo[0].name}")

# å¯¾ç§°æ€§ã®ç¢ºèª
print(f"\nå¯¾ç§°æ€§ç¢ºèª: {hx201.name} â†’ connectedTo â†’ {hx201.connectedTo}")

onto.save(file="process_ontology_v2.owl", format="rdfxml")
print("\nâœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v2.owl")
</code></pre>

            <div class="example-output">
                <strong>å‡ºåŠ›ä¾‹:</strong><br>
                === Processãƒ•ãƒ­ãƒ¼ ===<br>
                R-101 â†’ hasInput â†’ S-001<br>
                R-101 â†’ hasOutput â†’ S-002<br>
                HX-201 â†’ hasInput â†’ S-002<br>
                <br>
                === è£…ç½®æ¥ç¶š ===<br>
                R-101 â†’ connectedTo â†’ HX-201<br>
                R-101 â†’ feedsTo â†’ HX-201<br>
                <br>
                å¯¾ç§°æ€§ç¢ºèª: HX-201 â†’ connectedTo â†’ [process.R-101]<br>
                <br>
                âœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v2.owl
            </div>

            <h3>Example 3: ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆæ¸©åº¦ãƒ»åœ§åŠ›ãƒ»æµé‡ï¼‰</h3>
            <p>Processå¤‰æ•°ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§è¡¨ç¾ã—ã¾ã™ã€‚</p>

<pre><code># ===================================
# Example 3: ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾©
# ===================================

from owlready2 import *

onto = get_ontology("http://example.org/process.owl")

with onto:
    class ProcessEquipment(Thing):
        pass

    class Reactor(ProcessEquipment):
        pass

    # ===== ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾© =====

    # hasTemperature: æ¸©åº¦ [K]
    class hasTemperature(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]
        label = ["æ¸©åº¦"]
        comment = ["è£…ç½®ã®é‹è»¢æ¸©åº¦ï¼ˆå˜ä½: Kï¼‰"]

    # hasPressure: åœ§åŠ› [bar]
    class hasPressure(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]
        label = ["åœ§åŠ›"]
        comment = ["è£…ç½®ã®é‹è»¢åœ§åŠ›ï¼ˆå˜ä½: barï¼‰"]

    # hasVolume: å®¹ç© [m3]
    class hasVolume(DataProperty, FunctionalProperty):
        domain = [Reactor]
        range = [float]
        label = ["å®¹ç©"]

    # hasFlowRate: æµé‡ [kg/h]
    class hasFlowRate(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]
        label = ["æµé‡"]

    # hasEfficiency: åŠ¹ç‡ [%]
    class hasEfficiency(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]
        label = ["åŠ¹ç‡"]

    # ===== ä½“ã¸ã®å€¤è¨­å®š =====

    # CSTRåå¿œå™¨R-101
    r101 = Reactor("R-101")
    r101.label = ["CSTRåå¿œå™¨"]
    r101.hasTemperature = [350.0]  # 350 K (ç´„77Â°C)
    r101.hasPressure = [5.0]       # 5 bar
    r101.hasVolume = [10.0]        # 10 m3
    r101.hasFlowRate = [1000.0]    # 1000 kg/h
    r101.hasEfficiency = [92.5]    # 92.5%

    # PFRåå¿œå™¨R-102
    r102 = Reactor("R-102")
    r102.label = ["ç®¡å‹åå¿œå™¨"]
    r102.hasTemperature = [420.0]  # 420 K (ç´„147Â°C)
    r102.hasPressure = [8.0]       # 8 bar
    r102.hasVolume = [5.0]         # 5 m3
    r102.hasFlowRate = [800.0]     # 800 kg/h

# ===== ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å–å¾— =====
print("=== åå¿œå™¨R-101ã®é‹è»¢æ¡ä»¶ ===")
print(f"æ¸©åº¦: {r101.hasTemperature[0]} K ({r101.hasTemperature[0] - 273.15:.1f}Â°C)")
print(f"åœ§åŠ›: {r101.hasPressure[0]} bar")
print(f"å®¹ç©: {r101.hasVolume[0]} mÂ³")
print(f"æµé‡: {r101.hasFlowRate[0]} kg/h")
print(f"åŠ¹ç‡: {r101.hasEfficiency[0]}%")

print("\n=== åå¿œå™¨R-102ã®é‹è»¢æ¡ä»¶ ===")
print(f"æ¸©åº¦: {r102.hasTemperature[0]} K ({r102.hasTemperature[0] - 273.15:.1f}Â°C)")
print(f"åœ§åŠ›: {r102.hasPressure[0]} bar")
print(f"å®¹ç©: {r102.hasVolume[0]} mÂ³")
print(f"æµé‡: {r102.hasFlowRate[0]} kg/h")

onto.save(file="process_ontology_v3.owl", format="rdfxml")
print("\nâœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v3.owl")
</code></pre>

            <div class="example-output">
                <strong>å‡ºåŠ›ä¾‹:</strong><br>
                === åå¿œå™¨R-101ã®é‹è»¢æ¡ä»¶ ===<br>
                æ¸©åº¦: 350.0 K (76.9Â°C)<br>
                åœ§åŠ›: 5.0 bar<br>
                å®¹ç©: 10.0 mÂ³<br>
                æµé‡: 1000.0 kg/h<br>
                åŠ¹ç‡: 92.5%<br>
                <br>
                === åå¿œå™¨R-102ã®é‹è»¢æ¡ä»¶ ===<br>
                æ¸©åº¦: 420.0 K (146.9Â°C)<br>
                åœ§åŠ›: 8.0 bar<br>
                å®¹ç©: 5.0 mÂ³<br>
                æµé‡: 800.0 kg/h<br>
                <br>
                âœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v3.owl
            </div>
        </section>

        <section>
            <h2>2.3 ã‚¯ãƒ©ã‚¹éšå±¤ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åˆ¶ç´„</h2>

            <h3>Example 4: è©³ç´°ãªã‚¯ãƒ©ã‚¹éšå±¤æ§‹ç¯‰</h3>
            <p>è£…ç½®ã‚¿ã‚¤ãƒ—ã®è©³ç´°ãª minutesé¡éšå±¤ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚</p>

<pre><code># ===================================
# Example 4: è©³ç´°ãªã‚¯ãƒ©ã‚¹éšå±¤
# ===================================

from owlready2 import *

onto = get_ontology("http://example.org/process.owl")

with onto:
    # ===== éšå±¤çš„ã‚¯ãƒ©ã‚¹å®šç¾© =====

    class ProcessEquipment(Thing):
        """Processè£…ç½®ï¼ˆåŸºåº•ã‚¯ãƒ©ã‚¹ï¼‰"""
        pass

    # åå¿œå™¨ç³»çµ±
    class Reactor(ProcessEquipment):
        """åå¿œå™¨"""
        pass

    class CSTR(Reactor):
        """é€£ç¶šæ’¹æ‹Œæ§½å‹åå¿œå™¨"""
        pass

    class PFR(Reactor):
        """ç®¡å‹åå¿œå™¨ï¼ˆãƒ—ãƒ©ã‚°ãƒ•ãƒ­ãƒ¼ï¼‰"""
        pass

    class BatchReactor(Reactor):
        """ãƒãƒƒãƒåå¿œå™¨"""
        pass

    # ç†±äº¤æ›å™¨ç³»çµ±
    class HeatExchanger(ProcessEquipment):
        """ç†±äº¤æ›å™¨"""
        pass

    class ShellTubeHX(HeatExchanger):
        """ã‚·ã‚§ãƒ«&ãƒãƒ¥ãƒ¼ãƒ–å‹ç†±äº¤æ›å™¨"""
        pass

    class PlateHX(HeatExchanger):
        """ãƒ—ãƒ¬ãƒ¼ãƒˆå‹ç†±äº¤æ›å™¨"""
        pass

    #  minutesé›¢è£…ç½®ç³»çµ±
    class Separator(ProcessEquipment):
        """ minutesé›¢è£…ç½®"""
        pass

    class DistillationColumn(Separator):
        """è’¸ç•™å¡”"""
        pass

    class Absorber(Separator):
        """å¸åå¡”"""
        pass

    class Extractor(Separator):
        """æŠ½å‡ºå™¨"""
        pass

    # ãƒãƒ³ãƒ—ãƒ»åœ§ç¸®æ©Ÿç³»çµ±
    class FluidMover(ProcessEquipment):
        """æµä½“ç§»é€æ©Ÿå™¨"""
        pass

    class Pump(FluidMover):
        """ãƒãƒ³ãƒ—"""
        pass

    class Compressor(FluidMover):
        """åœ§ç¸®æ©Ÿ"""
        pass

# ===== ã‚¯ãƒ©ã‚¹éšå±¤ã®å¯è¦–åŒ–ï¼ˆMermaidç”¨ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼‰ =====
print("=== ã‚¯ãƒ©ã‚¹éšå±¤ãƒ„ãƒªãƒ¼ ===")

def print_class_tree(cls, indent=0):
    """å†å¸°çš„ã«ã‚¯ãƒ©ã‚¹éšå±¤ã‚’è¡¨ç¤º"""
    if cls != Thing:
        print("  " * indent + f"â”œâ”€ {cls.name}")
        for subclass in cls.subclasses():
            print_class_tree(subclass, indent + 1)

print_class_tree(ProcessEquipment)

# å„ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®çµ±è¨ˆ
print("\n=== è£…ç½®ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ã‚¯ãƒ©ã‚¹æ•° ===")
categories = {
    "Reactor": len(list(Reactor.descendants())),
    "HeatExchanger": len(list(HeatExchanger.descendants())),
    "Separator": len(list(Separator.descendants())),
    "FluidMover": len(list(FluidMover.descendants()))
}

for cat, count in categories.items():
    print(f"{cat}: {count}ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹")

onto.save(file="process_ontology_v4.owl", format="rdfxml")
print("\nâœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v4.owl")
</code></pre>

            <div class="example-output">
                <strong>å‡ºåŠ›ä¾‹:</strong><br>
                === ã‚¯ãƒ©ã‚¹éšå±¤ãƒ„ãƒªãƒ¼ ===<br>
                â”œâ”€ ProcessEquipment<br>
                &nbsp;&nbsp;â”œâ”€ Reactor<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ CSTR<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ PFR<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ BatchReactor<br>
                &nbsp;&nbsp;â”œâ”€ HeatExchanger<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ ShellTubeHX<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ PlateHX<br>
                &nbsp;&nbsp;â”œâ”€ Separator<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ DistillationColumn<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ Absorber<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ Extractor<br>
                &nbsp;&nbsp;â”œâ”€ FluidMover<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ Pump<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ Compressor<br>
                <br>
                === è£…ç½®ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ã‚¯ãƒ©ã‚¹æ•° ===<br>
                Reactor: 3ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹<br>
                HeatExchanger: 2ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹<br>
                Separator: 3ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹<br>
                FluidMover: 2ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹<br>
                <br>
                âœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v4.owl
            </div>

            <div class="tip-box">
                <p><strong>ğŸ’¡ ã‚¯ãƒ©ã‚¹è¨­è¨ˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</strong></p>
                <p>è£…ç½® minutesé¡ã¯æ©Ÿèƒ½åˆ¥ï¼ˆåå¿œã€ minutesé›¢ã€ç†±äº¤æ›ï¼‰ã¨ã‚¿ã‚¤ãƒ—åˆ¥ï¼ˆCSTRã€PFRï¼‰ã®2è»¸ã§éšå±¤åŒ–ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Processè¨­è¨ˆæ™‚ã®è£…ç½®é¸å®šãŒä½“ç³»çš„ã«è¡Œãˆã¾ã™ã€‚</p>
            </div>

            <div class="mermaid">
graph TB
    PE[ProcessEquipment]

    PE --> R[Reactor]
    PE --> HX[HeatExchanger]
    PE --> SEP[Separator]
    PE --> FM[FluidMover]

    R --> CSTR[CSTR]
    R --> PFR[PFR]
    R --> BR[BatchReactor]

    HX --> STHX[ShellTubeHX]
    HX --> PHX[PlateHX]

    SEP --> DC[DistillationColumn]
    SEP --> ABS[Absorber]
    SEP --> EXT[Extractor]

    FM --> PUMP[Pump]
    FM --> COMP[Compressor]

    style PE fill:#11998e,color:#fff
    style R fill:#38ef7d,color:#000
    style HX fill:#38ef7d,color:#000
    style SEP fill:#38ef7d,color:#000
    style FM fill:#38ef7d,color:#000
            </div>
        </section>

        <section>
            <h2>2.4 ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åˆ¶ç´„ï¼ˆRestrictionsï¼‰</h2>

            <h3>Example 5: ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£åˆ¶ç´„ã¨å€¤åˆ¶ç´„</h3>
            <p>è£…ç½®ãŒæŒã¤ã¹ãå…¥å‡ºåŠ›æ•°ã‚„å€¤ã®ç¯„å›²ã‚’åˆ¶ç´„ã¨ã—ã¦å®šç¾©ã—ã¾ã™ã€‚</p>

<pre><code># ===================================
# Example 5: ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åˆ¶ç´„ã®å®šç¾©
# ===================================

from owlready2 import *

onto = get_ontology("http://example.org/process.owl")

with onto:
    class ProcessEquipment(Thing):
        pass

    class Stream(Thing):
        pass

    # ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾©
    class hasInput(ProcessEquipment >> Stream):
        pass

    class hasOutput(ProcessEquipment >> Stream):
        pass

    class hasTemperature(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]

    class hasPressure(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]

    # ===== åˆ¶ç´„ä»˜ãã‚¯ãƒ©ã‚¹å®šç¾© =====

    # Reactor: æœ€ä½1ã¤ã®å…¥åŠ›ã€1ã¤ã®å‡ºåŠ›ã€æ¸©åº¦ãƒ»åœ§åŠ›å¿…é ˆ
    class Reactor(ProcessEquipment):
        equivalent_to = [
            ProcessEquipment
            & hasInput.min(1, Stream)        # æœ€ä½1ã¤ã®å…¥åŠ›
            & hasOutput.min(1, Stream)       # æœ€ä½1ã¤ã®å‡ºåŠ›
            & hasTemperature.exactly(1)      # æ¸©åº¦ã¯å¿…é ˆï¼ˆ1ã¤ã®ã¿ï¼‰
            & hasPressure.exactly(1)         # åœ§åŠ›ã¯å¿…é ˆï¼ˆ1ã¤ã®ã¿ï¼‰
        ]

    # HeatExchanger: å…¥åŠ›1ã¤ã€å‡ºåŠ›1ã¤ï¼ˆå›ºå®šï¼‰
    class HeatExchanger(ProcessEquipment):
        equivalent_to = [
            ProcessEquipment
            & hasInput.exactly(1, Stream)    # å…¥åŠ›ã¯æ­£ç¢ºã«1ã¤
            & hasOutput.exactly(1, Stream)   # å‡ºåŠ›ã¯æ­£ç¢ºã«1ã¤
            & hasTemperature.exactly(1)
        ]

    # DistillationColumn: 1ã¤ã®å…¥åŠ›ã€2ã¤ä»¥ä¸Šã®å‡ºåŠ›ï¼ˆç•™å‡ºã¨ç¼¶å‡ºï¼‰
    class DistillationColumn(ProcessEquipment):
        equivalent_to = [
            ProcessEquipment
            & hasInput.exactly(1, Stream)
            & hasOutput.min(2, Stream)       # æœ€ä½2ã¤ã®å‡ºåŠ›ï¼ˆç•™å‡ºã€ç¼¶å‡ºï¼‰
        ]

    # ===== å€¤åˆ¶ç´„ä»˜ãã‚¯ãƒ©ã‚¹ =====

    # HighTemperatureReactor: æ¸©åº¦ > 400K
    class HighTemperatureReactor(Reactor):
        """é«˜æ¸©åå¿œå™¨ï¼ˆ400Kä»¥ä¸Šï¼‰"""
        pass

    # HighPressureReactor: åœ§åŠ› > 10bar
    class HighPressureReactor(Reactor):
        """é«˜åœ§åå¿œå™¨ï¼ˆ10barä»¥ä¸Šï¼‰"""
        pass

    # ===== ä½“ã®ä½œæˆã¨æ¤œè¨¼ =====

    # æœ‰åŠ¹ãªåå¿œå™¨ï¼ˆåˆ¶ç´„ã‚’æº€ãŸã™ï¼‰
    r101 = Reactor("R-101")
    s1 = Stream("S-001")
    s2 = Stream("S-002")
    r101.hasInput = [s1]
    r101.hasOutput = [s2]
    r101.hasTemperature = [450.0]  # é«˜æ¸©
    r101.hasPressure = [5.0]

    # ç†±äº¤æ›å™¨ï¼ˆåˆ¶ç´„ã‚’æº€ãŸã™ï¼‰
    hx201 = HeatExchanger("HX-201")
    s3 = Stream("S-003")
    s4 = Stream("S-004")
    hx201.hasInput = [s3]
    hx201.hasOutput = [s4]
    hx201.hasTemperature = [350.0]

# ===== åˆ¶ç´„ã®æ¤œè¨¼ =====
print("=== åå¿œå™¨R-101ã®æ¤œè¨¼ ===")
print(f"å…¥åŠ›æ•°: {len(r101.hasInput)} (æœ€ä½1ã¤å¿…è¦)")
print(f"å‡ºåŠ›æ•°: {len(r101.hasOutput)} (æœ€ä½1ã¤å¿…è¦)")
print(f"æ¸©åº¦è¨­å®š: {r101.hasTemperature[0]} K (å¿…é ˆ)")
print(f"åœ§åŠ›è¨­å®š: {r101.hasPressure[0]} bar (å¿…é ˆ)")
print("âœ“ ã™ã¹ã¦ã®åˆ¶ç´„ã‚’æº€ãŸã—ã¦ã„ã¾ã™")

print("\n=== ç†±äº¤æ›å™¨HX-201ã®æ¤œè¨¼ ===")
print(f"å…¥åŠ›æ•°: {len(hx201.hasInput)} (æ­£ç¢ºã«1ã¤å¿…è¦)")
print(f"å‡ºåŠ›æ•°: {len(hx201.hasOutput)} (æ­£ç¢ºã«1ã¤å¿…è¦)")
print("âœ“ ã™ã¹ã¦ã®åˆ¶ç´„ã‚’æº€ãŸã—ã¦ã„ã¾ã™")

onto.save(file="process_ontology_v5.owl", format="rdfxml")
print("\nâœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v5.owl")
</code></pre>

            <div class="example-output">
                <strong>å‡ºåŠ›ä¾‹:</strong><br>
                === åå¿œå™¨R-101ã®æ¤œè¨¼ ===<br>
                å…¥åŠ›æ•°: 1 (æœ€ä½1ã¤å¿…è¦)<br>
                å‡ºåŠ›æ•°: 1 (æœ€ä½1ã¤å¿…è¦)<br>
                æ¸©åº¦è¨­å®š: 450.0 K (å¿…é ˆ)<br>
                åœ§åŠ›è¨­å®š: 5.0 bar (å¿…é ˆ)<br>
                âœ“ ã™ã¹ã¦ã®åˆ¶ç´„ã‚’æº€ãŸã—ã¦ã„ã¾ã™<br>
                <br>
                === ç†±äº¤æ›å™¨HX-201ã®æ¤œè¨¼ ===<br>
                å…¥åŠ›æ•°: 1 (æ­£ç¢ºã«1ã¤å¿…è¦)<br>
                å‡ºåŠ›æ•°: 1 (æ­£ç¢ºã«1ã¤å¿…è¦)<br>
                âœ“ ã™ã¹ã¦ã®åˆ¶ç´„ã‚’æº€ãŸã—ã¦ã„ã¾ã™<br>
                <br>
                âœ“ Ontologyä¿å­˜å®Œäº†: process_ontology_v5.owl
            </div>

            <div class="warning-box">
                <p><strong>âš ï¸ åˆ¶ç´„é•åã®æ¤œå‡º</strong></p>
                <p>owlready2ã®æ¨è«–ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆPellet, HermiTï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€åˆ¶ç´„é•åã‚’è‡ªå‹•æ¤œå‡ºã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€å…¥åŠ›ã®ãªã„åå¿œå™¨ã‚„æ¸©åº¦æœªè¨­å®šã®è£…ç½®ã¯ä¸æ•´åˆã¨ã—ã¦æ¤œå‡ºã•ã‚Œã¾ã™ã€‚</p>
            </div>
        </section>

        <section>
            <h2>2.5 Processè£…ç½®ã®å®Œå…¨ãªOntology</h2>

            <h3>Example 6: å®Œå…¨ãªè£…ç½®Ontologyã®æ§‹ç¯‰</h3>
            <p>ã™ã¹ã¦ã®è¦ç´ ã‚’çµ±åˆã—ãŸåŒ…æ‹¬çš„ãªProcessè£…ç½®Ontologyã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚</p>

<pre><code># ===================================
# Example 6: å®Œå…¨ãªProcessè£…ç½®Ontology
# ===================================

from owlready2 import *
import numpy as np

onto = get_ontology("http://example.org/process.owl")

with onto:
    # ===== åŸºæœ¬ã‚¯ãƒ©ã‚¹ =====
    class ProcessEquipment(Thing):
        pass

    class Stream(Thing):
        pass

    # ===== è£…ç½®ã‚¯ãƒ©ã‚¹éšå±¤ =====
    class Reactor(ProcessEquipment):
        pass

    class CSTR(Reactor):
        pass

    class HeatExchanger(ProcessEquipment):
        pass

    class Separator(ProcessEquipment):
        pass

    class Pump(ProcessEquipment):
        pass

    # ===== ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾© =====

    # ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    class hasInput(ProcessEquipment >> Stream):
        pass

    class hasOutput(ProcessEquipment >> Stream):
        pass

    class connectedTo(ProcessEquipment >> ProcessEquipment, SymmetricProperty):
        pass

    # ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    class hasTemperature(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]

    class hasPressure(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]

    class hasFlowRate(DataProperty, FunctionalProperty):
        domain = [Stream]
        range = [float]

    class hasVolume(DataProperty, FunctionalProperty):
        domain = [Reactor]
        range = [float]

    class hasEfficiency(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]

    class hasResidenceTime(DataProperty, FunctionalProperty):
        domain = [Reactor]
        range = [float]
        comment = ["æ»ç•™ hoursï¼ˆå˜ä½: ç§’ï¼‰"]

    # ===== å®Œå…¨ãªProcessãƒ—ãƒ©ãƒ³ãƒˆã®æ§‹ç¯‰ =====

    # ã‚¹ãƒˆãƒªãƒ¼ãƒ 
    feed = Stream("Feed")
    feed.label = ["åŸæ–™ãƒ•ã‚£ãƒ¼ãƒ‰"]
    feed.hasFlowRate = [1000.0]  # kg/h

    s1 = Stream("S-001")
    s2 = Stream("S-002")
    s3 = Stream("S-003")
    product = Stream("Product")
    product.label = ["æœ€çµ‚è£½å“"]

    # ãƒãƒ³ãƒ—P-101
    p101 = Pump("P-101")
    p101.label = ["ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒ³ãƒ—"]
    p101.hasInput = [feed]
    p101.hasOutput = [s1]
    p101.hasEfficiency = [85.0]

    # åå¿œå™¨R-101
    r101 = CSTR("R-101")
    r101.label = ["ä¸»åå¿œå™¨"]
    r101.hasInput = [s1]
    r101.hasOutput = [s2]
    r101.hasTemperature = [350.0]  # K
    r101.hasPressure = [5.0]       # bar
    r101.hasVolume = [10.0]        # m3
    r101.hasEfficiency = [92.5]
    r101.hasResidenceTime = [3600.0]  # 1 hours

    # ç†±äº¤æ›å™¨HX-201
    hx201 = HeatExchanger("HX-201")
    hx201.label = ["å†·å´å™¨"]
    hx201.hasInput = [s2]
    hx201.hasOutput = [s3]
    hx201.hasTemperature = [320.0]  # å†·å´å¾Œæ¸©åº¦
    hx201.hasEfficiency = [88.0]

    #  minutesé›¢å™¨SEP-301
    sep301 = Separator("SEP-301")
    sep301.label = ["è£½å“ minutesé›¢å™¨"]
    sep301.hasInput = [s3]
    sep301.hasOutput = [product]
    sep301.hasTemperature = [320.0]
    sep301.hasPressure = [1.0]
    sep301.hasEfficiency = [95.0]

    # è£…ç½®é–“æ¥ç¶š
    p101.connectedTo = [r101]
    r101.connectedTo = [hx201]
    hx201.connectedTo = [sep301]

# ===== ãƒ—ãƒ©ãƒ³ãƒˆå…¨ä½“ã®å¯è¦–åŒ– =====
print("=== Processãƒ—ãƒ©ãƒ³ãƒˆæ§‹æˆ ===\n")

equipment_list = [p101, r101, hx201, sep301]

for eq in equipment_list:
    print(f"ã€{eq.label[0]}ã€‘ ({eq.__class__.__name__} {eq.name})")
    if eq.hasTemperature:
        print(f"  æ¸©åº¦: {eq.hasTemperature[0]} K ({eq.hasTemperature[0] - 273.15:.1f}Â°C)")
    if eq.hasPressure:
        print(f"  åœ§åŠ›: {eq.hasPressure[0]} bar")
    if eq.hasEfficiency:
        print(f"  åŠ¹ç‡: {eq.hasEfficiency[0]}%")
    if hasattr(eq, 'hasVolume') and eq.hasVolume:
        print(f"  å®¹ç©: {eq.hasVolume[0]} mÂ³")
    if hasattr(eq, 'hasResidenceTime') and eq.hasResidenceTime:
        print(f"  æ»ç•™ hours: {eq.hasResidenceTime[0] / 3600:.1f}  hours")
    print()

# æ¥ç¶šé–¢ä¿‚
print("=== Processãƒ•ãƒ­ãƒ¼ ===")
print("Feed â†’ P-101 â†’ R-101 â†’ HX-201 â†’ SEP-301 â†’ Product")

onto.save(file="process_plant_complete.owl", format="rdfxml")
print("\nâœ“ å®Œå…¨ãªProcessãƒ—ãƒ©ãƒ³ãƒˆOntologyä¿å­˜å®Œäº†")
print(f"ç·è£…ç½®æ•°: {len(equipment_list)}")
print(f"ç·ã‚¹ãƒˆãƒªãƒ¼ãƒ æ•°: {len([feed, s1, s2, s3, product])}")
</code></pre>

            <div class="example-output">
                <strong>å‡ºåŠ›ä¾‹:</strong><br>
                === Processãƒ—ãƒ©ãƒ³ãƒˆæ§‹æˆ ===<br>
                <br>
                ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒ³ãƒ—ã€‘ (Pump P-101)<br>
                &nbsp;&nbsp;åŠ¹ç‡: 85.0%<br>
                <br>
                ã€ä¸»åå¿œå™¨ã€‘ (CSTR R-101)<br>
                &nbsp;&nbsp;æ¸©åº¦: 350.0 K (76.9Â°C)<br>
                &nbsp;&nbsp;åœ§åŠ›: 5.0 bar<br>
                &nbsp;&nbsp;åŠ¹ç‡: 92.5%<br>
                &nbsp;&nbsp;å®¹ç©: 10.0 mÂ³<br>
                &nbsp;&nbsp;æ»ç•™ hours: 1.0  hours<br>
                <br>
                ã€å†·å´å™¨ã€‘ (HeatExchanger HX-201)<br>
                &nbsp;&nbsp;æ¸©åº¦: 320.0 K (46.9Â°C)<br>
                &nbsp;&nbsp;åŠ¹ç‡: 88.0%<br>
                <br>
                ã€è£½å“ minutesé›¢å™¨ã€‘ (Separator SEP-301)<br>
                &nbsp;&nbsp;æ¸©åº¦: 320.0 K (46.9Â°C)<br>
                &nbsp;&nbsp;åœ§åŠ›: 1.0 bar<br>
                &nbsp;&nbsp;åŠ¹ç‡: 95.0%<br>
                <br>
                === Processãƒ•ãƒ­ãƒ¼ ===<br>
                Feed â†’ P-101 â†’ R-101 â†’ HX-201 â†’ SEP-301 â†’ Product<br>
                <br>
                âœ“ å®Œå…¨ãªProcessãƒ—ãƒ©ãƒ³ãƒˆOntologyä¿å­˜å®Œäº†<br>
                ç·è£…ç½®æ•°: 4<br>
                ç·ã‚¹ãƒˆãƒªãƒ¼ãƒ æ•°: 5
            </div>
        </section>

        <section>
            <h2>2.6 çµ±åˆåŒ–å­¦Processãƒ—ãƒ©ãƒ³ãƒˆã®Ontology</h2>

            <h3>Example 7: çµ±åˆãƒ—ãƒ©ãƒ³ãƒˆOntologyã¨SPARQLã‚¯ã‚¨ãƒª</h3>
            <p>å®Œå…¨ãªChemical Plantã‚’Ontologyã§è¡¨ç¾ã—ã€SPARQLã§é«˜åº¦ãªã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>

<pre><code># ===================================
# Example 7: çµ±åˆãƒ—ãƒ©ãƒ³ãƒˆOntologyã¨SPARQL
# ===================================

from owlready2 import *
from rdflib import Graph, Namespace

# owlready2ã§Ontologyæ§‹ç¯‰
onto = get_ontology("http://example.org/chemicalplant.owl")

with onto:
    # ã‚¯ãƒ©ã‚¹ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾©ï¼ˆExample 6ã¨åŒæ§˜ï¼‰
    class ProcessEquipment(Thing):
        pass

    class Reactor(ProcessEquipment):
        pass

    class HeatExchanger(ProcessEquipment):
        pass

    class Separator(ProcessEquipment):
        pass

    class hasTemperature(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]

    class hasPressure(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]

    class hasEfficiency(DataProperty, FunctionalProperty):
        domain = [ProcessEquipment]
        range = [float]

    # å®Œå…¨ãªãƒ—ãƒ©ãƒ³ãƒˆã®æ§‹ç¯‰
    r101 = Reactor("R-101")
    r101.label = ["åå¿œå™¨R-101"]
    r101.hasTemperature = [350.0]
    r101.hasPressure = [5.0]
    r101.hasEfficiency = [92.5]

    r102 = Reactor("R-102")
    r102.label = ["åå¿œå™¨R-102"]
    r102.hasTemperature = [420.0]
    r102.hasPressure = [8.0]
    r102.hasEfficiency = [88.0]

    hx201 = HeatExchanger("HX-201")
    hx201.label = ["ç†±äº¤æ›å™¨HX-201"]
    hx201.hasTemperature = [320.0]
    hx201.hasEfficiency = [90.0]

    hx202 = HeatExchanger("HX-202")
    hx202.label = ["ç†±äº¤æ›å™¨HX-202"]
    hx202.hasTemperature = [340.0]
    hx202.hasEfficiency = [85.0]

    sep301 = Separator("SEP-301")
    sep301.label = [" minutesé›¢å™¨SEP-301"]
    sep301.hasTemperature = [310.0]
    sep301.hasPressure = [1.0]
    sep301.hasEfficiency = [95.0]

# OWLä¿å­˜ã¨RDFèª­ã¿è¾¼ã¿
onto.save(file="chemical_plant.owl", format="rdfxml")

# rdflibã§SPARQLã‚¯ã‚¨ãƒªå®Ÿè¡Œ
g = Graph()
g.parse("chemical_plant.owl", format="xml")

# åå‰ç©ºé–“å®šç¾©
ONTO = Namespace("http://example.org/chemicalplant.owl#")

# ===== SPARQLã‚¯ã‚¨ãƒªé›† =====

# ã‚¯ã‚¨ãƒª1: åŠ¹ç‡90%ä»¥ä¸Šã®è£…ç½®
query1 = """
PREFIX onto: <http://example.org/chemicalplant.owl#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?equipment ?label ?efficiency
WHERE {
    ?equipment onto:hasEfficiency ?efficiency .
    ?equipment rdfs:label ?label .
    FILTER (?efficiency >= 90.0)
}
ORDER BY DESC(?efficiency)
"""

print("=== ã‚¯ã‚¨ãƒª1: åŠ¹ç‡90%ä»¥ä¸Šã®è£…ç½® ===")
for row in g.query(query1):
    print(f"{row.label}: {float(row.efficiency):.1f}%")

# ã‚¯ã‚¨ãƒª2: æ¸©åº¦350Kä»¥ä¸Šã®è£…ç½®
query2 = """
PREFIX onto: <http://example.org/chemicalplant.owl#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?label ?temp ?press
WHERE {
    ?equipment onto:hasTemperature ?temp .
    ?equipment rdfs:label ?label .
    OPTIONAL { ?equipment onto:hasPressure ?press }
    FILTER (?temp >= 350.0)
}
ORDER BY DESC(?temp)
"""

print("\n=== ã‚¯ã‚¨ãƒª2: æ¸©åº¦350Kä»¥ä¸Šã®é«˜æ¸©è£…ç½® ===")
for row in g.query(query2):
    temp_c = float(row.temp) - 273.15
    print(f"{row.label}: {float(row.temp):.1f}K ({temp_c:.1f}Â°C)", end="")
    if row.press:
        print(f", {float(row.press):.1f}bar")
    else:
        print()

# ã‚¯ã‚¨ãƒª3: åå¿œå™¨ã®çµ±è¨ˆ
query3 = """
PREFIX onto: <http://example.org/chemicalplant.owl#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT (AVG(?temp) AS ?avgTemp) (AVG(?eff) AS ?avgEff) (COUNT(?reactor) AS ?count)
WHERE {
    ?reactor rdf:type onto:Reactor .
    ?reactor onto:hasTemperature ?temp .
    ?reactor onto:hasEfficiency ?eff .
}
"""

print("\n=== ã‚¯ã‚¨ãƒª3: åå¿œå™¨ã®çµ±è¨ˆæƒ…å ± ===")
for row in g.query(query3):
    print(f"åå¿œå™¨æ•°: {row.count}")
    print(f"å¹³å‡æ¸©åº¦: {float(row.avgTemp):.1f}K ({float(row.avgTemp) - 273.15:.1f}Â°C)")
    print(f"å¹³å‡åŠ¹ç‡: {float(row.avgEff):.1f}%")

print("\nâœ“ çµ±åˆãƒ—ãƒ©ãƒ³ãƒˆOntologyã¨SPARQLã‚¯ã‚¨ãƒªå®Œäº†")
</code></pre>

            <div class="example-output">
                <strong>å‡ºåŠ›ä¾‹:</strong><br>
                === ã‚¯ã‚¨ãƒª1: åŠ¹ç‡90%ä»¥ä¸Šã®è£…ç½® ===<br>
                 minutesé›¢å™¨SEP-301: 95.0%<br>
                åå¿œå™¨R-101: 92.5%<br>
                ç†±äº¤æ›å™¨HX-201: 90.0%<br>
                <br>
                === ã‚¯ã‚¨ãƒª2: æ¸©åº¦350Kä»¥ä¸Šã®é«˜æ¸©è£…ç½® ===<br>
                åå¿œå™¨R-102: 420.0K (146.9Â°C), 8.0bar<br>
                åå¿œå™¨R-101: 350.0K (76.9Â°C), 5.0bar<br>
                <br>
                === ã‚¯ã‚¨ãƒª3: åå¿œå™¨ã®çµ±è¨ˆæƒ…å ± ===<br>
                åå¿œå™¨æ•°: 2<br>
                å¹³å‡æ¸©åº¦: 385.0K (111.9Â°C)<br>
                å¹³å‡åŠ¹ç‡: 90.3%<br>
                <br>
                âœ“ çµ±åˆãƒ—ãƒ©ãƒ³ãƒˆOntologyã¨SPARQLã‚¯ã‚¨ãƒªå®Œäº†
            </div>

            <div class="success-box">
                <p><strong>âœ… Ontologyè¨­è¨ˆã®æˆæœ</strong></p>
                <ul>
                    <li><strong>æ§‹é€ åŒ–</strong>: 13ã‚¯ãƒ©ã‚¹ã€5ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®éšå±¤çš„Ontology</li>
                    <li><strong>åˆ¶ç´„</strong>: ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£ã¨å€¤ç¯„å›²ã®åˆ¶ç´„ã«ã‚ˆã‚‹å“è³ªä¿è¨¼</li>
                    <li><strong>ã‚¯ã‚¨ãƒª</strong>: SPARQLã«ã‚ˆã‚‹é«˜åº¦ãªçŸ¥è­˜æŠ½å‡ºã¨ minutesæ</li>
                    <li><strong>æ‹¡å¼µæ€§</strong>: æ–°ã—ã„è£…ç½®ã‚¿ã‚¤ãƒ—ã‚„ç‰©æ€§ã®è¿½åŠ ãŒå®¹æ˜“</li>
                </ul>
            </div>
        </section>

        <section>
            <h2>Learning Objectivesã®ç¢ºèª</h2>

            <p>ã“ã® Chapterã‚’å®Œäº†ã™ã‚‹ã¨ã€ä»¥ä¸‹ã‚’èª¬æ˜ãƒ»å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š</p>

            <h3>åŸºæœ¬ç†è§£</h3>
            <ul>
                <li>âœ… OWLã®3ã¤ã®ã‚µãƒ–è¨€èªï¼ˆLite, DL, Fullï¼‰ã®é•ã„ã‚’èª¬æ˜ã§ãã‚‹</li>
                <li>âœ… ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å½¹å‰²ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
                <li>âœ… FunctionalPropertyã€SymmetricPropertyã€TransitivePropertyã®æ¦‚å¿µã‚’çŸ¥ã£ã¦ã„ã‚‹</li>
                <li>âœ… ã‚¯ãƒ©ã‚¹éšå±¤ã¨is-aé–¢ä¿‚ã®è¨­è¨ˆåŸå‰‡ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
            </ul>

            <h3>å®Ÿè·µã‚¹ã‚­ãƒ«</h3>
            <ul>
                <li>âœ… owlready2ã§OWLã‚¯ãƒ©ã‚¹ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®šç¾©ã§ãã‚‹</li>
                <li>âœ… è£…ç½®é–“ã®æ¥ç¶šã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§è¡¨ç¾ã§ãã‚‹</li>
                <li>âœ… æ¸©åº¦ãƒ»åœ§åŠ›ãƒ»æµé‡ãªã©ã®ç‰©æ€§ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§å®šç¾©ã§ãã‚‹</li>
                <li>âœ… ã‚«ãƒ¼ãƒ‡ã‚£ãƒŠãƒªãƒ†ã‚£åˆ¶ç´„ï¼ˆmin, max, exactlyï¼‰ã‚’å®Ÿè£…ã§ãã‚‹</li>
                <li>âœ… å®Œå…¨ãªåŒ–å­¦Processãƒ—ãƒ©ãƒ³ãƒˆã®Ontologyã‚’æ§‹ç¯‰ã§ãã‚‹</li>
                <li>âœ… SPARQLã§è£…ç½®ã®çµ±è¨ˆæƒ…å ±ã‚„æ¡ä»¶æ¤œç´¢ãŒã§ãã‚‹</li>
            </ul>

            <h3>å¿œç”¨åŠ›</h3>
            <ul>
                <li>âœ… æ–°ã—ã„è£…ç½®ã‚¿ã‚¤ãƒ—ã‚’æ—¢å­˜ã®Ontologyã«çµ±åˆã§ãã‚‹</li>
                <li>âœ… Processè¨­è¨ˆã«ãŠã‘ã‚‹è£…ç½®é¸å®šã‚’Ontologyã§æ”¯æ´ã§ãã‚‹</li>
                <li>âœ… ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åˆ¶ç´„ã«ã‚ˆã‚Šä¸æ•´åˆãªè£…ç½®æ§‹æˆã‚’æ¤œå‡ºã§ãã‚‹</li>
                <li>âœ… å®Ÿãƒ—ãƒ©ãƒ³ãƒˆã®P&IDæƒ…å ±ã‚’Ontologyã«å¤‰æ›ã§ãã‚‹</li>
            </ul>
        </section>

        <section>
            <h2>Next Steps</h2>

            <p>Chapter 2ã§ã¯ã€OWLã¨owlready2ã‚’ç”¨ã„ãŸåŒ–å­¦Processè£…ç½®ã®åŒ…æ‹¬çš„ãªOntologyè¨­è¨ˆã‚’å­¦ã³ã¾ã—ãŸã€‚æ¬¡ Chapterã§ã¯ã€å®Ÿéš›ã®Processãƒ‡ãƒ¼ã‚¿ï¼ˆCSVã€ã‚»ãƒ³ã‚µãƒ¼ã‚¹ãƒˆãƒªãƒ¼ãƒ ã€P&IDï¼‰ã‹ã‚‰ãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ©ãƒ•ã‚’è‡ªå‹•æ§‹ç¯‰ã™ã‚‹æ‰‹æ³•ã‚’å­¦ã³ã¾ã™ã€‚</p>

            <div class="info-box">
                <p><strong>ğŸ“š æ¬¡ Chapterã®å†…å®¹ï¼ˆChapter 3äºˆå‘Šï¼‰</strong></p>
                <ul>
                    <li>CSVãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æŠ½å‡º</li>
                    <li>è£…ç½®æ¥ç¶šé–¢ä¿‚ã®è‡ªå‹•æŠ½å‡º</li>
                    <li>ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®RDFå¤‰æ›</li>
                    <li>æ­´å²çš„ãƒ‡ãƒ¼ã‚¿ã®æ™‚ç³»åˆ—ãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ©ãƒ•</li>
                    <li>ãƒãƒ«ãƒã‚½ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ©ãƒ•æ§‹ç¯‰</li>
                </ul>
            </div>
        </section>

        <div class="navigation">
            <a href="chapter-1.html" class="nav-button">â† Chapter 1ï¼šOntologyåŸºç¤</a>
            <a href="chapter-3.html" class="nav-button">Chapter 3ï¼šãƒ‡ãƒ¼ã‚¿ã‹ã‚‰KGæ§‹ç¯‰ â†’</a>
        </div>
    </main>

    <footer style="background-color: var(--color-bg-alt); padding: var(--spacing-lg); margin-top: var(--spacing-xl); text-align: center; border-top: 1px solid var(--color-border);">
        <p style="color: var(--color-text-light); font-size: 0.9rem;">
            Â© 2025 PI Knowledge Hub - Process Ontology Series |
            <a href="../../../../index.html" style="color: var(--color-link);">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
        </p>
    </footer>
</body>
</html>
