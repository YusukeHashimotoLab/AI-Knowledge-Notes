<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
<meta content="ç¬¬2ç« ï¼šã‚³ãƒ³ãƒ†ãƒŠåŒ–æŠ€è¡“ - AI Terakoya" name="description"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬2ç« ï¼šã‚³ãƒ³ãƒ†ãƒŠåŒ–æŠ€è¡“ - AI Terakoya</title>

    <style>
        :root {
            --color-primary: #2c3e50;
            --color-primary-dark: #1a252f;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-text: #2d3748;
            --color-text-light: #4a5568;
            --color-bg: #ffffff;
            --color-bg-alt: #f7fafc;
            --color-border: #e2e8f0;
            --color-code-bg: #f8f9fa;
            --color-link: #3182ce;
            --color-link-hover: #2c5aa0;

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

            --border-radius: 8px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-bg);
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--box-shadow);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md) var(--spacing-xl);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--color-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-xs);
            border-bottom: 3px solid var(--color-accent);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        h4 {
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        li {
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            overflow-x: auto;
            margin-bottom: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: var(--font-mono);
            font-size: 0.9em;
            background-color: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-md);
            font-size: 0.95rem;
        }

        th, td {
            border: 1px solid var(--color-border);
            padding: var(--spacing-sm);
            text-align: left;
        }

        th {
            background-color: var(--color-bg-alt);
            font-weight: 600;
            color: var(--color-primary);
        }

        blockquote {
            border-left: 4px solid var(--color-accent);
            padding-left: var(--spacing-md);
            margin: var(--spacing-md) 0;
            color: var(--color-text-light);
            font-style: italic;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        .mermaid {
            text-align: center;
            margin: var(--spacing-lg) 0;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        details {
            background-color: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-primary);
            user-select: none;
            padding: var(--spacing-xs);
            margin: calc(-1 * var(--spacing-md));
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        summary:hover {
            background-color: rgba(123, 44, 191, 0.1);
        }

        details[open] summary {
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--color-border);
        }

        .nav-button {
            flex: 1;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--box-shadow);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-decoration: none;
        }

        footer {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-md);
            background-color: var(--color-bg-alt);
            border-top: 1px solid var(--color-border);
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }
        .disclaimer {
            max-width: 900px;
            margin: 2rem auto;
            padding: 1.5rem;
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
            border-radius: 4px;
        }

        .disclaimer h3 {
            color: #495057;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .disclaimer ul {
            list-style: none;
            padding-left: 0;
        }

        .disclaimer li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.9rem;
            color: #6c757d;
            line-height: 1.6;
        }

        .disclaimer li::before {
            content: "âš ï¸";
            position: absolute;
            left: 0;
        }


        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            .navigation {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: var(--spacing-xs);
            }
        }
    
        
    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>

    <style>
        /* Locale Switcher Styles */
        .locale-switcher {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 6px;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .current-locale {
            font-weight: 600;
            color: #7b2cbf;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .locale-separator {
            color: #adb5bd;
            font-weight: 300;
        }

        .locale-link {
            color: #f093fb;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }

        .locale-link:hover {
            background: rgba(240, 147, 251, 0.1);
            color: #d07be8;
            transform: translateY(-1px);
        }

        .locale-meta {
            color: #868e96;
            font-size: 0.85rem;
            font-style: italic;
            margin-left: auto;
        }

        @media (max-width: 768px) {
            .locale-switcher {
                font-size: 0.85rem;
                padding: 0.4rem 0.8rem;
            }
            .locale-meta {
                display: none;
            }
        }
    </style>
</head>
<body>
            <div class="locale-switcher">
<span class="current-locale">ğŸŒ JP</span>
<span class="locale-separator">|</span>
<a href="../../../en/ML/model-deployment-introduction/chapter2-containerization.html" class="locale-link">ğŸ‡¬ğŸ‡§ EN</a>
<span class="locale-separator">|</span>
<span class="locale-meta">Last sync: 2025-11-16</span>
</div>
<nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="../../index.html">AIå¯ºå­å±‹ãƒˆãƒƒãƒ—</a><span class="breadcrumb-separator">â€º</span><a href="../../ML/index.html">æ©Ÿæ¢°å­¦ç¿’</a><span class="breadcrumb-separator">â€º</span><a href="../../ML/model-deployment-introduction/index.html">Model Deployment</a><span class="breadcrumb-separator">â€º</span><span class="breadcrumb-current">Chapter 2</span>
        </div>
    </nav>

        <header>
        <div class="header-content">
            <h1>ç¬¬2ç« ï¼šã‚³ãƒ³ãƒ†ãƒŠåŒ–æŠ€è¡“</h1>
            <p class="subtitle">Dockerã«ã‚ˆã‚‹æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®å¯æ¬æ€§ã¨å†ç¾æ€§</p>
            <div class="meta">
                <span class="meta-item">ğŸ“– èª­äº†æ™‚é–“: 25-30åˆ†</span>
                <span class="meta-item">ğŸ“Š é›£æ˜“åº¦: åˆç´š-ä¸­ç´š</span>
                <span class="meta-item">ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹: 8å€‹</span>
            </div>
        </div>
    </header>

    <main class="container">

<h2>å­¦ç¿’ç›®æ¨™</h2>
<p>ã“ã®ç« ã‚’èª­ã‚€ã“ã¨ã§ã€ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š</p>
<ul>
<li>âœ… Dockerã‚³ãƒ³ãƒ†ãƒŠã®åŸºç¤æ¦‚å¿µã¨ä»®æƒ³ãƒã‚·ãƒ³ã¨ã®é•ã„ã‚’ç†è§£ã™ã‚‹</li>
<li>âœ… æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ç”¨ã®Dockerfileã‚’ä½œæˆã§ãã‚‹</li>
<li>âœ… MLãƒ¢ãƒ‡ãƒ«ã‚’åŠ¹ç‡çš„ã«ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã§ãã‚‹</li>
<li>âœ… Docker Composeã§è¤‡æ•°ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç®¡ç†ã§ãã‚‹</li>
<li>âœ… GPUå¯¾å¿œã®MLã‚³ãƒ³ãƒ†ãƒŠã‚’æ§‹ç¯‰ã§ãã‚‹</li>
</ul>

<hr>

<h2>2.1 Dockerã®åŸºç¤</h2>

<h3>ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯</h3>
<p><strong>ã‚³ãƒ³ãƒ†ãƒŠï¼ˆContainerï¼‰</strong>ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãã®ä¾å­˜é–¢ä¿‚ã‚’ç‹¬ç«‹ã—ãŸç’°å¢ƒã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã™ã‚‹æŠ€è¡“ã§ã™ã€‚</p>

<blockquote>
<p>ã€ŒBuild once, Run anywhereã€- ä¸€åº¦ãƒ“ãƒ«ãƒ‰ã™ã‚Œã°ã€ã©ã“ã§ã‚‚åŒã˜ã‚ˆã†ã«å®Ÿè¡Œã§ãã‚‹</p>
</blockquote>

<h3>Docker vs ä»®æƒ³ãƒã‚·ãƒ³</h3>

<table>
<thead>
<tr>
<th>ç‰¹å¾´</th>
<th>Docker ã‚³ãƒ³ãƒ†ãƒŠ</th>
<th>ä»®æƒ³ãƒã‚·ãƒ³ (VM)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>èµ·å‹•æ™‚é–“</strong></td>
<td>ç§’å˜ä½</td>
<td>åˆ†å˜ä½</td>
</tr>
<tr>
<td><strong>ãƒªã‚½ãƒ¼ã‚¹</strong></td>
<td>è»½é‡ï¼ˆMBå˜ä½ï¼‰</td>
<td>é‡ã„ï¼ˆGBå˜ä½ï¼‰</td>
</tr>
<tr>
<td><strong>åˆ†é›¢ãƒ¬ãƒ™ãƒ«</strong></td>
<td>ãƒ—ãƒ­ã‚»ã‚¹ãƒ¬ãƒ™ãƒ«</td>
<td>å®Œå…¨ãª OS åˆ†é›¢</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>ãƒã‚¤ãƒ†ã‚£ãƒ–ã«è¿‘ã„</td>
<td>ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚ã‚Š</td>
</tr>
<tr>
<td><strong>å¯æ¬æ€§</strong></td>
<td>é«˜ã„</td>
<td>ä¸­ç¨‹åº¦</td>
</tr>
</tbody>
</table>

<div class="mermaid">
graph TD
    subgraph "ä»®æƒ³ãƒã‚·ãƒ³"
        A1[ã‚¢ãƒ—ãƒª1] --> B1[ã‚²ã‚¹ãƒˆOS1]
        A2[ã‚¢ãƒ—ãƒª2] --> B2[ã‚²ã‚¹ãƒˆOS2]
        B1 --> C[ãƒã‚¤ãƒ‘ãƒ¼ãƒã‚¤ã‚¶ãƒ¼]
        B2 --> C
        C --> D[ãƒ›ã‚¹ãƒˆOS]
        D --> E[ç‰©ç†ã‚µãƒ¼ãƒãƒ¼]
    end

    subgraph "Docker ã‚³ãƒ³ãƒ†ãƒŠ"
        F1[ã‚¢ãƒ—ãƒª1] --> G[Docker Engine]
        F2[ã‚¢ãƒ—ãƒª2] --> G
        G --> H[ãƒ›ã‚¹ãƒˆOS]
        H --> I[ç‰©ç†ã‚µãƒ¼ãƒãƒ¼]
    end

    style A1 fill:#e3f2fd
    style A2 fill:#e3f2fd
    style F1 fill:#c8e6c9
    style F2 fill:#c8e6c9
</div>

<h3>DockeråŸºæœ¬ã‚³ãƒãƒ³ãƒ‰</h3>

<pre><code class="language-bash"># Dockerãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
docker --version

# ã‚¤ãƒ¡ãƒ¼ã‚¸ä¸€è¦§è¡¨ç¤º
docker images

# ã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§è¡¨ç¤ºï¼ˆå®Ÿè¡Œä¸­ï¼‰
docker ps

# ã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§è¡¨ç¤ºï¼ˆå…¨ã¦ï¼‰
docker ps -a

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
docker pull python:3.9-slim

# ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œ
docker run -it python:3.9-slim bash

# ã‚³ãƒ³ãƒ†ãƒŠã®åœæ­¢
docker stop &lt;container_id&gt;

# ã‚³ãƒ³ãƒ†ãƒŠã®å‰Šé™¤
docker rm &lt;container_id&gt;

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å‰Šé™¤
docker rmi &lt;image_id&gt;

# ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
docker system prune -a
</code></pre>

<h3>ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã‚³ãƒ³ãƒ†ãƒŠã®é–¢ä¿‚</h3>

<p><strong>ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆImageï¼‰</strong>ï¼šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­è¨ˆå›³ï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰</p>
<p><strong>ã‚³ãƒ³ãƒ†ãƒŠï¼ˆContainerï¼‰</strong>ï¼šã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰ä½œæˆã•ã‚ŒãŸå®Ÿè¡Œå¯èƒ½ãªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</p>

<div class="mermaid">
graph LR
    A[Dockerfile] -->|docker build| B[Docker Image]
    B -->|docker run| C[Container 1]
    B -->|docker run| D[Container 2]
    B -->|docker run| E[Container 3]

    style A fill:#ffebee
    style B fill:#fff3e0
    style C fill:#e8f5e9
    style D fill:#e8f5e9
    style E fill:#e8f5e9
</div>

<blockquote>
<p><strong>é‡è¦</strong>: 1ã¤ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã§ãã¾ã™ã€‚å„ã‚³ãƒ³ãƒ†ãƒŠã¯ç‹¬ç«‹ã—ãŸç’°å¢ƒã§ã™ã€‚</p>
</blockquote>

<hr>

<h2>2.2 Dockerfileã®ä½œæˆ</h2>

<h3>ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸é¸æŠ</h3>

<p>æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ç”¨ã®ä»£è¡¨çš„ãªãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š</p>

<table>
<thead>
<tr>
<th>ã‚¤ãƒ¡ãƒ¼ã‚¸</th>
<th>ã‚µã‚¤ã‚º</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>python:3.9-slim</code></td>
<td>ç´„120MB</td>
<td>è»½é‡ãªPythonç’°å¢ƒ</td>
</tr>
<tr>
<td><code>python:3.9</code></td>
<td>ç´„900MB</td>
<td>ãƒ•ãƒ«æ©Ÿèƒ½ã®Pythonç’°å¢ƒ</td>
</tr>
<tr>
<td><code>nvidia/cuda:11.8.0-cudnn8-runtime-ubuntu22.04</code></td>
<td>ç´„2GB</td>
<td>GPUæ¨è«–ç”¨</td>
</tr>
<tr>
<td><code>nvidia/cuda:11.8.0-cudnn8-devel-ubuntu22.04</code></td>
<td>ç´„4GB</td>
<td>GPUé–‹ç™ºãƒ»å­¦ç¿’ç”¨</td>
</tr>
</tbody>
</table>

<h3>åŸºæœ¬çš„ãªDockerfileæ§‹é€ </h3>

<pre><code class="language-dockerfile"># ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®æŒ‡å®š
FROM python:3.9-slim

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¨­å®š
WORKDIR /app

# ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ›´æ–°ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN apt-get update && apt-get install -y \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ”ãƒ¼
COPY . .

# ãƒãƒ¼ãƒˆå…¬é–‹
EXPOSE 8000

# èµ·å‹•ã‚³ãƒãƒ³ãƒ‰
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
</code></pre>

<h3>ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰</h3>

<p>ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã‚’å‰Šæ¸›ã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã‚‹æŠ€è¡“ï¼š</p>

<pre><code class="language-dockerfile"># ã‚¹ãƒ†ãƒ¼ã‚¸1: ãƒ“ãƒ«ãƒ‰ç’°å¢ƒ
FROM python:3.9 as builder

WORKDIR /build

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
COPY requirements.txt .
RUN pip install --user --no-cache-dir -r requirements.txt

# ã‚¹ãƒ†ãƒ¼ã‚¸2: å®Ÿè¡Œç’°å¢ƒï¼ˆè»½é‡ï¼‰
FROM python:3.9-slim

WORKDIR /app

# ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¸ã‹ã‚‰å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚³ãƒ”ãƒ¼
COPY --from=builder /root/.local /root/.local
COPY . .

# PATHã®è¨­å®š
ENV PATH=/root/.local/bin:$PATH

EXPOSE 8000

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
</code></pre>

<blockquote>
<p><strong>åŠ¹æœ</strong>: ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã«ã‚ˆã‚Šã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã‚’50-70%å‰Šæ¸›ã§ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p>
</blockquote>

<h3>æœ€é©åŒ–ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯</h3>

<h4>ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ´»ç”¨</h4>

<pre><code class="language-dockerfile"># âŒ éåŠ¹ç‡: ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«ä¾å­˜é–¢ä¿‚ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
FROM python:3.9-slim
WORKDIR /app
COPY . .
RUN pip install -r requirements.txt

# âœ… åŠ¹ç‡çš„: ä¾å­˜é–¢ä¿‚ãŒå¤‰æ›´ã•ã‚Œãªã„é™ã‚Šã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’åˆ©ç”¨
FROM python:3.9-slim
WORKDIR /app

# å…ˆã«ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆå¤‰æ›´é »åº¦ãŒä½ã„ï¼‰
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# å¾Œã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆå¤‰æ›´é »åº¦ãŒé«˜ã„ï¼‰
COPY . .
</code></pre>

<h4>ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®é™¤å¤–</h4>

<p>.dockerignoreãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹ï¼š</p>

<pre><code class="language-plaintext"># .dockerignore
__pycache__
*.pyc
*.pyo
*.pyd
.Python
*.so
*.egg
*.egg-info
dist
build
.git
.gitignore
.env
.venv
venv/
data/
notebooks/
tests/
*.md
Dockerfile
docker-compose.yml
</code></pre>

<hr>

<h2>2.3 MLãƒ¢ãƒ‡ãƒ«ã®ã‚³ãƒ³ãƒ†ãƒŠåŒ–</h2>

<h3>FastAPI + PyTorchã®Dockerfile</h3>

<pre><code class="language-dockerfile"># ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
FROM python:3.9 as builder

WORKDIR /build

# ä¾å­˜é–¢ä¿‚ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼
COPY requirements.txt .

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN pip install --user --no-cache-dir \
    torch==2.0.0 \
    torchvision==0.15.0 \
    fastapi==0.104.0 \
    uvicorn[standard]==0.24.0 \
    pydantic==2.5.0 \
    pillow==10.1.0

# å®Ÿè¡Œç’°å¢ƒ
FROM python:3.9-slim

WORKDIR /app

# ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¸ã‹ã‚‰ä¾å­˜é–¢ä¿‚ã‚’ã‚³ãƒ”ãƒ¼
COPY --from=builder /root/.local /root/.local

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã¨ãƒ¢ãƒ‡ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
COPY app/ ./app/
COPY models/ ./models/

# ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
ENV PATH=/root/.local/bin:$PATH \
    PYTHONUNBUFFERED=1 \
    MODEL_PATH=/app/models/model.pth

# érootãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Šï¼‰
RUN useradd -m -u 1000 appuser && \
    chown -R appuser:appuser /app

USER appuser

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
    CMD python -c "import requests; requests.get('http://localhost:8000/health')"

EXPOSE 8000

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
</code></pre>

<h3>requirements.txtã®ä¾‹</h3>

<pre><code class="language-plaintext"># requirements.txt
torch==2.0.0
torchvision==0.15.0
fastapi==0.104.0
uvicorn[standard]==0.24.0
pydantic==2.5.0
pillow==10.1.0
numpy==1.24.3
python-multipart==0.0.6
</code></pre>

<h3>ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œ</h3>

<pre><code class="language-bash"># ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
docker build -t ml-api:v1.0 .

# ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ã®è©³ç´°è¡¨ç¤º
docker build -t ml-api:v1.0 --progress=plain .

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ã‚ãšã«ãƒ“ãƒ«ãƒ‰
docker build -t ml-api:v1.0 --no-cache .

# ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œ
docker run -d \
    --name ml-api \
    -p 8000:8000 \
    -v $(pwd)/models:/app/models \
    ml-api:v1.0

# ãƒ­ã‚°ã®ç¢ºèª
docker logs ml-api

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°è¡¨ç¤º
docker logs -f ml-api

# ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
docker exec -it ml-api bash

# ã‚³ãƒ³ãƒ†ãƒŠã®åœæ­¢ã¨å‰Šé™¤
docker stop ml-api
docker rm ml-api
</code></pre>

<h3>ãƒãƒ¼ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°</h3>

<table>
<thead>
<tr>
<th>ã‚ªãƒ—ã‚·ãƒ§ãƒ³</th>
<th>èª¬æ˜</th>
<th>ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-p 8000:8000</code></td>
<td>ãƒ›ã‚¹ãƒˆ:ã‚³ãƒ³ãƒ†ãƒŠ</td>
<td>ãƒ›ã‚¹ãƒˆã®8000ç•ªã‚’ã‚³ãƒ³ãƒ†ãƒŠã®8000ç•ªã«</td>
</tr>
<tr>
<td><code>-p 8080:8000</code></td>
<td>ç•°ãªã‚‹ãƒãƒ¼ãƒˆ</td>
<td>ãƒ›ã‚¹ãƒˆã®8080ç•ªã‚’ã‚³ãƒ³ãƒ†ãƒŠã®8000ç•ªã«</td>
</tr>
<tr>
<td><code>-p 127.0.0.1:8000:8000</code></td>
<td>ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿</td>
<td>ãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆã‹ã‚‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</td>
</tr>
</tbody>
</table>

<hr>

<h2>2.4 Docker Composeã«ã‚ˆã‚‹ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>

<h3>docker-compose.ymlæ§‹æˆ</h3>

<p>è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’çµ±åˆç®¡ç†ã™ã‚‹ãŸã‚ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼š</p>

<pre><code class="language-yaml"># docker-compose.yml
version: '3.8'

services:
  # FastAPI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
  api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ml-api
    ports:
      - "8000:8000"
    environment:
      - MODEL_PATH=/app/models/model.pth
      - REDIS_HOST=redis
      - REDIS_PORT=6379
    volumes:
      - ./models:/app/models:ro
      - ./logs:/app/logs
    depends_on:
      - redis
    restart: unless-stopped
    networks:
      - ml-network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  # Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  redis:
    image: redis:7-alpine
    container_name: ml-redis
    ports:
      - "6379:6379"
    volumes:
      - redis-data:/data
    restart: unless-stopped
    networks:
      - ml-network
    command: redis-server --appendonly yes

networks:
  ml-network:
    driver: bridge

volumes:
  redis-data:
</code></pre>

<h3>è¤‡æ•°ã‚µãƒ¼ãƒ“ã‚¹ã®çµ±åˆä¾‹</h3>

<pre><code class="language-yaml"># docker-compose.yml (æ‹¡å¼µç‰ˆ)
version: '3.8'

services:
  # MLãƒ¢ãƒ‡ãƒ«æ¨è«–API
  ml-api:
    build: ./api
    ports:
      - "8000:8000"
    environment:
      - REDIS_HOST=redis
      - DB_HOST=postgres
    volumes:
      - ./models:/app/models:ro
    depends_on:
      - redis
      - postgres
    networks:
      - ml-network

  # ã‚­ãƒ£ãƒƒã‚·ãƒ¥å±¤
  redis:
    image: redis:7-alpine
    volumes:
      - redis-data:/data
    networks:
      - ml-network

  # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  postgres:
    image: postgres:15-alpine
    environment:
      - POSTGRES_USER=mluser
      - POSTGRES_PASSWORD=mlpass
      - POSTGRES_DB=mldb
    volumes:
      - postgres-data:/var/lib/postgresql/data
    networks:
      - ml-network

  # ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
  prometheus:
    image: prom/prometheus:latest
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml:ro
      - prometheus-data:/prometheus
    networks:
      - ml-network

networks:
  ml-network:
    driver: bridge

volumes:
  redis-data:
  postgres-data:
  prometheus-data:
</code></pre>

<h3>ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆ</h3>

<table>
<thead>
<tr>
<th>ã‚¿ã‚¤ãƒ—</th>
<th>æ§‹æ–‡</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ãƒã‚¤ãƒ³ãƒ‰ãƒã‚¦ãƒ³ãƒˆ</strong></td>
<td><code>./host/path:/container/path</code></td>
<td>é–‹ç™ºæ™‚ã®ã‚³ãƒ¼ãƒ‰åŒæœŸ</td>
</tr>
<tr>
<td><strong>åå‰ä»˜ããƒœãƒªãƒ¥ãƒ¼ãƒ </strong></td>
<td><code>volume-name:/container/path</code></td>
<td>æ°¸ç¶šçš„ãªãƒ‡ãƒ¼ã‚¿ä¿å­˜</td>
</tr>
<tr>
<td><strong>èª­ã¿å–ã‚Šå°‚ç”¨</strong></td>
<td><code>./path:/path:ro</code></td>
<td>ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãªã©</td>
</tr>
</tbody>
</table>

<h3>ç’°å¢ƒå¤‰æ•°ç®¡ç†</h3>

<p>.envãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹ï¼š</p>

<pre><code class="language-plaintext"># .env
MODEL_PATH=/app/models/resnet50.pth
REDIS_HOST=redis
REDIS_PORT=6379
LOG_LEVEL=INFO
MAX_WORKERS=4
</code></pre>

<p>docker-compose.ymlã§ã®ä½¿ç”¨ï¼š</p>

<pre><code class="language-yaml">services:
  api:
    env_file:
      - .env
    # ã¾ãŸã¯å€‹åˆ¥ã«æŒ‡å®š
    environment:
      - MODEL_PATH=${MODEL_PATH}
      - REDIS_HOST=${REDIS_HOST}
</code></pre>

<h3>Docker Compose ã‚³ãƒãƒ³ãƒ‰</h3>

<pre><code class="language-bash"># ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•ï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
docker-compose up -d

# ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•ï¼ˆãƒ­ã‚°è¡¨ç¤ºï¼‰
docker-compose up

# ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ“ãƒ«ãƒ‰ã¨èµ·å‹•
docker-compose up -d --build

# ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã®ã¿èµ·å‹•
docker-compose up -d api redis

# ã‚µãƒ¼ãƒ“ã‚¹ã®åœæ­¢
docker-compose stop

# ã‚µãƒ¼ãƒ“ã‚¹ã®åœæ­¢ã¨å‰Šé™¤
docker-compose down

# ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚‚å«ã‚ã¦å‰Šé™¤
docker-compose down -v

# ãƒ­ã‚°ã®ç¢ºèª
docker-compose logs -f

# ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°
docker-compose logs -f api

# ã‚µãƒ¼ãƒ“ã‚¹ã®çŠ¶æ…‹ç¢ºèª
docker-compose ps

# ã‚µãƒ¼ãƒ“ã‚¹ã®å†èµ·å‹•
docker-compose restart api
</code></pre>

<hr>

<h2>2.5 å®Ÿè·µ: GPUå¯¾å¿œMLã‚³ãƒ³ãƒ†ãƒŠ</h2>

<h3>NVIDIA Dockerã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</h3>

<p>å‰ææ¡ä»¶ï¼š</p>
<ul>
<li>NVIDIA GPUæ­è¼‰ãƒã‚·ãƒ³</li>
<li>NVIDIAãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
<li>NVIDIA Container Toolkitã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
</ul>

<pre><code class="language-bash"># NVIDIA Container Toolkit ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
distribution=$(. /etc/os-release;echo $ID$VERSION_ID)
curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -
curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | \
    sudo tee /etc/apt/sources.list.d/nvidia-docker.list

sudo apt-get update
sudo apt-get install -y nvidia-container-toolkit

# Dockerã®å†èµ·å‹•
sudo systemctl restart docker

# GPU ã®ç¢ºèª
docker run --rm --gpus all nvidia/cuda:11.8.0-base-ubuntu22.04 nvidia-smi
</code></pre>

<h3>CUDAã‚¤ãƒ¡ãƒ¼ã‚¸ä½¿ç”¨ã®Dockerfile</h3>

<pre><code class="language-dockerfile"># GPUæ¨è«–ç”¨ Dockerfile
FROM nvidia/cuda:11.8.0-cudnn8-runtime-ubuntu22.04

# Python ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN apt-get update && apt-get install -y \
    python3.10 \
    python3-pip \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# PyTorch GPUç‰ˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
COPY requirements-gpu.txt .
RUN pip3 install --no-cache-dir -r requirements-gpu.txt

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã¨ãƒ¢ãƒ‡ãƒ«
COPY app/ ./app/
COPY models/ ./models/

ENV PYTHONUNBUFFERED=1 \
    CUDA_VISIBLE_DEVICES=0

EXPOSE 8000

CMD ["python3", "-m", "uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
</code></pre>

<h3>requirements-gpu.txt</h3>

<pre><code class="language-plaintext"># requirements-gpu.txt
torch==2.0.0+cu118
torchvision==0.15.0+cu118
--extra-index-url https://download.pytorch.org/whl/cu118
fastapi==0.104.0
uvicorn[standard]==0.24.0
pydantic==2.5.0
pillow==10.1.0
numpy==1.24.3
</code></pre>

<h3>GPUæ¨è«–ã®å®Ÿè£…</h3>

<p>app/main.pyã®ä¾‹ï¼š</p>

<pre><code class="language-python"># app/main.py
import torch
from fastapi import FastAPI, File, UploadFile
from PIL import Image
import io

app = FastAPI()

# GPUä½¿ç”¨å¯å¦ã®ç¢ºèª
device = torch.device("cuda" if torch.cuda.is_available() else "cpu")
print(f"Using device: {device}")

# ãƒ¢ãƒ‡ãƒ«ã®ãƒ­ãƒ¼ãƒ‰
model = torch.load("/app/models/model.pth", map_location=device)
model.eval()

@app.get("/health")
async def health_check():
    return {
        "status": "healthy",
        "device": str(device),
        "cuda_available": torch.cuda.is_available(),
        "gpu_name": torch.cuda.get_device_name(0) if torch.cuda.is_available() else None
    }

@app.post("/predict")
async def predict(file: UploadFile = File(...)):
    # ç”»åƒã®èª­ã¿è¾¼ã¿
    image_bytes = await file.read()
    image = Image.open(io.BytesIO(image_bytes))

    # å‰å‡¦ç†ï¼ˆçœç•¥ï¼‰
    # tensor = preprocess(image)

    # GPUæ¨è«–
    with torch.no_grad():
        # tensor = tensor.to(device)
        # output = model(tensor)
        pass

    return {"prediction": "result"}
</code></pre>

<h3>Docker Composeã§GPUä½¿ç”¨</h3>

<pre><code class="language-yaml"># docker-compose-gpu.yml
version: '3.8'

services:
  ml-api-gpu:
    build:
      context: .
      dockerfile: Dockerfile.gpu
    container_name: ml-api-gpu
    ports:
      - "8000:8000"
    volumes:
      - ./models:/app/models:ro
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
    environment:
      - CUDA_VISIBLE_DEVICES=0
    restart: unless-stopped
</code></pre>

<p>èµ·å‹•ã‚³ãƒãƒ³ãƒ‰ï¼š</p>

<pre><code class="language-bash"># GPUå¯¾å¿œã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•
docker-compose -f docker-compose-gpu.yml up -d

# GPUä½¿ç”¨çŠ¶æ³ã®ç¢ºèª
docker exec ml-api-gpu nvidia-smi

# ãƒ­ã‚°ã®ç¢ºèª
docker-compose -f docker-compose-gpu.yml logs -f
</code></pre>

<h3>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ</h3>

<table>
<thead>
<tr>
<th>ç’°å¢ƒ</th>
<th>æ¨è«–æ™‚é–“ï¼ˆ1ç”»åƒï¼‰</th>
<th>ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆï¼ˆç”»åƒ/ç§’ï¼‰</th>
<th>å‚™è€ƒ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CPU (8ã‚³ã‚¢)</strong></td>
<td>150ms</td>
<td>6.7</td>
<td>python:3.9-slim</td>
</tr>
<tr>
<td><strong>GPU (RTX 3090)</strong></td>
<td>15ms</td>
<td>66.7</td>
<td>nvidia/cuda:11.8.0</td>
</tr>
<tr>
<td><strong>é«˜é€ŸåŒ–æ¯”</strong></td>
<td>10å€</td>
<td>10å€</td>
<td>ãƒãƒƒãƒã‚µã‚¤ã‚º1</td>
</tr>
</tbody>
</table>

<blockquote>
<p><strong>æ³¨æ„</strong>: ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚’å¢—ã‚„ã™ã“ã¨ã§ã€GPUã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’ã•ã‚‰ã«å‘ä¸Šã§ãã¾ã™ã€‚</p>
</blockquote>

<hr>

<h2>2.6 æœ¬ç« ã®ã¾ã¨ã‚</h2>

<h3>å­¦ã‚“ã ã“ã¨</h3>

<ol>
<li><p><strong>Dockerã®åŸºç¤</strong></p>
<ul>
<li>ã‚³ãƒ³ãƒ†ãƒŠã¨ä»®æƒ³ãƒã‚·ãƒ³ã®é•ã„</li>
<li>åŸºæœ¬çš„ãªDockerã‚³ãƒãƒ³ãƒ‰</li>
<li>ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã‚³ãƒ³ãƒ†ãƒŠã®é–¢ä¿‚</li>
</ul></li>

<li><p><strong>Dockerfileã®ä½œæˆ</strong></p>
<ul>
<li>é©åˆ‡ãªãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®é¸æŠ</li>
<li>ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã«ã‚ˆã‚‹æœ€é©åŒ–</li>
<li>ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ´»ç”¨</li>
</ul></li>

<li><p><strong>MLãƒ¢ãƒ‡ãƒ«ã®ã‚³ãƒ³ãƒ†ãƒŠåŒ–</strong></p>
<ul>
<li>FastAPI + PyTorchã®DockeråŒ–</li>
<li>.dockerignoreã«ã‚ˆã‚‹åŠ¹ç‡åŒ–</li>
<li>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯</li>
</ul></li>

<li><p><strong>Docker Composeã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</strong></p>
<ul>
<li>è¤‡æ•°ã‚µãƒ¼ãƒ“ã‚¹ã®çµ±åˆç®¡ç†</li>
<li>ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¨ç’°å¢ƒå¤‰æ•°ã®ç®¡ç†</li>
<li>ã‚µãƒ¼ãƒ“ã‚¹é–“ã®ä¾å­˜é–¢ä¿‚</li>
</ul></li>

<li><p><strong>GPUå¯¾å¿œMLã‚³ãƒ³ãƒ†ãƒŠ</strong></p>
<ul>
<li>NVIDIA Dockerã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</li>
<li>CUDAã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä½¿ç”¨</li>
<li>CPUæ¯”10å€ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</li>
</ul></li>
</ol>

<h3>ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h3>

<table>
<thead>
<tr>
<th>åŸå‰‡</th>
<th>èª¬æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>è»½é‡ã‚¤ãƒ¡ãƒ¼ã‚¸</strong></td>
<td>slimã‚„alpineãƒ™ãƒ¼ã‚¹ã‚’å„ªå…ˆ</td>
</tr>
<tr>
<td><strong>ãƒ¬ã‚¤ãƒ¤ãƒ¼æœ€é©åŒ–</strong></td>
<td>å¤‰æ›´é »åº¦ã®ä½ã„ã‚‚ã®ã‚’å…ˆã«</td>
</tr>
<tr>
<td><strong>ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰</strong></td>
<td>ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œç’°å¢ƒã‚’åˆ†é›¢</td>
</tr>
<tr>
<td><strong>érootãƒ¦ãƒ¼ã‚¶ãƒ¼</strong></td>
<td>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Šã®ãŸã‚</td>
</tr>
<tr>
<td><strong>.dockerignore</strong></td>
<td>ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–</td>
</tr>
<tr>
<td><strong>ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯</strong></td>
<td>ã‚µãƒ¼ãƒ“ã‚¹ã®å¥å…¨æ€§ç›£è¦–</td>
</tr>
<tr>
<td><strong>ç’°å¢ƒå¤‰æ•°</strong></td>
<td>è¨­å®šã®å¤–éƒ¨åŒ–</td>
</tr>
</tbody>
</table>

<h3>æ¬¡ã®ç« ã¸</h3>

<p>ç¬¬3ç« ã§ã¯ã€<strong>Kubernetes ã«ã‚ˆã‚‹ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</strong>ã‚’å­¦ã³ã¾ã™ï¼š</p>
<ul>
<li>Kubernetesã®åŸºæœ¬æ¦‚å¿µ</li>
<li>Podã€Serviceã€Deploymentã®ä½œæˆ</li>
<li>ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã¨è² è·åˆ†æ•£</li>
<li>ConfigMapã¨Secretã®ç®¡ç†</li>
<li>æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤</li>
</ul>

<div class="navigation">
    <a href="chapter1-overview.html" class="nav-button">â† å‰ã®ç« : ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ¦‚è¦</a>
    <a href="chapter3-kubernetes.html" class="nav-button">æ¬¡ã®ç« : Kubernetes â†’</a>
</div>

    </main>

    
    <section class="disclaimer">
        <h3>å…è²¬äº‹é …</h3>
        <ul>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯æ•™è‚²ãƒ»ç ”ç©¶ãƒ»æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€å°‚é–€çš„ãªåŠ©è¨€(æ³•å¾‹ãƒ»ä¼šè¨ˆãƒ»æŠ€è¡“çš„ä¿è¨¼ãªã©)ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŠã‚ˆã³ä»˜éšã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹ã¯ã€Œç¾çŠ¶æœ‰å§¿(AS IS)ã€ã§æä¾›ã•ã‚Œã€æ˜ç¤ºã¾ãŸã¯é»™ç¤ºã‚’å•ã‚ãšã€å•†å“æ€§ã€ç‰¹å®šç›®çš„é©åˆæ€§ã€æ¨©åˆ©éä¾µå®³ã€æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã€å‹•ä½œãƒ»å®‰å…¨æ€§ç­‰ã„ã‹ãªã‚‹ä¿è¨¼ã‚‚ã—ã¾ã›ã‚“ã€‚</li>
            <li>å¤–éƒ¨ãƒªãƒ³ã‚¯ã€ç¬¬ä¸‰è€…ãŒæä¾›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã®å†…å®¹ãƒ»å¯ç”¨æ€§ãƒ»å®‰å…¨æ€§ã«ã¤ã„ã¦ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ãƒ»å®Ÿè¡Œãƒ»è§£é‡ˆã«ã‚ˆã‚Šç›´æ¥çš„ãƒ»é–“æ¥çš„ãƒ»ä»˜éšçš„ãƒ»ç‰¹åˆ¥ãƒ»çµæœçš„ãƒ»æ‡²ç½°çš„æå®³ãŒç”Ÿã˜ãŸå ´åˆã§ã‚‚ã€é©ç”¨æ³•ã§è¨±å®¹ã•ã‚Œã‚‹æœ€å¤§é™ã®ç¯„å›²ã§ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å†…å®¹ã¯ã€äºˆå‘Šãªãå¤‰æ›´ãƒ»æ›´æ–°ãƒ»æä¾›åœæ­¢ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‘—ä½œæ¨©ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯æ˜è¨˜ã•ã‚ŒãŸæ¡ä»¶(ä¾‹: CC BY 4.0)ã«å¾“ã„ã¾ã™ã€‚å½“è©²ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯é€šå¸¸ã€ç„¡ä¿è¨¼æ¡é …ã‚’å«ã¿ã¾ã™ã€‚</li>
        </ul>
    </section>

<footer>
        <p><strong>ä½œæˆè€…</strong>: AI Terakoya Content Team</p>
        <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.0 | <strong>ä½œæˆæ—¥</strong>: 2025-10-23</p>
        <p><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0</p>
        <p>Â© 2025 AI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
