<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬1ç« ï¼šæ¨è–¦ã‚·ã‚¹ãƒ†ãƒ åŸºç¤ - AI Terakoya</title>

    <style>
        :root {
            --color-primary: #2c3e50;
            --color-primary-dark: #1a252f;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-text: #2d3748;
            --color-text-light: #4a5568;
            --color-bg: #ffffff;
            --color-bg-alt: #f7fafc;
            --color-border: #e2e8f0;
            --color-code-bg: #f8f9fa;
            --color-link: #3182ce;
            --color-link-hover: #2c5aa0;

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

            --border-radius: 8px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-bg);
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--box-shadow);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md) var(--spacing-xl);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--color-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-xs);
            border-bottom: 3px solid var(--color-accent);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        h4 {
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        li {
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            overflow-x: auto;
            margin-bottom: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: var(--font-mono);
            font-size: 0.9em;
            background-color: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-md);
            font-size: 0.95rem;
        }

        th, td {
            border: 1px solid var(--color-border);
            padding: var(--spacing-sm);
            text-align: left;
        }

        th {
            background-color: var(--color-bg-alt);
            font-weight: 600;
            color: var(--color-primary);
        }

        blockquote {
            border-left: 4px solid var(--color-accent);
            padding-left: var(--spacing-md);
            margin: var(--spacing-md) 0;
            color: var(--color-text-light);
            font-style: italic;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        .mermaid {
            text-align: center;
            margin: var(--spacing-lg) 0;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        details {
            background-color: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-primary);
            user-select: none;
            padding: var(--spacing-xs);
            margin: calc(-1 * var(--spacing-md));
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        summary:hover {
            background-color: rgba(123, 44, 191, 0.1);
        }

        details[open] summary {
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--color-border);
        }

        .nav-button {
            flex: 1;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--box-shadow);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-decoration: none;
        }

        footer {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-md);
            background-color: var(--color-bg-alt);
            border-top: 1px solid var(--color-border);
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }
        .disclaimer {
            max-width: 900px;
            margin: 2rem auto;
            padding: 1.5rem;
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
            border-radius: 4px;
        }

        .disclaimer h3 {
            color: #495057;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .disclaimer ul {
            list-style: none;
            padding-left: 0;
        }

        .disclaimer li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.9rem;
            color: #6c757d;
            line-height: 1.6;
        }

        .disclaimer li::before {
            content: "âš ï¸";
            position: absolute;
            left: 0;
        }


        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            .navigation {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: var(--spacing-xs);
            }
        }
    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>

    <!-- MathJax for LaTeX equation rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'mermaid'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
</head>
<body>
        <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="/wp/knowledge/jp/index.html">AIå¯ºå­å±‹ãƒˆãƒƒãƒ—</a><span class="breadcrumb-separator">â€º</span><a href="/wp/knowledge/jp/ML/index.html">æ©Ÿæ¢°å­¦ç¿’</a><span class="breadcrumb-separator">â€º</span><a href="/wp/knowledge/jp/ML/recommendation-systems-introduction/index.html">Recommendation Systems</a><span class="breadcrumb-separator">â€º</span><span class="breadcrumb-current">Chapter 1</span>
        </div>
    </nav>

    <header>
        <div class="header-content">
            <h1>ç¬¬1ç« ï¼šæ¨è–¦ã‚·ã‚¹ãƒ†ãƒ åŸºç¤</h1>
            <p class="subtitle">æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®åŸºæœ¬æ¦‚å¿µã¨ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®åŸºç›¤</p>
            <div class="meta">
                <span class="meta-item">ğŸ“– èª­äº†æ™‚é–“: 25-30åˆ†</span>
                <span class="meta-item">ğŸ“Š é›£æ˜“åº¦: åˆç´š</span>
                <span class="meta-item">ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹: 9å€‹</span>
                <span class="meta-item">ğŸ“ æ¼”ç¿’å•é¡Œ: 5å•</span>
            </div>
        </div>
    </header>

    <main class="container">

<h2>å­¦ç¿’ç›®æ¨™</h2>
<p>ã“ã®ç« ã‚’èª­ã‚€ã“ã¨ã§ã€ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š</p>
<ul>
<li>âœ… æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®å½¹å‰²ã¨ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã‚’ç†è§£ã™ã‚‹</li>
<li>âœ… æ¨è–¦ã‚¿ã‚¹ã‚¯ã®åˆ†é¡ã¨è©•ä¾¡æŒ‡æ¨™ã‚’å­¦ã¶</li>
<li>âœ… Cold Startå•é¡Œãªã©ä¸»è¦ãªèª²é¡Œã‚’æŠŠæ¡ã™ã‚‹</li>
<li>âœ… MovieLensãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å‰å‡¦ç†ãŒã§ãã‚‹</li>
<li>âœ… User-Itemè¡Œåˆ—ã‚’æ§‹ç¯‰ã—ã€Train-Teståˆ†å‰²ã‚’å®Ÿè£…ã§ãã‚‹</li>
<li>âœ… Pythonã§æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®åŸºç¤ã‚’å®Ÿè£…ã§ãã‚‹</li>
</ul>

<hr>

<h2>1.1 æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã¨ã¯</h2>

<h3>ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã®é‡è¦æ€§</h3>
<p><strong>æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ï¼ˆRecommendation Systemï¼‰</strong>ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã‚„è¡Œå‹•ã«åŸºã¥ã„ã¦ã€æœ€é©ãªã‚¢ã‚¤ãƒ†ãƒ ï¼ˆå•†å“ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€ã‚µãƒ¼ãƒ“ã‚¹ãªã©ï¼‰ã‚’ææ¡ˆã™ã‚‹æŠ€è¡“ã§ã™ã€‚</p>

<blockquote>
<p>ã€Œæƒ…å ±éå¤šã®æ™‚ä»£ã«ãŠã„ã¦ã€æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ä¾¡å€¤ã‚ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’çµã³ã¤ã‘ã‚‹é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚ã€</p>
</blockquote>

<h3>æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®å¿œç”¨ä¾‹</h3>

<table>
<thead>
<tr>
<th>æ¥­ç•Œ</th>
<th>å¿œç”¨ä¾‹</th>
<th>æ¨è–¦å¯¾è±¡</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>E-commerce</strong></td>
<td>Amazon, æ¥½å¤©</td>
<td>å•†å“</td>
</tr>
<tr>
<td><strong>å‹•ç”»é…ä¿¡</strong></td>
<td>Netflix, YouTube</td>
<td>æ˜ ç”»ã€å‹•ç”»</td>
</tr>
<tr>
<td><strong>éŸ³æ¥½é…ä¿¡</strong></td>
<td>Spotify, Apple Music</td>
<td>æ¥½æ›²ã€ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆ</td>
</tr>
<tr>
<td><strong>SNS</strong></td>
<td>Facebook, Twitter</td>
<td>å‹äººã€æŠ•ç¨¿</td>
</tr>
<tr>
<td><strong>ãƒ‹ãƒ¥ãƒ¼ã‚¹</strong></td>
<td>Google News</td>
<td>è¨˜äº‹</td>
</tr>
<tr>
<td><strong>æ±‚äºº</strong></td>
<td>LinkedIn</td>
<td>æ±‚äººã€å€™è£œè€…</td>
</tr>
</tbody>
</table>

<h3>ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤</h3>

<ul>
<li><strong>å£²ä¸Šå‘ä¸Š</strong>: ã‚¯ãƒ­ã‚¹ã‚»ãƒ«ãƒ»ã‚¢ãƒƒãƒ—ã‚»ãƒ«ã«ã‚ˆã‚‹åç›Šå¢—åŠ ï¼ˆAmazonã®å£²ä¸Šã®35%ã¯æ¨è–¦ã‹ã‚‰ï¼‰</li>
<li><strong>ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆå‘ä¸Š</strong>: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ»åœ¨æ™‚é–“ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¶ˆè²»é‡ã®å¢—åŠ </li>
<li><strong>é¡§å®¢æº€è¶³åº¦å‘ä¸Š</strong>: ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸä½“é¨“ã«ã‚ˆã‚‹æº€è¶³åº¦å‘ä¸Š</li>
<li><strong>ãƒãƒ£ãƒ¼ãƒ³ç‡ä½ä¸‹</strong>: é–¢é€£æ€§ã®é«˜ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æä¾›ã«ã‚ˆã‚‹é›¢è„±é˜²æ­¢</li>
<li><strong>åœ¨åº«æœ€é©åŒ–</strong>: ãƒ­ãƒ³ã‚°ãƒ†ãƒ¼ãƒ«å•†å“ã®ç™ºè¦‹ã¨è²©å£²ä¿ƒé€²</li>
</ul>

<h3>æ¨è–¦ã®ç¨®é¡</h3>

<div class="mermaid">
graph TD
    A[æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ] --> B[å”èª¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°]
    A --> C[ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ™ãƒ¼ã‚¹]
    A --> D[ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰]

    B --> B1[User-based]
    B --> B2[Item-based]
    B --> B3[Matrix Factorization]

    C --> C1[ç‰¹å¾´é‡æŠ½å‡º]
    C --> C2[é¡ä¼¼åº¦è¨ˆç®—]

    D --> D1[Weighted Hybrid]
    D --> D2[Switching Hybrid]
    D --> D3[Feature Combination]

    style A fill:#e8f5e9
    style B fill:#e3f2fd
    style C fill:#fff3e0
    style D fill:#f3e5f5
</div>

<hr>

<h2>1.2 æ¨è–¦ã‚¿ã‚¹ã‚¯ã®åˆ†é¡</h2>

<h3>Explicit vs Implicit Feedback</h3>

<p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«ã¯ã€æ˜ç¤ºçš„ãªã‚‚ã®ã¨æš—é»™çš„ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚</p>

<table>
<thead>
<tr>
<th>ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç¨®é¡</th>
<th>èª¬æ˜</th>
<th>ä¾‹</th>
<th>é•·æ‰€</th>
<th>çŸ­æ‰€</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Explicit</strong><br>ï¼ˆæ˜ç¤ºçš„ï¼‰</td>
<td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´æ¥è©•ä¾¡</td>
<td>æ˜Ÿè©•ä¾¡ã€ã„ã„ã­ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼</td>
<td>æ˜ç¢ºãªå¥½ã¿æƒ…å ±</td>
<td>ãƒ‡ãƒ¼ã‚¿ãŒå°‘ãªã„</td>
</tr>
<tr>
<td><strong>Implicit</strong><br>ï¼ˆæš—é»™çš„ï¼‰</td>
<td>è¡Œå‹•ã‹ã‚‰æ¨æ¸¬</td>
<td>ã‚¯ãƒªãƒƒã‚¯ã€è¦–è´æ™‚é–“ã€è³¼å…¥</td>
<td>å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿</td>
<td>è§£é‡ˆãŒæ›–æ˜§</td>
</tr>
</tbody>
</table>

<h4>Explicit Feedbackã®ä¾‹</h4>

<pre><code class="language-python">import pandas as pd
import numpy as np

# Explicit Feedback: æ˜ ç”»ã®è©•ä¾¡ãƒ‡ãƒ¼ã‚¿
np.random.seed(42)
n_ratings = 100

explicit_data = pd.DataFrame({
    'user_id': np.random.randint(1, 21, n_ratings),
    'item_id': np.random.randint(1, 51, n_ratings),
    'rating': np.random.randint(1, 6, n_ratings),  # 1-5ã®è©•ä¾¡
    'timestamp': pd.date_range('2024-01-01', periods=n_ratings, freq='H')
})

print("=== Explicit Feedbackï¼ˆè©•ä¾¡ãƒ‡ãƒ¼ã‚¿ï¼‰===")
print(explicit_data.head(10))
print(f"\nè©•ä¾¡ã®åˆ†å¸ƒ:")
print(explicit_data['rating'].value_counts().sort_index())
print(f"\nå¹³å‡è©•ä¾¡: {explicit_data['rating'].mean():.2f}")
print(f"è©•ä¾¡ã®æ¨™æº–åå·®: {explicit_data['rating'].std():.2f}")
</code></pre>

<p><strong>å‡ºåŠ›</strong>ï¼š</p>
<pre><code>=== Explicit Feedbackï¼ˆè©•ä¾¡ãƒ‡ãƒ¼ã‚¿ï¼‰===
   user_id  item_id  rating           timestamp
0        7       40       4 2024-01-01 00:00:00
1       20       34       3 2024-01-01 01:00:00
2       18       48       1 2024-01-01 02:00:00
3       11       14       5 2024-01-01 03:00:00
4        6       21       1 2024-01-01 04:00:00
5       17       28       4 2024-01-01 05:00:00
6        3        9       1 2024-01-01 06:00:00
7        9       37       4 2024-01-01 07:00:00
8       20       17       5 2024-01-01 08:00:00
9        8       46       2 2024-01-01 09:00:00

è©•ä¾¡ã®åˆ†å¸ƒ:
1    23
2    19
3    18
4    21
5    19
Name: rating, dtype: int64

å¹³å‡è©•ä¾¡: 2.98
è©•ä¾¡ã®æ¨™æº–åå·®: 1.47
</code></pre>

<h4>Implicit Feedbackã®ä¾‹</h4>

<pre><code class="language-python"># Implicit Feedback: è¦–è´ãƒ‡ãƒ¼ã‚¿
implicit_data = pd.DataFrame({
    'user_id': np.random.randint(1, 21, n_ratings),
    'item_id': np.random.randint(1, 51, n_ratings),
    'watch_time': np.random.randint(1, 120, n_ratings),  # åˆ†
    'completed': np.random.choice([0, 1], n_ratings, p=[0.3, 0.7]),
    'timestamp': pd.date_range('2024-01-01', periods=n_ratings, freq='H')
})

# Implicit Feedbackã‹ã‚‰å¥½ã¿ã‚’æ¨æ¸¬
# è¦–è´æ™‚é–“ãŒé•·ã„ã€ã¾ãŸã¯å®Œäº†ã—ãŸå ´åˆã‚’ã€Œå¥½ãã€ã¨æ¨å®š
implicit_data['preference'] = (
    (implicit_data['watch_time'] > 60) |
    (implicit_data['completed'] == 1)
).astype(int)

print("\n=== Implicit Feedbackï¼ˆè¦–è´ãƒ‡ãƒ¼ã‚¿ï¼‰===")
print(implicit_data.head(10))
print(f"\nå®Œäº†ç‡: {implicit_data['completed'].mean():.1%}")
print(f"æ¨å®šå¥½ã¿ç‡: {implicit_data['preference'].mean():.1%}")
</code></pre>

<h3>Rating Prediction</h3>

<p><strong>Rating Predictionï¼ˆè©•ä¾¡äºˆæ¸¬ï¼‰</strong>ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã¾ã è©•ä¾¡ã—ã¦ã„ãªã„ã‚¢ã‚¤ãƒ†ãƒ ã«å¯¾ã™ã‚‹è©•ä¾¡å€¤ã‚’äºˆæ¸¬ã™ã‚‹ã‚¿ã‚¹ã‚¯ã§ã™ã€‚</p>

<p>$$
\hat{r}_{ui} = f(\text{user}_u, \text{item}_i)
$$</p>

<ul>
<li>$\hat{r}_{ui}$: ãƒ¦ãƒ¼ã‚¶ãƒ¼$u$ã®ã‚¢ã‚¤ãƒ†ãƒ $i$ã«å¯¾ã™ã‚‹äºˆæ¸¬è©•ä¾¡</li>
<li>$f$: æ¨è–¦ãƒ¢ãƒ‡ãƒ«</li>
</ul>

<pre><code class="language-python">from sklearn.model_selection import train_test_split
from sklearn.metrics import mean_squared_error, mean_absolute_error
import numpy as np

# User-Itemè¡Œåˆ—ã®æ§‹ç¯‰ï¼ˆç°¡æ˜“ç‰ˆï¼‰
ratings_matrix = explicit_data.pivot_table(
    index='user_id',
    columns='item_id',
    values='rating',
    aggfunc='mean'
)

print("=== User-Itemè©•ä¾¡è¡Œåˆ— ===")
print(f"å½¢çŠ¶: {ratings_matrix.shape}")
print(f"æ¬ æç‡: {ratings_matrix.isnull().sum().sum() / (ratings_matrix.shape[0] * ratings_matrix.shape[1]):.1%}")
print(f"\nè¡Œåˆ—ï¼ˆä¸€éƒ¨ï¼‰:")
print(ratings_matrix.iloc[:5, :5])
</code></pre>

<h3>Top-N Recommendation</h3>

<p><strong>Top-Næ¨è–¦</strong>ã¯ã€å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ä¸Šä½Nå€‹ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ¨è–¦ã™ã‚‹ã‚¿ã‚¹ã‚¯ã§ã™ã€‚</p>

<pre><code class="language-python"># ç°¡æ˜“çš„ãªTop-Næ¨è–¦ï¼ˆäººæ°—ãƒ™ãƒ¼ã‚¹ï¼‰
def popularity_based_recommendation(data, n=5):
    """äººæ°—åº¦ãƒ™ãƒ¼ã‚¹ã®Top-Næ¨è–¦"""
    item_popularity = data.groupby('item_id')['rating'].agg(['count', 'mean'])
    item_popularity['score'] = (
        item_popularity['count'] * 0.3 +
        item_popularity['mean'] * 0.7
    )
    top_n = item_popularity.nlargest(n, 'score')
    return top_n

top_items = popularity_based_recommendation(explicit_data, n=5)

print("\n=== Top-5æ¨è–¦ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆäººæ°—ãƒ™ãƒ¼ã‚¹ï¼‰===")
print(top_items)
print(f"\næ¨è–¦ç†ç”±:")
print("- ã‚¹ã‚³ã‚¢ = è©•ä¾¡æ•° Ã— 0.3 + å¹³å‡è©•ä¾¡ Ã— 0.7")
</code></pre>

<h3>Ranking Problems</h3>

<p><strong>ãƒ©ãƒ³ã‚­ãƒ³ã‚°å•é¡Œ</strong>ã¯ã€å€™è£œã‚¢ã‚¤ãƒ†ãƒ ã®é †åºä»˜ã‘ã‚’è¡Œã†ã‚¿ã‚¹ã‚¯ã§ã™ã€‚é–¢é€£åº¦ã®é«˜ã„é †ã«ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä¸¦ã¹ã¾ã™ã€‚</p>

<pre><code class="language-python"># ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚¹ã‚³ã‚¢é †ã«ä¸¦ã¹ã‚‹
def rank_items_for_user(user_id, data):
    """ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ãƒ©ãƒ³ã‚­ãƒ³ã‚°"""
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®éå»ã®è©•ä¾¡å‚¾å‘ã‚’è€ƒæ…®
    user_ratings = data[data['user_id'] == user_id]
    user_avg_rating = user_ratings['rating'].mean()

    # å…¨ã‚¢ã‚¤ãƒ†ãƒ ã®æƒ…å ±
    all_items = data.groupby('item_id')['rating'].agg(['mean', 'count'])

    # ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼ˆç°¡æ˜“ç‰ˆï¼‰
    all_items['score'] = (
        all_items['mean'] * 0.5 +
        user_avg_rating * 0.3 +
        np.log1p(all_items['count']) * 0.2
    )

    ranked_items = all_items.sort_values('score', ascending=False)
    return ranked_items

# ãƒ¦ãƒ¼ã‚¶ãƒ¼7ã¸ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°
user_ranking = rank_items_for_user(7, explicit_data)
print("\n=== ãƒ¦ãƒ¼ã‚¶ãƒ¼7ã¸ã®ã‚¢ã‚¤ãƒ†ãƒ ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆä¸Šä½10ï¼‰===")
print(user_ranking.head(10))
</code></pre>

<hr>

<h2>1.3 è©•ä¾¡æŒ‡æ¨™</h2>

<h3>Precision, Recall, F1</h3>

<p>æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®ç²¾åº¦ã‚’æ¸¬å®šã™ã‚‹åŸºæœ¬çš„ãªæŒ‡æ¨™ã§ã™ã€‚</p>

<p>$$
\text{Precision@K} = \frac{\text{æ¨è–¦ã—ãŸé–¢é€£ã‚¢ã‚¤ãƒ†ãƒ æ•°}}{K}
$$</p>

<p>$$
\text{Recall@K} = \frac{\text{æ¨è–¦ã—ãŸé–¢é€£ã‚¢ã‚¤ãƒ†ãƒ æ•°}}{\text{å…¨é–¢é€£ã‚¢ã‚¤ãƒ†ãƒ æ•°}}
$$</p>

<p>$$
\text{F1@K} = 2 \cdot \frac{\text{Precision@K} \cdot \text{Recall@K}}{\text{Precision@K} + \text{Recall@K}}
$$</p>

<pre><code class="language-python">def precision_recall_at_k(recommended, relevant, k):
    """Precision@K ã¨ Recall@K ã‚’è¨ˆç®—"""
    recommended_k = recommended[:k]

    # æ¨è–¦ã—ãŸä¸­ã§é–¢é€£ãŒã‚ã‚‹ã‚‚ã®
    hits = len(set(recommended_k) & set(relevant))

    precision = hits / k if k > 0 else 0
    recall = hits / len(relevant) if len(relevant) > 0 else 0

    if precision + recall > 0:
        f1 = 2 * precision * recall / (precision + recall)
    else:
        f1 = 0

    return precision, recall, f1

# ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®æ¨è–¦
recommended_items = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]  # æ¨è–¦ã—ãŸã‚¢ã‚¤ãƒ†ãƒ 
relevant_items = [2, 3, 5, 8, 11, 15]  # å®Ÿéš›ã«é–¢é€£ã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ 

for k in [5, 10]:
    p, r, f = precision_recall_at_k(recommended_items, relevant_items, k)
    print(f"\n=== K={k} ã§ã®è©•ä¾¡ ===")
    print(f"Precision@{k}: {p:.3f}")
    print(f"Recall@{k}: {r:.3f}")
    print(f"F1@{k}: {f:.3f}")
</code></pre>

<p><strong>å‡ºåŠ›</strong>ï¼š</p>
<pre><code>=== K=5 ã§ã®è©•ä¾¡ ===
Precision@5: 0.400
Recall@5: 0.333
F1@5: 0.364

=== K=10 ã§ã®è©•ä¾¡ ===
Precision@10: 0.400
Recall@10: 0.667
F1@10: 0.500
</code></pre>

<h3>NDCG (Normalized Discounted Cumulative Gain)</h3>

<p><strong>NDCG</strong>ã¯ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®è³ªã‚’è©•ä¾¡ã™ã‚‹æŒ‡æ¨™ã§ã™ã€‚ä¸Šä½ã«ã‚ˆã‚Šé–¢é€£æ€§ã®é«˜ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’é…ç½®ã™ã‚‹ã“ã¨ã‚’é‡è¦–ã—ã¾ã™ã€‚</p>

<p>$$
\text{DCG@K} = \sum_{i=1}^{K} \frac{2^{rel_i} - 1}{\log_2(i + 1)}
$$</p>

<p>$$
\text{NDCG@K} = \frac{\text{DCG@K}}{\text{IDCG@K}}
$$</p>

<pre><code class="language-python">import numpy as np

def dcg_at_k(relevances, k):
    """DCG@K ã‚’è¨ˆç®—"""
    relevances = np.array(relevances[:k])
    if relevances.size:
        discounts = np.log2(np.arange(2, relevances.size + 2))
        return np.sum((2**relevances - 1) / discounts)
    return 0.0

def ndcg_at_k(relevances, k):
    """NDCG@K ã‚’è¨ˆç®—"""
    dcg = dcg_at_k(relevances, k)
    ideal_relevances = sorted(relevances, reverse=True)
    idcg = dcg_at_k(ideal_relevances, k)

    if idcg == 0:
        return 0.0
    return dcg / idcg

# ä¾‹: æ¨è–¦çµæœã®é–¢é€£åº¦ã‚¹ã‚³ã‚¢ï¼ˆ5æ®µéšï¼‰
relevances = [3, 2, 5, 0, 1, 4, 2, 0, 3, 1]  # æ¨è–¦é †ã®é–¢é€£åº¦

print("=== NDCGè©•ä¾¡ ===")
for k in [3, 5, 10]:
    ndcg = ndcg_at_k(relevances, k)
    print(f"NDCG@{k}: {ndcg:.3f}")

print(f"\né–¢é€£åº¦ãƒªã‚¹ãƒˆï¼ˆæ¨è–¦é †ï¼‰: {relevances}")
print(f"ç†æƒ³çš„ãªé †åº: {sorted(relevances, reverse=True)}")
</code></pre>

<h3>MAP (Mean Average Precision)</h3>

<p><strong>MAP</strong>ã¯ã€å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®Average Precisionã®å¹³å‡ã§ã™ã€‚</p>

<p>$$
\text{AP@K} = \frac{1}{\min(m, K)} \sum_{k=1}^{K} \text{Precision@k} \cdot \text{rel}(k)
$$</p>

<p>$$
\text{MAP@K} = \frac{1}{|U|} \sum_{u \in U} \text{AP@K}_u
$$</p>

<pre><code class="language-python">def average_precision_at_k(recommended, relevant, k):
    """Average Precision@K ã‚’è¨ˆç®—"""
    recommended_k = recommended[:k]

    score = 0.0
    num_hits = 0.0

    for i, item in enumerate(recommended_k):
        if item in relevant:
            num_hits += 1.0
            score += num_hits / (i + 1.0)

    if len(relevant) == 0:
        return 0.0

    return score / min(len(relevant), k)

# ä¾‹: è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®MAPè¨ˆç®—
users_recommendations = [
    ([1, 3, 5, 7, 9], [3, 5, 9]),      # ãƒ¦ãƒ¼ã‚¶ãƒ¼1
    ([2, 4, 6, 8, 10], [4, 8]),        # ãƒ¦ãƒ¼ã‚¶ãƒ¼2
    ([1, 2, 3, 4, 5], [1, 2, 5]),      # ãƒ¦ãƒ¼ã‚¶ãƒ¼3
]

aps = []
for recommended, relevant in users_recommendations:
    ap = average_precision_at_k(recommended, relevant, k=5)
    aps.append(ap)
    print(f"æ¨è–¦: {recommended}, é–¢é€£: {relevant} -> AP@5: {ap:.3f}")

map_score = np.mean(aps)
print(f"\n=== MAP@5: {map_score:.3f} ===")
</code></pre>

<h3>Coverage, Diversity, Serendipity</h3>

<p>æ¨è–¦ã®è³ªã‚’å¤šé¢çš„ã«è©•ä¾¡ã™ã‚‹æŒ‡æ¨™ã§ã™ã€‚</p>

<table>
<thead>
<tr>
<th>æŒ‡æ¨™</th>
<th>èª¬æ˜</th>
<th>ç›®çš„</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Coverage</strong><br>ï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸ï¼‰</td>
<td>æ¨è–¦ã•ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã®å‰²åˆ</td>
<td>ãƒ­ãƒ³ã‚°ãƒ†ãƒ¼ãƒ«ã‚¢ã‚¤ãƒ†ãƒ ã®ç™ºè¦‹</td>
</tr>
<tr>
<td><strong>Diversity</strong><br>ï¼ˆå¤šæ§˜æ€§ï¼‰</td>
<td>æ¨è–¦ãƒªã‚¹ãƒˆå†…ã®ã‚¢ã‚¤ãƒ†ãƒ ã®å¤šæ§˜æ€§</td>
<td>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ–ãƒ«å›é¿</td>
</tr>
<tr>
<td><strong>Serendipity</strong><br>ï¼ˆæ„å¤–æ€§ï¼‰</td>
<td>äºˆæƒ³å¤–ã§é–¢é€£æ€§ã®é«˜ã„æ¨è–¦</td>
<td>æ–°è¦ç™ºè¦‹ã®ä¿ƒé€²</td>
</tr>
</tbody>
</table>

<pre><code class="language-python">def calculate_coverage(all_recommendations, total_items):
    """ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’è¨ˆç®—"""
    unique_recommended = set()
    for recs in all_recommendations:
        unique_recommended.update(recs)

    coverage = len(unique_recommended) / total_items
    return coverage

def calculate_diversity(recommendations):
    """æ¨è–¦ãƒªã‚¹ãƒˆã®å¤šæ§˜æ€§ã‚’è¨ˆç®—ï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯ç‡ï¼‰"""
    unique_items = len(set(recommendations))
    diversity = unique_items / len(recommendations)
    return diversity

# ä¾‹: ã‚«ãƒãƒ¬ãƒƒã‚¸ã¨å¤šæ§˜æ€§ã®è¨ˆç®—
all_recs = [
    [1, 2, 3, 4, 5],
    [1, 3, 6, 7, 8],
    [2, 4, 9, 10, 11],
    [1, 5, 12, 13, 14]
]

total_items = 50  # ã‚¢ã‚¤ãƒ†ãƒ ç·æ•°

coverage = calculate_coverage(all_recs, total_items)
print(f"=== ã‚«ãƒãƒ¬ãƒƒã‚¸ã¨å¤šæ§˜æ€§ ===")
print(f"ã‚«ãƒãƒ¬ãƒƒã‚¸: {coverage:.1%}")
print(f"æ¨è–¦ã•ã‚ŒãŸãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚¢ã‚¤ãƒ†ãƒ : {len(set([item for recs in all_recs for item in recs]))}")

for i, recs in enumerate(all_recs):
    diversity = calculate_diversity(recs)
    print(f"ãƒ¦ãƒ¼ã‚¶ãƒ¼{i+1}ã®æ¨è–¦å¤šæ§˜æ€§: {diversity:.1%}")
</code></pre>

<hr>

<h2>1.4 æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®èª²é¡Œ</h2>

<h3>Cold Start Problem</h3>

<p><strong>Cold Startå•é¡Œ</strong>ã¯ã€æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„æ–°è¦ã‚¢ã‚¤ãƒ†ãƒ ã«å¯¾ã—ã¦ãƒ‡ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã‚‹å•é¡Œã§ã™ã€‚</p>

<table>
<thead>
<tr>
<th>ç¨®é¡</th>
<th>èª¬æ˜</th>
<th>å¯¾ç­–</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>User Cold Start</strong></td>
<td>æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ä¸æ˜</td>
<td>äººæ°—ã‚¢ã‚¤ãƒ†ãƒ æ¨è–¦ã€ãƒ‡ãƒ¢ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯æƒ…å ±æ´»ç”¨</td>
</tr>
<tr>
<td><strong>Item Cold Start</strong></td>
<td>æ–°è¦ã‚¢ã‚¤ãƒ†ãƒ ã®è©•ä¾¡ãªã—</td>
<td>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ™ãƒ¼ã‚¹æ¨è–¦ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ´»ç”¨</td>
</tr>
<tr>
<td><strong>System Cold Start</strong></td>
<td>ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ‡ãƒ¼ã‚¿ä¸è¶³</td>
<td>å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°</td>
</tr>
</tbody>
</table>

<h3>Data Sparsity</h3>

<p><strong>ãƒ‡ãƒ¼ã‚¿å¸Œè–„æ€§</strong>ã¯ã€User-Itemè¡Œåˆ—ã®ã»ã¨ã‚“ã©ãŒæ¬ æå€¤ã§ã‚ã‚‹å•é¡Œã§ã™ã€‚</p>

<div class="mermaid">
graph LR
    A[User-Itemè¡Œåˆ—] --> B[è©•ä¾¡æ¸ˆã¿: 1%]
    A --> C[æœªè©•ä¾¡: 99%]

    B --> D[å”èª¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯èƒ½]
    C --> E[æ¨è–¦å›°é›£]

    style A fill:#fff3e0
    style B fill:#c8e6c9
    style C fill:#ffcdd2
    style D fill:#e8f5e9
    style E fill:#ffebee
</div>

<h3>Scalability</h3>

<p><strong>ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£</strong>ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã¨ã‚¢ã‚¤ãƒ†ãƒ æ•°ã®å¢—åŠ ã«ä¼´ã†è¨ˆç®—é‡ã®å•é¡Œã§ã™ã€‚</p>

<ul>
<li>ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: 100ä¸‡äºº</li>
<li>ã‚¢ã‚¤ãƒ†ãƒ æ•°: 10ä¸‡å€‹</li>
<li>â†’ User-Itemè¡Œåˆ—: 1000å„„ã‚»ãƒ«</li>
</ul>

<blockquote>
<p><strong>å¯¾ç­–</strong>: æ¬¡å…ƒå‰Šæ¸›ï¼ˆMatrix Factorizationï¼‰ã€è¿‘ä¼¼æœ€è¿‘å‚æ¢ç´¢ï¼ˆANNï¼‰ã€åˆ†æ•£å‡¦ç†</p>
</blockquote>

<h3>Filter Bubble</h3>

<p><strong>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ–ãƒ«</strong>ã¯ã€ä¼¼ãŸã‚¢ã‚¤ãƒ†ãƒ ã°ã‹ã‚Šæ¨è–¦ã•ã‚Œã€å¤šæ§˜æ€§ãŒå¤±ã‚ã‚Œã‚‹å•é¡Œã§ã™ã€‚</p>

<ul>
<li><strong>åŸå› </strong>: éåº¦ãªãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³</li>
<li><strong>å½±éŸ¿</strong>: æ–°è¦ç™ºè¦‹ã®æ¸›å°‘ã€åã£ãŸæƒ…å ±æ¶ˆè²»</li>
<li><strong>å¯¾ç­–</strong>: å¤šæ§˜æ€§ã®è€ƒæ…®ã€ã‚»ãƒ¬ãƒ³ãƒ‡ã‚£ãƒ”ãƒ†ã‚£ã®å°å…¥ã€æ¢ç´¢ã¨æ´»ç”¨ã®ãƒãƒ©ãƒ³ã‚¹</li>
</ul>

<hr>

<h2>1.5 ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨å‰å‡¦ç†</h2>

<h3>MovieLens Dataset</h3>

<p><strong>MovieLens</strong>ã¯ã€æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ç ”ç©¶ã§æœ€ã‚‚åºƒãä½¿ã‚ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã™ã€‚</p>

<table>
<thead>
<tr>
<th>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</th>
<th>è©•ä¾¡æ•°</th>
<th>ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</th>
<th>æ˜ ç”»æ•°</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>100K</td>
<td>10ä¸‡</td>
<td>943</td>
<td>1,682</td>
<td>å­¦ç¿’ã€ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—</td>
</tr>
<tr>
<td>1M</td>
<td>100ä¸‡</td>
<td>6,040</td>
<td>3,706</td>
<td>ç ”ç©¶ã€è©•ä¾¡</td>
</tr>
<tr>
<td>10M</td>
<td>1000ä¸‡</td>
<td>71,567</td>
<td>10,681</td>
<td>ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£æ¤œè¨¼</td>
</tr>
<tr>
<td>25M</td>
<td>2500ä¸‡</td>
<td>162,541</td>
<td>62,423</td>
<td>å¤§è¦æ¨¡å®Ÿé¨“</td>
</tr>
</tbody>
</table>

<h3>User-Item Matrix</h3>

<p><strong>User-Itemè¡Œåˆ—</strong>ã¯ã€æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã™ã€‚</p>

<pre><code class="language-python">import pandas as pd
import numpy as np
from scipy.sparse import csr_matrix

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆï¼ˆMovieLensé¢¨ï¼‰
np.random.seed(42)
n_users = 100
n_items = 50
n_ratings = 500

ratings_data = pd.DataFrame({
    'user_id': np.random.randint(1, n_users + 1, n_ratings),
    'item_id': np.random.randint(1, n_items + 1, n_ratings),
    'rating': np.random.randint(1, 6, n_ratings),
    'timestamp': pd.date_range('2024-01-01', periods=n_ratings, freq='H')
})

# é‡è¤‡ã‚’å‰Šé™¤ï¼ˆåŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚¢ã‚¤ãƒ†ãƒ ãƒšã‚¢ã®æœ€æ–°è©•ä¾¡ã‚’ä¿æŒï¼‰
ratings_data = ratings_data.sort_values('timestamp').drop_duplicates(
    subset=['user_id', 'item_id'],
    keep='last'
)

print("=== è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ ===")
print(ratings_data.head(10))
print(f"\nç·è©•ä¾¡æ•°: {len(ratings_data)}")
print(f"ãƒ¦ãƒ‹ãƒ¼ã‚¯ãƒ¦ãƒ¼ã‚¶ãƒ¼: {ratings_data['user_id'].nunique()}")
print(f"ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚¢ã‚¤ãƒ†ãƒ : {ratings_data['item_id'].nunique()}")
print(f"è©•ä¾¡åˆ†å¸ƒ:\n{ratings_data['rating'].value_counts().sort_index()}")

# User-Itemè¡Œåˆ—ã®æ§‹ç¯‰
user_item_matrix = ratings_data.pivot_table(
    index='user_id',
    columns='item_id',
    values='rating',
    fill_value=0
)

print(f"\n=== User-Itemè¡Œåˆ— ===")
print(f"å½¢çŠ¶: {user_item_matrix.shape}")
print(f"å¯†åº¦: {(user_item_matrix > 0).sum().sum() / (user_item_matrix.shape[0] * user_item_matrix.shape[1]):.1%}")
print(f"\nè¡Œåˆ—ã®ä¸€éƒ¨ï¼ˆæœ€åˆã®5ãƒ¦ãƒ¼ã‚¶ãƒ¼ Ã— 5ã‚¢ã‚¤ãƒ†ãƒ ï¼‰:")
print(user_item_matrix.iloc[:5, :5])

# ç–è¡Œåˆ—ã¸ã®å¤‰æ›ï¼ˆãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–ï¼‰
sparse_matrix = csr_matrix(user_item_matrix.values)
print(f"\nç–è¡Œåˆ—ã‚µã‚¤ã‚º: {sparse_matrix.data.nbytes / 1024:.2f} KB")
print(f"å¯†è¡Œåˆ—ã‚µã‚¤ã‚º: {user_item_matrix.values.nbytes / 1024:.2f} KB")
print(f"ãƒ¡ãƒ¢ãƒªå‰Šæ¸›ç‡: {(1 - sparse_matrix.data.nbytes / user_item_matrix.values.nbytes):.1%}")
</code></pre>

<h3>Train-Test Split Strategies</h3>

<p>æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€æ™‚ç³»åˆ—ã‚’è€ƒæ…®ã—ãŸåˆ†å‰²ãŒé‡è¦ã§ã™ã€‚</p>

<pre><code class="language-python">from sklearn.model_selection import train_test_split

# 1. ãƒ©ãƒ³ãƒ€ãƒ åˆ†å‰²ï¼ˆå˜ç´”ã ãŒæ™‚ç³»åˆ—ã‚’ç„¡è¦–ï¼‰
train_random, test_random = train_test_split(
    ratings_data,
    test_size=0.2,
    random_state=42
)

print("=== 1. ãƒ©ãƒ³ãƒ€ãƒ åˆ†å‰² ===")
print(f"è¨“ç·´ãƒ‡ãƒ¼ã‚¿: {len(train_random)}ä»¶")
print(f"ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: {len(test_random)}ä»¶")

# 2. æ™‚ç³»åˆ—åˆ†å‰²ï¼ˆã‚ˆã‚Šç¾å®Ÿçš„ï¼‰
ratings_data_sorted = ratings_data.sort_values('timestamp')
split_idx = int(len(ratings_data_sorted) * 0.8)

train_temporal = ratings_data_sorted.iloc[:split_idx]
test_temporal = ratings_data_sorted.iloc[split_idx:]

print("\n=== 2. æ™‚ç³»åˆ—åˆ†å‰² ===")
print(f"è¨“ç·´æœŸé–“: {train_temporal['timestamp'].min()} ~ {train_temporal['timestamp'].max()}")
print(f"ãƒ†ã‚¹ãƒˆæœŸé–“: {test_temporal['timestamp'].min()} ~ {test_temporal['timestamp'].max()}")
print(f"è¨“ç·´ãƒ‡ãƒ¼ã‚¿: {len(train_temporal)}ä»¶")
print(f"ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: {len(test_temporal)}ä»¶")

# 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®åˆ†å‰²ï¼ˆLeave-One-Outï¼‰
def leave_one_out_split(data):
    """å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°è©•ä¾¡ã‚’ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã«"""
    train_list = []
    test_list = []

    for user_id, group in data.groupby('user_id'):
        group_sorted = group.sort_values('timestamp')
        if len(group_sorted) > 1:
            train_list.append(group_sorted.iloc[:-1])
            test_list.append(group_sorted.iloc[-1:])
        else:
            train_list.append(group_sorted)

    train = pd.concat(train_list)
    test = pd.concat(test_list) if test_list else pd.DataFrame()

    return train, test

train_loo, test_loo = leave_one_out_split(ratings_data)

print("\n=== 3. Leave-One-Outåˆ†å‰² ===")
print(f"è¨“ç·´ãƒ‡ãƒ¼ã‚¿: {len(train_loo)}ä»¶")
print(f"ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: {len(test_loo)}ä»¶")
print(f"ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: {test_loo['user_id'].nunique()}")
</code></pre>

<h3>Python Preprocessing</h3>

<p>æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ã®å®Ÿè·µä¾‹ã§ã™ã€‚</p>

<pre><code class="language-python">import pandas as pd
import numpy as np

class RecommendationDataPreprocessor:
    """æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ¼ã‚¿ã®å‰å‡¦ç†ã‚¯ãƒ©ã‚¹"""

    def __init__(self, min_user_ratings=5, min_item_ratings=5):
        self.min_user_ratings = min_user_ratings
        self.min_item_ratings = min_item_ratings
        self.user_mapping = {}
        self.item_mapping = {}

    def filter_rare_users_items(self, data):
        """è©•ä¾¡æ•°ãŒå°‘ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚¢ã‚¤ãƒ†ãƒ ã‚’é™¤å¤–"""
        print("=== ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å‰ ===")
        print(f"ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: {data['user_id'].nunique()}")
        print(f"ã‚¢ã‚¤ãƒ†ãƒ æ•°: {data['item_id'].nunique()}")
        print(f"è©•ä¾¡æ•°: {len(data)}")

        # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
        user_counts = data['user_id'].value_counts()
        valid_users = user_counts[user_counts >= self.min_user_ratings].index
        data = data[data['user_id'].isin(valid_users)]

        # ã‚¢ã‚¤ãƒ†ãƒ ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
        item_counts = data['item_id'].value_counts()
        valid_items = item_counts[item_counts >= self.min_item_ratings].index
        data = data[data['item_id'].isin(valid_items)]

        print("\n=== ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œ ===")
        print(f"ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: {data['user_id'].nunique()}")
        print(f"ã‚¢ã‚¤ãƒ†ãƒ æ•°: {data['item_id'].nunique()}")
        print(f"è©•ä¾¡æ•°: {len(data)}")

        return data

    def create_mappings(self, data):
        """ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚¢ã‚¤ãƒ†ãƒ IDã‚’é€£ç¶šã—ãŸæ•´æ•°ã«ãƒãƒƒãƒ”ãƒ³ã‚°"""
        unique_users = sorted(data['user_id'].unique())
        unique_items = sorted(data['item_id'].unique())

        self.user_mapping = {uid: idx for idx, uid in enumerate(unique_users)}
        self.item_mapping = {iid: idx for idx, iid in enumerate(unique_items)}

        data['user_idx'] = data['user_id'].map(self.user_mapping)
        data['item_idx'] = data['item_id'].map(self.item_mapping)

        print("\n=== IDãƒãƒƒãƒ”ãƒ³ã‚° ===")
        print(f"ãƒ¦ãƒ¼ã‚¶ãƒ¼IDç¯„å›²: {data['user_id'].min()} ~ {data['user_id'].max()}")
        print(f"ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç¯„å›²: {data['user_idx'].min()} ~ {data['user_idx'].max()}")
        print(f"ã‚¢ã‚¤ãƒ†ãƒ IDç¯„å›²: {data['item_id'].min()} ~ {data['item_id'].max()}")
        print(f"ã‚¢ã‚¤ãƒ†ãƒ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç¯„å›²: {data['item_idx'].min()} ~ {data['item_idx'].max()}")

        return data

    def normalize_ratings(self, data, method='mean'):
        """è©•ä¾¡å€¤ã‚’æ­£è¦åŒ–"""
        if method == 'mean':
            # å¹³å‡ã‚’å¼•ã
            user_means = data.groupby('user_id')['rating'].transform('mean')
            data['rating_normalized'] = data['rating'] - user_means
        elif method == 'minmax':
            # [0, 1]ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
            data['rating_normalized'] = (data['rating'] - data['rating'].min()) / (
                data['rating'].max() - data['rating'].min()
            )

        print(f"\n=== è©•ä¾¡æ­£è¦åŒ–ï¼ˆ{method}ï¼‰===")
        print(f"å…ƒã®è©•ä¾¡ç¯„å›²: [{data['rating'].min()}, {data['rating'].max()}]")
        print(f"æ­£è¦åŒ–å¾Œã®ç¯„å›²: [{data['rating_normalized'].min():.2f}, {data['rating_normalized'].max():.2f}]")

        return data

# å‰å‡¦ç†ã®å®Ÿè¡Œ
preprocessor = RecommendationDataPreprocessor(
    min_user_ratings=3,
    min_item_ratings=3
)

# ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
filtered_data = preprocessor.filter_rare_users_items(ratings_data)

# IDãƒãƒƒãƒ”ãƒ³ã‚°
mapped_data = preprocessor.create_mappings(filtered_data)

# è©•ä¾¡æ­£è¦åŒ–
normalized_data = preprocessor.normalize_ratings(mapped_data, method='mean')

print("\n=== å‰å‡¦ç†å®Œäº†ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰===")
print(normalized_data[['user_id', 'user_idx', 'item_id', 'item_idx',
                        'rating', 'rating_normalized']].head(10))
</code></pre>

<hr>

<h2>1.6 æœ¬ç« ã®ã¾ã¨ã‚</h2>

<h3>å­¦ã‚“ã ã“ã¨</h3>

<ol>
<li><p><strong>æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã®å½¹å‰²</strong></p>
<ul>
<li>æƒ…å ±éå¤šã®æ™‚ä»£ã«æœ€é©ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ææ¡ˆ</li>
<li>å£²ä¸Šå‘ä¸Šã€ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆå‘ä¸Šã€é¡§å®¢æº€è¶³åº¦å‘ä¸Šã«è²¢çŒ®</li>
<li>å”èª¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ™ãƒ¼ã‚¹ã€ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ‰‹æ³•</li>
</ul></li>

<li><p><strong>æ¨è–¦ã‚¿ã‚¹ã‚¯ã®ç¨®é¡</strong></p>
<ul>
<li>Explicit vs Implicit Feedback</li>
<li>Rating Predictionã€Top-Næ¨è–¦ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°</li>
<li>ã‚¿ã‚¹ã‚¯ã«å¿œã˜ãŸé©åˆ‡ãªæ‰‹æ³•é¸æŠ</li>
</ul></li>

<li><p><strong>è©•ä¾¡æŒ‡æ¨™</strong></p>
<ul>
<li>Precisionã€Recallã€F1: ç²¾åº¦ã®åŸºæœ¬æŒ‡æ¨™</li>
<li>NDCG: ãƒ©ãƒ³ã‚­ãƒ³ã‚°å“è³ªã®è©•ä¾¡</li>
<li>MAP: å¹³å‡ç²¾åº¦ã®è©•ä¾¡</li>
<li>Coverageã€Diversityã€Serendipity: æ¨è–¦ã®è³ª</li>
</ul></li>

<li><p><strong>ä¸»è¦ãªèª²é¡Œ</strong></p>
<ul>
<li>Cold Startå•é¡Œ: æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚¢ã‚¤ãƒ†ãƒ ã®å¯¾å‡¦</li>
<li>Data Sparsity: ç–ãªãƒ‡ãƒ¼ã‚¿ã®æ‰±ã„</li>
<li>Scalability: å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†</li>
<li>Filter Bubble: å¤šæ§˜æ€§ã®ç¢ºä¿</li>
</ul></li>

<li><p><strong>ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®å®Ÿè·µ</strong></p>
<ul>
<li>MovieLensãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®æ´»ç”¨</li>
<li>User-Itemè¡Œåˆ—ã®æ§‹ç¯‰</li>
<li>é©åˆ‡ãªTrain-Teståˆ†å‰²</li>
<li>å‰å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰</li>
</ul></li>
</ol>

<h3>æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã®åŸå‰‡</h3>

<table>
<thead>
<tr>
<th>åŸå‰‡</th>
<th>èª¬æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸­å¿ƒè¨­è¨ˆ</strong></td>
<td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æº€è¶³åº¦ã¨ä½“é¨“ã‚’æœ€å„ªå…ˆ</td>
</tr>
<tr>
<td><strong>å¤šé¢çš„è©•ä¾¡</strong></td>
<td>ç²¾åº¦ã ã‘ã§ãªãå¤šæ§˜æ€§ã€æ–°è¦æ€§ã‚‚è€ƒæ…®</td>
</tr>
<tr>
<td><strong>æ™‚ç³»åˆ—è€ƒæ…®</strong></td>
<td>è©•ä¾¡ã®æ™‚ç³»åˆ—ã‚’å°Šé‡ã—ãŸåˆ†å‰²ã¨è©•ä¾¡</td>
</tr>
<tr>
<td><strong>ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£</strong></td>
<td>å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã«å¯¾å¿œã§ãã‚‹è¨­è¨ˆ</td>
</tr>
<tr>
<td><strong>ç¶™ç¶šçš„æ”¹å–„</strong></td>
<td>A/Bãƒ†ã‚¹ãƒˆã¨å®šæœŸçš„ãªè©•ä¾¡ã§æ”¹å–„</td>
</tr>
</tbody>
</table>

<h3>æ¬¡ã®ç« ã¸</h3>

<p>ç¬¬2ç« ã§ã¯ã€<strong>å”èª¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</strong>ã‚’å­¦ã³ã¾ã™ï¼š</p>
<ul>
<li>User-basedå”èª¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</li>
<li>Item-basedå”èª¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</li>
<li>é¡ä¼¼åº¦è¨ˆç®—ï¼ˆã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦ã€ãƒ”ã‚¢ã‚½ãƒ³ç›¸é–¢ï¼‰</li>
<li>è¿‘å‚æ¢ç´¢ã¨k-NN</li>
<li>å®Ÿè£…ã¨è©•ä¾¡</li>
</ul>

<hr>

<h2>æ¼”ç¿’å•é¡Œ</h2>

<h3>å•é¡Œ1ï¼ˆé›£æ˜“åº¦ï¼šeasyï¼‰</h3>
<p>Explicit Feedbackã¨Implicit Feedbackã®é•ã„ã‚’èª¬æ˜ã—ã€ãã‚Œãã‚Œã®é•·æ‰€ã¨çŸ­æ‰€ã‚’è¿°ã¹ã¦ãã ã•ã„ã€‚</p>

<details>
<summary>è§£ç­”ä¾‹</summary>

<p><strong>è§£ç­”</strong>ï¼š</p>

<p><strong>Explicit Feedbackï¼ˆæ˜ç¤ºçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰</strong>ï¼š</p>
<ul>
<li>å®šç¾©: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ„å›³çš„ã«æä¾›ã™ã‚‹è©•ä¾¡ï¼ˆæ˜Ÿè©•ä¾¡ã€ã„ã„ã­ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰</li>
<li>é•·æ‰€: æ˜ç¢ºãªå¥½ã¿æƒ…å ±ã€è§£é‡ˆãŒå®¹æ˜“</li>
<li>çŸ­æ‰€: ãƒ‡ãƒ¼ã‚¿åé›†ãŒå›°é›£ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è² æ‹…ãŒå¤§ãã„ã€ãƒ‡ãƒ¼ã‚¿é‡ãŒå°‘ãªã„</li>
</ul>

<p><strong>Implicit Feedbackï¼ˆæš—é»™çš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰</strong>ï¼š</p>
<ul>
<li>å®šç¾©: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡Œå‹•ã‹ã‚‰æ¨æ¸¬ã•ã‚Œã‚‹å¥½ã¿ï¼ˆã‚¯ãƒªãƒƒã‚¯ã€è¦–è´æ™‚é–“ã€è³¼å…¥ï¼‰</li>
<li>é•·æ‰€: å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è² æ‹…ãªã—ã€è‡ªç„¶ãªè¡Œå‹•</li>
<li>çŸ­æ‰€: è§£é‡ˆãŒæ›–æ˜§ï¼ˆã‚¯ãƒªãƒƒã‚¯ãŒå¥½ã¿ã¨ã¯é™ã‚‰ãªã„ï¼‰ã€ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ä¸æ˜</li>
</ul>

<p><strong>ä½¿ã„åˆ†ã‘</strong>ï¼š</p>
<ul>
<li>Explicit: è©•ä¾¡ãŒé‡è¦ãªåˆ†é‡ï¼ˆæ˜ ç”»ã€æ›¸ç±ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰</li>
<li>Implicit: å¤§è¦æ¨¡ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆå‹•ç”»é…ä¿¡ã€ECã‚µã‚¤ãƒˆï¼‰</li>
<li>Hybrid: ä¸¡æ–¹ã‚’çµ„ã¿åˆã‚ã›ã¦ç²¾åº¦å‘ä¸Š</li>
</ul>

</details>

<h3>å•é¡Œ2ï¼ˆé›£æ˜“åº¦ï¼šmediumï¼‰</h3>
<p>ä»¥ä¸‹ã®æ¨è–¦çµæœã«å¯¾ã—ã¦ã€Precision@5ã¨Recall@5ã‚’è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚</p>

<pre><code class="language-python">recommended = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]
relevant = [2, 3, 5, 8, 11, 15, 20]
</code></pre>

<details>
<summary>è§£ç­”ä¾‹</summary>

<pre><code class="language-python">def precision_recall_at_k(recommended, relevant, k):
    """Precision@K ã¨ Recall@K ã‚’è¨ˆç®—"""
    recommended_k = recommended[:k]

    # æ¨è–¦ã—ãŸä¸­ã§é–¢é€£ãŒã‚ã‚‹ã‚‚ã®
    hits = len(set(recommended_k) & set(relevant))

    precision = hits / k if k > 0 else 0
    recall = hits / len(relevant) if len(relevant) > 0 else 0

    return precision, recall

recommended = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]
relevant = [2, 3, 5, 8, 11, 15, 20]

precision, recall = precision_recall_at_k(recommended, relevant, k=5)

print("=== è¨ˆç®—éç¨‹ ===")
print(f"æ¨è–¦ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆä¸Šä½5ä»¶ï¼‰: {recommended[:5]}")
print(f"é–¢é€£ã‚¢ã‚¤ãƒ†ãƒ : {relevant}")
print(f"ãƒ’ãƒƒãƒˆ: {set(recommended[:5]) & set(relevant)}")
print(f"ãƒ’ãƒƒãƒˆæ•°: {len(set(recommended[:5]) & set(relevant))}")
print(f"\nPrecision@5 = {len(set(recommended[:5]) & set(relevant))} / 5 = {precision:.3f}")
print(f"Recall@5 = {len(set(recommended[:5]) & set(relevant))} / {len(relevant)} = {recall:.3f}")
</code></pre>

<p><strong>å‡ºåŠ›</strong>ï¼š</p>
<pre><code>=== è¨ˆç®—éç¨‹ ===
æ¨è–¦ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆä¸Šä½5ä»¶ï¼‰: [1, 3, 5, 7, 9]
é–¢é€£ã‚¢ã‚¤ãƒ†ãƒ : [2, 3, 5, 8, 11, 15, 20]
ãƒ’ãƒƒãƒˆ: {3, 5}
ãƒ’ãƒƒãƒˆæ•°: 2

Precision@5 = 2 / 5 = 0.400
Recall@5 = 2 / 7 = 0.286
</code></pre>

</details>

<h3>å•é¡Œ3ï¼ˆé›£æ˜“åº¦ï¼šmediumï¼‰</h3>
<p>Cold Startå•é¡Œã®3ã¤ã®ç¨®é¡ï¼ˆUserã€Itemã€Systemï¼‰ã‚’ãã‚Œãã‚Œèª¬æ˜ã—ã€å¯¾å‡¦æ³•ã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚</p>

<details>
<summary>è§£ç­”ä¾‹</summary>

<p><strong>è§£ç­”</strong>ï¼š</p>

<p><strong>1. User Cold Startï¼ˆæ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼å•é¡Œï¼‰</strong>ï¼š</p>
<ul>
<li>èª¬æ˜: æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è©•ä¾¡å±¥æ­´ãŒãªãã€å¥½ã¿ãŒä¸æ˜</li>
<li>å¯¾å‡¦æ³•:
<ul>
<li>äººæ°—ã‚¢ã‚¤ãƒ†ãƒ ã®æ¨è–¦ï¼ˆå…¨ä½“ã§ã®äººæ°—åº¦ï¼‰</li>
<li>ãƒ‡ãƒ¢ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯æƒ…å ±ï¼ˆå¹´é½¢ã€æ€§åˆ¥ã€åœ°åŸŸï¼‰ã‚’æ´»ç”¨</li>
<li>åˆæœŸè³ªå•ã«ã‚ˆã‚‹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°</li>
<li>ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±ã®æ´»ç”¨</li>
</ul>
</li>
</ul>

<p><strong>2. Item Cold Startï¼ˆæ–°è¦ã‚¢ã‚¤ãƒ†ãƒ å•é¡Œï¼‰</strong>ï¼š</p>
<ul>
<li>èª¬æ˜: æ–°è¦ã‚¢ã‚¤ãƒ†ãƒ ã¯è©•ä¾¡ãŒãªãã€æ¨è–¦ã§ããªã„</li>
<li>å¯¾å‡¦æ³•:
<ul>
<li>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ™ãƒ¼ã‚¹æ¨è–¦ï¼ˆã‚¢ã‚¤ãƒ†ãƒ ã®ç‰¹å¾´ã‹ã‚‰é¡ä¼¼æ€§è¨ˆç®—ï¼‰</li>
<li>ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ´»ç”¨ï¼ˆã‚¸ãƒ£ãƒ³ãƒ«ã€ã‚¿ã‚°ã€èª¬æ˜æ–‡ï¼‰</li>
<li>ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å„ªå…ˆæç¤º</li>
<li>å°‚é–€å®¶ã«ã‚ˆã‚‹åˆæœŸè©•ä¾¡</li>
</ul>
</li>
</ul>

<p><strong>3. System Cold Startï¼ˆã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®å•é¡Œï¼‰</strong>ï¼š</p>
<ul>
<li>èª¬æ˜: ã‚µãƒ¼ãƒ“ã‚¹é–‹å§‹ç›´å¾Œã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚¢ã‚¤ãƒ†ãƒ ã¨ã‚‚ã«ãƒ‡ãƒ¼ã‚¿ä¸è¶³</li>
<li>å¯¾å‡¦æ³•:
<ul>
<li>å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®æ´»ç”¨ï¼ˆæ—¢å­˜ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µã‚¤ãƒˆï¼‰</li>
<li>ã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°ã«ã‚ˆã‚‹åˆæœŸãƒ‡ãƒ¼ã‚¿åé›†</li>
<li>ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</li>
<li>Transfer Learningï¼ˆä»–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰ã®çŸ¥è­˜è»¢ç§»ï¼‰</li>
</ul>
</li>
</ul>

<p><strong>å®Ÿä¾‹</strong>ï¼š</p>
<ul>
<li>Netflix: æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¥½ããªä½œå“ã‚’3ã¤é¸ã°ã›ã‚‹</li>
<li>Spotify: å¥½ããªã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’é¸æŠã•ã›ã¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ</li>
<li>Amazon: é–²è¦§å±¥æ­´ã¨äººæ°—å•†å“ã‚’çµ„ã¿åˆã‚ã›ã¦æ¨è–¦</li>
</ul>

</details>

<h3>å•é¡Œ4ï¼ˆé›£æ˜“åº¦ï¼šhardï¼‰</h3>
<p>ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ã€User-Itemè¡Œåˆ—ã‚’æ§‹ç¯‰ã—ã€æ™‚ç³»åˆ—åˆ†å‰²ï¼ˆè¨“ç·´80%ã€ãƒ†ã‚¹ãƒˆ20%ï¼‰ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚ã¾ãŸã€è¡Œåˆ—ã®å¯†åº¦ã‚‚è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚</p>

<pre><code class="language-python">import pandas as pd
import numpy as np

np.random.seed(42)
data = pd.DataFrame({
    'user_id': [1, 1, 2, 2, 2, 3, 3, 4, 4, 5],
    'item_id': [10, 20, 10, 30, 40, 20, 30, 10, 50, 40],
    'rating': [5, 4, 3, 5, 2, 4, 5, 3, 4, 5],
    'timestamp': pd.date_range('2024-01-01', periods=10, freq='D')
})
</code></pre>

<details>
<summary>è§£ç­”ä¾‹</summary>

<pre><code class="language-python">import pandas as pd
import numpy as np

np.random.seed(42)
data = pd.DataFrame({
    'user_id': [1, 1, 2, 2, 2, 3, 3, 4, 4, 5],
    'item_id': [10, 20, 10, 30, 40, 20, 30, 10, 50, 40],
    'rating': [5, 4, 3, 5, 2, 4, 5, 3, 4, 5],
    'timestamp': pd.date_range('2024-01-01', periods=10, freq='D')
})

print("=== å…ƒãƒ‡ãƒ¼ã‚¿ ===")
print(data)

# User-Itemè¡Œåˆ—ã®æ§‹ç¯‰
user_item_matrix = data.pivot_table(
    index='user_id',
    columns='item_id',
    values='rating',
    fill_value=0
)

print("\n=== User-Itemè¡Œåˆ— ===")
print(user_item_matrix)

# å¯†åº¦ã®è¨ˆç®—
total_cells = user_item_matrix.shape[0] * user_item_matrix.shape[1]
non_zero_cells = (user_item_matrix > 0).sum().sum()
density = non_zero_cells / total_cells

print(f"\n=== è¡Œåˆ—ã®çµ±è¨ˆ ===")
print(f"å½¢çŠ¶: {user_item_matrix.shape}")
print(f"ç·ã‚»ãƒ«æ•°: {total_cells}")
print(f"è©•ä¾¡æ¸ˆã¿ã‚»ãƒ«æ•°: {non_zero_cells}")
print(f"å¯†åº¦: {density:.1%}")
print(f"ç–åº¦: {(1 - density):.1%}")

# æ™‚ç³»åˆ—åˆ†å‰²
data_sorted = data.sort_values('timestamp')
split_idx = int(len(data_sorted) * 0.8)

train_data = data_sorted.iloc[:split_idx]
test_data = data_sorted.iloc[split_idx:]

print("\n=== æ™‚ç³»åˆ—åˆ†å‰² ===")
print(f"è¨“ç·´ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: {len(train_data)}")
print(f"ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä»¶æ•°: {len(test_data)}")
print(f"\nè¨“ç·´æœŸé–“: {train_data['timestamp'].min()} ~ {train_data['timestamp'].max()}")
print(f"ãƒ†ã‚¹ãƒˆæœŸé–“: {test_data['timestamp'].min()} ~ {test_data['timestamp'].max()}")

print("\nè¨“ç·´ãƒ‡ãƒ¼ã‚¿:")
print(train_data)
print("\nãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿:")
print(test_data)

# è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®User-Itemè¡Œåˆ—
train_matrix = train_data.pivot_table(
    index='user_id',
    columns='item_id',
    values='rating',
    fill_value=0
)

print("\n=== è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã®User-Itemè¡Œåˆ— ===")
print(train_matrix)
</code></pre>

<p><strong>å‡ºåŠ›</strong>ï¼š</p>
<pre><code>=== å…ƒãƒ‡ãƒ¼ã‚¿ ===
   user_id  item_id  rating  timestamp
0        1       10       5 2024-01-01
1        1       20       4 2024-01-02
2        2       10       3 2024-01-03
3        2       30       5 2024-01-04
4        2       40       2 2024-01-05
5        3       20       4 2024-01-06
6        3       30       5 2024-01-07
7        4       10       3 2024-01-08
8        4       50       4 2024-01-09
9        5       40       5 2024-01-10

=== User-Itemè¡Œåˆ— ===
item_id  10  20  30  40  50
user_id
1         5   4   0   0   0
2         3   0   5   2   0
3         0   4   5   0   0
4         3   0   0   0   4
5         0   0   0   5   0

=== è¡Œåˆ—ã®çµ±è¨ˆ ===
å½¢çŠ¶: (5, 5)
ç·ã‚»ãƒ«æ•°: 25
è©•ä¾¡æ¸ˆã¿ã‚»ãƒ«æ•°: 10
å¯†åº¦: 40.0%
ç–åº¦: 60.0%

=== æ™‚ç³»åˆ—åˆ†å‰² ===
è¨“ç·´ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: 8
ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä»¶æ•°: 2

è¨“ç·´æœŸé–“: 2024-01-01 ~ 2024-01-08
ãƒ†ã‚¹ãƒˆæœŸé–“: 2024-01-09 ~ 2024-01-10

è¨“ç·´ãƒ‡ãƒ¼ã‚¿:
   user_id  item_id  rating  timestamp
0        1       10       5 2024-01-01
1        1       20       4 2024-01-02
2        2       10       3 2024-01-03
3        2       30       5 2024-01-04
4        2       40       2 2024-01-05
5        3       20       4 2024-01-06
6        3       30       5 2024-01-07
7        4       10       3 2024-01-08

ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿:
   user_id  item_id  rating  timestamp
8        4       50       4 2024-01-09
9        5       40       5 2024-01-10

=== è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã®User-Itemè¡Œåˆ— ===
item_id  10  20  30  40
user_id
1         5   4   0   0
2         3   0   5   2
3         0   4   5   0
4         3   0   0   0
</code></pre>

</details>

<h3>å•é¡Œ5ï¼ˆé›£æ˜“åº¦ï¼šhardï¼‰</h3>
<p>NDCG@5ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°ã‚’å®Ÿè£…ã—ã€ä»¥ä¸‹ã®æ¨è–¦çµæœã®å“è³ªã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚é–¢é€£åº¦ã‚¹ã‚³ã‚¢ã¯5æ®µéšï¼ˆ0-4ï¼‰ã§ã™ã€‚</p>

<pre><code class="language-python">relevances = [3, 2, 0, 1, 4, 0, 2, 3, 1, 0]  # æ¨è–¦é †ã®é–¢é€£åº¦
</code></pre>

<details>
<summary>è§£ç­”ä¾‹</summary>

<pre><code class="language-python">import numpy as np

def dcg_at_k(relevances, k):
    """DCG@K ã‚’è¨ˆç®—

    DCG@K = Î£ (2^rel_i - 1) / log2(i + 1)
    """
    relevances = np.array(relevances[:k])
    if relevances.size:
        # ä½ç½®iã®ãƒ‡ã‚£ã‚¹ã‚«ã‚¦ãƒ³ãƒˆä¿‚æ•°: log2(i + 1)
        # i=1ã‹ã‚‰å§‹ã¾ã‚‹ãŸã‚ã€log2(2), log2(3), ...
        discounts = np.log2(np.arange(2, relevances.size + 2))
        gains = 2**relevances - 1
        dcg = np.sum(gains / discounts)
        return dcg
    return 0.0

def ndcg_at_k(relevances, k):
    """NDCG@K ã‚’è¨ˆç®—

    NDCG@K = DCG@K / IDCG@K
    """
    dcg = dcg_at_k(relevances, k)

    # Ideal DCG: é–¢é€£åº¦ã‚’é™é †ã«ã‚½ãƒ¼ãƒˆã—ãŸå ´åˆã®DCG
    ideal_relevances = sorted(relevances, reverse=True)
    idcg = dcg_at_k(ideal_relevances, k)

    if idcg == 0:
        return 0.0

    ndcg = dcg / idcg
    return ndcg

# ä¾‹: æ¨è–¦çµæœã®è©•ä¾¡
relevances = [3, 2, 0, 1, 4, 0, 2, 3, 1, 0]

print("=== NDCGè©•ä¾¡ ===")
print(f"æ¨è–¦é †ã®é–¢é€£åº¦: {relevances}")
print(f"ç†æƒ³çš„ãªé †åº: {sorted(relevances, reverse=True)}")

for k in [3, 5, 10]:
    dcg = dcg_at_k(relevances, k)
    ideal_relevances = sorted(relevances, reverse=True)
    idcg = dcg_at_k(ideal_relevances, k)
    ndcg = ndcg_at_k(relevances, k)

    print(f"\n=== K={k} ===")
    print(f"DCG@{k}: {dcg:.3f}")
    print(f"IDCG@{k}: {idcg:.3f}")
    print(f"NDCG@{k}: {ndcg:.3f}")

# è©³ç´°è¨ˆç®—ä¾‹ï¼ˆK=5ï¼‰
print("\n=== è©³ç´°è¨ˆç®—ï¼ˆK=5ï¼‰===")
k = 5
rels = relevances[:k]
print(f"ä¸Šä½{k}ä»¶ã®é–¢é€£åº¦: {rels}")

for i, rel in enumerate(rels):
    pos = i + 1
    gain = 2**rel - 1
    discount = np.log2(pos + 1)
    contribution = gain / discount
    print(f"ä½ç½®{pos}: rel={rel}, gain={gain}, discount={discount:.3f}, contribution={contribution:.3f}")

dcg = dcg_at_k(relevances, k)
print(f"\nDCG@5 = {dcg:.3f}")

ideal_rels = sorted(relevances, reverse=True)[:k]
print(f"\nç†æƒ³çš„ãªä¸Šä½{k}ä»¶: {ideal_rels}")
idcg = dcg_at_k(ideal_rels, k)
print(f"IDCG@5 = {idcg:.3f}")

ndcg = ndcg_at_k(relevances, k)
print(f"\nNDCG@5 = {dcg:.3f} / {idcg:.3f} = {ndcg:.3f}")
</code></pre>

<p><strong>å‡ºåŠ›</strong>ï¼š</p>
<pre><code>=== NDCGè©•ä¾¡ ===
æ¨è–¦é †ã®é–¢é€£åº¦: [3, 2, 0, 1, 4, 0, 2, 3, 1, 0]
ç†æƒ³çš„ãªé †åº: [4, 3, 3, 2, 2, 1, 1, 0, 0, 0]

=== K=3 ===
DCG@3: 7.500
IDCG@3: 11.131
NDCG@3: 0.674

=== K=5 ===
DCG@5: 16.714
IDCG@5: 19.714
NDCG@5: 0.848

=== K=10 ===
DCG@10: 20.344
IDCG@10: 23.344
NDCG@10: 0.871

=== è©³ç´°è¨ˆç®—ï¼ˆK=5ï¼‰===
ä¸Šä½5ä»¶ã®é–¢é€£åº¦: [3, 2, 0, 1, 4]
ä½ç½®1: rel=3, gain=7, discount=1.000, contribution=7.000
ä½ç½®2: rel=2, gain=3, discount=1.585, contribution=1.893
ä½ç½®3: rel=0, gain=0, discount=2.000, contribution=0.000
ä½ç½®4: rel=1, gain=1, discount=2.322, contribution=0.431
ä½ç½®5: rel=4, gain=15, discount=2.585, contribution=5.803

DCG@5 = 15.127

ç†æƒ³çš„ãªä¸Šä½5ä»¶: [4, 3, 3, 2, 2]
IDCG@5 = 19.714

NDCG@5 = 15.127 / 19.714 = 0.767
</code></pre>

</details>

<hr>

<h2>å‚è€ƒæ–‡çŒ®</h2>

<ol>
<li>Ricci, F., Rokach, L., & Shapira, B. (2015). <em>Recommender Systems Handbook</em> (2nd ed.). Springer.</li>
<li>Aggarwal, C. C. (2016). <em>Recommender Systems: The Textbook</em>. Springer.</li>
<li>Falk, K. (2019). <em>Practical Recommender Systems</em>. Manning Publications.</li>
<li>Harper, F. M., & Konstan, J. A. (2015). The MovieLens Datasets: History and Context. <em>ACM Transactions on Interactive Intelligent Systems</em>, 5(4), 1-19.</li>
<li>Koren, Y., Bell, R., & Volinsky, C. (2009). Matrix Factorization Techniques for Recommender Systems. <em>Computer</em>, 42(8), 30-37.</li>
</ol>

<div class="navigation">
    <a href="index.html" class="nav-button">â† ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡</a>
    <a href="chapter2-collaborative-filtering.html" class="nav-button">æ¬¡ã®ç« : å”èª¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° â†’</a>
</div>

    </main>

    
    <section class="disclaimer">
        <h3>å…è²¬äº‹é …</h3>
        <ul>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯æ•™è‚²ãƒ»ç ”ç©¶ãƒ»æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€å°‚é–€çš„ãªåŠ©è¨€(æ³•å¾‹ãƒ»ä¼šè¨ˆãƒ»æŠ€è¡“çš„ä¿è¨¼ãªã©)ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŠã‚ˆã³ä»˜éšã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹ã¯ã€Œç¾çŠ¶æœ‰å§¿(AS IS)ã€ã§æä¾›ã•ã‚Œã€æ˜ç¤ºã¾ãŸã¯é»™ç¤ºã‚’å•ã‚ãšã€å•†å“æ€§ã€ç‰¹å®šç›®çš„é©åˆæ€§ã€æ¨©åˆ©éä¾µå®³ã€æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã€å‹•ä½œãƒ»å®‰å…¨æ€§ç­‰ã„ã‹ãªã‚‹ä¿è¨¼ã‚‚ã—ã¾ã›ã‚“ã€‚</li>
            <li>å¤–éƒ¨ãƒªãƒ³ã‚¯ã€ç¬¬ä¸‰è€…ãŒæä¾›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã®å†…å®¹ãƒ»å¯ç”¨æ€§ãƒ»å®‰å…¨æ€§ã«ã¤ã„ã¦ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ãƒ»å®Ÿè¡Œãƒ»è§£é‡ˆã«ã‚ˆã‚Šç›´æ¥çš„ãƒ»é–“æ¥çš„ãƒ»ä»˜éšçš„ãƒ»ç‰¹åˆ¥ãƒ»çµæœçš„ãƒ»æ‡²ç½°çš„æå®³ãŒç”Ÿã˜ãŸå ´åˆã§ã‚‚ã€é©ç”¨æ³•ã§è¨±å®¹ã•ã‚Œã‚‹æœ€å¤§é™ã®ç¯„å›²ã§ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å†…å®¹ã¯ã€äºˆå‘Šãªãå¤‰æ›´ãƒ»æ›´æ–°ãƒ»æä¾›åœæ­¢ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‘—ä½œæ¨©ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯æ˜è¨˜ã•ã‚ŒãŸæ¡ä»¶(ä¾‹: CC BY 4.0)ã«å¾“ã„ã¾ã™ã€‚å½“è©²ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯é€šå¸¸ã€ç„¡ä¿è¨¼æ¡é …ã‚’å«ã¿ã¾ã™ã€‚</li>
        </ul>
    </section>

<footer>
        <p><strong>ä½œæˆè€…</strong>: AI Terakoya Content Team</p>
        <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.0 | <strong>ä½œæˆæ—¥</strong>: 2025-10-21</p>
        <p><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0</p>
        <p>Â© 2025 AI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
