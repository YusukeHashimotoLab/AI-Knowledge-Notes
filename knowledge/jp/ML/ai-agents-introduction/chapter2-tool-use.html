<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ã¨Function Calling - AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå…¥é–€ã‚·ãƒªãƒ¼ã‚º ç¬¬2ç« ">
    <title>ç¬¬2ç« : ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ã¨Function Calling - AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå…¥é–€ã‚·ãƒªãƒ¼ã‚º</title>

    <!-- MathJax for formulas -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script>

    <!-- CSS Styling -->
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #667eea;
            --accent-color: #764ba2;
            --bg-color: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --code-bg: #f5f5f5;
            --link-color: #667eea;
            --link-hover: #764ba2;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Hiragino Sans", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
            line-height: 1.8;
            color: var(--text-color);
            background: var(--bg-color);
            padding: 0;
            margin: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        header .container {
            padding: 0 1.5rem;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .meta {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            font-size: 0.9rem;
            opacity: 0.95;
            margin-top: 1rem;
        }

        .meta span {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        h2 {
            font-size: 1.75rem;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--secondary-color);
            color: var(--primary-color);
        }

        h3 {
            font-size: 1.4rem;
            margin-top: 2rem;
            margin-bottom: 0.8rem;
            color: var(--primary-color);
        }

        h4 {
            font-size: 1.2rem;
            margin-top: 1.5rem;
            margin-bottom: 0.6rem;
            color: var(--primary-color);
        }

        p {
            margin-bottom: 1.2rem;
        }

        a {
            color: var(--link-color);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1.2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
        }

        pre {
            background: var(--code-bg);
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
        }

        pre code {
            background: none;
            padding: 0;
            font-size: 0.9rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            display: block;
        }

        thead {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        tbody {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        th, td {
            padding: 0.8rem;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        th {
            background: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        blockquote {
            border-left: 4px solid var(--secondary-color);
            padding-left: 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: #666;
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .mermaid {
            text-align: center;
            margin: 2rem 0;
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        details {
            margin: 1rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-color);
            padding: 0.5rem;
        }

        summary:hover {
            color: var(--secondary-color);
        }

        footer {
            margin-top: 4rem;
            padding: 2rem 0;
            border-top: 2px solid var(--border-color);
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin: 3rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: var(--secondary-color);
            color: white;
            border-radius: 6px;
            text-decoration: none;
            transition: all 0.3s;
            font-weight: 600;
        }

        .nav-button:hover {
            background: var(--link-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            text-decoration: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.6rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            pre {
                padding: 1rem;
                font-size: 0.85rem;
            }

            table {
                font-size: 0.9rem;
            }
        }
    
        .feedback-notice {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 2rem;
            margin: 3rem auto;
            max-width: 900px;
        }

        .feedback-notice h3 {
            color: #856404;
            font-size: 1.3rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .feedback-notice p {
            color: #856404;
            font-size: 1rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .feedback-options {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .feedback-button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .feedback-button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof mermaid !== 'undefined') {
                mermaid.initialize({ startOnLoad: true, theme: 'default' });
            }
        });
    </script>
</head>
<body>
        <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="/wp/knowledge/jp/index.html">AIå¯ºå­å±‹ãƒˆãƒƒãƒ—</a><span class="breadcrumb-separator">â€º</span><a href="/wp/knowledge/jp/ML/index.html">æ©Ÿæ¢°å­¦ç¿’</a><span class="breadcrumb-separator">â€º</span><a href="/wp/knowledge/jp/ML/ai-agents-introduction/index.html">Ai Agents</a><span class="breadcrumb-separator">â€º</span><span class="breadcrumb-current">Chapter 2</span>
        </div>
    </nav>

    <header>
        <div class="container">
            <h1>ç¬¬2ç« : ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ã¨Function Calling</h1>
            <p style="font-size: 1.1rem; margin-top: 0.5rem; opacity: 0.95;">å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã¨APIã®çµ±åˆã«ã‚ˆã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèƒ½åŠ›ã®æ‹¡å¼µ</p>
            <div class="meta">
                <span>ğŸ“– èª­äº†æ™‚é–“: 30-35åˆ†</span>
                <span>ğŸ“Š é›£æ˜“åº¦: ä¸­ç´š-ä¸Šç´š</span>
                <span>ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹: 6å€‹</span>
            </div>
        </div>
    </header>

    <main class="container">
        <h2 id="intro">Function Callingã¨ã¯</h2>

        <h3>æ¦‚è¦ã¨å¿…è¦æ€§</h3>
        <p><strong>Function Calling</strong>ï¼ˆé–¢æ•°å‘¼ã³å‡ºã—ï¼‰ã¯ã€LLMãŒå¤–éƒ¨ã®é–¢æ•°ã‚„APIã‚’å‘¼ã³å‡ºã™ãŸã‚ã®æ¨™æº–åŒ–ã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã™ã€‚OpenAIï¼ˆ2023å¹´6æœˆï¼‰ã€Anthropicï¼ˆ2023å¹´11æœˆï¼‰ãŒç›¸æ¬¡ã„ã§å°å…¥ã—ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä¸­æ ¸æŠ€è¡“ã¨ãªã£ã¦ã„ã¾ã™ã€‚</p>

        <p><strong>ãªãœFunction CallingãŒå¿…è¦ã‹</strong>ï¼š</p>
        <ul>
            <li>âœ… <strong>æœ€æ–°æƒ…å ±ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹</strong>: LLMã®è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã¯å¤ã„ãŒã€APIã§æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—</li>
            <li>âœ… <strong>è¨ˆç®—èƒ½åŠ›</strong>: æ­£ç¢ºãªè¨ˆç®—ã€ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚’ãƒ„ãƒ¼ãƒ«ã«å§”è­²</li>
            <li>âœ… <strong>å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ é€£æº</strong>: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€CRMã€ERPã¨ã®çµ±åˆ</li>
            <li>âœ… <strong>æ§‹é€ åŒ–ã•ã‚ŒãŸå‡ºåŠ›</strong>: JSONã‚¹ã‚­ãƒ¼ãƒã§å‹å®‰å…¨ãªå®Ÿè¡Œ</li>
            <li>âœ… <strong>ç¢ºå®Ÿæ€§</strong>: é‡è¦ãªæ“ä½œã‚’ã‚³ãƒ¼ãƒ‰ã§ç¢ºå®Ÿã«å®Ÿè¡Œ</li>
        </ul>

        <h3>Function Callingã®ä»•çµ„ã¿</h3>

        <div class="mermaid">
sequenceDiagram
    participant User
    participant LLM
    participant Tool

    User->>LLM: è³ªå•ï¼ˆä¾‹: æ±äº¬ã®å¤©æ°—ã¯ï¼Ÿï¼‰
    LLM->>LLM: æ¨è«–ï¼ˆå¤©æ°—APIã‚’ä½¿ã†ã¹ãï¼‰
    LLM-->>User: Function Callè¦æ±‚<br/>{name: "get_weather", args: {location: "æ±äº¬"}}
    User->>Tool: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
    Tool-->>User: çµæœï¼ˆæ™´ã‚Œã€22åº¦ï¼‰
    User->>LLM: çµæœã‚’æ¸¡ã™
    LLM-->>User: æœ€çµ‚å›ç­”ï¼ˆæ±äº¬ã¯æ™´ã‚Œã§æ°—æ¸©22åº¦ã§ã™ï¼‰
</div>

        <h2 id="openai-function">OpenAI Function Calling</h2>

        <h3>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h3>

        <pre><code class="language-python">from openai import OpenAI
import json

client = OpenAI(api_key="your-api-key")

# ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ„ãƒ¼ãƒ«ï¼ˆé–¢æ•°ï¼‰ã‚’å®šç¾©
tools = [
    {
        "type": "function",
        "function": {
            "name": "get_current_weather",
            "description": "æŒ‡å®šã•ã‚ŒãŸå ´æ‰€ã®ç¾åœ¨ã®å¤©æ°—ã‚’å–å¾—ã—ã¾ã™",
            "parameters": {
                "type": "object",
                "properties": {
                    "location": {
                        "type": "string",
                        "description": "éƒ½å¸‚åï¼ˆä¾‹: æ±äº¬ã€å¤§é˜ªï¼‰"
                    },
                    "unit": {
                        "type": "string",
                        "enum": ["celsius", "fahrenheit"],
                        "description": "æ¸©åº¦ã®å˜ä½"
                    }
                },
                "required": ["location"]
            }
        }
    }
]

# ã‚¹ãƒ†ãƒƒãƒ—2: LLMã«å•ã„åˆã‚ã›
messages = [{"role": "user", "content": "æ±äº¬ã®å¤©æ°—ã‚’æ•™ãˆã¦ãã ã•ã„"}]

response = client.chat.completions.create(
    model="gpt-4",
    messages=messages,
    tools=tools,
    tool_choice="auto"  # è‡ªå‹•ã§ãƒ„ãƒ¼ãƒ«ã‚’é¸æŠ
)

# ã‚¹ãƒ†ãƒƒãƒ—3: Function Callã®ç¢ºèª
message = response.choices[0].message

if message.tool_calls:
    # LLMãŒãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã—ãŸã„
    tool_call = message.tool_calls[0]
    function_name = tool_call.function.name
    function_args = json.loads(tool_call.function.arguments)

    print(f"é–¢æ•°å: {function_name}")
    print(f"å¼•æ•°: {function_args}")
    # å‡ºåŠ›:
    # é–¢æ•°å: get_current_weather
    # å¼•æ•°: {'location': 'æ±äº¬', 'unit': 'celsius'}

    # ã‚¹ãƒ†ãƒƒãƒ—4: å®Ÿéš›ã«ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œ
    def get_current_weather(location, unit="celsius"):
        """å¤©æ°—APIã‚’å‘¼ã³å‡ºã™ï¼ˆã“ã“ã§ã¯ãƒ¢ãƒƒã‚¯ï¼‰"""
        weather_data = {
            "location": location,
            "temperature": 22,
            "unit": unit,
            "condition": "æ™´ã‚Œ"
        }
        return json.dumps(weather_data, ensure_ascii=False)

    function_response = get_current_weather(**function_args)

    # ã‚¹ãƒ†ãƒƒãƒ—5: çµæœã‚’LLMã«è¿”ã—ã¦æœ€çµ‚å›ç­”ã‚’ç”Ÿæˆ
    messages.append(message)  # LLMã®ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
    messages.append({
        "role": "tool",
        "tool_call_id": tool_call.id,
        "name": function_name,
        "content": function_response
    })

    # æœ€çµ‚å›ç­”ã‚’å–å¾—
    final_response = client.chat.completions.create(
        model="gpt-4",
        messages=messages
    )

    print(final_response.choices[0].message.content)
    # å‡ºåŠ›: æ±äº¬ã®å¤©æ°—ã¯æ™´ã‚Œã§ã€æ°—æ¸©ã¯22åº¦ã§ã™ã€‚
</code></pre>

        <h3>è¤‡æ•°ãƒ„ãƒ¼ãƒ«ã®å®šç¾©ã¨é¸æŠ</h3>

        <pre><code class="language-python">from openai import OpenAI
import json

client = OpenAI(api_key="your-api-key")

# è¤‡æ•°ã®ãƒ„ãƒ¼ãƒ«ã‚’å®šç¾©
tools = [
    {
        "type": "function",
        "function": {
            "name": "search_web",
            "description": "Webæ¤œç´¢ã‚’å®Ÿè¡Œã—ã¦æœ€æ–°æƒ…å ±ã‚’å–å¾—ã—ã¾ã™",
            "parameters": {
                "type": "object",
                "properties": {
                    "query": {
                        "type": "string",
                        "description": "æ¤œç´¢ã‚¯ã‚¨ãƒª"
                    }
                },
                "required": ["query"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "calculate",
            "description": "æ•°å­¦çš„ãªè¨ˆç®—ã‚’å®Ÿè¡Œã—ã¾ã™",
            "parameters": {
                "type": "object",
                "properties": {
                    "expression": {
                        "type": "string",
                        "description": "è¨ˆç®—å¼ï¼ˆä¾‹: 2 + 2, sqrt(16)ï¼‰"
                    }
                },
                "required": ["expression"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "get_stock_price",
            "description": "æ ªä¾¡æƒ…å ±ã‚’å–å¾—ã—ã¾ã™",
            "parameters": {
                "type": "object",
                "properties": {
                    "symbol": {
                        "type": "string",
                        "description": "æ ªå¼ã‚·ãƒ³ãƒœãƒ«ï¼ˆä¾‹: AAPL, GOOGLï¼‰"
                    }
                },
                "required": ["symbol"]
            }
        }
    }
]

# LLMãŒé©åˆ‡ãªãƒ„ãƒ¼ãƒ«ã‚’é¸æŠ
def run_agent_with_tools(user_query):
    """ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ"""
    messages = [{"role": "user", "content": user_query}]

    response = client.chat.completions.create(
        model="gpt-4",
        messages=messages,
        tools=tools,
        tool_choice="auto"
    )

    message = response.choices[0].message

    if message.tool_calls:
        for tool_call in message.tool_calls:
            function_name = tool_call.function.name
            function_args = json.loads(tool_call.function.arguments)

            print(f"é¸æŠã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«: {function_name}")
            print(f"å¼•æ•°: {function_args}")

    return message

# ç•°ãªã‚‹ã‚¯ã‚¨ãƒªã§è©¦ã™
queries = [
    "123 + 456 ã‚’è¨ˆç®—ã—ã¦ãã ã•ã„",
    "Appleã®æ ªä¾¡ã‚’æ•™ãˆã¦ãã ã•ã„",
    "2024å¹´ã®ãƒãƒ¼ãƒ™ãƒ«è³å—è³è€…ã‚’æ•™ãˆã¦ãã ã•ã„"
]

for query in queries:
    print(f"\nã‚¯ã‚¨ãƒª: {query}")
    run_agent_with_tools(query)

# å‡ºåŠ›ä¾‹:
# ã‚¯ã‚¨ãƒª: 123 + 456 ã‚’è¨ˆç®—ã—ã¦ãã ã•ã„
# é¸æŠã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«: calculate
# å¼•æ•°: {'expression': '123 + 456'}
#
# ã‚¯ã‚¨ãƒª: Appleã®æ ªä¾¡ã‚’æ•™ãˆã¦ãã ã•ã„
# é¸æŠã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«: get_stock_price
# å¼•æ•°: {'symbol': 'AAPL'}
#
# ã‚¯ã‚¨ãƒª: 2024å¹´ã®ãƒãƒ¼ãƒ™ãƒ«è³å—è³è€…ã‚’æ•™ãˆã¦ãã ã•ã„
# é¸æŠã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«: search_web
# å¼•æ•°: {'query': '2024å¹´ ãƒãƒ¼ãƒ™ãƒ«è³ å—è³è€…'}
</code></pre>

        <h2 id="anthropic-tools">Anthropic Tool Use</h2>

        <h3>Claudeã§ã®ãƒ„ãƒ¼ãƒ«ä½¿ç”¨</h3>

        <pre><code class="language-python">import anthropic
import json

client = anthropic.Anthropic(api_key="your-api-key")

# ãƒ„ãƒ¼ãƒ«å®šç¾©
tools = [
    {
        "name": "get_weather",
        "description": "æŒ‡å®šã•ã‚ŒãŸå ´æ‰€ã®å¤©æ°—æƒ…å ±ã‚’å–å¾—ã—ã¾ã™",
        "input_schema": {
            "type": "object",
            "properties": {
                "location": {
                    "type": "string",
                    "description": "éƒ½å¸‚å"
                }
            },
            "required": ["location"]
        }
    }
]

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ
def run_claude_agent(user_message):
    """Claudeã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡Œ"""
    messages = [{"role": "user", "content": user_message}]

    while True:
        response = client.messages.create(
            model="claude-3-sonnet-20240229",
            max_tokens=1024,
            tools=tools,
            messages=messages
        )

        # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‡¦ç†
        if response.stop_reason == "tool_use":
            # ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã‚’å‡¦ç†
            tool_use_block = next(
                block for block in response.content
                if block.type == "tool_use"
            )

            tool_name = tool_use_block.name
            tool_input = tool_use_block.input

            print(f"ãƒ„ãƒ¼ãƒ«ä½¿ç”¨: {tool_name}")
            print(f"å…¥åŠ›: {tool_input}")

            # ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œ
            if tool_name == "get_weather":
                result = get_weather(**tool_input)
            else:
                result = "Unknown tool"

            # çµæœã‚’Claudeã«è¿”ã™
            messages.append({"role": "assistant", "content": response.content})
            messages.append({
                "role": "user",
                "content": [{
                    "type": "tool_result",
                    "tool_use_id": tool_use_block.id,
                    "content": result
                }]
            })

        elif response.stop_reason == "end_turn":
            # æœ€çµ‚å›ç­”
            final_answer = next(
                block.text for block in response.content
                if hasattr(block, "text")
            )
            return final_answer

def get_weather(location):
    """å¤©æ°—å–å¾—é–¢æ•°"""
    return json.dumps({
        "location": location,
        "temperature": 22,
        "condition": "æ™´ã‚Œ"
    }, ensure_ascii=False)

# å®Ÿè¡Œ
answer = run_claude_agent("æ±äº¬ã®å¤©æ°—ã‚’æ•™ãˆã¦ãã ã•ã„")
print(f"å›ç­”: {answer}")
</code></pre>

        <h2 id="tool-schema">ãƒ„ãƒ¼ãƒ«å®šç¾©ã¨ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ</h2>

        <h3>åŠ¹æœçš„ãªãƒ„ãƒ¼ãƒ«ã‚¹ã‚­ãƒ¼ãƒã®è¨­è¨ˆåŸå‰‡</h3>

        <h4>1. æ˜ç¢ºãªèª¬æ˜æ–‡</h4>
        <pre><code class="language-python"># æ‚ªã„ä¾‹
{
    "name": "search",
    "description": "æ¤œç´¢ã™ã‚‹"
}

# è‰¯ã„ä¾‹
{
    "name": "search_products",
    "description": """å•†å“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ¤œç´¢ã—ã¦é–¢é€£å•†å“ã‚’å–å¾—ã—ã¾ã™ã€‚
    å•†å“åã€ã‚«ãƒ†ã‚´ãƒªã€ä¾¡æ ¼ç¯„å›²ã§æ¤œç´¢ã§ãã¾ã™ã€‚
    æœ€å¤§10ä»¶ã®å•†å“æƒ…å ±ã‚’è¿”ã—ã¾ã™ã€‚"""
}
</code></pre>

        <h4>2. é©åˆ‡ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­è¨ˆ</h4>
        <pre><code class="language-python">search_products_tool = {
    "type": "function",
    "function": {
        "name": "search_products",
        "description": "å•†å“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ¤œç´¢ã—ã¾ã™",
        "parameters": {
            "type": "object",
            "properties": {
                "query": {
                    "type": "string",
                    "description": "æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆå•†å“åã‚„ã‚«ãƒ†ã‚´ãƒªï¼‰"
                },
                "min_price": {
                    "type": "number",
                    "description": "æœ€ä½ä¾¡æ ¼ï¼ˆå††ï¼‰",
                    "minimum": 0
                },
                "max_price": {
                    "type": "number",
                    "description": "æœ€é«˜ä¾¡æ ¼ï¼ˆå††ï¼‰",
                    "minimum": 0
                },
                "category": {
                    "type": "string",
                    "enum": ["electronics", "clothing", "books", "food"],
                    "description": "å•†å“ã‚«ãƒ†ã‚´ãƒª"
                },
                "sort_by": {
                    "type": "string",
                    "enum": ["price_asc", "price_desc", "popularity"],
                    "description": "ã‚½ãƒ¼ãƒˆé †",
                    "default": "popularity"
                },
                "limit": {
                    "type": "integer",
                    "description": "å–å¾—ä»¶æ•°",
                    "minimum": 1,
                    "maximum": 50,
                    "default": 10
                }
            },
            "required": ["query"]
        }
    }
}
</code></pre>

        <h4>3. ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®æ˜ç¤º</h4>
        <pre><code class="language-python">def search_products(query, min_price=None, max_price=None,
                         category=None, sort_by="popularity", limit=10):
    """
    å•†å“ã‚’æ¤œç´¢ã—ã¾ã™ã€‚

    Returns:
        dict: æˆåŠŸæ™‚ã¯å•†å“ãƒªã‚¹ãƒˆã€ã‚¨ãƒ©ãƒ¼æ™‚ã¯ã‚¨ãƒ©ãƒ¼æƒ…å ±
        {
            "success": bool,
            "data": [...],  # æˆåŠŸæ™‚
            "error": str,   # ã‚¨ãƒ©ãƒ¼æ™‚
            "error_code": str  # ã‚¨ãƒ©ãƒ¼æ™‚
        }
    """
    try:
        # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        if not query or len(query) < 2:
            return {
                "success": False,
                "error": "æ¤œç´¢ã‚¯ã‚¨ãƒªã¯2æ–‡å­—ä»¥ä¸Šå¿…è¦ã§ã™",
                "error_code": "INVALID_QUERY"
            }

        if min_price and max_price and min_price > max_price:
            return {
                "success": False,
                "error": "æœ€ä½ä¾¡æ ¼ãŒæœ€é«˜ä¾¡æ ¼ã‚’ä¸Šå›ã£ã¦ã„ã¾ã™",
                "error_code": "INVALID_PRICE_RANGE"
            }

        # æ¤œç´¢å®Ÿè¡Œï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ãªã©ï¼‰
        results = perform_search(query, min_price, max_price, category, sort_by, limit)

        return {
            "success": True,
            "data": results,
            "total": len(results)
        }

    except Exception as e:
        return {
            "success": False,
            "error": str(e),
            "error_code": "INTERNAL_ERROR"
        }
</code></pre>

        <h2 id="error-handling">ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªãƒˆãƒ©ã‚¤</h2>

        <h3>å …ç‰¢ãªãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ</h3>

        <pre><code class="language-python">import time
import logging
from typing import Any, Dict, Callable

class ToolExecutor:
    """å®‰å…¨ãªãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã®ãŸã‚ã®ãƒ©ãƒƒãƒ‘ãƒ¼"""

    def __init__(self, max_retries=3, timeout=30):
        self.max_retries = max_retries
        self.timeout = timeout
        self.logger = logging.getLogger(__name__)

    def execute(self, tool_func: Callable, args: Dict[str, Any]) -> Dict[str, Any]:
        """
        ãƒ„ãƒ¼ãƒ«ã‚’å®‰å…¨ã«å®Ÿè¡Œ

        Args:
            tool_func: å®Ÿè¡Œã™ã‚‹é–¢æ•°
            args: é–¢æ•°ã®å¼•æ•°

        Returns:
            å®Ÿè¡Œçµæœã¾ãŸã¯ã‚¨ãƒ©ãƒ¼æƒ…å ±
        """
        for attempt in range(self.max_retries):
            try:
                # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä»˜ãå®Ÿè¡Œ
                result = self._execute_with_timeout(tool_func, args)

                return {
                    "success": True,
                    "result": result,
                    "attempt": attempt + 1
                }

            except TimeoutError:
                self.logger.warning(f"ãƒ„ãƒ¼ãƒ«å®Ÿè¡ŒãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ (è©¦è¡Œ {attempt + 1})")
                if attempt < self.max_retries - 1:
                    time.sleep(2 ** attempt)  # Exponential backoff
                else:
                    return {
                        "success": False,
                        "error": "ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ",
                        "error_type": "timeout"
                    }

            except ValueError as e:
                # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã¯ãƒªãƒˆãƒ©ã‚¤ã—ãªã„
                self.logger.error(f"ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼: {str(e)}")
                return {
                    "success": False,
                    "error": str(e),
                    "error_type": "validation"
                }

            except Exception as e:
                # ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼
                self.logger.error(f"ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã‚¨ãƒ©ãƒ¼: {str(e)} (è©¦è¡Œ {attempt + 1})")
                if attempt < self.max_retries - 1:
                    time.sleep(2 ** attempt)
                else:
                    return {
                        "success": False,
                        "error": str(e),
                        "error_type": "execution"
                    }

        return {
            "success": False,
            "error": "æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°ã«åˆ°é”ã—ã¾ã—ãŸ",
            "error_type": "max_retries"
        }

    def _execute_with_timeout(self, func: Callable, args: Dict[str, Any]) -> Any:
        """ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä»˜ãã§é–¢æ•°ã‚’å®Ÿè¡Œ"""
        import signal

        def timeout_handler(signum, frame):
            raise TimeoutError()

        # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¨­å®š
        signal.signal(signal.SIGALRM, timeout_handler)
        signal.alarm(self.timeout)

        try:
            result = func(**args)
            signal.alarm(0)  # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
            return result
        except:
            signal.alarm(0)
            raise

# ä½¿ç”¨ä¾‹
executor = ToolExecutor(max_retries=3, timeout=10)

def risky_api_call(param):
    """ä¸å®‰å®šãªAPIå‘¼ã³å‡ºã—"""
    import random
    if random.random() < 0.3:
        raise ConnectionError("APIæ¥ç¶šã‚¨ãƒ©ãƒ¼")
    return {"data": f"çµæœ: {param}"}

result = executor.execute(risky_api_call, {"param": "test"})
print(result)
</code></pre>

        <h2 id="external-api">å¤–éƒ¨APIçµ±åˆ</h2>

        <h3>å®Ÿç”¨çš„ãªAPIçµ±åˆä¾‹</h3>

        <h4>1. å¤©æ°—APIçµ±åˆï¼ˆOpenWeatherMapï¼‰</h4>

        <pre><code class="language-python">import requests
from typing import Dict, Optional

class WeatherTool:
    """å¤©æ°—æƒ…å ±å–å¾—ãƒ„ãƒ¼ãƒ«"""

    def __init__(self, api_key: str):
        self.api_key = api_key
        self.base_url = "https://api.openweathermap.org/data/2.5/weather"

    def get_weather(self, location: str, unit: str = "metric") -> Dict:
        """
        æŒ‡å®šã•ã‚ŒãŸå ´æ‰€ã®å¤©æ°—æƒ…å ±ã‚’å–å¾—

        Args:
            location: éƒ½å¸‚å
            unit: æ¸©åº¦å˜ä½ (metric: æ‘‚æ°, imperial: è¯æ°)

        Returns:
            å¤©æ°—æƒ…å ±ã®è¾æ›¸
        """
        try:
            params = {
                "q": location,
                "appid": self.api_key,
                "units": unit,
                "lang": "ja"
            }

            response = requests.get(self.base_url, params=params, timeout=10)
            response.raise_for_status()

            data = response.json()

            return {
                "success": True,
                "location": data["name"],
                "temperature": data["main"]["temp"],
                "feels_like": data["main"]["feels_like"],
                "humidity": data["main"]["humidity"],
                "description": data["weather"][0]["description"],
                "wind_speed": data["wind"]["speed"]
            }

        except requests.exceptions.HTTPError as e:
            if e.response.status_code == 404:
                return {
                    "success": False,
                    "error": f"éƒ½å¸‚ '{location}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
                }
            else:
                return {
                    "success": False,
                    "error": f"APIã‚¨ãƒ©ãƒ¼: {str(e)}"
                }

        except requests.exceptions.Timeout:
            return {
                "success": False,
                "error": "APIãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ"
            }

        except Exception as e:
            return {
                "success": False,
                "error": f"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼: {str(e)}"
            }

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®çµ±åˆ
weather_tool = WeatherTool(api_key="your-openweathermap-api-key")

tools = [
    {
        "type": "function",
        "function": {
            "name": "get_weather",
            "description": "æŒ‡å®šã•ã‚ŒãŸå ´æ‰€ã®ç¾åœ¨ã®å¤©æ°—æƒ…å ±ã‚’å–å¾—ã—ã¾ã™",
            "parameters": {
                "type": "object",
                "properties": {
                    "location": {
                        "type": "string",
                        "description": "éƒ½å¸‚åï¼ˆä¾‹: Tokyo, Osakaï¼‰"
                    }
                },
                "required": ["location"]
            }
        }
    }
]

# ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œæ™‚
# result = weather_tool.get_weather("Tokyo")
</code></pre>

        <h2 id="tool-chain">ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ã¨é€£æº</h2>

        <h3>è¤‡æ•°ãƒ„ãƒ¼ãƒ«ã®é€£æºå®Ÿè¡Œ</h3>

        <pre><code class="language-python">from openai import OpenAI
import json

client = OpenAI(api_key="your-api-key")

class AgentWithToolChain:
    """ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ã‚’æŒã¤ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"""

    def __init__(self):
        self.tools = {
            "search_company": self.search_company,
            "get_stock_price": self.get_stock_price,
            "calculate_change": self.calculate_change
        }

        self.tool_definitions = [
            {
                "type": "function",
                "function": {
                    "name": "search_company",
                    "description": "ä¼æ¥­åã‹ã‚‰æ ªå¼ã‚·ãƒ³ãƒœãƒ«ã‚’æ¤œç´¢",
                    "parameters": {
                        "type": "object",
                        "properties": {
                            "company_name": {"type": "string"}
                        },
                        "required": ["company_name"]
                    }
                }
            },
            {
                "type": "function",
                "function": {
                    "name": "get_stock_price",
                    "description": "æ ªå¼ã‚·ãƒ³ãƒœãƒ«ã‹ã‚‰ç¾åœ¨ä¾¡æ ¼ã‚’å–å¾—",
                    "parameters": {
                        "type": "object",
                        "properties": {
                            "symbol": {"type": "string"}
                        },
                        "required": ["symbol"]
                    }
                }
            },
            {
                "type": "function",
                "function": {
                    "name": "calculate_change",
                    "description": "ä¾¡æ ¼å¤‰å‹•ç‡ã‚’è¨ˆç®—",
                    "parameters": {
                        "type": "object",
                        "properties": {
                            "current_price": {"type": "number"},
                            "previous_price": {"type": "number"}
                        },
                        "required": ["current_price", "previous_price"]
                    }
                }
            }
        ]

    def search_company(self, company_name: str) -> str:
        """ä¼æ¥­åã‹ã‚‰æ ªå¼ã‚·ãƒ³ãƒœãƒ«ã‚’æ¤œç´¢ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰"""
        mapping = {
            "Apple": "AAPL",
            "Microsoft": "MSFT",
            "Google": "GOOGL"
        }
        symbol = mapping.get(company_name, "UNKNOWN")
        return json.dumps({"symbol": symbol})

    def get_stock_price(self, symbol: str) -> str:
        """æ ªä¾¡å–å¾—ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰"""
        prices = {
            "AAPL": {"current": 150.25, "previous": 148.50},
            "MSFT": {"current": 380.75, "previous": 375.00},
            "GOOGL": {"current": 140.50, "previous": 142.00}
        }
        data = prices.get(symbol, {"current": 0, "previous": 0})
        return json.dumps(data)

    def calculate_change(self, current_price: float, previous_price: float) -> str:
        """ä¾¡æ ¼å¤‰å‹•ç‡ã‚’è¨ˆç®—"""
        change = current_price - previous_price
        change_percent = (change / previous_price) * 100
        return json.dumps({
            "change": round(change, 2),
            "change_percent": round(change_percent, 2)
        })

    def run(self, user_query: str, max_iterations: int = 10) -> str:
        """ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œï¼ˆãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³å¯¾å¿œï¼‰"""
        messages = [{"role": "user", "content": user_query}]

        for i in range(max_iterations):
            response = client.chat.completions.create(
                model="gpt-4",
                messages=messages,
                tools=self.tool_definitions,
                tool_choice="auto"
            )

            message = response.choices[0].message

            if not message.tool_calls:
                # æœ€çµ‚å›ç­”
                return message.content

            # ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã‚’å‡¦ç†
            messages.append(message)

            for tool_call in message.tool_calls:
                function_name = tool_call.function.name
                function_args = json.loads(tool_call.function.arguments)

                # ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
                if function_name in self.tools:
                    result = self.tools[function_name](**function_args)
                else:
                    result = json.dumps({"error": "Unknown tool"})

                # çµæœã‚’è¿½åŠ 
                messages.append({
                    "role": "tool",
                    "tool_call_id": tool_call.id,
                    "name": function_name,
                    "content": result
                })

        return "æœ€å¤§åå¾©å›æ•°ã«é”ã—ã¾ã—ãŸ"

# ä½¿ç”¨ä¾‹
agent = AgentWithToolChain()
answer = agent.run("Appleã®æ ªä¾¡ã¯æ˜¨æ—¥ã¨æ¯”ã¹ã¦ã©ã†å¤‰åŒ–ã—ã¾ã—ãŸã‹ï¼Ÿ")
print(answer)
# LLMã¯è‡ªå‹•çš„ã«: search_company â†’ get_stock_price â†’ calculate_change ã¨é€£æºå®Ÿè¡Œ
</code></pre>

        <h2 id="security">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ¬ãƒ¼ãƒˆåˆ¶é™</h2>

        <h3>å®‰å…¨ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­è¨ˆ</h3>

        <h4>1. ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã®æ‰¿èªãƒ•ãƒ­ãƒ¼</h4>
        <pre><code class="language-python">class SecureAgent:
    """æ‰¿èªãƒ•ãƒ­ãƒ¼ã‚’æŒã¤ã‚»ã‚­ãƒ¥ã‚¢ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"""

    def __init__(self, require_approval_for=None):
        self.require_approval_for = require_approval_for or [
            "delete_*",
            "send_email",
            "make_payment"
        ]

    def requires_approval(self, tool_name: str) -> bool:
        """ãƒ„ãƒ¼ãƒ«ãŒæ‰¿èªã‚’å¿…è¦ã¨ã™ã‚‹ã‹åˆ¤å®š"""
        import fnmatch
        for pattern in self.require_approval_for:
            if fnmatch.fnmatch(tool_name, pattern):
                return True
        return False

    def request_approval(self, tool_name: str, args: dict) -> bool:
        """ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ‰¿èªã‚’æ±‚ã‚ã‚‹"""
        print(f"\nâš ï¸  æ‰¿èªãŒå¿…è¦ã§ã™")
        print(f"ãƒ„ãƒ¼ãƒ«: {tool_name}")
        print(f"å¼•æ•°: {args}")
        response = input("å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ (yes/no): ")
        return response.lower() == "yes"

    def execute_tool(self, tool_name: str, args: dict):
        """æ‰¿èªãƒ•ãƒ­ãƒ¼ä»˜ããƒ„ãƒ¼ãƒ«å®Ÿè¡Œ"""
        if self.requires_approval(tool_name):
            if not self.request_approval(tool_name, args):
                return {"success": False, "error": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‹’å¦ã—ã¾ã—ãŸ"}

        # ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
        return self.tools[tool_name](**args)
</code></pre>

        <h4>2. ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®å®Ÿè£…</h4>
        <pre><code class="language-python">import time
from collections import defaultdict

class RateLimiter:
    """ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™"""

    def __init__(self, max_calls_per_minute=10):
        self.max_calls = max_calls_per_minute
        self.calls = defaultdict(list)

    def allow_call(self, tool_name: str) -> bool:
        """å‘¼ã³å‡ºã—ã‚’è¨±å¯ã™ã‚‹ã‹åˆ¤å®š"""
        now = time.time()
        one_minute_ago = now - 60

        # 1åˆ†ä»¥å†…ã®å‘¼ã³å‡ºã—ã‚’ãƒ•ã‚£ãƒ«ã‚¿
        self.calls[tool_name] = [
            t for t in self.calls[tool_name]
            if t > one_minute_ago
        ]

        if len(self.calls[tool_name]) >= self.max_calls:
            return False

        self.calls[tool_name].append(now)
        return True

# ä½¿ç”¨ä¾‹
limiter = RateLimiter(max_calls_per_minute=5)

if limiter.allow_call("expensive_api"):
    result = call_expensive_api()
else:
    print("ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚")
</code></pre>

        <h2 id="summary">ã¾ã¨ã‚</h2>

        <h3>ã“ã®ç« ã§å­¦ã‚“ã ã“ã¨</h3>
        <ul>
            <li>âœ… <strong>Function Calling</strong>: OpenAI/Anthropicã®Function Calling API</li>
            <li>âœ… <strong>ãƒ„ãƒ¼ãƒ«ã‚¹ã‚­ãƒ¼ãƒ</strong>: JSONã‚¹ã‚­ãƒ¼ãƒã«ã‚ˆã‚‹å‹å®‰å…¨ãªå®šç¾©</li>
            <li>âœ… <strong>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>: ãƒªãƒˆãƒ©ã‚¤ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ã‚¨ãƒ©ãƒ¼å‡¦ç†</li>
            <li>âœ… <strong>å¤–éƒ¨APIçµ±åˆ</strong>: å¤©æ°—APIã€æ ªä¾¡APIãªã©ã®å®Ÿè£…</li>
            <li>âœ… <strong>ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³</strong>: è¤‡æ•°ãƒ„ãƒ¼ãƒ«ã®é€£æºå®Ÿè¡Œ</li>
            <li>âœ… <strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</strong>: æ‰¿èªãƒ•ãƒ­ãƒ¼ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™</li>
        </ul>

        <blockquote>
            <p><strong>é‡è¦ãªè¨­è¨ˆåŸå‰‡</strong>ï¼šãƒ„ãƒ¼ãƒ«ã¯æ˜ç¢ºãªè²¬å‹™ã‚’æŒã¡ã€ã‚¨ãƒ©ãƒ¼ã‚’é©åˆ‡ã«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’è€ƒæ…®ã—ã¦è¨­è¨ˆã™ã‚‹</p>
        </blockquote>

        <div class="nav-buttons">
            <a href="./chapter1-agent-basics.html" class="nav-button">â† ç¬¬1ç« : ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåŸºç¤</a>
            <a href="./chapter3-multi-agent.html" class="nav-button">ç¬¬3ç« : ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ â†’</a>
        </div>
    </main>


        <div class="feedback-notice">
            <h3>âš ï¸ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å“è³ªå‘ä¸Šã«ã”å”åŠ›ãã ã•ã„</h3>
            <p>ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯AIã‚’æ´»ç”¨ã—ã¦ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚èª¤ã‚Šã‚„æ”¹å–„ç‚¹ã‚’è¦‹ã¤ã‘ã‚‰ã‚ŒãŸå ´åˆã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ã§ã”å ±å‘Šãã ã•ã„ï¼š</p>
            <div class="feedback-options">
                <a href="https://forms.gle/9GfVBa2Qa7Uy9taQA" target="_blank" class="feedback-button">
                    ğŸ“ ä¿®æ­£ä¾é ¼ãƒ•ã‚©ãƒ¼ãƒ 
                </a>
                <a href="mailto:yusuke.hashimoto.d8@tohoku.ac.jp" class="feedback-button">
                    âœ‰ï¸ ãƒ¡ãƒ¼ãƒ«ã§é€£çµ¡
                </a>
            </div>
        </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 AI Terakoya - Dr. Yusuke Hashimoto, Tohoku University</p>
            <p>Licensed under CC BY 4.0</p>
        </div>
    </footer>
</body>
</html>
