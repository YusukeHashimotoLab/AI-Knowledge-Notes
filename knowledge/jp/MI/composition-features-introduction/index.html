<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="組成ベース特徴量入門シリーズ - Magpieと機械学習で材料探索を加速">
    <title>組成ベース特徴量入門シリーズ v1.0 - AI Terakoya</title>

    <!-- CSS Styling -->
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #f093fb;
            --accent-color: #f5576c;
            --bg-color: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --code-bg: #f5f5f5;
            --link-color: #f5576c;
            --link-hover: #d64556;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Hiragino Sans", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
            line-height: 1.8;
            color: var(--text-color);
            background: var(--bg-color);
            padding: 0;
            margin: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        /* Header with MS Gradient */
        header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        header .container {
            padding: 0 1.5rem;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            opacity: 0.95;
        }

        .meta {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            font-size: 0.9rem;
            opacity: 0.95;
            margin-top: 1rem;
        }

        .meta span {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        /* Typography */
        h2 {
            font-size: 1.75rem;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--secondary-color);
            color: var(--primary-color);
        }

        h3 {
            font-size: 1.4rem;
            margin-top: 2rem;
            margin-bottom: 0.8rem;
            color: var(--primary-color);
        }

        h4 {
            font-size: 1.2rem;
            margin-top: 1.5rem;
            margin-bottom: 0.6rem;
            color: var(--primary-color);
        }

        p {
            margin-bottom: 1.2rem;
        }

        a {
            color: var(--link-color);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--link-hover);
            text-decoration: underline;
        }

        /* Lists */
        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1.2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* Code blocks */
        code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            color: #c7254e;
        }

        pre {
            background: var(--code-bg);
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
        }

        pre code {
            background: none;
            padding: 0;
            font-size: 0.9rem;
            color: inherit;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            display: block;
        }

        thead {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        tbody {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        th, td {
            padding: 0.8rem;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        th {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        /* Blockquotes */
        blockquote {
            border-left: 4px solid var(--accent-color);
            padding-left: 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: #666;
        }

        /* Images */
        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 1rem 0;
        }

        /* Mermaid diagrams */
        .mermaid {
            text-align: center;
            margin: 2rem 0;
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        /* Details/Summary (for FAQ) */
        details {
            margin: 1rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-color);
            padding: 0.5rem;
        }

        summary:hover {
            color: var(--accent-color);
        }

        /* Footer */
        footer {
            margin-top: 4rem;
            padding: 2rem 0;
            border-top: 2px solid var(--border-color);
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }

        .disclaimer {
            max-width: 900px;
            margin: 2rem auto;
            padding: 1.5rem;
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
            border-radius: 4px;
        }

        .disclaimer h3 {
            color: #495057;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .disclaimer ul {
            list-style: none;
            padding-left: 0;
        }

        .disclaimer li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.9rem;
            color: #6c757d;
            line-height: 1.6;
        }

        .disclaimer li::before {
            content: "⚠️";
            position: absolute;
            left: 0;
        }

        /* Navigation buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin: 3rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .nav-button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 6px;
            text-decoration: none;
            transition: all 0.3s;
            font-weight: 600;
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 87, 108, 0.4);
        }

        /* Highlight boxes */
        .highlight-box {
            background: linear-gradient(135deg, rgba(240, 147, 251, 0.1) 0%, rgba(245, 87, 108, 0.1) 100%);
            border-left: 4px solid var(--accent-color);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .highlight-box h4 {
            margin-top: 0;
            color: var(--accent-color);
        }

        /* Chapter cards */
        .chapter-card {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }

        .chapter-card:hover {
            box-shadow: 0 4px 16px rgba(245, 87, 108, 0.2);
            transform: translateY(-2px);
        }

        .chapter-card h3 a {
            color: var(--primary-color);
        }

        .chapter-card h3 a:hover {
            color: var(--accent-color);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.6rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            pre {
                padding: 1rem;
                font-size: 0.85rem;
            }

            table {
                font-size: 0.9rem;
            }
        }

        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #f093fb;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #f5576c;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>

    <!-- Mermaid for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mermaidCodeBlocks = document.querySelectorAll('pre.codehilite code.language-mermaid, pre code.language-mermaid');

            mermaidCodeBlocks.forEach(function(codeBlock) {
                const pre = codeBlock.parentElement;
                const mermaidCode = codeBlock.textContent;

                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = mermaidCode.trim();

                pre.parentNode.replaceChild(mermaidDiv, pre);
            });

            if (typeof mermaid !== 'undefined') {
                mermaid.initialize({ startOnLoad: true, theme: 'default' });
                mermaid.init(undefined, document.querySelectorAll('.mermaid'));
            }
        });
    </script>

    <!-- MathJax for mathematical expressions -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
</head>
<body>
    <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="../../index.html">AI寺子屋トップ</a><span class="breadcrumb-separator">›</span><a href="../index.html">マテリアルズ・インフォマティクス</a><span class="breadcrumb-separator">›</span><span class="breadcrumb-current">組成ベース特徴量入門</span>
        </div>
    </nav>

    <header>
        <div class="container">
            <h1>組成ベース特徴量入門シリーズ v1.0</h1>
            <p class="subtitle">Magpieと機械学習で材料探索を加速</p>
            <div class="meta">
                <span>📖 総学習時間: 150-180分</span>
                <span>📊 レベル: 初級～中級</span>
                <span>👥 対象: Python基礎習得者、材料科学基礎知識あり</span>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="highlight-box">
            <h4>🎯 このシリーズで学べること</h4>
            <p><strong>組成ベース特徴量</strong>は、材料の化学組成（元素の種類と比率）から物性を予測する古典的だが強力な手法です。Magpie記述子を中心に、元素特性データベースの活用からPython実装（matminer）まで、体系的に学びます。</p>
        </div>

        <h2 id="overview">シリーズ概要</h2>
        <p>材料探索において、<strong>化学組成は最も基本的かつ重要な情報</strong>です。しかし、「Fe<sub>2</sub>O<sub>3</sub>」という組成式だけでは機械学習モデルに入力できません。そこで、元素の周期表情報（イオン化エネルギー、電気陰性度、原子半径など）を組み合わせ、数値ベクトルに変換する<strong>組成ベース特徴量</strong>が重要な役割を果たします。</p>

        <p>このシリーズでは、最も広く使われている<strong>Magpie記述子</strong>を中心に、以下を包括的に学びます：</p>

        <ul>
            <li>✅ <strong>理論的基盤</strong>: 組成ベース特徴量の数学的定義と材料科学的意義</li>
            <li>✅ <strong>実践的スキル</strong>: matminerライブラリを使った特徴量生成ワークフロー</li>
            <li>✅ <strong>比較分析</strong>: 構造ベース特徴量（CGCNN/MPNNなどのGNN）との使い分け</li>
            <li>✅ <strong>最新動向</strong>: Magpieの限界とGNN手法への発展</li>
        </ul>

        <h2 id="why-composition">なぜ組成ベース特徴量が重要なのか</h2>

        <div class="highlight-box">
            <h4>💡 組成ベース vs 構造ベース</h4>
            <p>材料の特徴量には大きく2つのアプローチがあります：</p>
            <ul>
                <li><strong>組成ベース</strong>（本シリーズ）: 化学組成のみから特徴量を生成（構造情報不要）</li>
                <li><strong>構造ベース</strong>（<span class="breadcrumb-current">GNN入門シリーズ</span>）: 原子座標・結合情報を含む3D構造から学習</li>
            </ul>
            <p><strong>組成ベースの強み</strong>: 構造が未知の新材料探索、高速スクリーニング、データが限られている場合でも有効</p>
        </div>

        <h3>組成ベース特徴量の典型的な応用例</h3>
        <ol>
            <li><strong>高速材料スクリーニング</strong>: 100万化合物の形成エネルギー予測（GNNより10-100倍高速）</li>
            <li><strong>実験データ駆動型探索</strong>: 少数の実験データから物性予測（転移学習との組合せ）</li>
            <li><strong>ハイブリッドモデル</strong>: 組成特徴量 + GNN特徴量で精度向上</li>
        </ol>

        <h2 id="learning">学習の進め方</h2>

        <h3>推奨学習フロー</h3>

        <div class="mermaid">
timeline
    title 組成ベース特徴量入門シリーズ 学習フロー
    section Chapter 1 : 基礎知識
        組成ベース特徴量とは : 定義と歴史
        従来記述子の限界 : 密度・対称性では不十分
        Magpie登場の背景 : 元素特性の活用
    section Chapter 2 : Magpie詳細
        統計記述子の種類 : 平均・分散・最大・最小
        元素特性145次元 : 周期表データベース
        実装の数学的定義 : 重み付き統計量
    section Chapter 3 : データベース
        元素特性データベース : Magpie/Deml/Jarvis
        Featurizerの使い分け : matminer API
        カスタムFeaturizer作成 : 独自記述子の追加
    section Chapter 4 : 機械学習統合
        モデル選択 : Random Forest/XGBoost/NN
        ハイパーパラメータ最適化 : Optuna/GridSearch
        特徴量重要度分析 : SHAP/LIME
    section Chapter 5 : Python実践
        matminerワークフロー : データ準備→特徴量生成→モデル訓練
        Materials Projectデータ : 実データで物性予測
        性能評価とベンチマーク : GNNとの比較
        </div>

        <p><strong>初学者の方（組成特徴量を初めて学ぶ）:</strong><br>
        - Chapter 1 → Chapter 2 → Chapter 3 → Chapter 4 → Chapter 5（全章推奨）<br>
        - 所要時間: 150-180分</p>

        <p><strong>中級者の方（機械学習経験あり、matminerを使いたい）:</strong><br>
        - Chapter 2 → Chapter 3 → Chapter 5<br>
        - 所要時間: 90-120分</p>

        <p><strong>GNN学習者（組成 vs 構造を比較したい）:</strong><br>
        - Chapter 1 → Chapter 2 → Chapter 5 → <a href="../gnn-features-comparison/index.html">組成 vs GNN比較シリーズ</a><br>
        - 所要時間: 120-150分</p>

        <h2 id="chapters">各章の詳細</h2>

        <div class="chapter-card">
            <h3><a href="./chapter-1.html">第1章：組成ベース特徴量の基礎</a></h3>
            <p><strong>難易度</strong>: 入門<br>
            <strong>読了時間</strong>: 25-30分<br>
            <strong>コード例</strong>: 5個</p>

            <h4>学習内容</h4>
            <ol>
                <li><strong>組成ベース特徴量とは何か</strong> - 化学組成から数値ベクトルへの変換</li>
                <li><strong>歴史的背景</strong> - Ward (2016) Magpie論文以前と以後</li>
                <li><strong>従来記述子の限界</strong> - 密度、対称性、格子定数だけでは不十分</li>
                <li><strong>元素特性の活用</strong> - 周期表データベースの威力</li>
                <li><strong>成功事例</strong> - OQMD、Materials Projectでの応用</li>
            </ol>

            <h4>学習目標</h4>
            <ul>
                <li>✅ 組成ベース特徴量の定義と役割を説明できる</li>
                <li>✅ 従来の材料記述子との違いを具体例で示せる</li>
                <li>✅ なぜMagpieが広く使われるか理解している</li>
            </ul>

            <p><strong><a href="./chapter-1.html" class="nav-button">第1章を読む →</a></strong></p>
        </div>

        <hr>

        <div class="chapter-card">
            <h3><a href="./chapter-2.html">第2章：Magpieと統計記述子</a></h3>
            <p><strong>難易度</strong>: 初級〜中級<br>
            <strong>読了時間</strong>: 30-35分<br>
            <strong>コード例</strong>: 8個</p>

            <h4>学習内容</h4>
            <ol>
                <li><strong>Magpie記述子の数学的定義</strong> - 145次元の統計量</li>
                <li><strong>統計記述子の種類</strong> - 平均、分散、最大、最小、範囲、モード</li>
                <li><strong>重み付きvs重みなし</strong> - 組成比による重み付けの効果</li>
                <li><strong>元素特性22種類</strong> - イオン化エネルギー、電気陰性度、原子半径など</li>
                <li><strong>実装例</strong> - NumPyによる手動計算</li>
            </ol>

            <h4>学習目標</h4>
            <ul>
                <li>✅ Magpie記述子の計算方法を数式で理解している</li>
                <li>✅ 22種類の元素特性を列挙できる</li>
                <li>✅ 重み付き統計量の意義を説明できる</li>
            </ul>

            <p><strong><a href="./chapter-2.html" class="nav-button">第2章を読む →</a></strong></p>
        </div>

        <hr>

        <div class="chapter-card">
            <h3><a href="./chapter-3.html">第3章：元素特性データベースとFeaturizer</a></h3>
            <p><strong>難易度</strong>: 中級<br>
            <strong>読了時間</strong>: 30-35分<br>
            <strong>コード例</strong>: 10個</p>

            <h4>学習内容</h4>
            <ol>
                <li><strong>元素特性データベースの種類</strong> - Magpie、Deml、Jarvis、Matscholar</li>
                <li><strong>matminer Featurizer API</strong> - ElementProperty、Stoichiometry、OxidationStates</li>
                <li><strong>Featurizerの使い分け</strong> - 用途に応じた選択基準</li>
                <li><strong>カスタムFeaturizer作成</strong> - 独自の元素特性を追加する方法</li>
                <li><strong>特徴量の前処理</strong> - 標準化、欠損値処理</li>
            </ol>

            <h4>学習目標</h4>
            <ul>
                <li>✅ 3つ以上の元素特性データベースを使い分けられる</li>
                <li>✅ matminer Featurizerを用途に応じて選択できる</li>
                <li>✅ カスタムFeaturizerを実装できる</li>
            </ul>

            <p><strong><a href="./chapter-3.html" class="nav-button">第3章を読む →</a></strong></p>
        </div>

        <hr>

        <div class="chapter-card">
            <h3><a href="./chapter-4.html">第4章：機械学習モデルとの統合</a></h3>
            <p><strong>難易度</strong>: 中級〜上級<br>
            <strong>読了時間</strong>: 30-35分<br>
            <strong>コード例</strong>: 12個</p>

            <h4>学習内容</h4>
            <ol>
                <li><strong>モデル選択の基準</strong> - Random Forest、XGBoost、LightGBM、ニューラルネットワーク</li>
                <li><strong>ハイパーパラメータ最適化</strong> - Optuna、GridSearchCV、BayesSearchCV</li>
                <li><strong>特徴量重要度分析</strong> - SHAP、LIME、Permutation Importance</li>
                <li><strong>アンサンブル手法</strong> - Bagging、Boosting、Stacking</li>
                <li><strong>性能評価指標</strong> - MAE、RMSE、R²、交差検証</li>
            </ol>

            <h4>学習目標</h4>
            <ul>
                <li>✅ タスクに応じて適切な機械学習モデルを選択できる</li>
                <li>✅ Optunaでハイパーパラメータ最適化を実行できる</li>
                <li>✅ SHAP値で特徴量重要度を解釈できる</li>
            </ul>

            <p><strong><a href="./chapter-4.html" class="nav-button">第4章を読む →</a></strong></p>
        </div>

        <hr>

        <div class="chapter-card">
            <h3><a href="./chapter-5.html">第5章：Python実践 - matminerワークフロー</a></h3>
            <p><strong>難易度</strong>: 中級〜上級<br>
            <strong>読了時間</strong>: 35-45分<br>
            <strong>コード例</strong>: 15個（全て実行可能）</p>

            <h4>学習内容</h4>
            <ol>
                <li><strong>環境構築</strong> - Anaconda、pip、Google Colab</li>
                <li><strong>データ準備</strong> - Materials Project API、OQMDデータセット</li>
                <li><strong>特徴量生成パイプライン</strong> - 組成式 → Magpie記述子 → 標準化</li>
                <li><strong>モデル訓練と評価</strong> - 形成エネルギー予測、バンドギャップ予測</li>
                <li><strong>GNNとの性能比較</strong> - 精度、速度、解釈可能性</li>
                <li><strong>ハイブリッドアプローチ</strong> - 組成特徴量 + 構造特徴量</li>
            </ol>

            <h4>学習目標</h4>
            <ul>
                <li>✅ matminerでエンドツーエンドの予測ワークフローを構築できる</li>
                <li>✅ Materials Projectデータで物性予測ができる（R² &gt; 0.85）</li>
                <li>✅ 組成ベースとGNNの性能を定量的に比較できる</li>
                <li>✅ ハイブリッドモデルで精度向上を実現できる</li>
            </ul>

            <p><strong><a href="./chapter-5.html" class="nav-button">第5章を読む →</a></strong></p>
        </div>

        <hr>

        <h2 id="outcomes">全体の学習成果</h2>

        <p>このシリーズを完了すると、以下のスキルと知識を習得できます：</p>

        <h3>知識レベル（Understanding）</h3>
        <ul>
            <li>✅ 組成ベース特徴量の理論的基盤と歴史を説明できる</li>
            <li>✅ Magpie記述子の数学的定義を理解している</li>
            <li>✅ 元素特性データベースの種類と特徴を把握している</li>
            <li>✅ 組成ベースとGNNの使い分け基準を理解している</li>
        </ul>

        <h3>実践スキル（Doing）</h3>
        <ul>
            <li>✅ matminerで組成から特徴量ベクトルを生成できる</li>
            <li>✅ 複数のFeaturizerを組み合わせて特徴量を拡張できる</li>
            <li>✅ 機械学習モデル（RF/XGBoost/NN）で物性予測ができる</li>
            <li>✅ SHAP値で予測の根拠を解釈できる</li>
            <li>✅ GNNとの性能を定量的に比較できる</li>
        </ul>

        <h3>応用力（Applying）</h3>
        <ul>
            <li>✅ 新しい材料探索タスクで適切な特徴量を設計できる</li>
            <li>✅ ハイブリッドモデル（組成 + 構造）を構築できる</li>
            <li>✅ 実験データと組み合わせた予測ワークフローを設計できる</li>
            <li>✅ 産業応用（電池材料、触媒）に特徴量エンジニアリングを適用できる</li>
        </ul>

        <hr>

        <h2 id="faq">よくある質問（FAQ）</h2>

        <details>
            <summary>Q1: 組成ベース特徴量とGNN（構造ベース）、どちらを使うべきですか？</summary>
            <p><strong>A:</strong> タスクとデータの性質によります：</p>
            <ul>
                <li><strong>組成ベース</strong>が有利: (1) 構造が未知の材料探索、(2) 高速スクリーニング（100万化合物規模）、(3) データが少ない場合（&lt;1000サンプル）</li>
                <li><strong>GNN</strong>が有利: (1) 構造依存性が強い物性（弾性率、熱伝導率）、(2) 精度最優先、(3) 十分なデータがある場合（&gt;10000サンプル）</li>
                <li><strong>ハイブリッド</strong>が最強: 組成特徴量とGNN特徴量を両方使うと精度向上（第5章で実装）</li>
            </ul>
        </details>

        <details>
            <summary>Q2: Magpie記述子の145次元は多すぎませんか？過学習の懸念は？</summary>
            <p><strong>A:</strong> 実際には問題になりにくいです：</p>
            <ul>
                <li>145次元は現代の機械学習では少ない方（GNNは数千次元の埋め込みを学習）</li>
                <li>元素特性は物理的意味があるため、ランダムな高次元とは異なる</li>
                <li>正則化（L1/L2）や特徴量選択で次元削減可能</li>
                <li>実験では100-1000サンプルでも良好な性能が報告されている</li>
            </ul>
        </details>

        <details>
            <summary>Q3: matminer以外のライブラリはありますか？</summary>
            <p><strong>A:</strong> はい、以下があります：</p>
            <ul>
                <li><strong>DScribe</strong>: SOAP、MBTR、ACSF記述子（分子・結晶両対応）</li>
                <li><strong>CFID</strong>: 組成的特徴量工学（Composition-based Feature Identifier）</li>
                <li><strong>Pymatgen</strong>: matminerの基盤ライブラリ（低レベルAPI）</li>
                <li><strong>XenonPy</strong>: 深層学習と特徴量生成を統合</li>
            </ul>
            <p>本シリーズでは最も広く使われているmatminerに焦点を当てます。</p>
        </details>

        <details>
            <summary>Q4: 化学式（例: Fe2O3）から自動でMagpie記述子を計算できますか？</summary>
            <p><strong>A:</strong> はい、matminerで簡単にできます：</p>
            <pre><code>from matminer.featurizers.composition import ElementProperty

featurizer = ElementProperty.from_preset("magpie")
features = featurizer.featurize_dataframe(df, col_id="composition")
# df["composition"]列（Fe2O3など）から自動で145次元ベクトル生成</code></pre>
            <p>第5章で詳細なコード例を提供します。</p>
        </details>

        <details>
            <summary>Q5: GNN（CGCNN、MPNN）と組成ベース特徴量の予測精度の差は？</summary>
            <p><strong>A:</strong> データセットとタスクに依存しますが、代表的なベンチマーク結果：</p>
            <table>
                <thead>
                    <tr>
                        <th>タスク</th>
                        <th>Magpie + RF</th>
                        <th>CGCNN</th>
                        <th>ハイブリッド</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>形成エネルギー（OQMD）</td>
                        <td>MAE 0.12 eV</td>
                        <td>MAE 0.039 eV</td>
                        <td>MAE 0.035 eV</td>
                    </tr>
                    <tr>
                        <td>バンドギャップ（Materials Project）</td>
                        <td>MAE 0.45 eV</td>
                        <td>MAE 0.39 eV</td>
                        <td>MAE 0.36 eV</td>
                    </tr>
                    <tr>
                        <td>推論速度（100万化合物）</td>
                        <td>10分</td>
                        <td>100分</td>
                        <td>110分</td>
                    </tr>
                </tbody>
            </table>
            <p>第5章で詳細な比較実験を行います。</p>
        </details>

        <details>
            <summary>Q6: 元素特性データベース（Magpie/Deml/Jarvis）の違いは？</summary>
            <p><strong>A:</strong> 各データベースの特徴：</p>
            <ul>
                <li><strong>Magpie</strong> (Ward+ 2016): 22元素特性、最も広く使われている、Materials Projectで実績</li>
                <li><strong>Deml</strong> (Deml+ 2016): 酸化状態を考慮、特に酸化物に強い</li>
                <li><strong>Jarvis</strong> (Choudhary+ 2020): DFT計算値を含む、最新の元素特性</li>
                <li><strong>Matscholar</strong> (Tshitoyan+ 2019): 論文200万件から自然言語処理で抽出した元素埋め込み</li>
            </ul>
            <p>第3章で各データベースの使い方を実装します。</p>
        </details>

        <details>
            <summary>Q7: 組成ベース特徴量は転移学習に使えますか？</summary>
            <p><strong>A:</strong> はい、以下のようなアプローチが有効です：</p>
            <ul>
                <li><strong>事前学習</strong>: Materials Project（6万化合物）で学習 → 実験データ（100サンプル）でFine-tuning</li>
                <li><strong>ドメイン適応</strong>: 無機材料で学習 → 有機-無機ハイブリッドに適用</li>
                <li><strong>メタ学習</strong>: 複数タスク（形成エネルギー、バンドギャップ、弾性率）で共通の特徴量表現を学習</li>
            </ul>
            <p>第4章でXGBoostとニューラルネットワークを使った転移学習を実装します。</p>
        </details>

        <details>
            <summary>Q8: カスタムの元素特性（例: 希少性、コスト）を追加できますか？</summary>
            <p><strong>A:</strong> はい、matminerのBaseFeaturizerを継承してカスタムFeaturizerを作成できます：</p>
            <pre><code>from matminer.featurizers.base import BaseFeaturizer

class CustomElementProperty(BaseFeaturizer):
    def featurize(self, comp):
        # 独自の元素特性データベースを参照
        rarity = get_element_rarity(comp)
        cost = get_element_cost(comp)
        return [rarity, cost]</code></pre>
            <p>第3章でカスタムFeaturizerの詳細な実装例を提供します。</p>
        </details>

        <details>
            <summary>Q9: 組成ベース特徴量で解釈可能性（Explainability）はどうですか？</summary>
            <p><strong>A:</strong> GNNより解釈しやすい側面があります：</p>
            <ul>
                <li><strong>SHAP値</strong>: どの元素特性（例: 電気陰性度の平均）が予測に寄与したかが明確</li>
                <li><strong>物理的意味</strong>: 「イオン化エネルギーが高いと形成エネルギーが低い」など、化学的解釈が可能</li>
                <li><strong>ドメイン知識との統合</strong>: 周期表の知識を直接活用</li>
            </ul>
            <p>第4章でSHAP/LIMEを使った解釈性分析を実装します。</p>
        </details>

        <details>
            <summary>Q10: このシリーズを学んだ後、次に進むべき学習リソースは？</summary>
            <p><strong>A:</strong> 以下の学習パスを推奨します：</p>
            <ul>
                <li><strong>GNNとの比較</strong>: <a href="../gnn-features-comparison/index.html">組成 vs GNN比較シリーズ</a> → 両手法を定量的に比較</li>
                <li><strong>深層学習への拡張</strong>: <span class="breadcrumb-current">GNN入門シリーズ</span> → CGCNN、MPNNを学ぶ</li>
                <li><strong>実務応用</strong>: <a href="../materials-screening-workflow/index.html">材料スクリーニングワークフロー</a> → 実際のプロジェクトに適用</li>
                <li><strong>論文実装</strong>: Ward+ (2016) "A general-purpose machine learning framework for predicting properties of inorganic materials" を再現</li>
            </ul>
        </details>

        <hr>

        <h2 id="prerequisites">前提知識</h2>

        <p>このシリーズを効果的に学ぶために、以下の前提知識を推奨します：</p>

        <h3>必須（Must Have）</h3>
        <ul>
            <li>✅ <strong>Python基礎</strong>: NumPy、Pandas、Matplotlibの基本操作</li>
            <li>✅ <strong>材料科学基礎</strong>: 化学組成、周期表、元素特性の概念</li>
            <li>✅ <strong>機械学習基礎</strong>: 教師あり学習、回帰/分類、交差検証の概念</li>
        </ul>

        <h3>推奨（Nice to Have）</h3>
        <ul>
            <li>📚 <strong>scikit-learn</strong>: Random Forest、モデル評価の経験</li>
            <li>📚 <strong>統計学</strong>: 平均、分散、標準偏差の意味</li>
            <li>📚 <strong>結晶学</strong>: 格子、対称性の基礎（第1章で復習）</li>
        </ul>

        <h3>不要（Not Required）</h3>
        <ul>
            <li>❌ <strong>深層学習</strong>: GNNの知識は不要（組成ベースは古典的機械学習中心）</li>
            <li>❌ <strong>量子化学</strong>: DFT計算の経験は不要</li>
        </ul>

        <hr>

        <h2 id="related">関連シリーズ</h2>

        <div class="highlight-box">
            <h4>🔗 GNNシリーズとの統合学習</h4>
            <p>本シリーズと<span class="breadcrumb-current">GNN入門シリーズ</span>を併せて学ぶことで、材料特徴量の全体像を把握できます：</p>
            <ul>
                <li><strong>組成ベース特徴量入門</strong>（本シリーズ）: 化学組成から物性予測</li>
                <li><strong>GNN入門シリーズ</strong>: 3D構造から物性予測（CGCNN、MPNN、SchNet）</li>
                <li><strong>組成 vs GNN比較シリーズ</strong>（近日公開）: 両手法の定量的ベンチマーク</li>
            </ul>
        </div>

        <h3>推奨学習順序</h3>
        <ol>
            <li><strong>組成ベース特徴量入門</strong>（本シリーズ）→ 基礎を固める</li>
            <li><strong><span class="breadcrumb-current">GNN入門シリーズ</span></strong> → 構造ベース手法を学ぶ</li>
            <li><strong>組成 vs GNN比較シリーズ</strong>（近日公開）→ 使い分けを習得</li>
            <li><strong>材料スクリーニングワークフロー</strong>（近日公開）→ 実務応用</li>
        </ol>

        <hr>

        <h2 id="start">さあ、始めましょう！</h2>
        <p>準備はできましたか？ 第1章から始めて、組成ベース特徴量の世界への旅を始めましょう！</p>

        <p><strong><a href="./chapter-1.html" class="nav-button">第1章: 組成ベース特徴量の基礎 →</a></strong></p>

        <hr>

        <p><strong>更新履歴</strong></p>
        <ul>
            <li><strong>2025-11-02</strong>: v1.0 初版公開</li>
        </ul>

        <hr>

        <p><strong>あなたの材料探索の旅はここから始まります！</strong></p>

    </main>

    <section class="disclaimer">
        <h3>免責事項</h3>
        <ul>
            <li>本コンテンツは教育・研究・情報提供のみを目的としており、専門的な助言(法律・会計・技術的保証など)を提供するものではありません。</li>
            <li>本コンテンツおよび付随するコード例は「現状有姿(AS IS)」で提供され、明示または黙示を問わず、商品性、特定目的適合性、権利非侵害、正確性・完全性、動作・安全性等いかなる保証もしません。</li>
            <li>外部リンク、第三者が提供するデータ・ツール・ライブラリ等の内容・可用性・安全性について、作成者および東北大学は一切の責任を負いません。</li>
            <li>本コンテンツの利用・実行・解釈により直接的・間接的・付随的・特別・結果的・懲罰的損害が生じた場合でも、適用法で許容される最大限の範囲で、作成者および東北大学は責任を負いません。</li>
            <li>本コンテンツの内容は、予告なく変更・更新・提供停止されることがあります。</li>
            <li>本コンテンツの著作権・ライセンスは明記された条件(例: CC BY 4.0)に従います。当該ライセンスは通常、無保証条項を含みます。</li>
        </ul>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 AI Terakoya - Dr. Yusuke Hashimoto, Tohoku University</p>
            <p>Licensed under CC BY 4.0</p>
        </div>
    </footer>
</body>
</html>
