<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬4ç« ï¼šæ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¨çµ±åˆè§£æ - AI Terakoya</title>

    <style>
        :root {
            --color-primary: #2c3e50;
            --color-primary-dark: #1a252f;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-text: #2d3748;
            --color-text-light: #4a5568;
            --color-bg: #ffffff;
            --color-bg-alt: #f7fafc;
            --color-border: #e2e8f0;
            --color-code-bg: #f8f9fa;
            --color-link: #3182ce;
            --color-link-hover: #2c5aa0;

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

            --border-radius: 8px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-bg);
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--box-shadow);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md) var(--spacing-xl);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--color-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-xs);
            border-bottom: 3px solid var(--color-accent);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        h4 {
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        li {
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            overflow-x: auto;
            margin-bottom: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: var(--font-mono);
            font-size: 0.9em;
            background-color: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-md);
            font-size: 0.95rem;
        }

        th, td {
            border: 1px solid var(--color-border);
            padding: var(--spacing-sm);
            text-align: left;
        }

        th {
            background-color: var(--color-bg-alt);
            font-weight: 600;
            color: var(--color-primary);
        }

        blockquote {
            border-left: 4px solid var(--color-accent);
            padding-left: var(--spacing-md);
            margin: var(--spacing-md) 0;
            color: var(--color-text-light);
            font-style: italic;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        .mermaid {
            text-align: center;
            margin: var(--spacing-lg) 0;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        details {
            background-color: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-primary);
            user-select: none;
            padding: var(--spacing-xs);
            margin: calc(-1 * var(--spacing-md));
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        summary:hover {
            background-color: rgba(123, 44, 191, 0.1);
        }

        details[open] summary {
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .learning-objectives {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--color-accent);
            margin-bottom: var(--spacing-xl);
        }

        .learning-objectives h2 {
            margin-top: 0;
            border-bottom: none;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--color-border);
        }

        .nav-button {
            flex: 1;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--box-shadow);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-decoration: none;
        }

        footer {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-md);
            background-color: var(--color-bg-alt);
            border-top: 1px solid var(--color-border);
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }
        .disclaimer {
            max-width: 900px;
            margin: 2rem auto;
            padding: 1.5rem;
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
            border-radius: 4px;
        }

        .disclaimer h3 {
            color: #495057;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .disclaimer ul {
            list-style: none;
            padding-left: 0;
        }

        .disclaimer li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.9rem;
            color: #6c757d;
            line-height: 1.6;
        }

        .disclaimer li::before {
            content: "âš ï¸";
            position: absolute;
            left: 0;
        }


        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            .navigation {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: var(--spacing-xs);
            }
        }
    
        
    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'strict' });
    </script>

    <!-- MathJax for LaTeX equation rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'mermaid'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
</head>
<body>
            <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="/AI-Knowledge-Notes/knowledge/jp/index.html">AIå¯ºå­å±‹ãƒˆãƒƒãƒ—</a><span class="breadcrumb-separator">â€º</span><a href="/AI-Knowledge-Notes/knowledge/jp/MI/index.html">ãƒãƒ†ãƒªã‚¢ãƒ«ã‚ºãƒ»ã‚¤ãƒ³ãƒ•ã‚©ãƒãƒ†ã‚£ã‚¯ã‚¹</a><span class="breadcrumb-separator">â€º</span><a href="/AI-Knowledge-Notes/knowledge/jp/MI/experimental-data-analysis-introduction/index.html">Experimental Data Analysis</a><span class="breadcrumb-separator">â€º</span><span class="breadcrumb-current">Chapter 4</span>
        </div>
    </nav>

        <header>
        <div class="header-content">
            <h1>ç¬¬4ç« ï¼šæ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¨çµ±åˆè§£æ</h1>
            <p class="subtitle">ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿è§£æã¨PCA - å¤šå¤‰é‡ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆçš„ç†è§£</p>
            <div class="meta">
                <span class="meta-item">ğŸ“– èª­äº†æ™‚é–“: 20-25åˆ†</span>
                <span class="meta-item">ğŸ“Š é›£æ˜“åº¦: ä¸­ç´š</span>
                <span class="meta-item">ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹: 5å€‹</span>
                <span class="meta-item">ğŸ“ æ¼”ç¿’å•é¡Œ: 3å•</span>
            </div>
        </div>
    </header>

    <main class="container">
<h1>ç¬¬4ç« ï¼šæ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¨çµ±åˆè§£æ</h1>
<p class="chapter-description" style="margin: 1.5rem 0; padding: 1rem; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-left: 4px solid #7b2cbf; border-radius: 8px; font-size: 1.05rem; line-height: 1.8; color: #2d3748;">UV-Vis/IR/Raman/TGA/DSCã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã¨å¯è¦–åŒ–ã‚’ä¸€æ°—é€šè²«ã§å­¦ã³ã¾ã™ã€‚æŒ‡æ¨™ã®èª­ã¿å–ã‚Šæ–¹ã‚’èº«ã«ã¤ã‘ã¾ã™ã€‚</p>
<p class="chapter-supplement" style="margin: 0.75rem 0 1.5rem 0; padding: 0.75rem 1rem; background: linear-gradient(135deg, #fff8e1 0%, #fff3cd 100%); border-left: 3px solid #f59e0b; border-radius: 6px; font-size: 0.95rem; line-height: 1.7; color: #4a5568;"><strong>ğŸ’¡ è£œè¶³:</strong> ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³è£œæ­£ã¨æ­£è¦åŒ–ã‚’å…ˆã«ã€‚ãƒ”ãƒ¼ã‚¯ä½ç½®ãƒ»é¢ç©ãƒ»å¹…ã®3ç‚¹ã‚’æƒãˆã¦æ¯”è¼ƒã—ã¾ã™ã€‚</p>





<p><strong>ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿è§£æã¨PCA - å¤šå¤‰é‡ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆçš„ç†è§£</strong></p>
<h2>å­¦ç¿’ç›®æ¨™</h2>
<p>ã“ã®ç« ã‚’èª­ã‚€ã“ã¨ã§ã€ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š</p>
<ul>
<li>âœ… æ¸©åº¦ãƒ»åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å‰å‡¦ç†ã¨ç•°å¸¸æ¤œçŸ¥ãŒã§ãã‚‹</li>
<li>âœ… ç§»å‹•çª“ï¼ˆsliding windowï¼‰è§£æã‚’å®Ÿè£…ã§ãã‚‹</li>
<li>âœ… PCAï¼ˆä¸»æˆåˆ†åˆ†æï¼‰ã«ã‚ˆã‚‹æ¬¡å…ƒå‰Šæ¸›ã¨å¯è¦–åŒ–ãŒã§ãã‚‹</li>
<li>âœ… sklearn Pipelineã«ã‚ˆã‚‹çµ±åˆè§£æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
<li>âœ… è¤‡æ•°æ¸¬å®šæŠ€è¡“ã®ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆçš„ã«è§£æã§ãã‚‹</li>
</ul>
<p><strong>èª­äº†æ™‚é–“</strong>: 20-25åˆ†
<strong>ã‚³ãƒ¼ãƒ‰ä¾‹</strong>: 5å€‹
<strong>æ¼”ç¿’å•é¡Œ</strong>: 3å•</p>
<hr />
<h2>4.1 æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ç‰¹å¾´ã¨å‰å‡¦ç†</h2>
<h3>ææ–™åˆæˆãƒ»ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã«ãŠã‘ã‚‹æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿</h3>
<p>ææ–™åˆæˆãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã€æ¸©åº¦ã€åœ§åŠ›ã€æµé‡ã€çµ„æˆãªã©ã®ç‰©ç†é‡ã‚’æ™‚é–“çµŒéã¨ã¨ã‚‚ã«æ¸¬å®šã—ã¾ã™ã€‚</p>
<table>
<thead>
<tr>
<th>æ¸¬å®šé …ç›®</th>
<th>å…¸å‹çš„ãªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æœŸ</th>
<th>ä¸»ãªç”¨é€”</th>
<th>ãƒ‡ãƒ¼ã‚¿ç‰¹æ€§</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ¸©åº¦</strong></td>
<td>0.1-10 Hz</td>
<td>åå¿œåˆ¶å¾¡ã€ç†±å‡¦ç†</td>
<td>ãƒˆãƒ¬ãƒ³ãƒ‰ã€å‘¨æœŸæ€§</td>
</tr>
<tr>
<td><strong>åœ§åŠ›</strong></td>
<td>1-100 Hz</td>
<td>CVDã€ã‚¹ãƒ‘ãƒƒã‚¿ãƒªãƒ³ã‚°</td>
<td>ãƒã‚¤ã‚ºå¤šã€æ€¥å³»ãªå¤‰åŒ–</td>
</tr>
<tr>
<td><strong>æµé‡</strong></td>
<td>0.1-1 Hz</td>
<td>ã‚¬ã‚¹ä¾›çµ¦åˆ¶å¾¡</td>
<td>ãƒ‰ãƒªãƒ•ãƒˆã€ã‚¹ãƒ†ãƒƒãƒ—å¤‰åŒ–</td>
</tr>
<tr>
<td><strong>çµ„æˆ</strong></td>
<td>0.01-1 Hz</td>
<td>in-situåˆ†æ</td>
<td>é…å»¶ã€ç©åˆ†åŠ¹æœ</td>
</tr>
</tbody>
</table>
<h3>æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿è§£æã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</h3>
<div class="mermaid">
flowchart TD
    A[ãƒ‡ãƒ¼ã‚¿åé›†] --> B[å‰å‡¦ç†]
    B --> C[ç‰¹å¾´æŠ½å‡º]
    C --> D[ç•°å¸¸æ¤œçŸ¥]
    D --> E[çµ±åˆè§£æ]
    E --> F[ãƒ—ãƒ­ã‚»ã‚¹æœ€é©åŒ–]

    B --> B1[ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°]
    B --> B2[ãƒˆãƒ¬ãƒ³ãƒ‰é™¤å»]
    B --> B3[ãƒã‚¤ã‚ºé™¤å»]

    C --> C1[çµ±è¨ˆé‡]
    C --> C2[ç§»å‹•çª“è§£æ]

    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#e8f5e9
    style E fill:#fce4ec
</div>

<hr />
<h2>4.2 ãƒ‡ãƒ¼ã‚¿ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨å†ç¾æ€§</h2>
<h3>æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒªãƒã‚¸ãƒˆãƒªã¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</h3>
<p>ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚„æ™‚ç³»åˆ—æ¸¬å®šãƒ‡ãƒ¼ã‚¿ã®å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒªã¯é™å®šçš„ã§ã™ãŒã€ä»¥ä¸‹ã®ãƒªã‚½ãƒ¼ã‚¹ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚</p>
<h4>ä¸»è¦ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹</h4>
<table>
<thead>
<tr>
<th>ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹</th>
<th>å†…å®¹</th>
<th>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</th>
<th>ã‚¢ã‚¯ã‚»ã‚¹</th>
<th>å¼•ç”¨è¦ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Kaggle Time Series</strong></td>
<td>ç”£æ¥­ãƒ—ãƒ­ã‚»ã‚¹ãƒ‡ãƒ¼ã‚¿</td>
<td>Mixed</td>
<td>ç„¡æ–™</td>
<td>ç¢ºèªå¿…è¦</td>
</tr>
<tr>
<td><strong>UCI Machine Learning</strong></td>
<td>ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ</td>
<td>CC BY 4.0</td>
<td>ç„¡æ–™</td>
<td>æ¨å¥¨</td>
</tr>
<tr>
<td><strong>NISTæ¸¬å®šãƒ‡ãƒ¼ã‚¿</strong></td>
<td>æ¨™æº–è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿</td>
<td>Public Domain</td>
<td>ç„¡æ–™</td>
<td>æ¨å¥¨</td>
</tr>
<tr>
<td><strong>PhysioNet</strong></td>
<td>ç”Ÿä½“ä¿¡å·ãƒ‡ãƒ¼ã‚¿</td>
<td>Mixed</td>
<td>ç„¡æ–™</td>
<td>å¿…é ˆ</td>
</tr>
<tr>
<td><strong>è‡ªç¤¾å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿</strong></td>
<td>ãƒ—ãƒ­ã‚»ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°</td>
<td>ç¤¾å†…è¦å®šã«å¾“ã†</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<h4>ãƒ‡ãƒ¼ã‚¿åˆ©ç”¨æ™‚ã®æ³¨æ„äº‹é …</h4>
<p><strong>å…¬é–‹ãƒ‡ãƒ¼ã‚¿åˆ©ç”¨ä¾‹</strong>:</p>
<pre><code class="language-python">&quot;&quot;&quot;
Process sensor data from UCI ML Repository
Reference: UCI ML Repository - Gas Sensor Array Dataset
Citation: Vergara, A. et al. (2012) Sensors and Actuators B
License: CC BY 4.0
URL: https://archive.ics.uci.edu/ml/datasets/Gas+Sensor+Array
Sampling rate: 100 Hz
Measurement period: 3600 seconds
&quot;&quot;&quot;
</code></pre>
<p><strong>æ¸¬å®šãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è¨˜éŒ²</strong>:</p>
<pre><code class="language-python">SENSOR_METADATA = {
    'instrument': 'Thermocouple Type-K',
    'sampling_rate_hz': 10,
    'measurement_start': '2025-10-15T10:00:00',
    'measurement_duration_s': 1000,
    'calibration_date': '2025-10-01',
    'sensor_accuracy': 'Â±0.5Â°C',
    'data_logger': 'Agilent 34970A'
}

import json
with open('sensor_metadata.json', 'w') as f:
    json.dump(SENSOR_METADATA, f, indent=2)
</code></pre>
<h3>ã‚³ãƒ¼ãƒ‰å†ç¾æ€§ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h3>
<h4>ç’°å¢ƒæƒ…å ±ã®è¨˜éŒ²</h4>
<pre><code class="language-python">import sys
import numpy as np
import pandas as pd
import scipy
from sklearn import __version__ as sklearn_version

print(&quot;=== æ™‚ç³»åˆ—è§£æç’°å¢ƒ ===&quot;)
print(f&quot;Python: {sys.version}&quot;)
print(f&quot;NumPy: {np.__version__}&quot;)
print(f&quot;pandas: {pd.__version__}&quot;)
print(f&quot;SciPy: {scipy.__version__}&quot;)
print(f&quot;scikit-learn: {sklearn_version}&quot;)

# æ¨å¥¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆ2025å¹´10æœˆæ™‚ç‚¹ï¼‰:
# - Python: 3.10ä»¥ä¸Š
# - NumPy: 1.24ä»¥ä¸Š
# - pandas: 2.0ä»¥ä¸Š
# - SciPy: 1.10ä»¥ä¸Š
# - scikit-learn: 1.3ä»¥ä¸Š
</code></pre>
<h4>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ–‡æ›¸åŒ–</h4>
<p><strong>æ‚ªã„ä¾‹</strong>ï¼ˆå†ç¾ä¸å¯èƒ½ï¼‰:</p>
<pre><code class="language-python">rolling_mean = df['temperature'].rolling(window=50).mean()  # ãªãœ50?
</code></pre>
<p><strong>è‰¯ã„ä¾‹</strong>ï¼ˆå†ç¾å¯èƒ½ï¼‰:</p>
<pre><code class="language-python"># ç§»å‹•çª“ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®š
SAMPLING_RATE_HZ = 10  # ã‚»ãƒ³ã‚µãƒ¼ã®ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æ³¢æ•°
WINDOW_DURATION_S = 5  # ç§»å‹•çª“ã®æ™‚é–“å¹…ï¼ˆç§’ï¼‰
WINDOW_SIZE = SAMPLING_RATE_HZ * WINDOW_DURATION_S  # 50 points

WINDOW_DESCRIPTION = &quot;&quot;&quot;
ç§»å‹•çª“ã‚µã‚¤ã‚º: 50 points = 5ç§’é–“
æ ¹æ‹ : ãƒ—ãƒ­ã‚»ã‚¹ã®ç‰¹å¾´çš„ãªæ™‚å®šæ•°ï¼ˆ~10ç§’ï¼‰ã®åŠåˆ†ç¨‹åº¦ã‚’æ¡ç”¨ã€‚
      çŸ­ã™ãã‚‹ã¨: ãƒã‚¤ã‚ºã«æ•æ„Ÿ
      é•·ã™ãã‚‹ã¨: æ€¥å³»ãªå¤‰åŒ–ã‚’æ‰ãˆã‚‰ã‚Œãªã„
&quot;&quot;&quot;

rolling_mean = df['temperature'].rolling(
    window=WINDOW_SIZE, center=True
).mean()
</code></pre>
<h4>ä¹±æ•°ã‚·ãƒ¼ãƒ‰å›ºå®š</h4>
<pre><code class="language-python">import numpy as np
from sklearn.model_selection import train_test_split

# å†ç¾æ€§ã®ãŸã‚ä¹±æ•°ã‚·ãƒ¼ãƒ‰å›ºå®š
RANDOM_SEED = 42
np.random.seed(RANDOM_SEED)

# ãƒ‡ãƒ¼ã‚¿åˆ†å‰²æ™‚ã«ã‚‚ã‚·ãƒ¼ãƒ‰æŒ‡å®š
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=RANDOM_SEED
)
</code></pre>
<hr />
<h2>4.3 æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®å‰å‡¦ç†ã¨ç§»å‹•çª“è§£æ</h2>
<h3>ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã¨åŸºæœ¬çš„ãªå¯è¦–åŒ–</h3>
<p><strong>ã‚³ãƒ¼ãƒ‰ä¾‹1: åˆæˆãƒ—ãƒ­ã‚»ã‚¹ã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ</strong></p>
<pre><code class="language-python">import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from scipy import signal

# ææ–™åˆæˆãƒ—ãƒ­ã‚»ã‚¹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ1000ç§’ã€10 Hzï¼‰
np.random.seed(42)
time = np.linspace(0, 1000, 10000)

# æ¸©åº¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ©ãƒ³ãƒ—æ˜‡æ¸©â†’ä¿æŒâ†’å†·å´ï¼‰
temperature = np.piecewise(
    time,
    [time &lt; 300, (time &gt;= 300) &amp; (time &lt; 700), time &gt;= 700],
    [lambda t: 25 + 0.25 * t,  # æ˜‡æ¸©
     lambda t: 100,             # ä¿æŒ
     lambda t: 100 - 0.1 * (t - 700)]  # å†·å´
)
temperature += np.random.normal(0, 2, len(time))  # ãƒã‚¤ã‚º

# åœ§åŠ›ï¼ˆçœŸç©ºåº¦ã€ã‚¹ãƒ†ãƒƒãƒ—å¤‰åŒ–ã‚ã‚Šï¼‰
pressure = np.piecewise(
    time,
    [time &lt; 200, (time &gt;= 200) &amp; (time &lt; 800), time &gt;= 800],
    [100, 1, 100]  # Torr
)
pressure += np.random.normal(0, 0.5, len(time))

# ã‚¬ã‚¹æµé‡ï¼ˆå‘¨æœŸçš„å¤‰å‹•ï¼‰
flow_rate = 50 + 10 * np.sin(2 * np.pi * time / 100) + \
            np.random.normal(0, 2, len(time))

# ç•°å¸¸å€¤ã‚’æ„å›³çš„ã«æŒ¿å…¥ï¼ˆã‚»ãƒ³ã‚µãƒ¼ç•°å¸¸ã‚’æ¨¡æ“¬ï¼‰
temperature[5000:5010] = 200  # ã‚¹ãƒ‘ã‚¤ã‚¯ãƒã‚¤ã‚º
pressure[3000] = -50          # ç‰©ç†çš„ã«ã‚ã‚Šãˆãªã„å€¤

# DataFrameã«æ ¼ç´
df_sensor = pd.DataFrame({
    'time': time,
    'temperature': temperature,
    'pressure': pressure,
    'flow_rate': flow_rate
})

# å¯è¦–åŒ–
fig, axes = plt.subplots(3, 1, figsize=(14, 10), sharex=True)

axes[0].plot(df_sensor['time'], df_sensor['temperature'],
             linewidth=0.8, alpha=0.8)
axes[0].set_ylabel('Temperature (Â°C)')
axes[0].set_title('Process Sensor Data')
axes[0].grid(True, alpha=0.3)

axes[1].plot(df_sensor['time'], df_sensor['pressure'],
             linewidth=0.8, alpha=0.8, color='orange')
axes[1].set_ylabel('Pressure (Torr)')
axes[1].grid(True, alpha=0.3)

axes[2].plot(df_sensor['time'], df_sensor['flow_rate'],
             linewidth=0.8, alpha=0.8, color='green')
axes[2].set_xlabel('Time (s)')
axes[2].set_ylabel('Flow Rate (sccm)')
axes[2].grid(True, alpha=0.3)

plt.tight_layout()
plt.show()

print(&quot;=== ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆ ===&quot;)
print(df_sensor.describe())
</code></pre>
<h3>ç§»å‹•çª“è§£æï¼ˆRolling Statisticsï¼‰</h3>
<p><strong>ã‚³ãƒ¼ãƒ‰ä¾‹2: ç§»å‹•å¹³å‡ã¨ç§»å‹•æ¨™æº–åå·®</strong></p>
<pre><code class="language-python"># ç§»å‹•çª“çµ±è¨ˆé‡ã®è¨ˆç®—
window_size = 100  # 10ç§’é–“ã®çª“ï¼ˆ10 Hz Ã— 10sï¼‰

df_sensor['temp_rolling_mean'] = df_sensor['temperature'].rolling(
    window=window_size, center=True
).mean()

df_sensor['temp_rolling_std'] = df_sensor['temperature'].rolling(
    window=window_size, center=True
).std()

df_sensor['pressure_rolling_mean'] = df_sensor['pressure'].rolling(
    window=window_size, center=True
).mean()

# ç•°å¸¸æ¤œçŸ¥ï¼ˆ3Ïƒæ³•ï¼‰
df_sensor['temp_anomaly'] = np.abs(
    df_sensor['temperature'] - df_sensor['temp_rolling_mean']
) &gt; 3 * df_sensor['temp_rolling_std']

# å¯è¦–åŒ–
fig, axes = plt.subplots(2, 1, figsize=(14, 10), sharex=True)

# æ¸©åº¦ã¨ç§»å‹•å¹³å‡
axes[0].plot(df_sensor['time'], df_sensor['temperature'],
             label='Raw', alpha=0.5, linewidth=0.8)
axes[0].plot(df_sensor['time'], df_sensor['temp_rolling_mean'],
             label=f'Rolling mean (window={window_size})',
             linewidth=2, color='red')
axes[0].fill_between(
    df_sensor['time'],
    df_sensor['temp_rolling_mean'] - 3 * df_sensor['temp_rolling_std'],
    df_sensor['temp_rolling_mean'] + 3 * df_sensor['temp_rolling_std'],
    alpha=0.2, color='red', label='Â±3Ïƒ'
)
axes[0].scatter(df_sensor.loc[df_sensor['temp_anomaly'], 'time'],
                df_sensor.loc[df_sensor['temp_anomaly'], 'temperature'],
                color='black', s=50, zorder=5, label='Anomalies')
axes[0].set_ylabel('Temperature (Â°C)')
axes[0].set_title('Rolling Statistics and Anomaly Detection')
axes[0].legend()
axes[0].grid(True, alpha=0.3)

# ç§»å‹•æ¨™æº–åå·®ï¼ˆå¤‰å‹•ã®å¤§ãã•ï¼‰
axes[1].plot(df_sensor['time'], df_sensor['temp_rolling_std'],
             linewidth=1.5, color='purple')
axes[1].set_xlabel('Time (s)')
axes[1].set_ylabel('Temperature Std (Â°C)')
axes[1].set_title('Rolling Standard Deviation')
axes[1].grid(True, alpha=0.3)

plt.tight_layout()
plt.show()

print(f&quot;=== ç•°å¸¸æ¤œçŸ¥çµæœ ===&quot;)
print(f&quot;ç•°å¸¸ç‚¹ã®æ•°: {df_sensor['temp_anomaly'].sum()}&quot;)
anomaly_times = df_sensor.loc[df_sensor['temp_anomaly'], 'time'].values
print(f&quot;ç•°å¸¸ç™ºç”Ÿæ™‚åˆ»: {anomaly_times[:5]}... (æœ€åˆã®5ç‚¹)&quot;)
</code></pre>
<h3>ãƒˆãƒ¬ãƒ³ãƒ‰é™¤å»ã¨å®šå¸¸åŒ–</h3>
<p><strong>ã‚³ãƒ¼ãƒ‰ä¾‹3: å·®åˆ†ãƒ»ãƒ‡ãƒˆãƒ¬ãƒ³ãƒ‰å‡¦ç†</strong></p>
<pre><code class="language-python">from scipy.signal import detrend

# å·®åˆ†ï¼ˆ1æ¬¡å·®åˆ† = å¤‰åŒ–ç‡ï¼‰
df_sensor['temp_diff'] = df_sensor['temperature'].diff()

# ãƒ‡ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆç·šå½¢ãƒˆãƒ¬ãƒ³ãƒ‰é™¤å»ï¼‰
df_sensor['temp_detrended'] = detrend(
    df_sensor['temperature'].fillna(method='bfill')
)

# å¯è¦–åŒ–
fig, axes = plt.subplots(3, 1, figsize=(14, 12), sharex=True)

# å…ƒãƒ‡ãƒ¼ã‚¿
axes[0].plot(df_sensor['time'], df_sensor['temperature'],
             linewidth=1, alpha=0.8)
axes[0].set_ylabel('Temperature (Â°C)')
axes[0].set_title('Original Time Series')
axes[0].grid(True, alpha=0.3)

# 1æ¬¡å·®åˆ†
axes[1].plot(df_sensor['time'], df_sensor['temp_diff'],
             linewidth=1, alpha=0.8, color='orange')
axes[1].axhline(y=0, color='red', linestyle='--', alpha=0.5)
axes[1].set_ylabel('Temperature Diff (Â°C/0.1s)')
axes[1].set_title('First Difference (Change Rate)')
axes[1].grid(True, alpha=0.3)

# ãƒ‡ãƒˆãƒ¬ãƒ³ãƒ‰
axes[2].plot(df_sensor['time'], df_sensor['temp_detrended'],
             linewidth=1, alpha=0.8, color='green')
axes[2].axhline(y=0, color='red', linestyle='--', alpha=0.5)
axes[2].set_xlabel('Time (s)')
axes[2].set_ylabel('Temperature (Â°C)')
axes[2].set_title('Detrended (Linear Trend Removed)')
axes[2].grid(True, alpha=0.3)

plt.tight_layout()
plt.show()

# å®šå¸¸æ€§ã®è©•ä¾¡ï¼ˆå¤‰å‹•ã®å®‰å®šæ€§ï¼‰
print(&quot;=== å®šå¸¸æ€§è©•ä¾¡ ===&quot;)
print(f&quot;å…ƒãƒ‡ãƒ¼ã‚¿ã®æ¨™æº–åå·®: {df_sensor['temperature'].std():.2f}&quot;)
print(f&quot;å·®åˆ†ãƒ‡ãƒ¼ã‚¿ã®æ¨™æº–åå·®: {df_sensor['temp_diff'].std():.2f}&quot;)
print(f&quot;ãƒ‡ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æ¨™æº–åå·®: {df_sensor['temp_detrended'].std():.2f}&quot;)
</code></pre>
<hr />
<h2>4.4 PCAï¼ˆä¸»æˆåˆ†åˆ†æï¼‰ã«ã‚ˆã‚‹æ¬¡å…ƒå‰Šæ¸›</h2>
<h3>å¤šå¤‰é‡ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–</h3>
<p><strong>ã‚³ãƒ¼ãƒ‰ä¾‹4: PCAã«ã‚ˆã‚‹æ¬¡å…ƒå‰Šæ¸›ã¨å¯è¦–åŒ–</strong></p>
<pre><code class="language-python">from sklearn.decomposition import PCA
from sklearn.preprocessing import StandardScaler

# ãƒ‡ãƒ¼ã‚¿æº–å‚™ï¼ˆç•°å¸¸å€¤é™¤å»å¾Œï¼‰
df_clean = df_sensor[~df_sensor['temp_anomaly']].copy()

# ç‰¹å¾´é‡è¡Œåˆ—ï¼ˆæ¸©åº¦ã€åœ§åŠ›ã€æµé‡ï¼‰
X = df_clean[['temperature', 'pressure', 'flow_rate']].dropna().values

# æ¨™æº–åŒ–ï¼ˆPCAã®å‰ã«å¿…é ˆï¼‰
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)

# PCAå®Ÿè¡Œ
pca = PCA(n_components=3)
X_pca = pca.fit_transform(X_scaled)

# çµæœã‚’DataFrameã«
df_pca = pd.DataFrame(
    X_pca,
    columns=['PC1', 'PC2', 'PC3']
)
df_pca['time'] = df_clean['time'].values[:len(df_pca)]

# å¯è¦–åŒ–
fig = plt.figure(figsize=(16, 12))

# 2Dæ•£å¸ƒå›³ï¼ˆPC1 vs PC2ï¼‰
ax1 = plt.subplot(2, 2, 1)
scatter = ax1.scatter(df_pca['PC1'], df_pca['PC2'],
                     c=df_pca['time'], cmap='viridis',
                     s=10, alpha=0.6)
ax1.set_xlabel(f'PC1 ({pca.explained_variance_ratio_[0]*100:.1f}%)')
ax1.set_ylabel(f'PC2 ({pca.explained_variance_ratio_[1]*100:.1f}%)')
ax1.set_title('PCA: PC1 vs PC2 (colored by time)')
plt.colorbar(scatter, ax=ax1, label='Time (s)')
ax1.grid(True, alpha=0.3)

# å¯„ä¸ç‡ï¼ˆScree plotï¼‰
ax2 = plt.subplot(2, 2, 2)
cumsum_variance = np.cumsum(pca.explained_variance_ratio_)
ax2.bar(range(1, 4), pca.explained_variance_ratio_, alpha=0.7,
        label='Individual')
ax2.plot(range(1, 4), cumsum_variance, 'ro-', linewidth=2,
         markersize=8, label='Cumulative')
ax2.set_xlabel('Principal Component')
ax2.set_ylabel('Explained Variance Ratio')
ax2.set_title('Scree Plot')
ax2.set_xticks(range(1, 4))
ax2.legend()
ax2.grid(True, alpha=0.3, axis='y')

# 3Dæ•£å¸ƒå›³
ax3 = plt.subplot(2, 2, 3, projection='3d')
scatter_3d = ax3.scatter(df_pca['PC1'], df_pca['PC2'], df_pca['PC3'],
                         c=df_pca['time'], cmap='viridis',
                         s=10, alpha=0.5)
ax3.set_xlabel(f'PC1 ({pca.explained_variance_ratio_[0]*100:.1f}%)')
ax3.set_ylabel(f'PC2 ({pca.explained_variance_ratio_[1]*100:.1f}%)')
ax3.set_zlabel(f'PC3 ({pca.explained_variance_ratio_[2]*100:.1f}%)')
ax3.set_title('PCA: 3D Visualization')

# Loading plotï¼ˆä¸»æˆåˆ†ã®è§£é‡ˆï¼‰
ax4 = plt.subplot(2, 2, 4)
loadings = pca.components_.T * np.sqrt(pca.explained_variance_)
features = ['Temperature', 'Pressure', 'Flow Rate']

for i, feature in enumerate(features):
    ax4.arrow(0, 0, loadings[i, 0], loadings[i, 1],
             head_width=0.05, head_length=0.05, fc='blue', ec='blue')
    ax4.text(loadings[i, 0] * 1.15, loadings[i, 1] * 1.15,
            feature, fontsize=12, ha='center')

ax4.set_xlabel(f'PC1 ({pca.explained_variance_ratio_[0]*100:.1f}%)')
ax4.set_ylabel(f'PC2 ({pca.explained_variance_ratio_[1]*100:.1f}%)')
ax4.set_title('Loading Plot (Feature Contribution)')
ax4.axhline(y=0, color='k', linewidth=0.5)
ax4.axvline(x=0, color='k', linewidth=0.5)
ax4.grid(True, alpha=0.3)
ax4.set_xlim(-1, 1)
ax4.set_ylim(-1, 1)

plt.tight_layout()
plt.show()

# PCAçµ±è¨ˆ
print(&quot;=== PCAçµæœ ===&quot;)
print(f&quot;ç´¯ç©å¯„ä¸ç‡:&quot;)
for i, var in enumerate(cumsum_variance, 1):
    print(f&quot;  PC{i}ã¾ã§: {var*100:.2f}%&quot;)

print(f&quot;\nä¸»æˆåˆ†ã®æˆåˆ†ï¼ˆLoadingï¼‰:&quot;)
loading_df = pd.DataFrame(
    pca.components_.T,
    columns=[f'PC{i+1}' for i in range(3)],
    index=features
)
print(loading_df)
</code></pre>
<p><strong>PCAã®è§£é‡ˆ</strong>:
- <strong>PC1ï¼ˆç¬¬1ä¸»æˆåˆ†ï¼‰</strong>: æœ€ã‚‚åˆ†æ•£ã®å¤§ãã„æ–¹å‘ï¼ˆé€šå¸¸ã€å…¨ä½“çš„ãªãƒ—ãƒ­ã‚»ã‚¹é€²è¡Œï¼‰
- <strong>PC2ï¼ˆç¬¬2ä¸»æˆåˆ†ï¼‰</strong>: PC1ã¨ç›´äº¤ã™ã‚‹æ¬¡ã«åˆ†æ•£ãŒå¤§ãã„æ–¹å‘
- <strong>Loadingå€¤</strong>: å„å¤‰æ•°ãŒä¸»æˆåˆ†ã«ä¸ãˆã‚‹å½±éŸ¿ï¼ˆçµ¶å¯¾å€¤ãŒå¤§ãã„ã»ã©é‡è¦ï¼‰</p>
<hr />
<h2>4.5 çµ±åˆè§£æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆsklearn Pipelineï¼‰</h2>
<h3>è¤‡æ•°æ¸¬å®šæŠ€è¡“ã®ãƒ‡ãƒ¼ã‚¿çµ±åˆ</h3>
<p><strong>ã‚³ãƒ¼ãƒ‰ä¾‹5: è‡ªå‹•åŒ–ã•ã‚ŒãŸçµ±åˆè§£æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</strong></p>
<pre><code class="language-python">from sklearn.pipeline import Pipeline
from sklearn.impute import SimpleImputer
from sklearn.preprocessing import StandardScaler, RobustScaler
from sklearn.decomposition import PCA
from sklearn.cluster import KMeans
import joblib

class IntegratedAnalysisPipeline:
    &quot;&quot;&quot;çµ±åˆè§£æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³&quot;&quot;&quot;

    def __init__(self, n_clusters=3):
        &quot;&quot;&quot;
        Parameters:
        -----------
        n_clusters : int
            ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æ•°ï¼ˆãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã®æ•°ï¼‰
        &quot;&quot;&quot;
        self.pipeline = Pipeline([
            ('imputer', SimpleImputer(strategy='median')),  # æ¬ æå€¤è£œå®Œ
            ('scaler', RobustScaler()),  # å¤–ã‚Œå€¤ã«é ‘å¥ãªæ¨™æº–åŒ–
            ('pca', PCA(n_components=0.95)),  # ç´¯ç©å¯„ä¸ç‡95%ã¾ã§
            ('clustering', KMeans(n_clusters=n_clusters, random_state=42))
        ])
        self.n_clusters = n_clusters

    def fit(self, X):
        &quot;&quot;&quot;ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å­¦ç¿’&quot;&quot;&quot;
        self.pipeline.fit(X)
        return self

    def transform(self, X):
        &quot;&quot;&quot;æ¬¡å…ƒå‰Šæ¸›ã®ã¿&quot;&quot;&quot;
        # ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°å‰ã¾ã§ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œ
        X_transformed = X.copy()
        for step_name, step in self.pipeline.steps[:-1]:
            X_transformed = step.transform(X_transformed)
        return X_transformed

    def predict(self, X):
        &quot;&quot;&quot;ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼äºˆæ¸¬&quot;&quot;&quot;
        return self.pipeline.predict(X)

    def get_feature_importance(self, feature_names):
        &quot;&quot;&quot;ä¸»æˆåˆ†ã«ãŠã‘ã‚‹ç‰¹å¾´é‡ã®é‡è¦åº¦&quot;&quot;&quot;
        pca = self.pipeline.named_steps['pca']
        loadings = pca.components_.T * np.sqrt(pca.explained_variance_)

        importance_df = pd.DataFrame(
            loadings,
            columns=[f'PC{i+1}' for i in range(pca.n_components_)],
            index=feature_names
        )
        return importance_df

    def save(self, filename):
        &quot;&quot;&quot;ãƒ¢ãƒ‡ãƒ«ä¿å­˜&quot;&quot;&quot;
        joblib.dump(self.pipeline, filename)

    @staticmethod
    def load(filename):
        &quot;&quot;&quot;ãƒ¢ãƒ‡ãƒ«èª­ã¿è¾¼ã¿&quot;&quot;&quot;
        return joblib.load(filename)

# ä½¿ç”¨ä¾‹ï¼šçµ±åˆè§£æã®å®Ÿè¡Œ
# ç‰¹å¾´é‡è¡Œåˆ—æº–å‚™
X_integrated = df_clean[['temperature', 'pressure',
                         'flow_rate']].dropna().values

# ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œ
pipeline = IntegratedAnalysisPipeline(n_clusters=3)
pipeline.fit(X_integrated)

# æ¬¡å…ƒå‰Šæ¸›çµæœ
X_reduced = pipeline.transform(X_integrated)

# ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼äºˆæ¸¬
clusters = pipeline.predict(X_integrated)

# å¯è¦–åŒ–
fig, axes = plt.subplots(2, 2, figsize=(14, 12))

# æ™‚ç³»åˆ—ã§ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å¯è¦–åŒ–
time_clean = df_clean['time'].values[:len(clusters)]
axes[0, 0].scatter(time_clean, clusters, c=clusters,
                  cmap='viridis', s=5, alpha=0.6)
axes[0, 0].set_xlabel('Time (s)')
axes[0, 0].set_ylabel('Cluster ID')
axes[0, 0].set_title('Process State Clustering (Time Series)')
axes[0, 0].grid(True, alpha=0.3)

# PCAç©ºé–“ã§ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼
axes[0, 1].scatter(X_reduced[:, 0], X_reduced[:, 1],
                  c=clusters, cmap='viridis', s=10, alpha=0.6)
axes[0, 1].set_xlabel('PC1')
axes[0, 1].set_ylabel('PC2')
axes[0, 1].set_title('Clusters in PCA Space')
axes[0, 1].grid(True, alpha=0.3)

# å„ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®æ¸©åº¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
temp_clean = df_clean['temperature'].values[:len(clusters)]
for cluster_id in range(pipeline.n_clusters):
    mask = clusters == cluster_id
    axes[1, 0].scatter(time_clean[mask], temp_clean[mask],
                      label=f'Cluster {cluster_id}', s=5, alpha=0.6)
axes[1, 0].set_xlabel('Time (s)')
axes[1, 0].set_ylabel('Temperature (Â°C)')
axes[1, 0].set_title('Temperature Profile by Cluster')
axes[1, 0].legend()
axes[1, 0].grid(True, alpha=0.3)

# ç‰¹å¾´é‡é‡è¦åº¦
importance = pipeline.get_feature_importance(
    ['Temperature', 'Pressure', 'Flow Rate']
)
importance.plot(kind='bar', ax=axes[1, 1])
axes[1, 1].set_title('Feature Importance in PCA')
axes[1, 1].set_ylabel('Loading')
axes[1, 1].grid(True, alpha=0.3, axis='y')

plt.tight_layout()
plt.show()

# ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼çµ±è¨ˆ
print(&quot;=== ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼çµ±è¨ˆ ===&quot;)
for cluster_id in range(pipeline.n_clusters):
    mask = clusters == cluster_id
    cluster_temp = temp_clean[mask]
    print(f&quot;Cluster {cluster_id}:&quot;)
    print(f&quot;  ã‚µãƒ³ãƒ—ãƒ«æ•°: {mask.sum()}&quot;)
    print(f&quot;  å¹³å‡æ¸©åº¦: {cluster_temp.mean():.2f}Â°C&quot;)
    print(f&quot;  æ¸©åº¦ç¯„å›²: {cluster_temp.min():.2f} - {cluster_temp.max():.2f}Â°C&quot;)

# ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¿å­˜
pipeline.save('process_analysis_pipeline.pkl')
print(&quot;\nPipeline saved to 'process_analysis_pipeline.pkl'&quot;)
</code></pre>
<p><strong>sklearn Pipelineã®åˆ©ç‚¹</strong>:
1. <strong>å†ç¾æ€§</strong>: å…¨å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—ãŒ1ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ ¼ç´
2. <strong>ä¿å®ˆæ€§</strong>: ã‚¹ãƒ†ãƒƒãƒ—ã®è¿½åŠ ãƒ»å¤‰æ›´ãŒå®¹æ˜“
3. <strong>ãƒ‡ãƒ—ãƒ­ã‚¤</strong>: <code>.pkl</code>ãƒ•ã‚¡ã‚¤ãƒ«ã§ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿å¯èƒ½
4. <strong>è‡ªå‹•åŒ–</strong>: æ–°ãƒ‡ãƒ¼ã‚¿ã¸ã®é©ç”¨ãŒ<code>predict()</code>1è¡Œã§å®Œçµ</p>
<hr />
<h2>4.6 å®Ÿè·µçš„ãªè½ã¨ã—ç©´ã¨å¯¾ç­–</h2>
<h3>ã‚ˆãã‚ã‚‹å¤±æ•—ä¾‹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h3>
<h4>å¤±æ•—1: éå®šå¸¸æ™‚ç³»åˆ—ã¸ã®PCAé©ç”¨</h4>
<p><strong>ç—‡çŠ¶</strong>: PCAã®çµæœãŒãƒ—ãƒ­ã‚»ã‚¹ã®ç‰©ç†çš„æ„å‘³ã¨ä¸€è‡´ã—ãªã„</p>
<p><strong>åŸå› </strong>: æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãŒéå®šå¸¸ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ã‚ã‚Šï¼‰ã®ã¾ã¾PCAã‚’é©ç”¨</p>
<p><strong>å¯¾ç­–</strong>:</p>
<pre><code class="language-python"># âŒ æ‚ªã„ä¾‹ï¼šéå®šå¸¸ãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾PCA
X_raw = df[['temperature', 'pressure', 'flow_rate']].values
pca = PCA(n_components=2)
X_pca = pca.fit_transform(X_raw)
# çµæœ: PC1ãŒãƒˆãƒ¬ãƒ³ãƒ‰ã«æ”¯é…ã•ã‚Œã€ç‰©ç†çš„è§£é‡ˆå›°é›£

# âœ… è‰¯ã„ä¾‹ï¼šå®šå¸¸åŒ–ï¼ˆå·®åˆ†ï¼‰å¾Œã«PCA
# ã‚¹ãƒ†ãƒƒãƒ—1: å„å¤‰æ•°ã®1æ¬¡å·®åˆ†
X_diff = df[['temperature', 'pressure', 'flow_rate']].diff().dropna().values

# ã‚¹ãƒ†ãƒƒãƒ—2: æ¨™æº–åŒ–
from sklearn.preprocessing import StandardScaler
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X_diff)

# ã‚¹ãƒ†ãƒƒãƒ—3: PCA
pca = PCA(n_components=2)
X_pca = pca.fit_transform(X_scaled)

# æ¤œè¨¼: å®šå¸¸æ€§ãƒ†ã‚¹ãƒˆ
from statsmodels.tsa.stattools import adfuller
for col in ['temperature', 'pressure', 'flow_rate']:
    result = adfuller(df[col].dropna())
    print(f&quot;{col}: ADF statistic = {result[0]:.3f}, p-value = {result[1]:.3f}&quot;)
    if result[1] &gt; 0.05:
        print(f&quot;  è­¦å‘Š: {col}ã¯éå®šå¸¸ã§ã™ï¼ˆp &gt; 0.05ï¼‰ã€‚å·®åˆ†ã‚’å–ã£ã¦ãã ã•ã„&quot;)
</code></pre>
<h4>å¤±æ•—2: æ¨™æº–åŒ–ã›ãšã«PCA</h4>
<p><strong>ç—‡çŠ¶</strong>: ã‚¹ã‚±ãƒ¼ãƒ«ã®å¤§ãã„å¤‰æ•°ï¼ˆåœ§åŠ›: ~100 Torrï¼‰ãŒPC1ã‚’æ”¯é…ã—ã€å°ã•ã„å¤‰æ•°ï¼ˆæµé‡: ~50 sccmï¼‰ãŒç„¡è¦–ã•ã‚Œã‚‹</p>
<p><strong>åŸå› </strong>: PCAã¯åˆ†æ•£ã‚’åŸºæº–ã¨ã™ã‚‹ãŸã‚ã€ã‚¹ã‚±ãƒ¼ãƒ«ã«æ•æ„Ÿ</p>
<p><strong>å¯¾ç­–</strong>:</p>
<pre><code class="language-python"># âŒ æ‚ªã„ä¾‹ï¼šæ¨™æº–åŒ–ãªã—
X = df[['temperature', 'pressure', 'flow_rate']].values
pca = PCA()
pca.fit(X)
# çµæœ: åœ§åŠ›ã®PC1ã¸ã®å¯„ä¸ãŒéå¤§è©•ä¾¡

# âœ… è‰¯ã„ä¾‹ï¼šå¿…ãšæ¨™æº–åŒ–
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
pca = PCA()
pca.fit(X_scaled)

# æ¨™æº–åŒ–ã®åŠ¹æœã‚’ç¢ºèª
print(&quot;=== æ¨™æº–åŒ–å‰ã®åˆ†æ•£ ===&quot;)
print(f&quot;Temperature: {df['temperature'].var():.2f}&quot;)
print(f&quot;Pressure: {df['pressure'].var():.2f}&quot;)
print(f&quot;Flow: {df['flow_rate'].var():.2f}&quot;)

print(&quot;\n=== æ¨™æº–åŒ–å¾Œã®åˆ†æ•£ï¼ˆå…¨ã¦1.0ã«ãªã‚‹ï¼‰ ===&quot;)
X_scaled_df = pd.DataFrame(X_scaled, columns=['temperature', 'pressure', 'flow_rate'])
print(X_scaled_df.var())
</code></pre>
<h4>å¤±æ•—3: æ™‚ç³»åˆ—ã®ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚±ãƒ¼ã‚¸ï¼ˆData Leakageï¼‰</h4>
<p><strong>ç—‡çŠ¶</strong>: ã‚¯ãƒ­ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§é«˜ç²¾åº¦ã ãŒã€å®Ÿé‹ç”¨ã§æ€§èƒ½ä½ä¸‹</p>
<p><strong>åŸå› </strong>: æœªæ¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦éå»ã‚’äºˆæ¸¬ï¼ˆæ™‚é–“çš„é †åºã‚’ç„¡è¦–ï¼‰</p>
<p><strong>å¯¾ç­–</strong>:</p>
<pre><code class="language-python"># âŒ æ‚ªã„ä¾‹ï¼šãƒ©ãƒ³ãƒ€ãƒ åˆ†å‰²ï¼ˆæ™‚ç³»åˆ—ã‚’ç„¡è¦–ï¼‰
from sklearn.model_selection import cross_val_score, KFold
kf = KFold(n_splits=5, shuffle=True, random_state=42)
scores = cross_val_score(model, X, y, cv=kf)
# çµæœ: æœªæ¥ãƒ‡ãƒ¼ã‚¿ã§éå»ã‚’äºˆæ¸¬ã—ã¦ã—ã¾ã†

# âœ… è‰¯ã„ä¾‹ï¼šæ™‚ç³»åˆ—ã‚¯ãƒ­ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
from sklearn.model_selection import TimeSeriesSplit
tscv = TimeSeriesSplit(n_splits=5)
scores = cross_val_score(model, X, y, cv=tscv)

# å¯è¦–åŒ–: Foldæ§‹é€ 
fig, ax = plt.subplots(figsize=(12, 6))
for i, (train_idx, test_idx) in enumerate(tscv.split(X)):
    ax.plot(train_idx, [i]*len(train_idx), 'b-', linewidth=10, label='Train' if i == 0 else '')
    ax.plot(test_idx, [i]*len(test_idx), 'r-', linewidth=10, label='Test' if i == 0 else '')
ax.set_xlabel('Time Index')
ax.set_ylabel('Fold')
ax.set_title('TimeSeriesSplit: Train/Test Splits')
ax.legend()
plt.show()

print(&quot;TimeSeriesSplit: è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã¯å¸¸ã«ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚ˆã‚Šéå»&quot;)
</code></pre>
<h4>å¤±æ•—4: ç§»å‹•çª“ã‚µã‚¤ã‚ºã®ä¸é©åˆ‡ãªè¨­å®š</h4>
<p><strong>ç—‡çŠ¶</strong>: ç§»å‹•å¹³å‡ãŒæ»‘ã‚‰ã‹ã™ãã‚‹ï¼ˆé‡è¦ãªå¤‰åŒ–ã‚’è¦‹é€ƒã™ï¼‰ã€ã¾ãŸã¯ãƒã‚¤ã‚ºã ã‚‰ã‘</p>
<p><strong>åŸå› </strong>: çª“ã‚µã‚¤ã‚ºãŒãƒ—ãƒ­ã‚»ã‚¹ã®æ™‚å®šæ•°ã¨åˆã£ã¦ã„ãªã„</p>
<p><strong>å¯¾ç­–</strong>:</p>
<pre><code class="language-python"># âŒ æ‚ªã„ä¾‹ï¼šçª“ã‚µã‚¤ã‚ºã‚’çµŒé¨“çš„ã«æ±ºå®š
window_size = 100  # é©å½“ãªå€¤

# âœ… è‰¯ã„ä¾‹ï¼šãƒ—ãƒ­ã‚»ã‚¹ç‰¹æ€§ã‹ã‚‰çª“ã‚µã‚¤ã‚ºã‚’æ±ºå®š
# ã‚¹ãƒ†ãƒƒãƒ—1: è‡ªå·±ç›¸é–¢åˆ†æ
from statsmodels.graphics.tsaplots import plot_acf
fig, ax = plt.subplots(figsize=(12, 4))
plot_acf(df['temperature'].dropna(), lags=200, ax=ax)
ax.set_title('Autocorrelation: Temperature')
plt.show()

# ã‚¹ãƒ†ãƒƒãƒ—2: æœ€åˆã«è‡ªå·±ç›¸é–¢ãŒé–¾å€¤ï¼ˆä¾‹:0.5ï¼‰ã‚’ä¸‹å›ã‚‹ç‚¹ã‚’ç‰¹å®š
from statsmodels.tsa.stattools import acf
acf_values = acf(df['temperature'].dropna(), nlags=200)
threshold = 0.5
lag_threshold = np.where(acf_values &lt; threshold)[0][0]
print(f&quot;è‡ªå·±ç›¸é–¢ãŒ{threshold}ã‚’ä¸‹å›ã‚‹ãƒ©ã‚°: {lag_threshold} points&quot;)

# ã‚¹ãƒ†ãƒƒãƒ—3: çª“ã‚µã‚¤ã‚ºã‚’æ±ºå®šï¼ˆç‰¹å¾´çš„ãªæ™‚å®šæ•°ã®åŠåˆ†ç¨‹åº¦ï¼‰
optimal_window = lag_threshold // 2
print(f&quot;æ¨å¥¨çª“ã‚µã‚¤ã‚º: {optimal_window} points&quot;)

rolling_mean = df['temperature'].rolling(window=optimal_window).mean()
</code></pre>
<h4>å¤±æ•—5: éåº¦ãªã‚¤ãƒ³ãƒ”ãƒ¥ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ¬ æå€¤è£œå®Œï¼‰</h4>
<p><strong>ç—‡çŠ¶</strong>: æ¬ æå€¤ã‚’è£œå®Œã—ãŸçµæœã€å®Ÿãƒ‡ãƒ¼ã‚¿ã¨å¤§ããä¹–é›¢</p>
<p><strong>åŸå› </strong>: å¤§ããªæ¬ æé ˜åŸŸã‚’å˜ç´”ãªæ–¹æ³•ï¼ˆå¹³å‡ã€å‰æ–¹åŸ‹ã‚ï¼‰ã§è£œå®Œ</p>
<p><strong>å¯¾ç­–</strong>:</p>
<pre><code class="language-python"># âŒ æ‚ªã„ä¾‹ï¼šå¤§ããªæ¬ æé ˜åŸŸã‚’ç„¡æ¡ä»¶ã«è£œå®Œ
df_filled = df['temperature'].fillna(method='ffill')  # å‰æ–¹åŸ‹ã‚
# çµæœ: é•·æ™‚é–“ã®ã‚»ãƒ³ã‚µãƒ¼åœæ­¢ä¸­ã‚‚åŒã˜å€¤ãŒç¶šãï¼ˆéç¾å®Ÿçš„ï¼‰

# âœ… è‰¯ã„ä¾‹ï¼šæ¬ æç¯„å›²ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€é©åˆ‡ãªè£œå®Œæ³•ã‚’é¸æŠ
# ã‚¹ãƒ†ãƒƒãƒ—1: é€£ç¶šæ¬ æã®é•·ã•ã‚’è©•ä¾¡
is_missing = df['temperature'].isnull()
missing_groups = is_missing.ne(is_missing.shift()).cumsum()
max_consecutive_missing = is_missing.groupby(missing_groups).sum().max()

print(f&quot;æœ€å¤§é€£ç¶šæ¬ æ: {max_consecutive_missing} points&quot;)

# ã‚¹ãƒ†ãƒƒãƒ—2: é–¾å€¤åˆ¤å®š
MAX_ALLOWED_GAP = 10  # è¨±å®¹ã™ã‚‹æœ€å¤§æ¬ æé•·ï¼ˆã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°é–“éš”ã®10å€ãªã©ï¼‰

if max_consecutive_missing &gt; MAX_ALLOWED_GAP:
    print(f&quot;è­¦å‘Š: å¤§ããªæ¬ æé ˜åŸŸãŒã‚ã‚Šã¾ã™ï¼ˆ{max_consecutive_missing} pointsï¼‰&quot;)
    print(&quot;è£œå®Œã§ã¯ãªãã€ãƒ‡ãƒ¼ã‚¿ã‚’é™¤å¤–ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„&quot;)

    # å¤§ããªæ¬ æé ˜åŸŸã‚’å«ã‚€åŒºé–“ã‚’é™¤å¤–
    consecutive_missing = is_missing.groupby(missing_groups).transform('sum')
    df_clean = df[consecutive_missing &lt;= MAX_ALLOWED_GAP].copy()
else:
    # å°ã•ãªæ¬ æã®ã¿è£œå®Œï¼ˆç·šå½¢è£œé–“ï¼‰
    df_clean = df.copy()
    df_clean['temperature'] = df_clean['temperature'].interpolate(method='linear')

print(f&quot;è£œå®Œå¾Œã®ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°: {len(df_clean)} / {len(df)}&quot;)
</code></pre>
<hr />
<h2>4.7 æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ«ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h2>
<h3>æ™‚ç³»åˆ—å‰å‡¦ç†ã‚¹ã‚­ãƒ«</h3>
<h4>åŸºç¤ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’pandas DataFrameã§æ‰±ãˆã‚‹</li>
<li>[ ] ç§»å‹•å¹³å‡ã‚’è¨ˆç®—ã§ãã‚‹</li>
<li>[ ] ãƒ€ã‚¦ãƒ³ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°/ã‚¢ãƒƒãƒ—ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã§ãã‚‹</li>
<li>[ ] æ¬ æå€¤ã‚’æ¤œå‡ºã§ãã‚‹</li>
<li>[ ] ãƒˆãƒ¬ãƒ³ãƒ‰ã®æœ‰ç„¡ã‚’å¯è¦–åŒ–ã§ç¢ºèªã§ãã‚‹</li>
</ul>
<h4>å¿œç”¨ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] 1æ¬¡å·®åˆ†ãƒ»2æ¬¡å·®åˆ†ã‚’ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã‚‹</li>
<li>[ ] ãƒ‡ãƒˆãƒ¬ãƒ³ãƒ‰å‡¦ç†ã‚’å®Ÿè£…ã§ãã‚‹</li>
<li>[ ] è‡ªå·±ç›¸é–¢åˆ†æã§æ™‚å®šæ•°ã‚’æ¨å®šã§ãã‚‹</li>
<li>[ ] ADFæ¤œå®šã§å®šå¸¸æ€§ã‚’æ¤œè¨¼ã§ãã‚‹</li>
<li>[ ] é©å¿œçš„ãªç§»å‹•çª“ã‚µã‚¤ã‚ºã‚’æ±ºå®šã§ãã‚‹</li>
</ul>
<h4>ä¸Šç´šãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] å­£ç¯€æ€§åˆ†è§£ï¼ˆSTLï¼‰ã‚’å®Ÿè¡Œã§ãã‚‹</li>
<li>[ ] ARIMA/SARIMAãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
<li>[ ] ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã§çŠ¶æ…‹æ¨å®šã§ãã‚‹</li>
<li>[ ] æ¬ æå€¤è£œå®Œã®ç²¾åº¦ã‚’å®šé‡è©•ä¾¡ã§ãã‚‹</li>
</ul>
<h3>ç•°å¸¸æ¤œçŸ¥ã‚¹ã‚­ãƒ«</h3>
<h4>åŸºç¤ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] 3Ïƒæ³•ã§çµ±è¨ˆçš„ç•°å¸¸ã‚’æ¤œå‡ºã§ãã‚‹</li>
<li>[ ] é–¾å€¤ãƒ™ãƒ¼ã‚¹ã®ç•°å¸¸æ¤œçŸ¥ã‚’å®Ÿè£…ã§ãã‚‹</li>
<li>[ ] ç•°å¸¸ç‚¹ã‚’å¯è¦–åŒ–ã§ãã‚‹</li>
<li>[ ] ç•°å¸¸æ¤œçŸ¥ã®ç²¾åº¦ï¼ˆTrue Positiveã€False Positiveï¼‰ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
</ul>
<h4>å¿œç”¨ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] ç§»å‹•çµ±è¨ˆé‡ãƒ™ãƒ¼ã‚¹ã®ç•°å¸¸æ¤œçŸ¥ã‚’å®Ÿè£…ã§ãã‚‹</li>
<li>[ ] IQRæ³•ã«ã‚ˆã‚‹é ‘å¥ãªç•°å¸¸æ¤œçŸ¥ãŒã§ãã‚‹</li>
<li>[ ] ç•°å¸¸åº¦ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—ã§ãã‚‹</li>
<li>[ ] ROCæ›²ç·šã§æ¤œå‡ºæ€§èƒ½ã‚’è©•ä¾¡ã§ãã‚‹</li>
<li>[ ] ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã¨çµ±è¨ˆæ‰‹æ³•ã‚’çµ„ã¿åˆã‚ã›ã‚‰ã‚Œã‚‹</li>
</ul>
<h4>ä¸Šç´šãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] Isolation Forestã«ã‚ˆã‚‹ç•°å¸¸æ¤œçŸ¥ã‚’å®Ÿè£…ã§ãã‚‹</li>
<li>[ ] LSTMã‚ªãƒ¼ãƒˆã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã§ç•°å¸¸æ¤œçŸ¥ã§ãã‚‹</li>
<li>[ ] å¤‰åŒ–ç‚¹æ¤œå‡ºï¼ˆChange Point Detectionï¼‰ã‚’å®Ÿè¡Œã§ãã‚‹</li>
<li>[ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç•°å¸¸æ¤œçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
</ul>
<h3>PCAãƒ»æ¬¡å…ƒå‰Šæ¸›ã‚¹ã‚­ãƒ«</h3>
<h4>åŸºç¤ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] ãƒ‡ãƒ¼ã‚¿ã‚’æ¨™æº–åŒ–ã§ãã‚‹</li>
<li>[ ] PCAã‚’å®Ÿè¡Œã—ã€ä¸»æˆåˆ†ã‚¹ã‚³ã‚¢ã‚’å–å¾—ã§ãã‚‹</li>
<li>[ ] ç´¯ç©å¯„ä¸ç‡ã‚’è¨ˆç®—ãƒ»å¯è¦–åŒ–ã§ãã‚‹</li>
<li>[ ] 2D/3Dæ•£å¸ƒå›³ã§PCAçµæœã‚’å¯è¦–åŒ–ã§ãã‚‹</li>
</ul>
<h4>å¿œç”¨ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] Loading plotã§ä¸»æˆåˆ†ã‚’è§£é‡ˆã§ãã‚‹</li>
<li>[ ] é©åˆ‡ãªä¸»æˆåˆ†æ•°ã‚’é¸æŠã§ãã‚‹ï¼ˆç´¯ç©å¯„ä¸ç‡ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ—ãƒ­ãƒƒãƒˆï¼‰</li>
<li>[ ] éå®šå¸¸ãƒ‡ãƒ¼ã‚¿ã®å‰å‡¦ç†ï¼ˆå·®åˆ†ã€ãƒ‡ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰ãŒã§ãã‚‹</li>
<li>[ ] PCAã®å‰æï¼ˆç·šå½¢æ€§ã€æ­£è¦æ€§ï¼‰ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
<li>[ ] ä¸»æˆåˆ†å¾—ç‚¹ã‹ã‚‰å…ƒå¤‰æ•°ã®å½±éŸ¿ã‚’èª¬æ˜ã§ãã‚‹</li>
</ul>
<h4>ä¸Šç´šãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] ã‚«ãƒ¼ãƒãƒ«PCAã§éç·šå½¢æ¬¡å…ƒå‰Šæ¸›ãŒã§ãã‚‹</li>
<li>[ ] t-SNE/UMAPã§å¯è¦–åŒ–ã§ãã‚‹</li>
<li>[ ] Sparse PCAã§è§£é‡ˆæ€§ã‚’å‘ä¸Šã§ãã‚‹</li>
<li>[ ] ä¸»æˆåˆ†å›å¸°ï¼ˆPCRï¼‰ã‚’å®Ÿè£…ã§ãã‚‹</li>
</ul>
<h3>çµ±åˆè§£æãƒ»Pipelineæ§‹ç¯‰ã‚¹ã‚­ãƒ«</h3>
<h4>åŸºç¤ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] sklearn Pipelineã®åŸºæœ¬æ§‹é€ ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
<li>[ ] Imputerâ†’Scalerâ†’PCAã®åŸºæœ¬ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
<li>[ ] ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§è¨“ç·´ãƒ»äºˆæ¸¬ã‚’å®Ÿè¡Œã§ãã‚‹</li>
<li>[ ] ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ã§ãã‚‹</li>
</ul>
<h4>å¿œç”¨ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] ã‚«ã‚¹ã‚¿ãƒ Transformerã‚’ä½œæˆã§ãã‚‹</li>
<li>[ ] ColumnTransformerã§åˆ—ã”ã¨ã«ç•°ãªã‚‹å‰å‡¦ç†ã‚’é©ç”¨ã§ãã‚‹</li>
<li>[ ] GridSearchCVã§ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ã§ãã‚‹</li>
<li>[ ] TimeSeriesSplitã§æ™‚ç³»åˆ—CVã‚’å®Ÿè¡Œã§ãã‚‹</li>
<li>[ ] ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å…¨ä½“ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’å›³ç¤ºã§ãã‚‹</li>
</ul>
<h4>ä¸Šç´šãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] è¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«ã‚’ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ã§ãã‚‹</li>
<li>[ ] ã‚«ã‚¹ã‚¿ãƒ CVæˆ¦ç•¥ã‚’å®Ÿè£…ã§ãã‚‹ï¼ˆBlocked Time Series Splitï¼‰</li>
<li>[ ] ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã®è¨ˆç®—æ™‚é–“ã‚’æœ€é©åŒ–ã§ãã‚‹</li>
<li>[ ] æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
</ul>
<h3>çµ±åˆã‚¹ã‚­ãƒ«ï¼šå®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ç·åˆè§£æ</h3>
<h4>åŸºç¤ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] XRDã€XPSã€SEMã€ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å€‹åˆ¥ã«å‡¦ç†ã§ãã‚‹</li>
<li>[ ] å„ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç‰¹å¾´é‡ã‚’æŠ½å‡ºã§ãã‚‹</li>
<li>[ ] ç‰¹å¾´é‡ã‚’çµ±åˆã—ã¦è¡¨å½¢å¼ãƒ‡ãƒ¼ã‚¿ã«ã¾ã¨ã‚ã‚‰ã‚Œã‚‹</li>
</ul>
<h4>å¿œç”¨ãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] ç•°ãªã‚‹ã‚¹ã‚±ãƒ¼ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’é©åˆ‡ã«æ¨™æº–åŒ–ã§ãã‚‹</li>
<li>[ ] æ™‚é–“é…ã‚Œã‚’è€ƒæ…®ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆã§ãã‚‹</li>
<li>[ ] PCAã§çµ±åˆãƒ‡ãƒ¼ã‚¿ã®ä¸»è¦ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠ½å‡ºã§ãã‚‹</li>
<li>[ ] ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã§ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã‚’åˆ†é¡ã§ãã‚‹</li>
<li>[ ] å›å¸°ãƒ¢ãƒ‡ãƒ«ã§ææ–™ç‰¹æ€§ã‚’äºˆæ¸¬ã§ãã‚‹</li>
</ul>
<h4>ä¸Šç´šãƒ¬ãƒ™ãƒ«</h4>
<ul>
<li>[ ] ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ‡ãƒ¼ã‚¿çµ±åˆï¼ˆEarly/Late Fusionï¼‰ãŒã§ãã‚‹</li>
<li>[ ] å› æœæ¨è«–ã§å¤‰æ•°é–“ã®å› æœé–¢ä¿‚ã‚’ç‰¹å®šã§ãã‚‹</li>
<li>[ ] ãƒ™ã‚¤ã‚ºæœ€é©åŒ–ã§ãƒ—ãƒ­ã‚»ã‚¹æ¡ä»¶ã‚’æœ€é©åŒ–ã§ãã‚‹</li>
<li>[ ] ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³æ§‹ç¯‰ã«çµ±åˆè§£æã‚’é©ç”¨ã§ãã‚‹</li>
</ul>
<hr />
<h2>4.8 ç·åˆã‚¹ã‚­ãƒ«è©•ä¾¡</h2>
<p>ä»¥ä¸‹ã®åŸºæº–ã§è‡ªå·±è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚</p>
<h3>ãƒ¬ãƒ™ãƒ«1ï¼šåˆå­¦è€…ï¼ˆåŸºç¤ã‚¹ã‚­ãƒ«ã®60%ä»¥ä¸Šï¼‰</h3>
<ul>
<li>åŸºæœ¬çš„ãªæ™‚ç³»åˆ—å‰å‡¦ç†ï¼ˆç§»å‹•å¹³å‡ã€å·®åˆ†ï¼‰ãŒã§ãã‚‹</li>
<li>3Ïƒæ³•ã§ç•°å¸¸æ¤œçŸ¥ã§ãã‚‹</li>
<li>PCAã§æ¬¡å…ƒå‰Šæ¸›ã—ã€2Då¯è¦–åŒ–ã§ãã‚‹</li>
<li>sklearn Pipelineã®åŸºæœ¬ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
</ul>
<p><strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</strong>:
- å®šå¸¸æ€§æ¤œå®šï¼ˆADFï¼‰ã‚’ç¿’å¾—
- PCAã®Loadingè§£é‡ˆã‚’æ·±ã‚ã‚‹
- TimeSeriesSplitã‚’ä½¿ã„ã“ãªã™</p>
<h3>ãƒ¬ãƒ™ãƒ«2ï¼šä¸­ç´šè€…ï¼ˆåŸºç¤100% + å¿œç”¨60%ä»¥ä¸Šï¼‰</h3>
<ul>
<li>éå®šå¸¸æ™‚ç³»åˆ—ã‚’é©åˆ‡ã«å®šå¸¸åŒ–ã§ãã‚‹</li>
<li>ç§»å‹•çµ±è¨ˆé‡ãƒ™ãƒ¼ã‚¹ã®ç•°å¸¸æ¤œçŸ¥ã‚’å®Ÿè£…ã§ãã‚‹</li>
<li>PCAçµæœã‚’ç‰©ç†çš„ã«è§£é‡ˆã§ãã‚‹</li>
<li>ã‚«ã‚¹ã‚¿ãƒ Transformerã‚’ä½œæˆã§ãã‚‹</li>
</ul>
<p><strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</strong>:
- ARIMA/SARIMAãƒ¢ãƒ‡ãƒ«ã«æŒ‘æˆ¦
- Isolation Forestãªã©é«˜åº¦ãªç•°å¸¸æ¤œçŸ¥æ‰‹æ³•ã‚’ç¿’å¾—
- ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æœ€é©åŒ–ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’çµŒé¨“</p>
<h3>ãƒ¬ãƒ™ãƒ«3ï¼šä¸Šç´šè€…ï¼ˆåŸºç¤100% + å¿œç”¨100% + ä¸Šç´š60%ä»¥ä¸Šï¼‰</h3>
<ul>
<li>å­£ç¯€æ€§åˆ†è§£ãƒ»ARIMAãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
<li>LSTM/Isolation Forestã§é«˜åº¦ãªç•°å¸¸æ¤œçŸ¥ãŒã§ãã‚‹</li>
<li>ã‚«ãƒ¼ãƒãƒ«PCA/t-SNEã§éç·šå½¢æ¬¡å…ƒå‰Šæ¸›ãŒã§ãã‚‹</li>
<li>æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤ãŒã§ãã‚‹</li>
</ul>
<p><strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</strong>:
- å› æœæ¨è«–ãƒ»ãƒ™ã‚¤ã‚ºæœ€é©åŒ–ã«é€²ã‚€
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è§£æã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰
- ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³é–‹ç™ºã«å‚ç”»</p>
<h3>ãƒ¬ãƒ™ãƒ«4ï¼šã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆï¼ˆå…¨é …ç›®90%ä»¥ä¸Šï¼‰</h3>
<ul>
<li>æ™‚ç³»åˆ—ãƒ»å¤šå¤‰é‡è§£æã®åˆ†é‡ã‚’ãƒªãƒ¼ãƒ‰ã§ãã‚‹</li>
<li>æ–°ã—ã„ç•°å¸¸æ¤œçŸ¥æ‰‹æ³•ã‚’é–‹ç™ºãƒ»å®Ÿè£…ã§ãã‚‹</li>
<li>è¤‡æ•°æ¸¬å®šæŠ€è¡“ã®çµ±åˆè§£æã‚’è¨­è¨ˆã§ãã‚‹</li>
<li>å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿è§£æã®æ¨™æº–åŒ–ã«è²¢çŒ®ã—ã¦ã„ã‚‹</li>
</ul>
<p><strong>æ´»å‹•ä¾‹</strong>:
- ç¤¾å†…ç ”ä¿®ãƒ»ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«è¬›å¸«
- è«–æ–‡åŸ·ç­†ãƒ»å­¦ä¼šç™ºè¡¨
- ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹è²¢çŒ®</p>
<hr />
<h2>4.9 è¡Œå‹•è¨ˆç”»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h2>
<h3>ç¾åœ¨ã®ãƒ¬ãƒ™ãƒ«: <strong><em>_</em></strong>____</h3>
<h3>ç›®æ¨™ãƒ¬ãƒ™ãƒ«ï¼ˆ3ãƒ¶æœˆå¾Œï¼‰: <strong><em>_</em></strong>____</h3>
<h3>é‡ç‚¹å¼·åŒ–ã‚¹ã‚­ãƒ«ï¼ˆ3ã¤é¸æŠï¼‰:</h3>
<ol>
<li>
<hr />
</li>
<li>
<hr />
</li>
<li>
<hr />
</li>
</ol>
<h3>å…·ä½“çš„è¡Œå‹•è¨ˆç”»:</h3>
<p><strong>Week 1-2</strong>:
- [ ] è¡Œå‹•1: <strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em>_
- [ ] è¡Œå‹•2: </strong><strong><em>_</em></strong><strong><em>_</em></strong>____</p>
<p><strong>Week 3-4</strong>:
- [ ] è¡Œå‹•1: <strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em>_
- [ ] è¡Œå‹•2: </strong><strong><em>_</em></strong><strong><em>_</em></strong>____</p>
<p><strong>Week 5-8</strong>:
- [ ] è¡Œå‹•1: <strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em>_
- [ ] è¡Œå‹•2: </strong><strong><em>_</em></strong><strong><em>_</em></strong>____</p>
<p><strong>Week 9-12</strong>:
- [ ] è¡Œå‹•1: <strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em>_
- [ ] è¡Œå‹•2: </strong><strong><em>_</em></strong><strong><em>_</em></strong>____</p>
<h3>è©•ä¾¡æŒ‡æ¨™:</h3>
<ul>
<li>[ ] å®Ÿãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ™‚ç³»åˆ—è§£æã‚’é©ç”¨</li>
<li>[ ] ç•°å¸¸æ¤œçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰</li>
<li>[ ] PCAçµæœã‚’ãƒãƒ¼ãƒ ã«å ±å‘Š</li>
</ul>
<hr />
<h2>4.10 çµ±åˆè§£æã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å›³</h2>
<h3>è¤‡æ•°æ¸¬å®šæŠ€è¡“ã®çµ±åˆ</h3>
<div class="mermaid">
flowchart LR
    A[XRDãƒ‡ãƒ¼ã‚¿] --> D[ç‰¹å¾´æŠ½å‡º]
    B[XPSãƒ‡ãƒ¼ã‚¿] --> E[ç‰¹å¾´æŠ½å‡º]
    C[SEMãƒ‡ãƒ¼ã‚¿] --> F[ç‰¹å¾´æŠ½å‡º]
    G[ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿] --> H[ç‰¹å¾´æŠ½å‡º]

    D --> I[çµ±åˆç‰¹å¾´é‡è¡Œåˆ—]
    E --> I
    F --> I
    H --> I

    I --> J[æ¨™æº–åŒ–]
    J --> K[PCA]
    K --> L[ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°\nor\nå›å¸°ãƒ¢ãƒ‡ãƒ«]
    L --> M[çµæœè§£é‡ˆ]

    style A fill:#e3f2fd
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style G fill:#e8f5e9
    style I fill:#fce4ec
    style M fill:#fff9c4
</div>

<hr />
<h2>4.11 æœ¬ç« ã®ã¾ã¨ã‚</h2>
<h3>å­¦ã‚“ã ã“ã¨</h3>
<ol>
<li>
<p><strong>æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿è§£æ</strong>
   - ç§»å‹•çª“çµ±è¨ˆé‡ï¼ˆå¹³å‡ã€æ¨™æº–åå·®ï¼‰
   - ç•°å¸¸æ¤œçŸ¥ï¼ˆ3Ïƒæ³•ï¼‰
   - ãƒˆãƒ¬ãƒ³ãƒ‰é™¤å»ã¨å®šå¸¸åŒ–ï¼ˆå·®åˆ†ã€ãƒ‡ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰</p>
</li>
<li>
<p><strong>PCAï¼ˆä¸»æˆåˆ†åˆ†æï¼‰</strong>
   - å¤šå¤‰é‡ãƒ‡ãƒ¼ã‚¿ã®æ¬¡å…ƒå‰Šæ¸›
   - å¯„ä¸ç‡ã«ã‚ˆã‚‹æˆåˆ†é¸æŠ
   - Loading plotã«ã‚ˆã‚‹è§£é‡ˆ</p>
</li>
<li>
<p><strong>çµ±åˆè§£æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</strong>
   - sklearn Pipelineã«ã‚ˆã‚‹è‡ªå‹•åŒ–
   - æ¬ æå€¤è£œå®Œâ†’æ¨™æº–åŒ–â†’PCAâ†’ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°
   - ãƒ¢ãƒ‡ãƒ«ã®ä¿å­˜ã¨å†åˆ©ç”¨</p>
</li>
<li>
<p><strong>å®Ÿè·µçš„å¿œç”¨</strong>
   - ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°
   - è¤‡æ•°æ¸¬å®šæŠ€è¡“ã®çµ±åˆ
   - ç•°å¸¸æ¤œçŸ¥ã¨å“è³ªç®¡ç†</p>
</li>
<li>
<p><strong>ãƒ‡ãƒ¼ã‚¿ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨å†ç¾æ€§</strong> (v1.1è¿½åŠ )
   - å…¬é–‹ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆUCI MLã€NISTã€PhysioNetï¼‰ã®é©åˆ‡ãªå¼•ç”¨
   - ã‚»ãƒ³ã‚µãƒ¼ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è¨˜éŒ²
   - ç’°å¢ƒæƒ…å ±ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ–‡æ›¸åŒ–</p>
</li>
<li>
<p><strong>å®Ÿè·µçš„ãªè½ã¨ã—ç©´å›é¿</strong> (v1.1è¿½åŠ )
   - éå®šå¸¸æ™‚ç³»åˆ—ã®PCAé©ç”¨æ™‚ã®æ³¨æ„ç‚¹
   - æ¨™æº–åŒ–ã®é‡è¦æ€§
   - æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚±ãƒ¼ã‚¸ã®é˜²æ­¢
   - ç§»å‹•çª“ã‚µã‚¤ã‚ºã®ç§‘å­¦çš„æ±ºå®š
   - æ¬ æå€¤è£œå®Œã®é©åˆ‡ãªåˆ¶é™</p>
</li>
<li>
<p><strong>ã‚¹ã‚­ãƒ«è©•ä¾¡ã¨ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹</strong> (v1.1è¿½åŠ )
   - 5ã¤ã®ã‚¹ã‚­ãƒ«ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
   - åŸºç¤/å¿œç”¨/ä¸Šç´šã®3æ®µéšè©•ä¾¡
   - 4ãƒ¬ãƒ™ãƒ«ã®ç·åˆè©•ä¾¡ï¼ˆåˆå­¦è€…â†’ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆï¼‰
   - å€‹åˆ¥ã®è¡Œå‹•è¨ˆç”»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</p>
</li>
</ol>
<h3>é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h3>
<ul>
<li>âœ… æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¯å‰å‡¦ç†ï¼ˆå®šå¸¸åŒ–ï¼‰ãŒé‡è¦</li>
<li>âœ… PCAã¯å¤‰æ•°é–“ã®ç›¸é–¢ã‚’è€ƒæ…®ã—ãŸæ¬¡å…ƒå‰Šæ¸›</li>
<li>âœ… sklearn Pipelineã«ã‚ˆã‚Šå†ç¾æ€§ã®é«˜ã„è§£æãŒå®Ÿç¾</li>
<li>âœ… çµ±åˆè§£æã«ã‚ˆã‚Šå˜ä¸€æ¸¬å®šã§ã¯å¾—ã‚‰ã‚Œãªã„çŸ¥è¦‹ãŒå¾—ã‚‰ã‚Œã‚‹</li>
<li>âœ… <strong>ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®é©åˆ‡ãªå¼•ç”¨ã¨å†ç¾æ€§ç¢ºä¿ãŒç ”ç©¶å“è³ªã®åŸºç›¤</strong> (v1.1)</li>
<li>âœ… <strong>å®Ÿè·µçš„ãªè½ã¨ã—ç©´ã‚’äº‹å‰ã«çŸ¥ã‚‹ã“ã¨ã§ã€è©¦è¡ŒéŒ¯èª¤æ™‚é–“ã‚’å¤§å¹…å‰Šæ¸›</strong> (v1.1)</li>
<li>âœ… <strong>ä½“ç³»çš„ãªã‚¹ã‚­ãƒ«è©•ä¾¡ã«ã‚ˆã‚Šã€åŠ¹ç‡çš„ãªå­¦ç¿’è¨ˆç”»ãŒç«‹ã¦ã‚‰ã‚Œã‚‹</strong> (v1.1)</li>
</ul>
<h3>ã‚·ãƒªãƒ¼ã‚ºã®ã¾ã¨ã‚</h3>
<p>æœ¬ã‚·ãƒªãƒ¼ã‚ºã§ã¯ã€ææ–™ç§‘å­¦ã«ãŠã‘ã‚‹å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿è§£æã®åŸºç¤ã‹ã‚‰å¿œç”¨ã¾ã§ã‚’å­¦ã³ã¾ã—ãŸï¼š</p>
<ul>
<li><strong>ç¬¬1ç« </strong>: ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ã®åŸºç¤ï¼ˆãƒã‚¤ã‚ºé™¤å»ã€å¤–ã‚Œå€¤æ¤œå‡ºã€æ¨™æº–åŒ–ï¼‰</li>
<li><strong>ç¬¬2ç« </strong>: ã‚¹ãƒšã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿è§£æï¼ˆXRDã€XPSã€IRã€Ramanï¼‰</li>
<li><strong>ç¬¬3ç« </strong>: ç”»åƒãƒ‡ãƒ¼ã‚¿è§£æï¼ˆSEMã€TEMã€ç²’å­æ¤œå‡ºã€CNNåˆ†é¡ï¼‰</li>
<li><strong>ç¬¬4ç« </strong>: æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¨çµ±åˆè§£æï¼ˆã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã€PCAã€Pipelineï¼‰</li>
</ul>
<p><strong>v1.1ã§ã®å…¨ç« å…±é€šã®è¿½åŠ è¦ç´ </strong>:
- ãƒ‡ãƒ¼ã‚¿ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨å¼•ç”¨è¦ç¯„ã®ç¢ºç«‹
- ã‚³ãƒ¼ãƒ‰å†ç¾æ€§ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- å®Ÿè·µçš„ãªè½ã¨ã—ç©´ã¨å¯¾ç­–ï¼ˆå„ç« 5ä¾‹ä»¥ä¸Šï¼‰
- åŒ…æ‹¬çš„ãªã‚¹ã‚­ãƒ«è©•ä¾¡ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</p>
<p>ã“ã‚Œã‚‰ã®æŠ€è¡“ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ææ–™é–‹ç™ºã®é«˜é€ŸåŒ–ãƒ»é«˜ç²¾åº¦åŒ–ãŒå®Ÿç¾ã§ãã¾ã™ã€‚</p>
<hr />
<h2>æ¼”ç¿’å•é¡Œ</h2>
<h3>å•é¡Œ1ï¼ˆé›£æ˜“åº¦ï¼šeasyï¼‰</h3>
<p>æ¬¡ã®æ–‡ç« ã®æ­£èª¤ã‚’åˆ¤å®šã—ã¦ãã ã•ã„ã€‚</p>
<ol>
<li>ç§»å‹•å¹³å‡ãƒ•ã‚£ãƒ«ã‚¿ã¯æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’é™¤å»ã™ã‚‹</li>
<li>PCAã®ç¬¬1ä¸»æˆåˆ†ã¯æœ€ã‚‚åˆ†æ•£ãŒå¤§ãã„æ–¹å‘ã§ã‚ã‚‹</li>
<li>sklearn Pipelineã§ã¯ã€å…¨ã¦ã®å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—ãŒåŒã˜ãƒ‡ãƒ¼ã‚¿å‹ã‚’è¦æ±‚ã™ã‚‹</li>
</ol>
<details>
<summary>ãƒ’ãƒ³ãƒˆ</summary>

1. ç§»å‹•å¹³å‡ã¯å¹³æ»‘åŒ–ã§ã‚ã‚Šã€ãƒˆãƒ¬ãƒ³ãƒ‰é™¤å»ã¨ã¯ç•°ãªã‚‹
2. PCAã®å®šç¾©ï¼ˆåˆ†æ•£æœ€å¤§åŒ–ï¼‰ã‚’ç¢ºèª
3. Pipelineã®å„ã‚¹ãƒ†ãƒƒãƒ—ã®å…¥å‡ºåŠ›ã®å‹ã‚’è€ƒãˆã‚‹

</details>

<details>
<summary>è§£ç­”ä¾‹</summary>

**è§£ç­”**:
1. **èª¤** - ç§»å‹•å¹³å‡ã¯ãƒã‚¤ã‚ºé™¤å»ï¼ˆå¹³æ»‘åŒ–ï¼‰ã§ã‚ã‚Šã€ãƒˆãƒ¬ãƒ³ãƒ‰é™¤å»ã«ã¯å·®åˆ†ã‚„ãƒ‡ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ä½¿ç”¨
2. **æ­£** - PCAã¯åˆ†æ•£ãŒæœ€å¤§ã«ãªã‚‹æ–¹å‘ã‚’ç¬¬1ä¸»æˆåˆ†ã¨ã™ã‚‹
3. **èª¤** - å„ã‚¹ãƒ†ãƒƒãƒ—ã¯é©åˆ‡ãªå¤‰æ›ã‚’è¡Œãˆã°ã€ç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿å‹ã§ã‚‚å¯¾å¿œå¯èƒ½ï¼ˆä¾‹ï¼šImputerâ†’Scalerï¼‰

**è§£èª¬**:
æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ã€Œå¹³æ»‘åŒ–ã€ã€Œãƒˆãƒ¬ãƒ³ãƒ‰é™¤å»ã€ã€Œå®šå¸¸åŒ–ã€ã¯ç•°ãªã‚‹æ¦‚å¿µã§ã™ã€‚ç§»å‹•å¹³å‡ã¯é«˜å‘¨æ³¢ãƒã‚¤ã‚ºã‚’é™¤å»ã—ã¾ã™ãŒã€ä½å‘¨æ³¢ã®ãƒˆãƒ¬ãƒ³ãƒ‰ã¯æ®‹ã‚Šã¾ã™ã€‚PCAã¯æ•™å¸«ãªã—å­¦ç¿’ã®æ¬¡å…ƒå‰Šæ¸›æ‰‹æ³•ã§ã€ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ•£ã‚’æœ€å¤§é™ä¿æŒã—ã¾ã™ã€‚

</details>

<hr />
<h3>å•é¡Œ2ï¼ˆé›£æ˜“åº¦ï¼šmediumï¼‰</h3>
<p>ä»¥ä¸‹ã®ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ã€ç§»å‹•çª“è§£æã¨ç•°å¸¸æ¤œçŸ¥ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p>
<pre><code class="language-python">import numpy as np

# ã‚µãƒ³ãƒ—ãƒ«ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿
np.random.seed(200)
time = np.linspace(0, 500, 5000)
signal = 50 + 10 * np.sin(2 * np.pi * time / 50) + \
         np.random.normal(0, 3, len(time))

# ç•°å¸¸å€¤ã‚’æŒ¿å…¥
signal[2000:2005] = 100
signal[3500] = -20
</code></pre>
<p><strong>è¦æ±‚äº‹é …</strong>:
1. ç§»å‹•å¹³å‡ï¼ˆçª“ã‚µã‚¤ã‚º50ï¼‰ã‚’è¨ˆç®—
2. ç§»å‹•æ¨™æº–åå·®ã‚’è¨ˆç®—
3. 3Ïƒæ³•ã§ç•°å¸¸å€¤ã‚’æ¤œå‡º
4. ç•°å¸¸å€¤ã®æ™‚åˆ»ã‚’å‡ºåŠ›
5. çµæœã‚’å¯è¦–åŒ–</p>
<details>
<summary>ãƒ’ãƒ³ãƒˆ</summary>

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. `pandas.Series.rolling(window=50).mean()`
2. `pandas.Series.rolling(window=50).std()`
3. `np.abs(signal - rolling_mean) > 3 * rolling_std`
4. `time[anomaly_mask]`
5. `matplotlib`ã§å…ƒä¿¡å·ã€ç§»å‹•å¹³å‡ã€Â±3Ïƒç¯„å›²ã€ç•°å¸¸ç‚¹ã‚’ãƒ—ãƒ­ãƒƒãƒˆ

</details>

<details>
<summary>è§£ç­”ä¾‹</summary>


<pre><code class="language-python">import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
np.random.seed(200)
time = np.linspace(0, 500, 5000)
signal = 50 + 10 * np.sin(2 * np.pi * time / 50) + \
         np.random.normal(0, 3, len(time))
signal[2000:2005] = 100
signal[3500] = -20

# DataFrameã«å¤‰æ›
df = pd.DataFrame({'time': time, 'signal': signal})

# ç§»å‹•çµ±è¨ˆé‡
window_size = 50
df['rolling_mean'] = df['signal'].rolling(
    window=window_size, center=True
).mean()
df['rolling_std'] = df['signal'].rolling(
    window=window_size, center=True
).std()

# ç•°å¸¸æ¤œçŸ¥
df['anomaly'] = np.abs(
    df['signal'] - df['rolling_mean']
) &gt; 3 * df['rolling_std']

# ç•°å¸¸æ™‚åˆ»
anomaly_times = df.loc[df['anomaly'], 'time'].values
print(&quot;=== ç•°å¸¸æ¤œçŸ¥çµæœ ===&quot;)
print(f&quot;ç•°å¸¸ç‚¹ã®æ•°: {df['anomaly'].sum()}&quot;)
print(f&quot;ç•°å¸¸ç™ºç”Ÿæ™‚åˆ»: {anomaly_times}&quot;)

# å¯è¦–åŒ–
plt.figure(figsize=(14, 6))

plt.plot(df['time'], df['signal'], label='Raw Signal',
         alpha=0.6, linewidth=0.8)
plt.plot(df['time'], df['rolling_mean'], label='Rolling Mean',
         linewidth=2, color='red')
plt.fill_between(
    df['time'],
    df['rolling_mean'] - 3 * df['rolling_std'],
    df['rolling_mean'] + 3 * df['rolling_std'],
    alpha=0.2, color='red', label='Â±3Ïƒ'
)
plt.scatter(df.loc[df['anomaly'], 'time'],
           df.loc[df['anomaly'], 'signal'],
           color='black', s=50, zorder=5, label='Anomalies')

plt.xlabel('Time (s)')
plt.ylabel('Signal')
plt.title('Rolling Window Analysis and Anomaly Detection')
plt.legend()
plt.grid(True, alpha=0.3)
plt.tight_layout()
plt.show()
</code></pre>


**å‡ºåŠ›ä¾‹**:

<pre><code>=== ç•°å¸¸æ¤œçŸ¥çµæœ ===
ç•°å¸¸ç‚¹ã®æ•°: 6
ç•°å¸¸ç™ºç”Ÿæ™‚åˆ»: [200.04  200.14  200.24  200.34  200.44  350.07]
</code></pre>


**è§£èª¬**:
ç§»å‹•çª“çµ±è¨ˆã«ã‚ˆã‚Šã€ä¿¡å·ã®å±€æ‰€çš„ãªæŒ™å‹•ï¼ˆå¹³å‡ãƒ»æ¨™æº–åå·®ï¼‰ã‚’æ‰ãˆã€3Ïƒãƒ«ãƒ¼ãƒ«ã§çµ±è¨ˆçš„ç•°å¸¸ã‚’æ¤œå‡ºã§ãã¾ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€æ™‚åˆ»200ç§’ä»˜è¿‘ã®ã‚¹ãƒ‘ã‚¤ã‚¯ã¨350ç§’ä»˜è¿‘ã®è² ã®ã‚¹ãƒ‘ã‚¤ã‚¯ãŒæ­£ã—ãæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚

</details>

<hr />
<h3>å•é¡Œ3ï¼ˆé›£æ˜“åº¦ï¼šhardï¼‰</h3>
<p>è¤‡æ•°ã®æ¸¬å®šæŠ€è¡“ï¼ˆXRDã€XPSã€SEMã€ã‚»ãƒ³ã‚µãƒ¼ï¼‰ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆã—ã€ææ–™ã®å“è³ªã‚’äºˆæ¸¬ã™ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ãã ã•ã„ã€‚</p>
<p><strong>èƒŒæ™¯</strong>:
ææ–™åˆæˆå®Ÿé¨“ã§ã€å„ã‚µãƒ³ãƒ—ãƒ«ã«ã¤ã„ã¦ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã•ã‚Œã¾ã—ãŸï¼š
- XRDãƒ”ãƒ¼ã‚¯å¼·åº¦ï¼ˆ3ã¤ã®ä¸»ãƒ”ãƒ¼ã‚¯ï¼‰
- XPSå…ƒç´ çµ„æˆï¼ˆC, O, Fe ã®åŸå­%ï¼‰
- SEMç²’å¾„çµ±è¨ˆï¼ˆå¹³å‡ç›´å¾„ã€æ¨™æº–åå·®ï¼‰
- ãƒ—ãƒ­ã‚»ã‚¹ã‚»ãƒ³ã‚µãƒ¼çµ±è¨ˆï¼ˆæœ€é«˜æ¸©åº¦ã€å¹³å‡åœ§åŠ›ï¼‰</p>
<p>ã“ã‚Œã‚‰11å¤‰æ•°ã‹ã‚‰ã€ææ–™ã®å“è³ªã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰ã‚’äºˆæ¸¬ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚</p>
<p><strong>èª²é¡Œ</strong>:
1. æ¬ æå€¤è£œå®Œã¨æ¨™æº–åŒ–ã‚’å«ã‚€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰
2. PCAã§æ¬¡å…ƒå‰Šæ¸›ï¼ˆç´¯ç©å¯„ä¸ç‡90%ï¼‰
3. å›å¸°ãƒ¢ãƒ‡ãƒ«ï¼ˆRidgeå›å¸°ï¼‰ã§å“è³ªäºˆæ¸¬
4. ã‚¯ãƒ­ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§æ€§èƒ½è©•ä¾¡
5. ç‰¹å¾´é‡é‡è¦åº¦ã®å¯è¦–åŒ–</p>
<p><strong>åˆ¶ç´„æ¡ä»¶</strong>:
- ã‚µãƒ³ãƒ—ãƒ«æ•°100ï¼ˆè¨“ç·´80ã€ãƒ†ã‚¹ãƒˆ20ï¼‰
- ä¸€éƒ¨ãƒ‡ãƒ¼ã‚¿ã«æ¬ æå€¤ã‚ã‚Šï¼ˆ5-10%ï¼‰
- ã‚¹ã‚±ãƒ¼ãƒ«ãŒå¤§ããç•°ãªã‚‹ï¼ˆXRDã¯æ•°åƒã€çµ„æˆã¯0-100%ï¼‰</p>
<details>
<summary>ãƒ’ãƒ³ãƒˆ</summary>

**è¨­è¨ˆæ–¹é‡**:
1. `sklearn.pipeline.Pipeline`ã§çµ±åˆ
2. `SimpleImputer` â†’ `StandardScaler` â†’ `PCA` â†’ `Ridge`
3. `cross_val_score`ã§è©•ä¾¡
4. PCAã®loadingsã‹ã‚‰ç‰¹å¾´é‡é‡è¦åº¦ã‚’è¨ˆç®—

**ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¾‹**:

<pre><code class="language-python">from sklearn.linear_model import Ridge
pipeline = Pipeline([
    ('imputer', SimpleImputer(strategy='median')),
    ('scaler', StandardScaler()),
    ('pca', PCA(n_components=0.9)),
    ('regressor', Ridge(alpha=1.0))
])
</code></pre>


</details>

<details>
<summary>è§£ç­”ä¾‹</summary>

**è§£ç­”ã®æ¦‚è¦**:
æ¬ æå€¤è£œå®Œã€æ¨™æº–åŒ–ã€PCAã€å›å¸°ã‚’çµ±åˆã—ãŸãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§å“è³ªäºˆæ¸¬ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

**å®Ÿè£…ã‚³ãƒ¼ãƒ‰**:


<pre><code class="language-python">import numpy as np
import pandas as pd
from sklearn.pipeline import Pipeline
from sklearn.impute import SimpleImputer
from sklearn.preprocessing import StandardScaler
from sklearn.decomposition import PCA
from sklearn.linear_model import Ridge
from sklearn.model_selection import train_test_split, cross_val_score
from sklearn.metrics import mean_absolute_error, r2_score
import matplotlib.pyplot as plt

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
np.random.seed(42)
n_samples = 100

# ç‰¹å¾´é‡ç”Ÿæˆï¼ˆ11å¤‰æ•°ï¼‰
data = {
    # XRDãƒ”ãƒ¼ã‚¯å¼·åº¦
    'xrd_peak1': np.random.normal(1000, 200, n_samples),
    'xrd_peak2': np.random.normal(1500, 300, n_samples),
    'xrd_peak3': np.random.normal(800, 150, n_samples),

    # XPSçµ„æˆ
    'xps_C': np.random.normal(20, 5, n_samples),
    'xps_O': np.random.normal(50, 10, n_samples),
    'xps_Fe': np.random.normal(30, 8, n_samples),

    # SEMçµ±è¨ˆ
    'sem_mean_diameter': np.random.normal(50, 10, n_samples),
    'sem_std_diameter': np.random.normal(8, 2, n_samples),

    # ã‚»ãƒ³ã‚µãƒ¼çµ±è¨ˆ
    'max_temperature': np.random.normal(300, 50, n_samples),
    'avg_pressure': np.random.normal(10, 3, n_samples),
    'total_flow': np.random.normal(100, 20, n_samples)
}

df = pd.DataFrame(data)

# å“è³ªã‚¹ã‚³ã‚¢ï¼ˆè¤‡æ•°å¤‰æ•°ã®ç·šå½¢çµåˆ + ãƒã‚¤ã‚ºï¼‰
quality_score = (
    0.02 * df['xrd_peak2'] +
    0.5 * df['xps_Fe'] +
    0.3 * df['sem_mean_diameter'] +
    0.1 * df['max_temperature'] +
    np.random.normal(0, 5, n_samples)
)
quality_score = np.clip(quality_score, 0, 100)

# æ¬ æå€¤ã‚’æ„å›³çš„ã«æŒ¿å…¥ï¼ˆ5%ï¼‰
mask = np.random.rand(n_samples, 11) &lt; 0.05
df_with_missing = df.copy()
df_with_missing[mask] = np.nan

# ãƒ‡ãƒ¼ã‚¿åˆ†å‰²
X = df_with_missing.values
y = quality_score.values

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42
)

# ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰
pipeline = Pipeline([
    ('imputer', SimpleImputer(strategy='median')),
    ('scaler', StandardScaler()),
    ('pca', PCA(n_components=0.9)),  # ç´¯ç©å¯„ä¸ç‡90%
    ('regressor', Ridge(alpha=1.0))
])

# è¨“ç·´
pipeline.fit(X_train, y_train)

# äºˆæ¸¬
y_pred_train = pipeline.predict(X_train)
y_pred_test = pipeline.predict(X_test)

# æ€§èƒ½è©•ä¾¡
train_r2 = r2_score(y_train, y_pred_train)
test_r2 = r2_score(y_test, y_pred_test)
test_mae = mean_absolute_error(y_test, y_pred_test)

# ã‚¯ãƒ­ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
cv_scores = cross_val_score(pipeline, X_train, y_train, cv=5,
                            scoring='r2')

print(&quot;=== ãƒ¢ãƒ‡ãƒ«æ€§èƒ½ ===&quot;)
print(f&quot;è¨“ç·´ RÂ²: {train_r2:.3f}&quot;)
print(f&quot;ãƒ†ã‚¹ãƒˆ RÂ²: {test_r2:.3f}&quot;)
print(f&quot;ãƒ†ã‚¹ãƒˆ MAE: {test_mae:.2f}&quot;)
print(f&quot;CV RÂ² (mean Â± std): {cv_scores.mean():.3f} Â± {cv_scores.std():.3f}&quot;)

# PCAæˆåˆ†æ•°
n_components = pipeline.named_steps['pca'].n_components_
print(f&quot;\nPCAä¸»æˆåˆ†æ•°: {n_components}&quot;)
print(f&quot;ç´¯ç©å¯„ä¸ç‡: {pipeline.named_steps['pca'].explained_variance_ratio_.sum()*100:.1f}%&quot;)

# å¯è¦–åŒ–
fig, axes = plt.subplots(2, 2, figsize=(14, 12))

# äºˆæ¸¬ vs å®Ÿæ¸¬ï¼ˆè¨“ç·´ãƒ‡ãƒ¼ã‚¿ï¼‰
axes[0, 0].scatter(y_train, y_pred_train, alpha=0.6, s=30)
axes[0, 0].plot([0, 100], [0, 100], 'r--', linewidth=2)
axes[0, 0].set_xlabel('True Quality Score')
axes[0, 0].set_ylabel('Predicted Quality Score')
axes[0, 0].set_title(f'Training Set (RÂ²={train_r2:.3f})')
axes[0, 0].grid(True, alpha=0.3)

# äºˆæ¸¬ vs å®Ÿæ¸¬ï¼ˆãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼‰
axes[0, 1].scatter(y_test, y_pred_test, alpha=0.6, s=30, color='orange')
axes[0, 1].plot([0, 100], [0, 100], 'r--', linewidth=2)
axes[0, 1].set_xlabel('True Quality Score')
axes[0, 1].set_ylabel('Predicted Quality Score')
axes[0, 1].set_title(f'Test Set (RÂ²={test_r2:.3f})')
axes[0, 1].grid(True, alpha=0.3)

# æ®‹å·®ãƒ—ãƒ­ãƒƒãƒˆ
residuals = y_test - y_pred_test
axes[1, 0].scatter(y_pred_test, residuals, alpha=0.6, s=30, color='green')
axes[1, 0].axhline(y=0, color='r', linestyle='--', linewidth=2)
axes[1, 0].set_xlabel('Predicted Quality Score')
axes[1, 0].set_ylabel('Residuals')
axes[1, 0].set_title('Residual Plot')
axes[1, 0].grid(True, alpha=0.3)

# ç‰¹å¾´é‡é‡è¦åº¦ï¼ˆPCA loadingsï¼‰
pca = pipeline.named_steps['pca']
loadings = np.abs(pca.components_).sum(axis=0)
feature_importance = loadings / loadings.sum()

feature_names = list(data.keys())
axes[1, 1].barh(feature_names, feature_importance, alpha=0.7)
axes[1, 1].set_xlabel('Importance (normalized)')
axes[1, 1].set_title('Feature Importance (PCA Loadings)')
axes[1, 1].grid(True, alpha=0.3, axis='x')

plt.tight_layout()
plt.show()

# ç‰¹å¾´é‡é‡è¦åº¦ãƒ©ãƒ³ã‚­ãƒ³ã‚°
importance_df = pd.DataFrame({
    'Feature': feature_names,
    'Importance': feature_importance
}).sort_values('Importance', ascending=False)

print(&quot;\n=== ç‰¹å¾´é‡é‡è¦åº¦ãƒ©ãƒ³ã‚­ãƒ³ã‚° ===&quot;)
print(importance_df.to_string(index=False))
</code></pre>


**çµæœä¾‹**:

<pre><code>=== ãƒ¢ãƒ‡ãƒ«æ€§èƒ½ ===
è¨“ç·´ RÂ²: 0.892
ãƒ†ã‚¹ãƒˆ RÂ²: 0.867
ãƒ†ã‚¹ãƒˆ MAE: 4.23
CV RÂ² (mean Â± std): 0.875 Â± 0.032

PCAä¸»æˆåˆ†æ•°: 6
ç´¯ç©å¯„ä¸ç‡: 91.2%

=== ç‰¹å¾´é‡é‡è¦åº¦ãƒ©ãƒ³ã‚­ãƒ³ã‚° ===
          Feature  Importance
      xrd_peak2      0.1456
        xps_Fe      0.1289
sem_mean_diameter   0.1142
max_temperature     0.1078
      xrd_peak1     0.0987
      avg_pressure  0.0921
      ...
</code></pre>


**è©³ç´°ãªè§£èª¬**:
1. **æ¬ æå€¤å¯¾å¿œ**: `SimpleImputer`ã§ä¸­å¤®å€¤è£œå®Œï¼ˆå¤–ã‚Œå€¤ã«é ‘å¥ï¼‰
2. **æ¨™æº–åŒ–**: ç•°ãªã‚‹ã‚¹ã‚±ãƒ¼ãƒ«ã®å¤‰æ•°ã‚’çµ±ä¸€ï¼ˆPCAã«å¿…é ˆï¼‰
3. **PCA**: 11å¤‰æ•°â†’6ä¸»æˆåˆ†ã«å‰Šæ¸›ï¼ˆæƒ…å ±æå¤±10%æœªæº€ï¼‰
4. **Ridgeå›å¸°**: L2æ­£å‰‡åŒ–ã«ã‚ˆã‚Šéå­¦ç¿’ã‚’æŠ‘åˆ¶
5. **ç‰¹å¾´é‡é‡è¦åº¦**: XRDãƒ”ãƒ¼ã‚¯2ã€Feçµ„æˆã€ç²’å¾„ãŒé‡è¦ã¨åˆ¤æ˜

**è¿½åŠ ã®æ¤œè¨äº‹é …**:
- ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ï¼ˆGridSearchCVï¼‰
- éç·šå½¢ãƒ¢ãƒ‡ãƒ«ï¼ˆRandomForestã€XGBoostï¼‰ã®æ¤œè¨
- SHAPã«ã‚ˆã‚‹äºˆæ¸¬ã®è§£é‡ˆæ€§å‘ä¸Š
- å®Ÿé¨“è¨ˆç”»æ³•ï¼ˆDOEï¼‰ã¨ã®çµ±åˆ

</details>

<hr />
<h2>å‚è€ƒæ–‡çŒ®</h2>
<ol>
<li>
<p>Hyndman, R. J., &amp; Athanasopoulos, G. (2018). "Forecasting: Principles and Practice." OTexts. URL: <a href="https://otexts.com/fpp2/">https://otexts.com/fpp2/</a></p>
</li>
<li>
<p>Jolliffe, I. T., &amp; Cadima, J. (2016). "Principal component analysis: a review and recent developments." <em>Philosophical Transactions of the Royal Society A</em>, 374(2065). DOI: <a href="https://doi.org/10.1098/rsta.2015.0202">10.1098/rsta.2015.0202</a></p>
</li>
<li>
<p>Pedregosa, F. et al. (2011). "Scikit-learn: Machine Learning in Python." <em>Journal of Machine Learning Research</em>, 12, 2825-2830.</p>
</li>
<li>
<p>sklearn Documentation: Pipeline. URL: <a href="https://scikit-learn.org/stable/modules/compose.html">https://scikit-learn.org/stable/modules/compose.html</a></p>
</li>
<li>
<p>Chandola, V. et al. (2009). "Anomaly detection: A survey." <em>ACM Computing Surveys</em>, 41(3), 1-58. DOI: <a href="https://doi.org/10.1145/1541880.1541882">10.1145/1541880.1541882</a></p>
</li>
</ol>
<hr />
<h2>ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³</h2>
<h3>å‰ã®ç« </h3>
<p><strong><a href="./chapter-3.html">ç¬¬3ç« ï¼šç”»åƒãƒ‡ãƒ¼ã‚¿è§£æ â†</a></strong></p>
<h3>ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡</h3>
<p><strong><a href="./index.html">â† ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ã«æˆ»ã‚‹</a></strong></p>
<hr />
<h2>è‘—è€…æƒ…å ±</h2>
<p><strong>ä½œæˆè€…</strong>: AI Terakoya Content Team
<strong>ä½œæˆæ—¥</strong>: 2025-10-17
<strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.1</p>
<p><strong>æ›´æ–°å±¥æ­´</strong>:
- 2025-10-19: v1.1 å“è³ªæ”¹å–„ç‰ˆå…¬é–‹
  - ãƒ‡ãƒ¼ã‚¿ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨å†ç¾æ€§ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ ï¼ˆ4.2ç¯€ï¼‰
  - å®Ÿè·µçš„ãªè½ã¨ã—ç©´5ä¾‹è¿½åŠ ï¼ˆ4.6ç¯€ï¼‰
  - æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ«ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¿½åŠ ï¼ˆ4.7ç¯€ï¼‰
  - ç·åˆã‚¹ã‚­ãƒ«è©•ä¾¡ã¨è¡Œå‹•è¨ˆç”»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¿½åŠ ï¼ˆ4.8-4.9ç¯€ï¼‰
- 2025-10-17: v1.0 åˆç‰ˆå…¬é–‹</p>
<p><strong>ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</strong>:
- GitHub Issues: [ãƒªãƒã‚¸ãƒˆãƒªURL]/issues
- Email: yusuke.hashimoto.b8@tohoku.ac.jp</p>
<p><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0</p>
<hr />
<h2>ã‚·ãƒªãƒ¼ã‚ºå®Œäº†</h2>
<p><strong>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿è§£æå…¥é–€ã‚·ãƒªãƒ¼ã‚ºã‚’å®Œäº†ã—ã¾ã—ãŸï¼</strong></p>
<p>æœ¬ã‚·ãƒªãƒ¼ã‚ºã§ç¿’å¾—ã—ãŸã‚¹ã‚­ãƒ«ï¼š
- âœ… ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ï¼ˆãƒã‚¤ã‚ºé™¤å»ã€å¤–ã‚Œå€¤æ¤œå‡ºã€æ¨™æº–åŒ–ï¼‰
- âœ… ã‚¹ãƒšã‚¯ãƒˆãƒ«è§£æï¼ˆXRDã€XPSã€IRã€Ramanï¼‰
- âœ… ç”»åƒè§£æï¼ˆSEMã€TEMã€ç²’å­æ¤œå‡ºã€CNNï¼‰
- âœ… æ™‚ç³»åˆ—è§£æï¼ˆã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã€PCAã€Pipelineï¼‰</p>
<p><strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</strong>:
- æ©Ÿæ¢°å­¦ç¿’å¿œç”¨ç·¨ï¼ˆå›å¸°ã€åˆ†é¡ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ï¼‰
- æ·±å±¤å­¦ç¿’å…¥é–€ï¼ˆPyTorchã€TensorFlowï¼‰
- ãƒ™ã‚¤ã‚ºæœ€é©åŒ–ã«ã‚ˆã‚‹ææ–™æ¢ç´¢
- å®Ÿé¨“è¨ˆç”»æ³•ï¼ˆDOEï¼‰ã¨ã®çµ±åˆ</p>
<p>å¼•ãç¶šãã€AI Terakoyaã§å­¦ç¿’ã‚’æ·±ã‚ã¾ã—ã‚‡ã†ï¼</p><div class="navigation">
    <a href="chapter-3.html" class="nav-button">â† å‰ã®ç« </a>
    <a href="index.html" class="nav-button">ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ã«æˆ»ã‚‹</a>
</div>
    </main>

    
    <section class="disclaimer">
        <h3>å…è²¬äº‹é …</h3>
        <ul>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯æ•™è‚²ãƒ»ç ”ç©¶ãƒ»æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€å°‚é–€çš„ãªåŠ©è¨€(æ³•å¾‹ãƒ»ä¼šè¨ˆãƒ»æŠ€è¡“çš„ä¿è¨¼ãªã©)ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŠã‚ˆã³ä»˜éšã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹ã¯ã€Œç¾çŠ¶æœ‰å§¿(AS IS)ã€ã§æä¾›ã•ã‚Œã€æ˜ç¤ºã¾ãŸã¯é»™ç¤ºã‚’å•ã‚ãšã€å•†å“æ€§ã€ç‰¹å®šç›®çš„é©åˆæ€§ã€æ¨©åˆ©éä¾µå®³ã€æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã€å‹•ä½œãƒ»å®‰å…¨æ€§ç­‰ã„ã‹ãªã‚‹ä¿è¨¼ã‚‚ã—ã¾ã›ã‚“ã€‚</li>
            <li>å¤–éƒ¨ãƒªãƒ³ã‚¯ã€ç¬¬ä¸‰è€…ãŒæä¾›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã®å†…å®¹ãƒ»å¯ç”¨æ€§ãƒ»å®‰å…¨æ€§ã«ã¤ã„ã¦ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ãƒ»å®Ÿè¡Œãƒ»è§£é‡ˆã«ã‚ˆã‚Šç›´æ¥çš„ãƒ»é–“æ¥çš„ãƒ»ä»˜éšçš„ãƒ»ç‰¹åˆ¥ãƒ»çµæœçš„ãƒ»æ‡²ç½°çš„æå®³ãŒç”Ÿã˜ãŸå ´åˆã§ã‚‚ã€é©ç”¨æ³•ã§è¨±å®¹ã•ã‚Œã‚‹æœ€å¤§é™ã®ç¯„å›²ã§ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å†…å®¹ã¯ã€äºˆå‘Šãªãå¤‰æ›´ãƒ»æ›´æ–°ãƒ»æä¾›åœæ­¢ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‘—ä½œæ¨©ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯æ˜è¨˜ã•ã‚ŒãŸæ¡ä»¶(ä¾‹: CC BY 4.0)ã«å¾“ã„ã¾ã™ã€‚å½“è©²ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯é€šå¸¸ã€ç„¡ä¿è¨¼æ¡é …ã‚’å«ã¿ã¾ã™ã€‚</li>
        </ul>
    </section>

<footer>
        <p><strong>ä½œæˆè€…</strong>: AI Terakoya Content Team</p>
        <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.1 | <strong>ä½œæˆæ—¥</strong>: 2025-10-17</p>
        <p><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0</p>
        <p>Â© 2025 AI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
