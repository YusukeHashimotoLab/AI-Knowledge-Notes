<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第2章：PIの基礎知識 - 概念・手法・エコシステム - AI Terakoya</title>

    <style>
        :root {
            --color-primary: #2c3e50;
            --color-primary-dark: #1a252f;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-text: #2d3748;
            --color-text-light: #4a5568;
            --color-bg: #ffffff;
            --color-bg-alt: #f7fafc;
            --color-border: #e2e8f0;
            --color-code-bg: #f8f9fa;
            --color-link: #3182ce;
            --color-link-hover: #2c5aa0;

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

            --border-radius: 8px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-bg);
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--box-shadow);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md) var(--spacing-xl);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--color-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-xs);
            border-bottom: 3px solid var(--color-accent);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        h4 {
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        li {
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            overflow-x: auto;
            margin-bottom: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: var(--font-mono);
            font-size: 0.9em;
            background-color: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-md);
            font-size: 0.95rem;
        }

        th, td {
            border: 1px solid var(--color-border);
            padding: var(--spacing-sm);
            text-align: left;
        }

        th {
            background-color: var(--color-bg-alt);
            font-weight: 600;
            color: var(--color-primary);
        }

        blockquote {
            border-left: 4px solid var(--color-accent);
            padding-left: var(--spacing-md);
            margin: var(--spacing-md) 0;
            color: var(--color-text-light);
            font-style: italic;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        .mermaid {
            text-align: center;
            margin: var(--spacing-lg) 0;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        details {
            background-color: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-primary);
            user-select: none;
            padding: var(--spacing-xs);
            margin: calc(-1 * var(--spacing-md));
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        summary:hover {
            background-color: rgba(123, 44, 191, 0.1);
        }

        details[open] summary {
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .learning-objectives {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--color-accent);
            margin-bottom: var(--spacing-xl);
        }

        .learning-objectives h2 {
            margin-top: 0;
            border-bottom: none;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--color-border);
        }

        .nav-button {
            flex: 1;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--box-shadow);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-decoration: none;
        }

        footer {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-md);
            background-color: var(--color-bg-alt);
            border-top: 1px solid var(--color-border);
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }
        .disclaimer {
            max-width: 900px;
            margin: 2rem auto;
            padding: 1.5rem;
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
            border-radius: 4px;
        }

        .disclaimer h3 {
            color: #495057;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .disclaimer ul {
            list-style: none;
            padding-left: 0;
        }

        .disclaimer li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            font-size: 0.9rem;
            color: #6c757d;
            line-height: 1.6;
        }

        .disclaimer li::before {
            content: "⚠️";
            position: absolute;
            left: 0;
        }


        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            .navigation {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: var(--spacing-xs);
            }
        }
    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'strict' });
    </script>

    <!-- MathJax for LaTeX equation rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'mermaid'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
</head>
<body>
        <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="/wp/knowledge/jp/index.html">AI寺子屋トップ</a><span class="breadcrumb-separator">›</span><a href="/wp/knowledge/jp/MI/index.html">マテリアルズ・インフォマティクス</a><span class="breadcrumb-separator">›</span><a href="/wp/knowledge/jp/MI/pi-introduction/index.html">Pi</a><span class="breadcrumb-separator">›</span><span class="breadcrumb-current">Chapter 2</span>
        </div>
    </nav>

    <header>
        <div class="header-content">
            <h1>第2章：PIの基礎知識 - 概念・手法・エコシステム</h1>
            <p class="subtitle">データ駆動型プロセス開発の理論と実践</p>
            <div class="meta">
                <span class="meta-item">📖 読了時間: 20-25分</span>
                <span class="meta-item">📊 難易度: 入門〜中級</span>
                <span class="meta-item">💻 コード例: 0個</span>
                <span class="meta-item">📝 演習問題: 0問</span>
            </div>
        </div>
    </header>

    <main class="container">
<h1>第2章：PIの基礎知識 - 概念・手法・エコシステム</h1>
<p class="chapter-description" style="margin: 1.5rem 0; padding: 1rem; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-left: 4px solid #7b2cbf; border-radius: 8px; font-size: 1.05rem; line-height: 1.8; color: #2d3748;">温度・圧力・流量など時系列中心のデータ特性を整理し、前処理と特徴設計の基本を押さえます。異常検知や季節性の扱い方も概観します。</p>
<p class="chapter-supplement" style="margin: 0.75rem 0 1.5rem 0; padding: 0.75rem 1rem; background: linear-gradient(135deg, #fff8e1 0%, #fff3cd 100%); border-left: 3px solid #f59e0b; border-radius: 6px; font-size: 0.95rem; line-height: 1.7; color: #4a5568;"><strong>💡 補足:</strong> 欠測・外れ値の扱いを先に決めると後工程が安定。ラグ特徴や移動平均はまず試す基本手筋です。</p>





<h2>学習目標</h2>
<p>この章を読むことで、以下を習得できます：
- PIの定義と関連分野（品質工学、実験計画法等）との違いを説明できる
- 化学プロセスの主要データタイプ（時系列、バッチ、品質データ）を理解する
- PIの基本ワークフロー5ステップ（問題定式化から実装まで）を詳細に説明できる
- プロセス記述子（物理化学パラメータ、装置特性）の種類と重要性を理解する
- PI領域で頻出する専門用語20語を正しく使用できる</p>
<hr />
<h2>2.1 PIとは何か：定義と関連分野</h2>
<h3>2.1.1 Process Informaticsの語源と歴史</h3>
<p><strong>プロセスインフォマティクス（Process Informatics, PI）</strong>という用語は、2000年代初頭から使われるようになりました。特に<strong>Industry 4.0</strong>（第4次産業革命、2011年ドイツで提唱）の文脈で注目を集めました[1]。</p>
<p><strong>Industry 4.0の4つの柱:</strong>
1. <strong>IoT（Internet of Things）</strong>: センサーネットワークによるデータ収集
2. <strong>ビッグデータ</strong>: 大量データの蓄積と管理
3. <strong>AI/機械学習</strong>: データからの知識抽出と予測
4. <strong>サイバーフィジカルシステム</strong>: デジタル空間と物理世界の統合</p>
<p>PIは、これらの技術を<strong>化学プロセス産業に適用</strong>したものと言えます。</p>
<h3>2.1.2 定義</h3>
<p><strong>プロセスインフォマティクス（Process Informatics, PI）</strong>とは、化学プロセス工学とデータサイエンスを融合させた学問分野です。大量のプロセスデータと機械学習などの情報科学技術を活用して、プロセスの最適化、品質管理、異常検知、予測保全を実現する手法です。</p>
<p><strong>簡潔な定義:</strong></p>
<blockquote>
<p>「データとAIの力で化学プロセスを最適化し、スマート化する科学」</p>
</blockquote>
<p><strong>コア要素:</strong>
1. <strong>データ</strong>: プロセスデータ、品質データ、運転データ
2. <strong>モデリング</strong>: 機械学習、統計モデル、物理モデル
3. <strong>最適化</strong>: ベイズ最適化、多目的最適化、進化計算
4. <strong>実装</strong>: プロセス制御、リアルタイム監視</p>
<h3>2.1.3 関連分野との比較</h3>
<p>PIは複数の分野と関連していますが、それぞれ異なる焦点を持っています。</p>
<table>
<thead>
<tr>
<th>分野</th>
<th>対象</th>
<th>主な手法</th>
<th>目的</th>
<th>PIとの関係</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>品質工学<br>(Quality Engineering, QE)</strong></td>
<td>製品品質の安定化</td>
<td>タグチメソッド、SN比、ロバスト設計</td>
<td>バラツキの最小化</td>
<td>PIはQEのデータ分析を高度化</td>
</tr>
<tr>
<td><strong>実験計画法<br>(Design of Experiments, DoE)</strong></td>
<td>効率的な実験設計</td>
<td>直交表、応答曲面法</td>
<td>少ない実験で最適化</td>
<td>PIはDoEと機械学習を組み合わせ</td>
</tr>
<tr>
<td><strong>統計的プロセス管理<br>(Statistical Process Control, SPC)</strong></td>
<td>プロセスの安定性監視</td>
<td>管理図、Cp/Cpk</td>
<td>異常の早期検出</td>
<td>PIはSPCに予測機能を追加</td>
</tr>
<tr>
<td><strong>プロセス制御<br>(Process Control)</strong></td>
<td>プロセスの自動制御</td>
<td>PID制御、MPC</td>
<td>目標値への追従</td>
<td>PIは制御パラメータを最適化</td>
</tr>
<tr>
<td><strong>プロセスインフォマティクス<br>(PI)</strong></td>
<td>プロセス全体の最適化</td>
<td>機械学習、最適化、リアルタイム分析</td>
<td>収率・品質・コスト・環境の同時最適化</td>
<td>-</td>
</tr>
</tbody>
</table>
<p><strong>PIの独自性:</strong>
- <strong>統合的アプローチ</strong>: 品質、制御、最適化を統合
- <strong>データ駆動</strong>: 大量の実測データから学習
- <strong>リアルタイム対応</strong>: オンライン分析とフィードバック制御
- <strong>多目的最適化</strong>: 収率、品質、コスト、環境を同時に考慮</p>
<h3>2.1.4 従来のプロセス開発 vs PI</h3>
<div class="mermaid">
flowchart LR
    subgraph "従来のプロセス開発"
        A1[経験則] --> A2[実験計画法]
        A2 --> A3[少数の実験]
        A3 --> A4[結果分析]
        A4 --> A5[手動最適化]
    end

    subgraph "PI手法"
        B1[過去データ] --> B2[機械学習]
        B2 --> B3[大量予測]
        B3 --> B4[ベイズ最適化]
        B4 --> B5[自動フィードバック]
        B5 - 継続学習 .-> B2
    end

    A1 -.比較.- B1
</div>

<hr />
<h2>2.2 PI用語集：必須の20用語</h2>
<p>PIを学ぶ上で頻出する専門用語をカテゴリ別にまとめました。</p>
<h3>基礎用語（1-7）</h3>
<table>
<thead>
<tr>
<th>用語（日本語）</th>
<th>用語（英語）</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1. プロセス変数</strong></td>
<td>Process Variable (PV)</td>
<td>プロセスの状態を表す測定可能な量。温度、圧力、流量、pH、濃度など。制御の対象となる。</td>
</tr>
<tr>
<td><strong>2. 記述子</strong></td>
<td>Descriptor</td>
<td>プロセスの特徴を数値で表現したもの。機械学習モデルへの入力として使用される。例：反応温度、触媒量、滞留時間。</td>
</tr>
<tr>
<td><strong>3. 目的関数</strong></td>
<td>Objective Function</td>
<td>最適化の目標を数式で表現したもの。例：収率の最大化、コストの最小化。多目的最適化では複数の目的関数を同時に考慮。</td>
</tr>
<tr>
<td><strong>4. 制約条件</strong></td>
<td>Constraints</td>
<td>最適化において満たすべき条件。例：温度上限200°C、圧力下限1気圧、品質規格≥99%。</td>
</tr>
<tr>
<td><strong>5. バッチプロセス</strong></td>
<td>Batch Process</td>
<td>原料を一度に投入し、反応・処理後に製品を取り出すプロセス。医薬品、ファインケミカルに多い。</td>
</tr>
<tr>
<td><strong>6. 連続プロセス</strong></td>
<td>Continuous Process</td>
<td>原料を連続的に供給し、製品を連続的に取り出すプロセス。石油化学、大量生産に適する。</td>
</tr>
<tr>
<td><strong>7. スケールアップ</strong></td>
<td>Scale-up</td>
<td>実験室レベルから商業プラントへのプロセス拡大。反応器サイズが1,000倍以上になることも。</td>
</tr>
</tbody>
</table>
<h3>手法用語（8-14）</h3>
<table>
<thead>
<tr>
<th>用語（日本語）</th>
<th>用語（英語）</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>8. ベイズ最適化</strong></td>
<td>Bayesian Optimization</td>
<td>実験回数を最小限に抑えながら最適条件を探索する手法。ガウス過程を用いて次の実験候補を決定する。</td>
</tr>
<tr>
<td><strong>9. 多目的最適化</strong></td>
<td>Multi-objective Optimization</td>
<td>複数の目的（例：収率と純度、コストと品質）を同時に最適化する手法。通常トレードオフの関係にある。</td>
</tr>
<tr>
<td><strong>10. 応答曲面法</strong></td>
<td>Response Surface Methodology (RSM)</td>
<td>入力変数と出力の関係を曲面（多項式）で近似し、最適条件を探索する手法。実験計画法と組み合わせて使用。</td>
</tr>
<tr>
<td><strong>11. 実験計画法</strong></td>
<td>Design of Experiments (DoE)</td>
<td>効率的に情報を得るための実験の組み合わせを設計する手法。直交表、Box-Behnken設計など。</td>
</tr>
<tr>
<td><strong>12. 異常検知</strong></td>
<td>Anomaly Detection</td>
<td>正常運転からの逸脱を自動的に検出する手法。機械学習（One-Class SVM、Isolation Forestなど）を活用。</td>
</tr>
<tr>
<td><strong>13. ソフトセンサー</strong></td>
<td>Soft Sensor</td>
<td>測定困難な変数を、測定可能な変数から推定する技術。例：品質をオンライン推定（GC測定の代替）。</td>
</tr>
<tr>
<td><strong>14. モデル予測制御</strong></td>
<td>Model Predictive Control (MPC)</td>
<td>プロセスモデルに基づき、将来の挙動を予測しながら制御する高度な制御手法。多変数制御に有効。</td>
</tr>
</tbody>
</table>
<h3>応用用語（15-20）</h3>
<table>
<thead>
<tr>
<th>用語（日本語）</th>
<th>用語（英語）</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>15. デジタルツイン</strong></td>
<td>Digital Twin</td>
<td>物理プロセスをデジタル空間上に再現したシミュレーションモデル。リアルタイムでプロセスを鏡のように模擬。</td>
</tr>
<tr>
<td><strong>16. 予知保全</strong></td>
<td>Predictive Maintenance</td>
<td>設備の故障を事前に予測し、計画的に保全を実施する手法。ダウンタイムの最小化。</td>
</tr>
<tr>
<td><strong>17. DCS</strong></td>
<td>Distributed Control System</td>
<td>プラント全体を分散制御するシステム。温度、圧力、流量などを自動制御。</td>
</tr>
<tr>
<td><strong>18. SCADA</strong></td>
<td>Supervisory Control and Data Acquisition</td>
<td>プロセスの監視と制御を行うシステム。オペレーターが状態を可視化。</td>
</tr>
<tr>
<td><strong>19. パレートフロント</strong></td>
<td>Pareto Front</td>
<td>多目的最適化において、どの目的も改善できない解の集合。最適な妥協点を示す。</td>
</tr>
<tr>
<td><strong>20. オンライン分析</strong></td>
<td>Online Analysis</td>
<td>プロセス稼働中にリアルタイムで成分分析を行う技術。例：オンラインGC、NIR分光分析。</td>
</tr>
</tbody>
</table>
<p><strong>用語学習のポイント:</strong>
- まずは1-7（基礎用語）を優先的に理解
- 8-14（手法用語）は中級レベルで詳細を学習
- 15-20（応用用語）は実践プロジェクトで活用</p>
<hr />
<h2>2.3 プロセスデータの種類と特徴</h2>
<p>化学プロセスでは、多様なタイプのデータが生成されます。それぞれの特徴を理解することが、PI手法を適用する上で重要です。</p>
<h3>2.3.1 時系列データ（Time Series Data）</h3>
<p><strong>特徴:</strong>
- 時間軸に沿って連続的に測定されるデータ
- サンプリング頻度: 1秒〜1分ごと
- 膨大なデータ量（1センサー × 1日 = 86,400データポイント）</p>
<p><strong>典型例:</strong></p>
<table>
<thead>
<tr>
<th>測定項目</th>
<th>サンプリング頻度</th>
<th>データ量/日</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>反応器温度</td>
<td>1秒</td>
<td>86,400点</td>
<td>リアルタイム制御</td>
</tr>
<tr>
<td>圧力</td>
<td>1秒</td>
<td>86,400点</td>
<td>安全監視</td>
</tr>
<tr>
<td>流量</td>
<td>5秒</td>
<td>17,280点</td>
<td>物質収支計算</td>
</tr>
<tr>
<td>pH</td>
<td>10秒</td>
<td>8,640点</td>
<td>反応進行監視</td>
</tr>
</tbody>
</table>
<p><strong>分析手法:</strong>
- <strong>時系列予測</strong>: ARIMA、Prophet、LSTM（ディープラーニング）
- <strong>異常検知</strong>: 管理図、One-Class SVM
- <strong>トレンド分析</strong>: 移動平均、季節性分解</p>
<p><strong>課題:</strong>
- ノイズが多い（センサー精度、外部環境の影響）
- 欠損値（センサー故障、通信エラー）
- データ量が膨大（1プラント × 1年 = 数TB）</p>
<h3>2.3.2 バッチデータ（Batch Data）</h3>
<p><strong>特徴:</strong>
- バッチごとに1つのデータポイント
- 各バッチは独立した製造単位
- バッチ間で条件が微妙に異なる</p>
<p><strong>典型例（医薬品バッチ）:</strong></p>
<table>
<thead>
<tr>
<th>バッチID</th>
<th>原料ロット</th>
<th>反応温度(°C)</th>
<th>反応時間(h)</th>
<th>収率(%)</th>
<th>純度(%)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Batch001</td>
<td>Lot-A</td>
<td>85</td>
<td>4.5</td>
<td>92.3</td>
<td>99.2</td>
</tr>
<tr>
<td>Batch002</td>
<td>Lot-A</td>
<td>87</td>
<td>4.3</td>
<td>91.8</td>
<td>99.1</td>
</tr>
<tr>
<td>Batch003</td>
<td>Lot-B</td>
<td>85</td>
<td>4.6</td>
<td>90.5</td>
<td>99.3</td>
</tr>
</tbody>
</table>
<p><strong>分析手法:</strong>
- <strong>回帰分析</strong>: 線形回帰、ランダムフォレスト
- <strong>バッチ間変動解析</strong>: ANOVA、主成分分析（PCA）
- <strong>最適化</strong>: ベイズ最適化、応答曲面法</p>
<p><strong>課題:</strong>
- サンプル数が少ない（年間数十〜数百バッチ）
- バッチ間の微妙な違いを捉える必要がある
- 原料ロット依存性</p>
<h3>2.3.3 品質データ（Quality Data）</h3>
<p><strong>特徴:</strong>
- 製品の品質を表すデータ
- オフライン測定が多い（GC、HPLC、NMRなど）
- 測定に時間とコストがかかる</p>
<p><strong>典型例:</strong></p>
<table>
<thead>
<tr>
<th>測定項目</th>
<th>測定方法</th>
<th>頻度</th>
<th>コスト/測定</th>
<th>測定時間</th>
</tr>
</thead>
<tbody>
<tr>
<td>主成分含量</td>
<td>HPLC</td>
<td>各バッチ</td>
<td>5,000円</td>
<td>30分</td>
</tr>
<tr>
<td>不純物プロファイル</td>
<td>GC-MS</td>
<td>各バッチ</td>
<td>10,000円</td>
<td>1時間</td>
</tr>
<tr>
<td>分子量分布</td>
<td>GPC</td>
<td>各バッチ</td>
<td>8,000円</td>
<td>45分</td>
</tr>
<tr>
<td>結晶構造</td>
<td>XRD</td>
<td>抜き取り（10%）</td>
<td>20,000円</td>
<td>2時間</td>
</tr>
</tbody>
</table>
<p><strong>分析手法:</strong>
- <strong>品質予測（ソフトセンサー）</strong>: プロセス変数から品質を推定
- <strong>品質管理</strong>: 管理図、Cp/Cpk
- <strong>規格外判定</strong>: 分類モデル（SVM、ロジスティック回帰）</p>
<p><strong>課題:</strong>
- 測定頻度が低い（リアルタイムではない）
- 測定誤差がある
- コストが高い</p>
<h3>2.3.4 運転データ（Operational Data）</h3>
<p><strong>特徴:</strong>
- プラントの運転状態を表すデータ
- オペレーターの操作履歴、アラーム、イベントログ</p>
<p><strong>典型例:</strong></p>
<pre><code>2025-10-16 09:15:32 | 高温アラーム | 反応器R-101 | 温度120°C（上限115°C）
2025-10-16 09:16:05 | オペレーター操作 | 冷却水流量増加 | 50 L/min → 70 L/min
2025-10-16 09:18:20 | アラーム解除 | 反応器R-101 | 温度112°C
</code></pre>
<p><strong>分析手法:</strong>
- <strong>イベントログ解析</strong>: 異常発生パターンの抽出
- <strong>アラーム頻度分析</strong>: 真のアラーム vs 誤報の判別
- <strong>根本原因分析</strong>: アラームの連鎖を追跡</p>
<h3>2.3.5 データの統合と前処理</h3>
<p>PIでは、これらの異なるタイプのデータを<strong>統合</strong>して活用します。</p>
<p><strong>前処理のステップ:</strong></p>
<ol>
<li><strong>データクリーニング</strong>: 異常値、欠損値の除去</li>
<li><strong>時間軸の統一</strong>: サンプリング頻度の異なるデータを同期</li>
<li><strong>正規化</strong>: スケールの異なるデータを0-1または標準化</li>
<li><strong>特徴量エンジニアリング</strong>: 新しい変数の導出（例：温度×時間）</li>
</ol>
<pre><code class="language-python">import pandas as pd
import numpy as np

# 時系列データの前処理例
def preprocess_process_data(df):
    # 1. 異常値除去（3σ法）
    df = df[(np.abs(df['temperature'] - df['temperature'].mean())
             &lt;= 3 * df['temperature'].std())]

    # 2. 欠損値補間（線形補間）
    df = df.interpolate(method='linear')

    # 3. 移動平均（ノイズ除去）
    df['temperature_smooth'] = df['temperature'].rolling(window=10).mean()

    # 4. 正規化（0-1）
    df['temperature_norm'] = (df['temperature'] - df['temperature'].min()) / \
                             (df['temperature'].max() - df['temperature'].min())

    return df
</code></pre>
<hr />
<h2>2.4 PIエコシステム：データの流れ</h2>
<p>PIは単独の技術ではなく、複数の要素が連携するエコシステムです。以下の図は、PIにおけるデータの流れを示しています。</p>
<div class="mermaid">
flowchart TB
    subgraph "データ収集層"
        A[センサー\n温度・圧力・流量] --> D[DCS/SCADA]
        B[オンライン分析装置\nGC・NIR] --> D
        C[オペレーター入力\nバッチ情報] --> D
    end

    subgraph "データ管理層"
        D --> E[データベース\n時系列DB・RDB]
        E --> F[データクリーニング\n異常値除去・補間]
    end

    subgraph "分析層"
        F --> G[記述子生成\n特徴量エンジニアリング]
        G --> H[機械学習モデル\n回帰・分類・予測]
        H --> I[最適化エンジン\nベイズ最適化]
    end

    subgraph "実装層"
        I --> J[制御システム\nプロセス制御]
        I --> K[可視化\nダッシュボード]
        I --> L[アラート\n異常検知通知]
    end

    subgraph "フィードバック"
        J --> M[実測データ]
        K --> M
        L --> M
        M --> D
    end

    style D fill:#e3f2fd
    style E fill:#fff3e0
    style H fill:#f3e5f5
    style J fill:#e8f5e9
    style M fill:#fce4ec
</div>

<p><strong>図の読み方:</strong>
1. <strong>データ収集層</strong>: センサー、分析装置、オペレーターからデータを収集
2. <strong>データ管理層</strong>: データを保存し、前処理を実施
3. <strong>分析層</strong>: 機械学習モデルを構築し、最適化を実行
4. <strong>実装層</strong>: 予測結果をプロセス制御や可視化に活用
5. <strong>フィードバック</strong>: 実測データを再びシステムに戻し、継続的改善</p>
<p><strong>重要なポイント:</strong>
- データは<strong>循環</strong>する（フィードバックループ）
- 各層が専門的な役割を担う
- リアルタイム性が重要（秒単位〜分単位）</p>
<hr />
<h2>2.5 PIの基本ワークフロー：詳細5ステップ</h2>
<p>第1章では概要を紹介しましたが、ここでは実践的な<strong>5ステップワークフロー</strong>を詳しく解説します。</p>
<h3>2.5.1 全体像</h3>
<div class="mermaid">
flowchart LR
    A[Step 0:\n問題定式化] --> B[Step 1:\nデータ収集]
    B --> C[Step 2:\nモデル構築]
    C --> D[Step 3:\n最適化]
    D --> E[Step 4:\n実装・検証]
    E --> F[継続的改善]
    F - フィードバック .-> B

    style A fill:#ffebee
    style B fill:#e3f2fd
    style C fill:#fff3e0
    style D fill:#f3e5f5
    style E fill:#e8f5e9
    style F fill:#fce4ec
</div>

<h3>2.5.2 Step 0: 問題定式化</h3>
<p><strong>何をするか:</strong>
- 解決したい問題を明確に定義する
- 目的関数と制約条件を具体化する
- 成功の基準（KPI）を設定する</p>
<p><strong>具体例：化学反応プロセスの収率向上</strong></p>
<p><strong>悪い問題定式化:</strong></p>
<blockquote>
<p>「収率を上げたい」</p>
</blockquote>
<p><strong>良い問題定式化:</strong></p>
<blockquote>
<p>「化学反応プロセスXの収率を以下の条件で最大化する：
- <strong>目的</strong>: 収率を現状70%から80%以上に向上
- <strong>制約条件</strong>:
  - 温度: 80-120°C（安全範囲）
  - 圧力: 1-5気圧
  - 反応時間: ≤6時間（生産性維持）
  - 純度: ≥98%（品質規格）
  - コスト: 現状+10%以内
- <strong>KPI（成功基準）</strong>:
  - 収率≥80%を10バッチ連続で達成
  - バッチ間変動≤2%
  - 期限: 6ヶ月以内」</p>
</blockquote>
<p><strong>問題定式化のチェックリスト:</strong>
- [ ] 目的が定量的に定義されているか？
- [ ] 制約条件が明確か？
- [ ] KPIが測定可能か？
- [ ] 期限が現実的か？
- [ ] ステークホルダーが合意しているか？</p>
<p><strong>時間の目安:</strong> 1〜2週間（関係者との議論を含む）</p>
<h3>2.5.3 Step 1: データ収集</h3>
<p><strong>何をするか:</strong>
- 過去の運転データを収集
- データの品質を確認（欠損値、異常値）
- 必要に応じて追加実験を実施</p>
<p><strong>データソースの優先順位:</strong></p>
<ol>
<li>
<p><strong>既存のプラントデータ</strong>（最も効率的）
   - DCS/SCADAから時系列データをエクスポート
   - 通常、数ヶ月〜数年分のデータが蓄積されている</p>
</li>
<li>
<p><strong>実験室データ</strong>（補完的）
   - ベンチスケールの実験結果
   - 詳細な品質分析データ</p>
</li>
<li>
<p><strong>新規実験</strong>（必要に応じて）
   - 既存データで不足している条件を追加実験</p>
</li>
</ol>
<p><strong>具体例：反応プロセスのデータ収集</strong></p>
<pre><code class="language-python">import pandas as pd

# DCSからのデータエクスポート例
process_data = pd.read_csv('dcs_export.csv', parse_dates=['timestamp'])

print(f&quot;データ期間: {process_data['timestamp'].min()} - {process_data['timestamp'].max()}&quot;)
print(f&quot;データポイント数: {len(process_data):,}&quot;)
print(f&quot;変数の数: {process_data.shape[1]}&quot;)

# 基本統計
print(&quot;\n基本統計:&quot;)
print(process_data[['temperature', 'pressure', 'flow_rate', 'yield']].describe())

# 欠損値の確認
print(&quot;\n欠損値:&quot;)
print(process_data.isnull().sum())
</code></pre>
<p><strong>期待される出力:</strong></p>
<pre><code>データ期間: 2023-01-01 - 2024-12-31
データポイント数: 31,536,000
変数の数: 50

基本統計:
       temperature  pressure  flow_rate    yield
count    31536000  31536000   31536000  1200.0
mean         95.3      3.2       45.2    70.3
std           8.7      0.8       12.3     3.1
...

欠損値:
temperature        120
pressure            85
flow_rate          156
yield                0
</code></pre>
<p><strong>時間の目安:</strong> 1週間（データの特定、エクスポート、品質確認）</p>
<h3>2.5.4 Step 2: モデル構築</h3>
<p><strong>何をするか:</strong>
- 収集したデータを使って機械学習モデルを訓練
- 適切な記述子（特徴量）を選択
- モデルの性能を評価し、最適化</p>
<p><strong>サブステップ:</strong></p>
<p><strong>2.1 記述子の設計</strong></p>
<p>プロセス変数を機械学習モデルに適した形式に変換します。</p>
<p><strong>記述子の例:</strong></p>
<table>
<thead>
<tr>
<th>カテゴリ</th>
<th>記述子</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>直接測定</strong></td>
<td>温度、圧力、流量</td>
<td>センサーから直接取得</td>
</tr>
<tr>
<td><strong>導出変数</strong></td>
<td>滞留時間 = 反応器体積 / 流量</td>
<td>計算で求める</td>
</tr>
<tr>
<td><strong>相互作用項</strong></td>
<td>温度 × 圧力</td>
<td>非線形効果を捉える</td>
</tr>
<tr>
<td><strong>時系列特徴</strong></td>
<td>温度の移動平均、変化率</td>
<td>動的挙動を捉える</td>
</tr>
</tbody>
</table>
<p><strong>2.2 モデルの選択</strong></p>
<table>
<thead>
<tr>
<th>モデル</th>
<th>適用場面</th>
<th>利点</th>
<th>欠点</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>線形回帰</strong></td>
<td>線形関係が予想される場合</td>
<td>シンプル、解釈容易</td>
<td>非線形関係を捉えられない</td>
</tr>
<tr>
<td><strong>ランダムフォレスト</strong></td>
<td>非線形、複雑な関係</td>
<td>高精度、過学習に強い</td>
<td>ブラックボックス</td>
</tr>
<tr>
<td><strong>勾配ブースティング</strong></td>
<td>最高精度を追求</td>
<td>非常に高精度</td>
<td>チューニングが必要</td>
</tr>
<tr>
<td><strong>SVR</strong></td>
<td>小規模データ</td>
<td>汎化性能が高い</td>
<td>計算コスト高</td>
</tr>
</tbody>
</table>
<p><strong>2.3 モデル訓練と評価</strong></p>
<pre><code class="language-python">from sklearn.ensemble import RandomForestRegressor
from sklearn.model_selection import train_test_split, cross_val_score
from sklearn.metrics import mean_absolute_error, r2_score

# データ分割
X = df[['temperature', 'pressure', 'catalyst_conc', 'residence_time']]
y = df['yield']

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42
)

# モデル訓練
model = RandomForestRegressor(n_estimators=100, random_state=42)
model.fit(X_train, y_train)

# 予測と評価
y_pred = model.predict(X_test)
mae = mean_absolute_error(y_test, y_pred)
r2 = r2_score(y_test, y_pred)

print(f&quot;MAE: {mae:.2f}%&quot;)
print(f&quot;R²: {r2:.3f}&quot;)

# 交差検証
cv_scores = cross_val_score(model, X, y, cv=5,
                            scoring='neg_mean_absolute_error')
print(f&quot;CV MAE: {-cv_scores.mean():.2f} ± {cv_scores.std():.2f}%&quot;)
</code></pre>
<p><strong>性能の目安:</strong>
- <strong>R² &gt; 0.8</strong>: 良好
- <strong>R² &gt; 0.9</strong>: 優秀
- <strong>R² &lt; 0.7</strong>: モデルの見直しが必要</p>
<p><strong>時間の目安:</strong> 2週間（記述子設計、モデル訓練、チューニング）</p>
<h3>2.5.5 Step 3: 最適化</h3>
<p><strong>何をするか:</strong>
- 訓練したモデルを使って、最適な運転条件を探索
- ベイズ最適化、多目的最適化などの手法を適用</p>
<p><strong>ベイズ最適化の例:</strong></p>
<pre><code class="language-python">from skopt import gp_minimize
from skopt.space import Real

# 目的関数（収率を最大化 = 負の収率を最小化）
def objective(params):
    temperature, pressure, catalyst_conc = params
    predicted_yield = model.predict([[temperature, pressure, catalyst_conc, 60]])
    return -predicted_yield[0]  # 最小化問題に変換

# 探索空間の定義
space = [
    Real(80, 120, name='temperature'),     # 温度範囲
    Real(1, 5, name='pressure'),           # 圧力範囲
    Real(0.5, 3, name='catalyst_conc'),    # 触媒濃度範囲
]

# ベイズ最適化の実行
result = gp_minimize(
    objective,
    space,
    n_calls=20,      # 20回の評価
    random_state=42
)

print(f&quot;最適条件:&quot;)
print(f&quot;  温度: {result.x[0]:.1f}°C&quot;)
print(f&quot;  圧力: {result.x[1]:.2f}気圧&quot;)
print(f&quot;  触媒濃度: {result.x[2]:.2f}%&quot;)
print(f&quot;  予測収率: {-result.fun:.1f}%&quot;)
</code></pre>
<p><strong>多目的最適化の例（収率 vs コスト）:</strong></p>
<pre><code class="language-python">from pymoo.algorithms.moo.nsga2 import NSGA2
from pymoo.optimize import minimize
from pymoo.core.problem import Problem

class ProcessOptimizationProblem(Problem):
    def __init__(self):
        super().__init__(
            n_var=3,           # 3つの変数
            n_obj=2,           # 2つの目的（収率、コスト）
            n_constr=0,
            xl=[80, 1, 0.5],   # 下限
            xu=[120, 5, 3]     # 上限
        )

    def _evaluate(self, X, out, *args, **kwargs):
        # 目的1: 収率の最大化（→ 負の収率を最小化）
        yield_pred = model_yield.predict(X)
        f1 = -yield_pred

        # 目的2: コストの最小化
        cost = X[:, 0] * 0.1 + X[:, 1] * 5 + X[:, 2] * 20  # 簡略化した例
        f2 = cost

        out[&quot;F&quot;] = np.column_stack([f1, f2])

# NSGA-IIアルゴリズムで最適化
algorithm = NSGA2(pop_size=100)
problem = ProcessOptimizationProblem()

result = minimize(
    problem,
    algorithm,
    ('n_gen', 50),  # 50世代
    verbose=False
)

print(f&quot;パレート最適解の数: {len(result.F)}&quot;)
</code></pre>
<p><strong>時間の目安:</strong> 1〜2週間（最適化手法の選定、実行、結果分析）</p>
<h3>2.5.6 Step 4: 実装・検証</h3>
<p><strong>何をするか:</strong>
- 最適化で得られた条件を実プラントで試験
- 予測と実測のズレを分析
- 段階的に実装（パイロット → 商業プラント）</p>
<p><strong>実装のステップ:</strong></p>
<ol>
<li>
<p><strong>パイロット試験</strong>（1-2バッチ）
   - 安全性の確認
   - 予測との一致度を確認</p>
</li>
<li>
<p><strong>小規模導入</strong>（10バッチ）
   - 再現性の確認
   - バッチ間変動の評価</p>
</li>
<li>
<p><strong>全面展開</strong>（継続運転）
   - 標準運転条件として採用
   - 継続的な監視</p>
</li>
</ol>
<p><strong>検証のチェックリスト:</strong>
- [ ] 安全基準を満たすか？
- [ ] 品質規格を満たすか？
- [ ] 予測収率±5%以内で実測値と一致するか？
- [ ] バッチ間変動は許容範囲内か？
- [ ] オペレーターが運転可能か？</p>
<p><strong>時間の目安:</strong> 1〜2ヶ月（パイロット試験、段階的導入）</p>
<h3>2.5.7 継続的改善</h3>
<p><strong>何をするか:</strong>
- 実装後のデータを収集
- モデルを定期的に再訓練
- さらなる最適化の余地を探索</p>
<p><strong>継続的改善のサイクル:</strong></p>
<pre><code>初期モデル（R² = 0.85）
  ↓ 10バッチのデータ追加
モデル再訓練（R² = 0.88）
  ↓ 20バッチのデータ追加
モデル再訓練（R² = 0.91）
  ↓ 新たな最適化余地を発見
</code></pre>
<p><strong>時間の目安:</strong> 継続的（3ヶ月ごとに再訓練を推奨）</p>
<hr />
<h2>2.6 プロセス記述子の詳細</h2>
<h3>2.6.1 記述子の種類</h3>
<p><strong>1. 物理化学パラメータ</strong></p>
<table>
<thead>
<tr>
<th>記述子</th>
<th>単位</th>
<th>典型的な範囲</th>
<th>重要性</th>
</tr>
</thead>
<tbody>
<tr>
<td>温度</td>
<td>°C</td>
<td>50-200</td>
<td>反応速度、平衡定数に直接影響</td>
</tr>
<tr>
<td>圧力</td>
<td>気圧</td>
<td>1-10</td>
<td>気相反応の平衡、物質移動</td>
</tr>
<tr>
<td>pH</td>
<td>-</td>
<td>0-14</td>
<td>触媒活性、副反応</td>
</tr>
<tr>
<td>濃度</td>
<td>mol/L</td>
<td>0.1-5</td>
<td>反応速度、選択性</td>
</tr>
<tr>
<td>流量</td>
<td>L/h</td>
<td>10-100</td>
<td>滞留時間、混合</td>
</tr>
</tbody>
</table>
<p><strong>2. 装置特性</strong></p>
<table>
<thead>
<tr>
<th>記述子</th>
<th>説明</th>
<th>影響</th>
</tr>
</thead>
<tbody>
<tr>
<td>反応器体積</td>
<td>プロセスのスケール</td>
<td>熱除去、混合効率</td>
</tr>
<tr>
<td>攪拌速度</td>
<td>rpm</td>
<td>物質移動、均一性</td>
</tr>
<tr>
<td>伝熱面積</td>
<td>m²</td>
<td>温度制御</td>
</tr>
</tbody>
</table>
<p><strong>3. 操作条件</strong></p>
<table>
<thead>
<tr>
<th>記述子</th>
<th>説明</th>
<th>制御可能性</th>
</tr>
</thead>
<tbody>
<tr>
<td>加熱速度</td>
<td>°C/min</td>
<td>制御容易</td>
</tr>
<tr>
<td>原料供給順序</td>
<td>-</td>
<td>制御容易</td>
</tr>
<tr>
<td>冷却開始時刻</td>
<td>反応開始からの時間</td>
<td>制御容易</td>
</tr>
</tbody>
</table>
<h3>2.6.2 記述子の自動生成</h3>
<pre><code class="language-python">import pandas as pd

# 基本的な記述子の計算
def generate_descriptors(df):
    # 導出変数
    df['residence_time'] = df['reactor_volume'] / df['flow_rate']  # 分

    # 相互作用項
    df['temp_pressure'] = df['temperature'] * df['pressure']

    # 時系列特徴（移動平均）
    df['temp_ma_10min'] = df['temperature'].rolling(window=10).mean()

    # 変化率
    df['temp_change_rate'] = df['temperature'].diff()

    return df
</code></pre>
<hr />
<h2>2.7 まとめ</h2>
<h3>この章で学んだこと</h3>
<ol>
<li>
<p><strong>PIの定義と位置づけ</strong>
   - データとAIで化学プロセスを最適化
   - 関連分野（QE、DoE、SPC、プロセス制御）との違い</p>
</li>
<li>
<p><strong>PI用語20語</strong>
   - 基礎用語、手法用語、応用用語
   - 実践で頻出する専門用語の理解</p>
</li>
<li>
<p><strong>プロセスデータの種類</strong>
   - 時系列データ、バッチデータ、品質データ、運転データ
   - 各データタイプの特徴と分析手法</p>
</li>
<li>
<p><strong>PIエコシステム</strong>
   - データ収集 → 管理 → 分析 → 実装 → フィードバック
   - 各層の役割と連携</p>
</li>
<li>
<p><strong>PIの5ステップワークフロー</strong>
   - Step 0: 問題定式化
   - Step 1: データ収集
   - Step 2: モデル構築
   - Step 3: 最適化
   - Step 4: 実装・検証
   - 継続的改善のサイクル</p>
</li>
<li>
<p><strong>プロセス記述子</strong>
   - 物理化学パラメータ、装置特性、操作条件
   - 記述子の自動生成手法</p>
</li>
</ol>
<h3>次の章へ</h3>
<p>第3章では、Pythonを使った実践的なPI手法を学びます：
- 環境構築（3つの選択肢）
- 35個の実行可能なコード例
- 化学反応器最適化プロジェクト</p>
<hr />
<h2>演習問題</h2>
<h3>問題1（難易度：easy）</h3>
<p>PIと関連分野（品質工学、実験計画法、統計的プロセス管理）の違いを説明してください。</p>
<details>
<summary>解答例</summary>

**品質工学（QE）**:
- 目的: 製品品質の安定化、バラツキの最小化
- 手法: タグチメソッド、SN比
- PIとの違い: PIはQEのデータ分析を機械学習で高度化

**実験計画法（DoE）**:
- 目的: 効率的な実験設計
- 手法: 直交表、応答曲面法
- PIとの違い: PIはDoEと機械学習を組み合わせ、より少ない実験で最適化

**統計的プロセス管理（SPC）**:
- 目的: プロセスの安定性監視
- 手法: 管理図、Cp/Cpk
- PIとの違い: PIはSPCに予測機能（機械学習）を追加

**PI（Process Informatics）**:
- 目的: プロセス全体の最適化（収率・品質・コスト・環境の同時最適化）
- 手法: 機械学習、ベイズ最適化、リアルタイム分析
- 特徴: 上記すべてを統合し、データ駆動で最適化

</details>

<h3>問題2（難易度：medium）</h3>
<p>化学プロセスの時系列データ、バッチデータ、品質データの3つについて、それぞれの特徴と適した分析手法を説明してください。</p>
<details>
<summary>解答例</summary>

**時系列データ**:
- 特徴: 時間軸に沿って連続測定、サンプリング頻度が高い（1秒〜1分）、データ量が膨大
- 典型例: 温度、圧力、流量、pH
- 分析手法:
  - 時系列予測（ARIMA、Prophet、LSTM）
  - 異常検知（管理図、One-Class SVM）
  - トレンド分析（移動平均）
- 課題: ノイズ、欠損値、膨大なデータ量

**バッチデータ**:
- 特徴: バッチごとに1データポイント、サンプル数が少ない、バッチ間で条件が微妙に異なる
- 典型例: 各バッチの収率、純度、反応時間
- 分析手法:
  - 回帰分析（線形回帰、ランダムフォレスト）
  - バッチ間変動解析（ANOVA、PCA）
  - 最適化（ベイズ最適化、応答曲面法）
- 課題: サンプル数が少ない、過学習のリスク

**品質データ**:
- 特徴: オフライン測定が多い、測定に時間とコストがかかる、頻度が低い
- 典型例: HPLC、GC-MS、XRD
- 分析手法:
  - 品質予測（ソフトセンサー、プロセス変数から推定）
  - 品質管理（管理図、Cp/Cpk）
  - 規格外判定（分類モデル）
- 課題: リアルタイムではない、測定誤差、コストが高い

</details>

<h3>問題3（難易度：medium）</h3>
<p>PIワークフローのStep 0（問題定式化）がなぜ最も重要なのか、具体例を挙げて説明してください。</p>
<details>
<summary>解答例</summary>

**重要性:**

問題定式化が不十分だと、後の全ステップに悪影響を及ぼし、プロジェクト全体が失敗する可能性があります。

**悪い例:**
> 「収率を上げたい」

**問題点:**
- 目標が曖昧（何%に上げるのか？）
- 制約条件がない（温度、圧力、コストの制限は？）
- 成功基準がない（いつまでに？何バッチで？）

**結果:**
1. データ収集で無駄な変数まで集めてしまう
2. モデルが間違った目的を最適化する（例：純度を犠牲にして収率だけ上げる）
3. 実装段階で「実は純度も重要だった」と判明し、やり直し

**良い例:**
> 「化学反応プロセスXの収率を現状70%から80%以上に向上し、以下の条件を満たす：
> - 温度: 80-120°C（安全範囲）
> - 純度: ≥98%（品質規格）
> - コスト: 現状+10%以内
> - 期限: 6ヶ月以内
> - KPI: 収率≥80%を10バッチ連続で達成」

**効果:**
1. データ収集が明確（温度、純度、コストのデータを優先）
2. モデルが正しい目的を最適化（多目的最適化: 収率 vs 純度 vs コスト）
3. 成功基準が明確で、プロジェクトの進捗を評価しやすい

**時間投資の価値:**
問題定式化に1〜2週間を費やすことで、後の数ヶ月の作業を無駄にするリスクを大幅に減らせます。

</details>

<hr />
<h2>データライセンスとアクセス</h2>
<h3>プロセスデータベース（Chapter 1と共通）</h3>
<p><strong>産業プロセスデータ</strong>:
- <strong>AIChE DIPPR Database</strong>: 熱物性データ（詳細はChapter 1参照）
- <strong>NIST Chemistry WebBook</strong>: 無料の熱化学データベース</p>
<h3>コード再現性の確保</h3>
<p><strong>環境情報</strong>:
- Python: 3.9以上
- pandas &gt;= 1.3.0, numpy &gt;= 1.21.0, scikit-learn &gt;= 1.0.0</p>
<p><strong>PIワークフロー用ライブラリ</strong>:
- skopt (scikit-optimize): &gt;= 0.9.0
  - インストール: <code>pip install scikit-optimize</code>
  - 用途: ベイズ最適化（Gaussian Process）</p>
<ul>
<li>pymoo: &gt;= 0.6.0</li>
<li>インストール: <code>pip install pymoo</code></li>
<li>用途: 多目的最適化（NSGA-II等）</li>
</ul>
<h3>実践的な注意点（Practical Pitfalls）</h3>
<p><strong>注意点1: 記述子の多重共線性（Multicollinearity）</strong></p>
<p>相互作用項を追加すると多重共線性が発生:</p>
<pre><code class="language-python"># 問題例
df['temp_pressure'] = df['temperature'] * df['pressure']
df['temp_squared'] = df['temperature'] ** 2

# 多重共線性チェック
from statsmodels.stats.outliers_influence import variance_inflation_factor
vif_data = pd.DataFrame()
vif_data[&quot;feature&quot;] = X.columns
vif_data[&quot;VIF&quot;] = [variance_inflation_factor(X.values, i) for i in range(len(X.columns))]
print(vif_data)
# VIF &gt; 10 なら多重共線性あり

# 対策: 主成分分析（PCA）で次元削減
from sklearn.decomposition import PCA
pca = PCA(n_components=0.95)  # 分散95%を保持
X_reduced = pca.fit_transform(X)
</code></pre>
<p><strong>注意点2: 時系列データの自己相関</strong></p>
<p>プロセスデータは時間的に相関:</p>
<pre><code class="language-python"># 自己相関の確認
from statsmodels.graphics.tsaplots import plot_acf
plot_acf(df['temperature'], lags=50)
plt.show()

# 対策: 差分系列を使用
df['temp_diff'] = df['temperature'].diff()
</code></pre>
<p><strong>注意点3: バッチデータの独立性</strong></p>
<p>バッチ間は独立と仮定するが、実際は原料ロットに依存:</p>
<pre><code class="language-python"># 原料ロットでグループ化
for lot_id, group in df.groupby('raw_material_lot'):
    # ロットごとにモデル訓練 or ロットを特徴量に追加
    pass
</code></pre>
<hr />
<h2>章末チェックリスト（45項目）</h2>
<h3>1. PIの定義と関連分野（10項目）</h3>
<ul>
<li>[ ] 1.1 PIの簡潔な定義を説明できる</li>
<li>[ ] 1.2 Industry 4.0の4つの柱を列挙できる</li>
<li>[ ] 1.3 PIのコア要素4つ（データ、モデリング、最適化、実装）を述べられる</li>
<li>[ ] 1.4 品質工学（QE）との違いを説明できる</li>
<li>[ ] 1.5 実験計画法（DoE）との関係を述べられる</li>
<li>[ ] 1.6 統計的プロセス管理（SPC）との違いを説明できる</li>
<li>[ ] 1.7 プロセス制御との連携を理解している</li>
<li>[ ] 1.8 PIの独自性（統合的アプローチ、データ駆動等）を説明できる</li>
<li>[ ] 1.9 従来プロセス開発とPIのMermaid図を描ける</li>
<li>[ ] 1.10 PIの適用範囲（収率、品質、コスト、環境）を理解している</li>
</ul>
<h3>2. PI用語20語（10項目）</h3>
<ul>
<li>[ ] 2.1 基礎用語1-7（プロセス変数、記述子等）を定義できる</li>
<li>[ ] 2.2 手法用語8-14（ベイズ最適化、多目的最適化等）を説明できる</li>
<li>[ ] 2.3 応用用語15-20（デジタルツイン、予知保全等）を述べられる</li>
<li>[ ] 2.4 バッチプロセスと連続プロセスの違いを説明できる</li>
<li>[ ] 2.5 ベイズ最適化の仕組み（Gaussian Process）を理解している</li>
<li>[ ] 2.6 パレートフロントの意味を説明できる</li>
<li>[ ] 2.7 ソフトセンサーの用途を3つ挙げられる</li>
<li>[ ] 2.8 DCSとSCADAの違いを述べられる</li>
<li>[ ] 2.9 デジタルツインの定義を説明できる</li>
<li>[ ] 2.10 用語学習の優先順位（基礎→手法→応用）を理解している</li>
</ul>
<h3>3. プロセスデータの種類（10項目）</h3>
<ul>
<li>[ ] 3.1 時系列データの特徴（サンプリング頻度、データ量）を説明できる</li>
<li>[ ] 3.2 時系列データの典型的な分析手法3つを列挙できる</li>
<li>[ ] 3.3 バッチデータの特徴（独立性、サンプル数）を述べられる</li>
<li>[ ] 3.4 バッチ間変動の原因を3つ挙げられる</li>
<li>[ ] 3.5 品質データの測定方法（HPLC、GC-MS等）を理解している</li>
<li>[ ] 3.6 品質データの課題（頻度、コスト）を説明できる</li>
<li>[ ] 3.7 運転データ（イベントログ）の活用方法を述べられる</li>
<li>[ ] 3.8 データ前処理の4ステップを説明できる</li>
<li>[ ] 3.9 異常値除去の方法（3σ法）を実装できる</li>
<li>[ ] 3.10 欠損値補間の方法（線形補間）を使い分けられる</li>
</ul>
<h3>4. PIワークフロー5ステップ（10項目）</h3>
<ul>
<li>[ ] 4.1 Step 0（問題定式化）の重要性を説明できる</li>
<li>[ ] 4.2 良い問題定式化と悪い問題定式化の違いを理解している</li>
<li>[ ] 4.3 問題定式化のチェックリスト5項目を列挙できる</li>
<li>[ ] 4.4 Step 1（データ収集）のデータソース優先順位を述べられる</li>
<li>[ ] 4.5 Step 2（モデル構築）の記述子設計の重要性を理解している</li>
<li>[ ] 4.6 モデル性能の目安（R² &gt; 0.8良好、&gt;0.9優秀）を記憶している</li>
<li>[ ] 4.7 Step 3（最適化）のベイズ最適化コード例を書ける</li>
<li>[ ] 4.8 Step 4（実装・検証）の3段階（パイロット→小規模→全面）を説明できる</li>
<li>[ ] 4.9 検証チェックリスト5項目を列挙できる</li>
<li>[ ] 4.10 継続的改善のサイクル（3ヶ月ごと再訓練）を理解している</li>
</ul>
<h3>5. プロセス記述子（5項目）</h3>
<ul>
<li>[ ] 5.1 物理化学パラメータ5つ（温度、圧力等）の重要性を説明できる</li>
<li>[ ] 5.2 装置特性記述子（反応器体積、攪拌速度等）を理解している</li>
<li>[ ] 5.3 操作条件記述子（加熱速度、供給順序等）を述べられる</li>
<li>[ ] 5.4 記述子自動生成のPythonコードを書ける</li>
<li>[ ] 5.5 相互作用項の物理的意味を理解している</li>
</ul>
<hr />
<h2>参考文献</h2>
<ol>
<li>
<p>Venkatasubramanian, V. (2019). "The promise of artificial intelligence in chemical engineering: Is it here, finally?" <em>AIChE Journal</em>, 65(2), 466-478.
   DOI: <a href="https://doi.org/10.1002/aic.16489">10.1002/aic.16489</a></p>
</li>
<li>
<p>Lee, J. H., Shin, J., &amp; Realff, M. J. (2018). "Machine learning: Overview of the recent progresses and implications for the process systems engineering field." <em>Computers &amp; Chemical Engineering</em>, 114, 111-121.
   DOI: <a href="https://doi.org/10.1016/j.compchemeng.2017.10.008">10.1016/j.compchemeng.2017.10.008</a></p>
</li>
<li>
<p>Seborg, D. E., Edgar, T. F., Mellichamp, D. A., &amp; Doyle III, F. J. (2016). <em>Process Dynamics and Control</em> (4th ed.). Wiley.</p>
</li>
<li>
<p>化学工学会編 (2020). 『化学工学便覧 第8版』. 丸善出版.</p>
</li>
<li>
<p>scikit-optimize Documentation. (2024). "Bayesian Optimization."
   URL: https://scikit-optimize.github.io/stable/</p>
</li>
<li>
<p>pymoo Documentation. (2024). "Multi-objective Optimization."
   URL: https://pymoo.org/</p>
</li>
</ol>
<hr />
<p><strong>著者情報</strong></p>
<p>この記事は、東北大学 Dr. Yusuke Hashimotoのもと、MI Knowledge Hubプロジェクトの一環として作成されました。</p>
<p><strong>バージョン</strong>: 1.1</p>
<p><strong>更新履歴</strong>
- 2025-10-19: v1.1 品質改善
  - データライセンスとアクセス情報追加
  - コード再現性の確保（skopt、pymoo）
  - 実践的な注意点3つ追加（多重共線性、自己相関、バッチ独立性）
  - 章末チェックリスト45項目追加（5カテゴリ）
  - 参考文献2件追加（scikit-optimize、pymoo）
- 2025-10-16: v1.0 初版作成</p>
<p><strong>ライセンス</strong>: CC BY 4.0</p><div class="navigation">
    <a href="chapter1-introduction.html" class="nav-button">← 前の章</a>
    <a href="index.html" class="nav-button">シリーズ目次に戻る</a>
    <a href="chapter3-hands-on.html" class="nav-button">次の章 →</a>
</div>
    </main>

    
    <section class="disclaimer">
        <h3>免責事項</h3>
        <ul>
            <li>本コンテンツは教育・研究・情報提供のみを目的としており、専門的な助言(法律・会計・技術的保証など)を提供するものではありません。</li>
            <li>本コンテンツおよび付随するコード例は「現状有姿(AS IS)」で提供され、明示または黙示を問わず、商品性、特定目的適合性、権利非侵害、正確性・完全性、動作・安全性等いかなる保証もしません。</li>
            <li>外部リンク、第三者が提供するデータ・ツール・ライブラリ等の内容・可用性・安全性について、作成者および東北大学は一切の責任を負いません。</li>
            <li>本コンテンツの利用・実行・解釈により直接的・間接的・付随的・特別・結果的・懲罰的損害が生じた場合でも、適用法で許容される最大限の範囲で、作成者および東北大学は責任を負いません。</li>
            <li>本コンテンツの内容は、予告なく変更・更新・提供停止されることがあります。</li>
            <li>本コンテンツの著作権・ライセンスは明記された条件(例: CC BY 4.0)に従います。当該ライセンスは通常、無保証条項を含みます。</li>
        </ul>
    </section>

<footer>
        <p><strong>作成者</strong>: AI Terakoya Content Team</p>
        <p><strong>バージョン</strong>: 1.0 | <strong>作成日</strong>: 2025-10-16</p>
        <p><strong>ライセンス</strong>: Creative Commons BY 4.0</p>
        <p>© 2025 AI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
