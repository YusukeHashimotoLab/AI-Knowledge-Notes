<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第1章：ハイスループット計算の必要性とワークフロー設計 - AI Terakoya</title>

    <style>
        :root {
            --color-primary: #2c3e50;
            --color-primary-dark: #1a252f;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-text: #2d3748;
            --color-text-light: #4a5568;
            --color-bg: #ffffff;
            --color-bg-alt: #f7fafc;
            --color-border: #e2e8f0;
            --color-code-bg: #f8f9fa;
            --color-link: #3182ce;
            --color-link-hover: #2c5aa0;

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

            --border-radius: 8px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-bg);
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--box-shadow);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md) var(--spacing-xl);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--color-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-xs);
            border-bottom: 3px solid var(--color-accent);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        h4 {
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        li {
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            overflow-x: auto;
            margin-bottom: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: var(--font-mono);
            font-size: 0.9em;
            background-color: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-md);
            font-size: 0.95rem;
        }

        th, td {
            border: 1px solid var(--color-border);
            padding: var(--spacing-sm);
            text-align: left;
        }

        th {
            background-color: var(--color-bg-alt);
            font-weight: 600;
            color: var(--color-primary);
        }

        blockquote {
            border-left: 4px solid var(--color-accent);
            padding-left: var(--spacing-md);
            margin: var(--spacing-md) 0;
            color: var(--color-text-light);
            font-style: italic;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        .mermaid {
            text-align: center;
            margin: var(--spacing-lg) 0;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        details {
            background-color: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-primary);
            user-select: none;
            padding: var(--spacing-xs);
            margin: calc(-1 * var(--spacing-md));
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        summary:hover {
            background-color: rgba(123, 44, 191, 0.1);
        }

        details[open] summary {
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .learning-objectives {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--color-accent);
            margin-bottom: var(--spacing-xl);
        }

        .learning-objectives h2 {
            margin-top: 0;
            border-bottom: none;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--color-border);
        }

        .nav-button {
            flex: 1;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--box-shadow);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-decoration: none;
        }

        footer {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-md);
            background-color: var(--color-bg-alt);
            border-top: 1px solid var(--color-border);
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            .navigation {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: var(--spacing-xs);
            }
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'strict' });
    </script>

    <!-- MathJax for LaTeX equation rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'mermaid'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>第1章：ハイスループット計算の必要性とワークフロー設計</h1>
            <p class="subtitle"></p>
            <div class="meta">
                <span class="meta-item">📖 読了時間: 20-30分</span>
                <span class="meta-item">📊 難易度: 中級</span>
                <span class="meta-item">💻 コード例: 0個</span>
                <span class="meta-item">📝 演習問題: 0問</span>
            </div>
        </div>
    </header>

    <main class="container">
<h1>第1章：ハイスループット計算の必要性とワークフロー設計</h1>
<p class="chapter-description" style="margin: 1.5rem 0; padding: 1rem; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-left: 4px solid #7b2cbf; border-radius: 8px; font-size: 1.05rem; line-height: 1.8; color: #2d3748;">単発実行から“計算を回す仕組み”へ。HTの価値と適用範囲を短時間で把握します。</p>
<p class="chapter-supplement" style="margin: 0.75rem 0 1.5rem 0; padding: 0.75rem 1rem; background: linear-gradient(135deg, #fff8e1 0%, #fff3cd 100%); border-left: 3px solid #f59e0b; border-radius: 6px; font-size: 0.95rem; line-height: 1.7; color: #4a5568;"><strong>💡 補足:</strong> 「人が回す」から「仕組みが回す」への転換。小さな自動化でも累積効果は大きいです。</p>





<h2>学習目標</h2>
<p>この章を読むことで、以下を習得できます：</p>
<ul>
<li>✅ 材料探索空間の広大さを定量的に理解できる</li>
<li>✅ ハイスループット計算の4つの要素（自動化・並列化・標準化・データ管理）を説明できる</li>
<li>✅ Materials Project、AFLOW等の成功要因を分析できる</li>
<li>✅ 効果的なワークフロー設計の原則を理解し、適用できる</li>
<li>✅ コスト削減効果を定量的に評価できる</li>
</ul>
<hr />
<h2>1.1 材料探索の課題：なぜハイスループット計算が必要なのか</h2>
<h3>探索空間の広大さ</h3>
<p>材料科学における最大の課題は、<strong>探索すべき空間があまりにも広大である</strong>ことです。</p>
<p><strong>例：3元系合金の探索</strong></p>
<p>Li-Ni-Co酸化物電池材料（LiₓNiᵧCoᵧO₂）を考えてみましょう：
- Li組成: 0.0-1.0（10段階）
- Ni組成: 0.0-1.0（10段階）
- Co組成: 0.0-1.0（10段階）</p>
<p>単純計算で <strong>10³ = 1,000通り</strong> です。</p>
<p><strong>例：5元系高エントロピー合金</strong></p>
<p>CoCrFeNiMn系で組成比を変化させる場合：
- 各元素: 0-100%（10%刻みで11段階）
- 組成の合計が100%になる制約</p>
<p>組み合わせは <strong>数万通り</strong> に達します。</p>
<p><strong>一般的な材料探索の規模</strong></p>
<div class="mermaid">
flowchart LR
    A[単一材料] -->|置換| B[10-100候補]
    B -->|複合材料| C[1,000-10,000候補]
    C -->|高次元探索| D[100,000-1,000,000候補]
    D -->|網羅的探索| E[10^12-10^60候補]

    style E fill:#ff6b6b
</div>

<p>実際の材料探索では、<strong>10¹²（1兆）から10⁶⁰通り</strong>の組み合わせが存在します。</p>
<h3>従来手法の限界</h3>
<p><strong>1材料あたりのコスト（従来の実験主導型）</strong></p>
<table>
<thead>
<tr>
<th>項目</th>
<th>時間</th>
<th>コスト（概算）</th>
</tr>
</thead>
<tbody>
<tr>
<td>文献調査</td>
<td>1-2週間</td>
<td>10万円</td>
</tr>
<tr>
<td>試料合成</td>
<td>1-4週間</td>
<td>30-100万円</td>
</tr>
<tr>
<td>特性評価</td>
<td>2-8週間</td>
<td>50-200万円</td>
</tr>
<tr>
<td>データ解析</td>
<td>1-2週間</td>
<td>10-30万円</td>
</tr>
<tr>
<td><strong>合計</strong></td>
<td><strong>2-4ヶ月</strong></td>
<td><strong>100-340万円</strong></td>
</tr>
</tbody>
</table>
<p><strong>年間探索可能数</strong></p>
<ul>
<li>熟練研究者1名: <strong>10-50材料/年</strong></li>
<li>研究室（5-10名）: <strong>50-200材料/年</strong></li>
</ul>
<p><strong>問題点</strong></p>
<ol>
<li><strong>時間</strong>: 新材料開発に15-20年かかる</li>
<li><strong>コスト</strong>: 1材料あたり数百万円</li>
<li><strong>スケーラビリティ</strong>: 人員を増やしても線形にしか改善しない</li>
<li><strong>再現性</strong>: 実験条件の完全な記録が困難</li>
</ol>
<h3>Materials Genome Initiative (MGI)の提唱</h3>
<p>2011年、米国オバマ政権が <strong>Materials Genome Initiative (MGI)</strong> を発表しました：</p>
<p><strong>目標</strong>:
- 新材料開発期間を <strong>半減</strong>（20年 → 10年）
- 計算科学と実験の <strong>クローズドループ</strong>
- データベース・計算インフラの <strong>公共財化</strong></p>
<p><strong>予算</strong>: 初年度$100M（約100億円）、10年で$250M</p>
<p><strong>成果</strong>（2011-2021）:
- Materials Project: <strong>140,000材料</strong> のDFT計算
- AFLOW: <strong>3,500,000結晶構造</strong> の自動解析
- 開発期間: 実際に <strong>30-50%短縮</strong> を達成</p>
<hr />
<h2>1.2 ハイスループット計算の定義と4つの要素</h2>
<h3>定義</h3>
<blockquote>
<p><strong>ハイスループット計算（High-Throughput Computing, HTC）</strong>とは、大量の計算タスクを自動化・並列化し、標準化されたワークフローとデータ管理のもとで効率的に実行する手法である。</p>
</blockquote>
<h3>4つの要素</h3>
<div class="mermaid">
flowchart TD
    A[ハイスループット計算] --> B[1. 自動化\nAutomation]
    A --> C[2. 並列化\nParallelization]
    A --> D[3. 標準化\nStandardization]
    A --> E[4. データ管理\nData Management]

    B --> B1[入力生成の自動化]
    B --> B2[ジョブ投入の自動化]
    B --> B3[エラー処理の自動化]

    C --> C1[複数材料の同時計算]
    C --> C2[MPIによるノード並列]
    C --> C3[タスク並列とデータ並列]

    D --> D1[計算条件の統一]
    D --> D2[ファイル形式の統一]
    D --> D3[品質管理基準]

    E --> E1[データベース設計]
    E --> E2[メタデータ記録]
    E --> E3[検索・可視化]

    style A fill:#4ecdc4
    style B fill:#ffe66d
    style C fill:#ff6b6b
    style D fill:#95e1d3
    style E fill:#a8e6cf
</div>

<h4>要素1: 自動化（Automation）</h4>
<p>人間の介入なしに計算を実行・管理する仕組み。</p>
<p><strong>例：構造最適化の自動化</strong></p>
<p>手動の場合：
1. 初期構造を準備 → 入力ファイル作成 → ジョブ投入
2. 完了を確認 → 結果をチェック → 収束判定
3. 未収束なら設定変更 → 再投入
4. 収束したら次の材料へ</p>
<p><strong>1材料あたり30分-2時間</strong> かかる（100材料なら50-200時間）</p>
<p>自動化後：</p>
<pre><code class="language-python">for structure in structures:
    optimize_structure(structure)  # 全自動
    if converged:
        calculate_properties(structure)
# 100材料を一晩で完了（人的労力ゼロ）
</code></pre>
<h4>要素2: 並列化（Parallelization）</h4>
<p>複数の計算を同時実行してスループットを向上させる。</p>
<p><strong>3つの並列化レベル</strong></p>
<ol>
<li>
<p><strong>タスク並列</strong>: 異なる材料を同時計算
   - 1000材料を100ノードで並列実行 → 10倍高速化</p>
</li>
<li>
<p><strong>データ並列</strong>: 同一材料のk-point並列計算
   - VASPのKPAR設定で2-4倍高速化</p>
</li>
<li>
<p><strong>MPI並列</strong>: 1計算を複数コアで分散
   - 48コア並列で10-20倍高速化（スケーリング効率50-70%）</p>
</li>
</ol>
<p><strong>並列効率の例</strong></p>
<table>
<thead>
<tr>
<th>並列化手法</th>
<th>ノード数</th>
<th>高速化率</th>
<th>効率</th>
</tr>
</thead>
<tbody>
<tr>
<td>タスク並列のみ</td>
<td>100</td>
<td>100x</td>
<td>100%</td>
</tr>
<tr>
<td>MPI並列のみ</td>
<td>4</td>
<td>3.2x</td>
<td>80%</td>
</tr>
<tr>
<td>ハイブリッド</td>
<td>100x4</td>
<td>320x</td>
<td>80%</td>
</tr>
</tbody>
</table>
<h4>要素3: 標準化（Standardization）</h4>
<p>計算条件、データフォーマット、品質基準を統一。</p>
<p><strong>Materials Projectの標準設定</strong></p>
<pre><code class="language-python"># VASP設定の例（Materials Project）
{
    &quot;ENCUT&quot;: 520,  # エネルギーカットオフ（eV）
    &quot;EDIFF&quot;: 1e-5,  # エネルギー収束判定
    &quot;K-point density&quot;: 1000,  # k-point密度（Å⁻³）
    &quot;ISMEAR&quot;: -5,  # Tetrahedron法
}
</code></pre>
<p><strong>利点</strong>:
- 異なる材料間での <strong>公平な比較</strong>
- 計算の <strong>再現性</strong> 確保
- エラー検出の <strong>容易化</strong></p>
<h4>要素4: データ管理（Data Management）</h4>
<p>計算結果を構造化して保存・検索可能にする。</p>
<p><strong>データベーススキーマの例</strong></p>
<pre><code class="language-json">{
  &quot;material_id&quot;: &quot;mp-1234&quot;,
  &quot;formula&quot;: &quot;LiCoO2&quot;,
  &quot;structure&quot;: {...},
  &quot;energy&quot;: -45.67,  // eV/atom
  &quot;band_gap&quot;: 2.3,   // eV
  &quot;calculation_metadata&quot;: {
    &quot;vasp_version&quot;: &quot;6.3.0&quot;,
    &quot;encut&quot;: 520,
    &quot;kpoints&quot;: [12, 12, 8],
    &quot;calculation_date&quot;: &quot;2025-10-17&quot;
  }
}
</code></pre>
<p><strong>検索例</strong>:</p>
<pre><code class="language-python"># バンドギャップが1.5-2.5 eVの酸化物を検索
results = db.find({
    &quot;band_gap&quot;: {&quot;$gte&quot;: 1.5, &quot;$lte&quot;: 2.5},
    &quot;elements&quot;: {&quot;$all&quot;: [&quot;O&quot;]}
})
</code></pre>
<hr />
<h2>1.3 成功事例：Materials Project, AFLOW, OQMD</h2>
<h3>Materials Project（米国）</h3>
<p><strong>規模</strong> (2025年時点):
- 材料数: <strong>140,000+</strong>
- 計算タスク: <strong>5,000,000+</strong>
- DFT計算時間: <strong>5億CPU時間</strong> 以上</p>
<p><strong>技術スタック</strong>:
- 計算コード: VASP
- ワークフロー: FireWorks + Atomate
- データベース: MongoDB
- API: pymatgen + RESTful API</p>
<p><strong>成果</strong>:
- Li-ion電池材料: <strong>開発期間67%短縮</strong>
- 熱電材料: <strong>ZT値の予測精度90%</strong>
- ペロブスカイト太陽電池: <strong>50,000候補のスクリーニング</strong></p>
<p><strong>インパクト</strong>:
- 引用数: <strong>20,000+回</strong>（Google Scholar）
- 産業利用: Tesla, Panasonic, Samsung等
- ユーザー数: <strong>100,000+</strong>（API登録者）</p>
<h3>AFLOW（デューク大学）</h3>
<p><strong>規模</strong>:
- 結晶構造: <strong>3,500,000+</strong>
- プロトタイプ: <strong>1,000,000+</strong>
- 計算特性: バンドギャップ、弾性定数、熱力学安定性</p>
<p><strong>特徴</strong>:
- <strong>結晶対称性解析</strong>: 空間群の自動同定
- <strong>プロトタイプデータベース</strong>: 既知構造からの生成
- <strong>AFLOW-ML</strong>: 機械学習統合</p>
<p><strong>応用例</strong>:
- 高エントロピー合金: <strong>相安定性予測</strong>
- 超伝導材料: <strong>Tc予測</strong></p>
<h3>OQMD（Northwestern大学）</h3>
<p><strong>規模</strong>:
- 材料数: <strong>815,000+</strong>
- DFT計算: Quantum ESPRESSO</p>
<p><strong>特徴</strong>:
- <strong>熱力学データ</strong>: 形成エネルギー、相平衡
- <strong>化学ポテンシャル図</strong>: 安定性の可視化</p>
<h3>JARVIS（NIST）</h3>
<p><strong>規模</strong>:
- 材料数: <strong>40,000+</strong>
- 多様な特性: 光学、弾性、磁性、トポロジカル</p>
<p><strong>特徴</strong>:
- <strong>機械学習モデル</strong>: 訓練済みモデルの提供
- <strong>2D材料</strong>: 単層材料の大規模データベース</p>
<h3>比較表</h3>
<table>
<thead>
<tr>
<th>プロジェクト</th>
<th>材料数</th>
<th>計算コード</th>
<th>特徴</th>
</tr>
</thead>
<tbody>
<tr>
<td>Materials Project</td>
<td>140k+</td>
<td>VASP</td>
<td>総合、産業利用多</td>
</tr>
<tr>
<td>AFLOW</td>
<td>3.5M+</td>
<td>VASP</td>
<td>結晶構造特化</td>
</tr>
<tr>
<td>OQMD</td>
<td>815k+</td>
<td>QE</td>
<td>熱力学データ</td>
</tr>
<tr>
<td>JARVIS</td>
<td>40k+</td>
<td>VASP</td>
<td>多様な特性</td>
</tr>
</tbody>
</table>
<hr />
<h2>1.4 ワークフロー設計の原則</h2>
<p>効果的なハイスループット計算には、適切なワークフロー設計が不可欠です。</p>
<h3>原則1: モジュール化（Modularity）</h3>
<p>各タスクを独立したモジュールに分割し、再利用可能にする。</p>
<p><strong>良い例</strong>:</p>
<pre><code class="language-python"># モジュール化されたワークフロー
structure = generate_structure(formula)
relaxed = relax_structure(structure)
energy = static_calculation(relaxed)
band_gap = calculate_band_structure(relaxed)
dos = calculate_dos(relaxed)
</code></pre>
<p><strong>悪い例</strong>:</p>
<pre><code class="language-python"># 全てが一体化したスクリプト
# 一部を再利用したい場合に困難
run_everything(formula)  # ブラックボックス
</code></pre>
<h3>原則2: エラー処理（Error Handling）</h3>
<p>計算失敗は避けられないため、適切なエラー処理が必須。</p>
<p><strong>エラーの分類</strong></p>
<div class="mermaid">
flowchart TD
    A[計算エラー] --> B[リトライ可能]
    A --> C[設定変更が必要]
    A --> D[致命的エラー]

    B --> B1[一時的なI/Oエラー]
    B --> B2[ジョブタイムアウト]

    C --> C1[収束性問題]
    C --> C2[メモリ不足]

    D --> D1[構造異常]
    D --> D2[ソフトウェアバグ]

    B1 -->|自動リトライ| E[成功]
    C1 -->|設定緩和| E
    D1 -->|スキップ| F[次の材料へ]
</div>

<p><strong>実装例</strong>:</p>
<pre><code class="language-python">def robust_calculation(structure, max_retries=3):
    for attempt in range(max_retries):
        try:
            result = run_vasp(structure)
            if result.converged:
                return result
            else:
                # 収束性問題 → 設定変更
                structure = adjust_parameters(structure)
        except MemoryError:
            # メモリ不足 → コア数削減
            reduce_cores()
        except TimeoutError:
            # タイムアウト → 時間延長
            extend_time_limit()

    # 最終的に失敗
    log_failure(structure)
    return None
</code></pre>
<h3>原則3: 再現性（Reproducibility）</h3>
<p>他の研究者が同じ結果を得られるようにする。</p>
<p><strong>必須記録項目</strong>:</p>
<ol>
<li><strong>計算条件</strong>: すべてのパラメータ</li>
<li><strong>ソフトウェアバージョン</strong>: VASP 6.3.0等</li>
<li><strong>擬ポテンシャル</strong>: PBE, PAW等</li>
<li><strong>計算環境</strong>: OS、コンパイラ、ライブラリ</li>
</ol>
<p><strong>実装例</strong>:</p>
<pre><code class="language-python"># プロビナンス（来歴）記録
metadata = {
    &quot;software&quot;: &quot;VASP 6.3.0&quot;,
    &quot;potcar&quot;: &quot;PBE_54&quot;,
    &quot;encut&quot;: 520,
    &quot;kpoints&quot;: [12, 12, 8],
    &quot;convergence&quot;: {
        &quot;energy&quot;: 1e-5,
        &quot;force&quot;: 0.01
    },
    &quot;compute_environment&quot;: {
        &quot;hostname&quot;: &quot;hpc.university.edu&quot;,
        &quot;nodes&quot;: 4,
        &quot;cores_per_node&quot;: 48,
        &quot;date&quot;: &quot;2025-10-17T10:30:00Z&quot;
    }
}
</code></pre>
<h3>原則4: スケーラビリティ（Scalability）</h3>
<p>10材料 → 1,000材料 → 100,000材料に拡張できる設計。</p>
<p><strong>スケーラビリティのチェックリスト</strong>:</p>
<ul>
<li>[ ] データベースは大量データに対応できるか（MongoDB、PostgreSQL）</li>
<li>[ ] ファイルシステムは数十万ファイルに耐えられるか</li>
<li>[ ] ネットワーク帯域幅は十分か</li>
<li>[ ] ジョブスケジューラの制限（最大ジョブ数）は大丈夫か</li>
<li>[ ] データ解析は並列化されているか</li>
</ul>
<p><strong>スケーラビリティテスト</strong>:</p>
<pre><code class="language-python"># 小規模テスト: 10材料
test_workflow(n_materials=10)  # 1時間

# 中規模テスト: 100材料
test_workflow(n_materials=100)  # 10時間

# 大規模テスト: 1,000材料
test_workflow(n_materials=1000)  # 100時間

# スケーリング効率を確認
scaling_efficiency = (time_10 * 100) / time_1000
# 理想は1.0（線形スケーリング）
</code></pre>
<hr />
<h2>1.5 コストと効果の定量分析</h2>
<h3>従来手法 vs ハイスループット計算</h3>
<p><strong>シナリオ</strong>: 1,000材料のスクリーニング</p>
<h4>従来手法（実験主導）</h4>
<table>
<thead>
<tr>
<th>項目</th>
<th>単価</th>
<th>数量</th>
<th>合計</th>
</tr>
</thead>
<tbody>
<tr>
<td>研究員人件費</td>
<td>800万円/年</td>
<td>5名 × 2年</td>
<td>8,000万円</td>
</tr>
<tr>
<td>試料合成</td>
<td>50万円</td>
<td>1,000材料</td>
<td>5,000万円</td>
</tr>
<tr>
<td>特性評価</td>
<td>30万円</td>
<td>1,000材料</td>
<td>3,000万円</td>
</tr>
<tr>
<td><strong>総コスト</strong></td>
<td></td>
<td></td>
<td><strong>1.6億円</strong></td>
</tr>
<tr>
<td><strong>期間</strong></td>
<td></td>
<td></td>
<td><strong>2年</strong></td>
</tr>
</tbody>
</table>
<h4>ハイスループット計算</h4>
<table>
<thead>
<tr>
<th>項目</th>
<th>単価</th>
<th>数量</th>
<th>合計</th>
</tr>
</thead>
<tbody>
<tr>
<td>研究員人件費</td>
<td>800万円/年</td>
<td>2名 × 6ヶ月</td>
<td>800万円</td>
</tr>
<tr>
<td>計算リソース</td>
<td>$0.5/CPU時</td>
<td>1M CPU時</td>
<td>500万円</td>
</tr>
<tr>
<td>ストレージ</td>
<td>$0.02/GB/月</td>
<td>10TB × 6ヶ月</td>
<td>100万円</td>
</tr>
<tr>
<td>ソフトウェアライセンス</td>
<td>300万円/年</td>
<td>1年</td>
<td>300万円</td>
</tr>
<tr>
<td><strong>総コスト</strong></td>
<td></td>
<td></td>
<td><strong>1,700万円</strong></td>
</tr>
<tr>
<td><strong>期間</strong></td>
<td></td>
<td></td>
<td><strong>6ヶ月</strong></td>
</tr>
</tbody>
</table>
<p><strong>削減効果</strong>:
- コスト削減: <strong>89%</strong> (1.6億円 → 1,700万円)
- 期間短縮: <strong>75%</strong> (2年 → 6ヶ月)</p>
<h3>ROI（投資収益率）計算</h3>
<p><strong>初期投資</strong>:
- 環境構築: 500万円
- 人材育成: 300万円
- <strong>合計</strong>: 800万円</p>
<p><strong>年間節約額</strong> (1,000材料/年の場合):
- 実験コスト削減: 8,000万円/年
- 人件費削減: 2,400万円/年
- <strong>合計</strong>: 1.04億円/年</p>
<p><strong>ROI</strong>:</p>
<pre><code>ROI = (年間節約額 - 運用コスト) / 初期投資
    = (1.04億円 - 1,700万円) / 800万円
    = 10.9倍
</code></pre>
<p><strong>投資回収期間</strong>: 約1ヶ月</p>
<h3>非金銭的メリット</h3>
<ol>
<li><strong>イノベーション加速</strong>: 試行錯誤サイクル 2年 → 6ヶ月</li>
<li><strong>競争優位性</strong>: 競合より6-12ヶ月早く市場投入</li>
<li><strong>データ資産</strong>: 蓄積されたデータベースが財産に</li>
<li><strong>人材育成</strong>: 計算材料科学のスキル獲得</li>
</ol>
<hr />
<h2>1.6 ワークフロー設計の実例</h2>
<h3>例1: バンドギャップスクリーニング</h3>
<p><strong>目標</strong>: 1.5-2.5 eVのバンドギャップを持つ酸化物を発見</p>
<p><strong>ワークフロー</strong>:</p>
<div class="mermaid">
flowchart TD
    A[構造生成] --> B[構造最適化]
    B --> C[静的計算]
    C --> D[バンド構造計算]
    D --> E[バンドギャップ抽出]
    E --> F{1.5-2.5 eV?}
    F -->|Yes| G[候補材料リスト]
    F -->|No| H[除外]

    B -->|収束失敗| I[エラーハンドリング]
    I -->|設定変更| B
    I -->|致命的| H
</div>

<p><strong>Python疑似コード</strong>:</p>
<pre><code class="language-python">candidate_materials = []

for formula in oxide_formulas:
    # Step 1: 構造生成
    structure = generate_structure(formula)

    # Step 2: 構造最適化
    try:
        relaxed = relax_structure(structure)
    except ConvergenceError:
        relaxed = relax_structure(structure, strict=False)

    # Step 3: 静的計算
    energy, forces = static_calculation(relaxed)

    # Step 4: バンド構造
    band_gap = calculate_band_gap(relaxed)

    # Step 5: フィルタリング
    if 1.5 &lt;= band_gap &lt;= 2.5:
        candidate_materials.append({
            &quot;formula&quot;: formula,
            &quot;band_gap&quot;: band_gap,
            &quot;energy&quot;: energy
        })
</code></pre>
<h3>例2: 熱力学安定性スクリーニング</h3>
<p><strong>目標</strong>: 形成エネルギーが負（安定）の材料を発見</p>
<p><strong>ワークフロー</strong>:</p>
<pre><code class="language-python">stable_materials = []

for composition in compositions:
    # 形成エネルギー計算
    E_compound = calculate_energy(composition)
    E_elements = sum([calculate_energy(el) for el in composition.elements])

    E_formation = E_compound - E_elements

    if E_formation &lt; 0:
        # 相分解エネルギーもチェック
        E_decomp = calculate_decomposition_energy(composition)

        if E_decomp &gt; 0:  # 相分解しない
            stable_materials.append({
                &quot;composition&quot;: composition,
                &quot;E_formation&quot;: E_formation,
                &quot;E_decomp&quot;: E_decomp
            })
</code></pre>
<hr />
<h2>1.7 演習問題</h2>
<h3>問題1（難易度: easy）</h3>
<p><strong>問題</strong>: 100材料のバンドギャップ計算を考えます。従来手法（手動）とハイスループット計算で、それぞれの所要時間を見積もってください。</p>
<p><strong>条件</strong>:
- 1材料あたりの計算時間: 8時間（48コア並列）
- 手動作業: 入力準備20分、ジョブ投入5分、結果確認10分
- ハイスループット: 入力準備は自動、100材料を同時投入可能</p>
<details>
<summary>ヒント</summary>

手動の場合:
- 計算時間: 8時間 × 100 = 800時間（直列）
- 手動作業: 35分 × 100 = 3,500分 = 58.3時間

ハイスループット:
- 計算時間: 8時間（並列）
- 手動作業: 1時間（ワークフロー設定のみ）

</details>

<details>
<summary>解答例</summary>

**従来手法**:
- 総時間 = 計算時間（直列） + 手動作業
- = 800時間 + 58.3時間
- = **858.3時間 ≈ 36日**

**ハイスループット**:
- 総時間 = 計算時間（並列） + 初期設定
- = 8時間 + 1時間
- = **9時間**

**効率向上**: 858.3 / 9 ≈ **95倍**

</details>

<h3>問題2（難易度: medium）</h3>
<p><strong>問題</strong>: Materials Projectの140,000材料を計算するのに必要なCPU時間を見積もってください。</p>
<p><strong>条件</strong>:
- 1材料あたり平均: 構造最適化8時間 + 静的計算2時間 + バンド構造2時間 = 12時間
- 使用コア数: 平均48コア/材料</p>
<details>
<summary>ヒント</summary>

総CPU時間 = 材料数 × 1材料あたりCPU時間
1材料あたりCPU時間 = 計算時間 × コア数

</details>

<details>
<summary>解答例</summary>

**計算**:

<pre><code>総CPU時間 = 140,000材料 × 12時間 × 48コア
         = 140,000 × 576 CPU時間
         = 80,640,000 CPU時間
         ≈ 8,064万 CPU時間
</code></pre>


**実時間換算**（1,000ノード、各48コア使用）:

<pre><code>実時間 = 8,064万 CPU時間 / (1,000ノード × 48コア)
      = 1,680時間
      ≈ 70日
</code></pre>


実際のMaterials Projectは10年以上かけて蓄積しているため、平均的には年間14,000材料ペースです。

</details>

<h3>問題3（難易度: hard）</h3>
<p><strong>問題</strong>: ハイスループット計算システムの設計を提案してください。</p>
<p><strong>シナリオ</strong>:
- 目標: 10,000材料のスクリーニング（6ヶ月以内）
- 予算: 2,000万円
- 計算内容: 構造最適化 + 静的計算（1材料12時間、48コア）</p>
<p><strong>提案すべき項目</strong>:
1. 必要な計算リソース（ノード数、コア数）
2. ワークフロー設計（ツール選択）
3. データ管理戦略
4. コスト見積もり</p>
<details>
<summary>ヒント</summary>

1. 総CPU時間を計算
2. 6ヶ月で完了するために必要な並列度を算出
3. クラウド vs オンプレを比較
4. FireWorks等のツールを検討

</details>

<details>
<summary>解答例</summary>

**1. 必要リソース**

総CPU時間:

<pre><code>10,000材料 × 12時間 × 48コア = 5,760,000 CPU時間
</code></pre>


6ヶ月（180日、24時間稼働）で完了するには:

<pre><code>必要コア数 = 5,760,000 / (180日 × 24時間)
          = 1,333コア
          ≈ 28ノード（48コア/ノード）
</code></pre>


**2. ワークフロー設計**

- **ツール**: FireWorks + Atomate
  - 理由: Materials Project実績、VASP統合
- **ジョブスケジューラ**: SLURM
- **データベース**: MongoDB

**3. データ管理**

- 計算データ: 各材料100MB → 合計1TB
- データベース: メタデータ10GB
- バックアップ: 2TB（冗長化）

**4. コスト見積もり**

**Option A: クラウド（AWS）**

| 項目 | 単価 | 数量 | 合計 |
|----|------|-----|------|
| EC2 (c5.12xlarge, 48コア) | $2.04/時 | 28ノード × 4,320時間 | 2,470万円 |
| ストレージ (EBS) | $0.10/GB/月 | 2TB × 6ヶ月 | 12万円 |
| データ転送 | $0.09/GB | 500GB | 4.5万円 |
| **合計** | | | **2,486万円** |

**Option B: オンプレHPC利用**

| 項目 | 単価 | 数量 | 合計 |
|----|------|-----|------|
| HPC利用料 | $0.1/CPU時 | 576万CPU時 | 576万円 |
| 人件費 | 800万円/年 | 1名 × 0.5年 | 400万円 |
| ソフトウェア | 300万円/年 | 0.5年 | 150万円 |
| **合計** | | | **1,126万円** |

**推奨**: Option B（オンプレHPC）
- 予算内（2,000万円）で十分
- 大学のHPCクラスタを活用
- 余剰予算で実験検証に投資

</details>

<hr />
<h2>1.8 まとめ</h2>
<p>この章では、ハイスループット計算の必要性とワークフロー設計の原則を学びました。</p>
<p><strong>キーポイント</strong>:</p>
<ol>
<li><strong>探索空間の広大さ</strong>: 10¹²-10⁶⁰通りの組み合わせ</li>
<li><strong>4つの要素</strong>: 自動化・並列化・標準化・データ管理</li>
<li><strong>成功事例</strong>: Materials Project（140k材料）、AFLOW（3.5M構造）</li>
<li><strong>設計原則</strong>: モジュール化、エラー処理、再現性、スケーラビリティ</li>
<li><strong>コスト削減</strong>: 89%のコスト削減、75%の期間短縮</li>
</ol>
<p><strong>次のステップ</strong>:</p>
<p>第2章では、ASEとpymatgenを使った <strong>DFT計算の自動化</strong> を実践します。VASPとQuantum ESPRESSOの入力ファイル自動生成、エラー検出とリスタート、結果解析の自動化を学びます。</p>
<p><strong><a href="./chapter-2.html">第2章: DFT計算の自動化 →</a></strong></p>
<hr />
<hr />
<h2>データライセンスと引用</h2>
<h3>使用データセット</h3>
<p>このチャプターで言及したデータベースのライセンス情報：</p>
<table>
<thead>
<tr>
<th>データベース</th>
<th>ライセンス</th>
<th>引用要件</th>
<th>アクセス</th>
</tr>
</thead>
<tbody>
<tr>
<td>Materials Project</td>
<td>CC BY 4.0</td>
<td>論文引用必須</td>
<td>https://materialsproject.org</td>
</tr>
<tr>
<td>AFLOW</td>
<td>オープンデータ</td>
<td>論文引用推奨</td>
<td>http://aflowlib.org</td>
</tr>
<tr>
<td>OQMD</td>
<td>オープンデータ</td>
<td>論文引用推奨</td>
<td>http://oqmd.org</td>
</tr>
<tr>
<td>JARVIS</td>
<td>NIST Public Data</td>
<td>論文引用推奨</td>
<td>https://jarvis.nist.gov</td>
</tr>
</tbody>
</table>
<p><strong>データ使用時の注意</strong>:
- 論文執筆時は必ず元論文を引用してください
- 商用利用の場合は各データベースの利用規約を確認してください
- データの再配布には元のライセンスが適用されます</p>
<h3>引用方法</h3>
<p><strong>Materials Projectを使用した場合</strong>:</p>
<pre><code>Jain, A., Ong, S. P., Hautier, G., Chen, W., Richards, W. D., Dacek, S., ... &amp; Persson, K. A. (2013).
Commentary: The Materials Project: A materials genome approach to accelerating materials innovation.
APL materials, 1(1), 011002.
</code></pre>
<p><strong>このチャプターを引用する場合</strong>:</p>
<pre><code>Hashimoto, Y. (2025). &quot;ハイスループット計算の必要性とワークフロー設計&quot;
ハイスループット計算入門シリーズ 第1章. MI寺子屋プロジェクト.
</code></pre>
<hr />
<h2>実践的な落とし穴（Practical Pitfalls）</h2>
<p>ハイスループット計算を実装する際によく遭遇する問題と解決策：</p>
<h3>落とし穴1: 計算リソースの過剰割り当て</h3>
<p><strong>問題</strong>: すべての材料に最大リソース（48コア、24時間）を割り当ててしまう</p>
<p><strong>症状</strong>:
- 小さな構造（数原子）でも48コア使用
- 実際の計算時間は1時間なのに24時間予約
- リソースの無駄遣い、待ち時間の増加</p>
<p><strong>解決策</strong>:</p>
<pre><code class="language-python">def estimate_resources(structure):
    &quot;&quot;&quot;
    構造サイズに応じて適切なリソースを推定
    &quot;&quot;&quot;
    n_atoms = len(structure)

    if n_atoms &lt; 10:
        return {'cores': 12, 'time': '4:00:00'}
    elif n_atoms &lt; 50:
        return {'cores': 24, 'time': '12:00:00'}
    else:
        return {'cores': 48, 'time': '24:00:00'}

# SLURMスクリプト生成に利用
resources = estimate_resources(structure)
</code></pre>
<p><strong>教訓</strong>: 構造サイズ、k-point数に応じて動的にリソースを調整する</p>
<h3>落とし穴2: エラーログの放置</h3>
<p><strong>問題</strong>: 100材料のうち20材料が失敗しているが気づかない</p>
<p><strong>症状</strong>:
- 完了ステータスだけ見て、エラーを確認しない
- 収束していない計算を「完了」として扱う
- 論文執筆時に気づいて慌てる</p>
<p><strong>解決策</strong>:</p>
<pre><code class="language-python">def comprehensive_check(directory):
    &quot;&quot;&quot;
    計算の健全性を多角的にチェック
    &quot;&quot;&quot;
    checks = {
        'file_exists': os.path.exists(f&quot;{directory}/OUTCAR&quot;),
        'converged': False,
        'energy_reasonable': False,
        'forces_converged': False
    }

    if checks['file_exists']:
        with open(f&quot;{directory}/OUTCAR&quot;, 'r') as f:
            content = f.read()

            # 収束チェック
            checks['converged'] = 'reached required accuracy' in content

            # エネルギーチェック（異常値検出）
            energy = extract_energy(content)
            checks['energy_reasonable'] = -100 &lt; energy &lt; 0  # eV/atom

            # 力の収束チェック
            max_force = extract_max_force(content)
            checks['forces_converged'] = max_force &lt; 0.05  # eV/Å

    # すべて True の場合のみ成功
    return all(checks.values()), checks

# 使用例
success, details = comprehensive_check('calculations/LiCoO2')
if not success:
    print(f&quot;エラー詳細: {details}&quot;)
</code></pre>
<p><strong>教訓</strong>: 自動チェックスクリプトで品質管理を徹底する</p>
<h3>落とし穴3: ファイルシステムの限界</h3>
<p><strong>問題</strong>: 10,000材料 × 各50ファイル = 50万ファイルでファイルシステムが遅くなる</p>
<p><strong>症状</strong>:
- <code>ls</code>コマンドが数分かかる
- ファイル削除に数時間
- バックアップ失敗</p>
<p><strong>解決策</strong>:</p>
<pre><code class="language-bash"># 悪い例
calculations/
  ├── material_0001/
  ├── material_0002/
  ...
  └── material_10000/  # 10,000ディレクトリが同一階層

# 良い例（階層化）
calculations/
  ├── 00/
  │   ├── 00/material_0000/
  │   ├── 01/material_0001/
  │   ...
  │   └── 99/material_0099/
  ├── 01/
  │   ├── 00/material_0100/
  ...
</code></pre>
<pre><code class="language-python">def get_hierarchical_path(material_id):
    &quot;&quot;&quot;
    階層化されたパスを生成
    &quot;&quot;&quot;
    # material_id = 1234 → calculations/12/34/material_1234
    id_str = f&quot;{material_id:06d}&quot;
    level1 = id_str[:2]
    level2 = id_str[2:4]

    path = f&quot;calculations/{level1}/{level2}/material_{id_str}&quot;
    os.makedirs(path, exist_ok=True)

    return path
</code></pre>
<p><strong>教訓</strong>: 大規模計算では階層化ディレクトリ構造を使用する</p>
<h3>落とし穴4: ネットワークファイルシステムの過負荷</h3>
<p><strong>問題</strong>: 全ノードが同時にNFSに書き込み、I/Oボトルネック発生</p>
<p><strong>症状</strong>:
- 計算は完了しているのに結果書き込みで待機
- ファイルシステムエラー頻発
- 並列効率が20%以下</p>
<p><strong>解決策</strong>:</p>
<pre><code class="language-bash"># ローカルディスク（高速）を活用
#!/bin/bash
#SBATCH ...

# ローカルスクラッチディレクトリを使用
LOCAL_SCRATCH=/scratch/job_${SLURM_JOB_ID}
mkdir -p $LOCAL_SCRATCH

# ローカルで計算
cd $LOCAL_SCRATCH
cp $SLURM_SUBMIT_DIR/INCAR .
cp $SLURM_SUBMIT_DIR/POSCAR .
cp $SLURM_SUBMIT_DIR/KPOINTS .

mpirun -np 48 vasp_std

# 完了後のみNFSにコピー
cp OUTCAR CONTCAR vasprun.xml $SLURM_SUBMIT_DIR/
</code></pre>
<p><strong>教訓</strong>: ローカルストレージで計算し、結果のみ共有ストレージにコピー</p>
<h3>落とし穴5: 依存関係の記録漏れ</h3>
<p><strong>問題</strong>: 6ヶ月後に再現しようとしたら環境が再現できない</p>
<p><strong>症状</strong>:
- "あの時はうまくいったのに..."
- ライブラリバージョンが不明
- 計算設定が思い出せない</p>
<p><strong>解決策</strong>:</p>
<pre><code class="language-python">import json
from datetime import datetime
import subprocess

def record_environment():
    &quot;&quot;&quot;
    計算環境を完全記録
    &quot;&quot;&quot;
    env_record = {
        'timestamp': datetime.now().isoformat(),
        'python_version': subprocess.check_output(['python', '--version']).decode(),
        'packages': subprocess.check_output(['pip', 'freeze']).decode().split('\n'),
        'hostname': subprocess.check_output(['hostname']).decode().strip(),
        'slurm_version': subprocess.check_output(['sinfo', '--version']).decode(),
        'git_commit': subprocess.check_output(['git', 'rev-parse', 'HEAD']).decode().strip(),
    }

    with open('environment_snapshot.json', 'w') as f:
        json.dump(env_record, f, indent=2)

    return env_record

# 計算開始時に記録
record_environment()
</code></pre>
<p><strong>教訓</strong>: すべての計算で環境スナップショットを記録する</p>
<hr />
<h2>品質チェックリスト</h2>
<p>計算開始前と完了後にチェックすべき項目：</p>
<h3>計算開始前チェックリスト</h3>
<p><strong>プロジェクト設計（Planning）</strong>
- [ ] 総CPU時間を見積もった（材料数 × 1材料あたり時間）
- [ ] 予算を確認した（クラウドの場合）
- [ ] データストレージ容量を計算した（1材料あたり100MB想定）
- [ ] 完了予定日を設定した</p>
<p><strong>ワークフロー設計（Workflow）</strong>
- [ ] エラーハンドリングを実装した
- [ ] 自動リスタート機能を追加した
- [ ] 進捗監視スクリプトを用意した
- [ ] 階層化ディレクトリ構造を採用した</p>
<p><strong>計算設定（Calculation Settings）</strong>
- [ ] 収束判定基準を明示した（EDIFF, EDIFFG等）
- [ ] k-point密度を統一した
- [ ] エネルギーカットオフを決定した
- [ ] 計算設定をGitで管理した</p>
<p><strong>再現性（Reproducibility）</strong>
- [ ] ソフトウェアバージョンを記録した
- [ ] 環境構築スクリプトを用意した
- [ ] README.mdを作成した
- [ ] 入力ファイル生成スクリプトをバージョン管理した</p>
<h3>計算完了後チェックリスト</h3>
<p><strong>品質管理（Quality Control）</strong>
- [ ] すべての計算が収束したか確認した
- [ ] エネルギーが合理的範囲内か確認した（-100 ~ 0 eV/atom）
- [ ] 異常値（外れ値）を検出・調査した
- [ ] 失敗した計算のエラーログを確認した</p>
<p><strong>データ管理（Data Management）</strong>
- [ ] 結果をデータベースに保存した
- [ ] 生データをバックアップした（最低2箇所）
- [ ] メタデータ（日時、設定）を記録した
- [ ] データを検索可能な形式にした（JSON、MongoDB等）</p>
<p><strong>ドキュメント（Documentation）</strong>
- [ ] 計算条件を文書化した
- [ ] 失敗原因と対処法を記録した
- [ ] 再現手順を README に記載した
- [ ] 結果サマリーを作成した</p>
<p><strong>共有と公開（Sharing &amp; Publishing）</strong>
- [ ] データをNOMAD等に公開する準備をした
- [ ] 論文用の図表を作成した
- [ ] コードをGitHubに公開した（可能なら）
- [ ] DOIを取得した（データセット公開時）</p>
<hr />
<h2>コードの再現性仕様</h2>
<p>本章のコード例を再現するために必要な環境：</p>
<h3>ソフトウェアバージョン</h3>
<pre><code class="language-bash"># Python環境
Python 3.10+
numpy==1.24.0
scipy==1.10.0
matplotlib==3.7.0
pandas==2.0.0

# DFT計算コード（いずれか）
VASP 6.3.0 以上（商用ライセンス）
Quantum ESPRESSO 7.0 以上（オープンソース）

# ジョブスケジューラ
SLURM 22.05 以上
または PBS Pro 2021+
</code></pre>
<h3>動作確認済み環境</h3>
<p><strong>オンプレHPC</strong>:
- TSUBAME3.0（東京工業大学）
- 富岳（理化学研究所）
- 大学クラスタ（一般的なSLURMシステム）</p>
<p><strong>クラウドHPC</strong>:
- AWS Parallel Cluster 3.6.0
- Google Cloud HPC Toolkit 1.25.0</p>
<h3>インストールスクリプト</h3>
<pre><code class="language-bash"># conda環境構築
conda create -n htc-env python=3.10
conda activate htc-env

# 必須パッケージ
pip install numpy scipy matplotlib pandas
pip install ase pymatgen

# オプション（ワークフロー管理）
pip install fireworks atomate
</code></pre>
<h3>トラブルシューティング</h3>
<p><strong>問題1</strong>: <code>ImportError: No module named 'ase'</code></p>
<pre><code class="language-bash"># 解決策
pip install ase
# または
conda install -c conda-forge ase
</code></pre>
<p><strong>問題2</strong>: VASPが見つからない</p>
<pre><code class="language-bash"># 解決策: PATHにVASP実行ファイルを追加
export PATH=/path/to/vasp/bin:$PATH
# または .bashrc に追記
echo 'export PATH=/path/to/vasp/bin:$PATH' &gt;&gt; ~/.bashrc
</code></pre>
<p><strong>問題3</strong>: SLURMコマンドが使えない</p>
<pre><code class="language-bash"># 解決策: HPCシステムにログイン
ssh username@hpc.university.edu
# ローカルPC上では SLURM コマンドは使用できません
</code></pre>
<hr />
<h2>参考文献</h2>
<h3>必須文献（本章で引用）</h3>
<ol>
<li>
<p><strong>Materials Project</strong>
   Jain, A., Ong, S. P., Hautier, G., Chen, W., Richards, W. D., Dacek, S., ... &amp; Persson, K. A. (2013).
   "Commentary: The Materials Project: A materials genome approach to accelerating materials innovation."
   <em>APL Materials</em>, 1(1), 011002.
   DOI: <a href="https://doi.org/10.1063/1.4812323">10.1063/1.4812323</a></p>
</li>
<li>
<p><strong>AFLOW</strong>
   Curtarolo, S., Setyawan, W., Hart, G. L., Jahnatek, M., Chepulskii, R. V., Taylor, R. H., ... &amp; Levy, O. (2012).
   "AFLOW: An automatic framework for high-throughput materials discovery."
   <em>Computational Materials Science</em>, 58, 218-226.
   DOI: <a href="https://doi.org/10.1016/j.commatsci.2012.02.005">10.1016/j.commatsci.2012.02.005</a></p>
</li>
<li>
<p><strong>OQMD</strong>
   Saal, J. E., Kirklin, S., Aykol, M., Meredig, B., &amp; Wolverton, C. (2013).
   "Materials design and discovery with high-throughput density functional theory: the open quantum materials database (OQMD)."
   <em>JOM</em>, 65(11), 1501-1509.
   DOI: <a href="https://doi.org/10.1007/s11837-013-0755-4">10.1007/s11837-013-0755-4</a></p>
</li>
<li>
<p><strong>JARVIS</strong>
   Choudhary, K., Garrity, K. F., Reid, A. C., DeCost, B., Biacchi, A. J., Hight Walker, A. R., ... &amp; Tavazza, F. (2020).
   "The joint automated repository for various integrated simulations (JARVIS) for data-driven materials design."
   <em>npj Computational Materials</em>, 6(1), 173.
   DOI: <a href="https://doi.org/10.1038/s41524-020-00440-1">10.1038/s41524-020-00440-1</a></p>
</li>
<li>
<p><strong>Materials Genome Initiative</strong>
   Materials Genome Initiative for Global Competitiveness (2011).
   Office of Science and Technology Policy, USA.
   URL: https://www.mgi.gov/</p>
</li>
</ol>
<h3>推奨文献（発展学習）</h3>
<ol start="6">
<li>
<p><strong>ハイスループット計算の理論</strong>
   Hautier, G., Jain, A., &amp; Ong, S. P. (2012).
   "From the computer to the laboratory: materials discovery and design using first-principles calculations."
   <em>Journal of Materials Science</em>, 47(21), 7317-7340.</p>
</li>
<li>
<p><strong>ワークフロー設計の実践</strong>
   Mathew, K., Montoya, J. H., Faghaninia, A., Dwarakanath, S., Aykol, M., Tang, H., ... &amp; Persson, K. A. (2017).
   "Atomate: A high-level interface to generate, execute, and analyze computational materials science workflows."
   <em>Computational Materials Science</em>, 139, 140-152.</p>
</li>
<li>
<p><strong>並列計算の最適化</strong>
   Gropp, W., Lusk, E., &amp; Skjellum, A. (2014).
   <em>Using MPI: portable parallel programming with the message-passing interface.</em> MIT press.</p>
</li>
</ol>
<h3>オンラインリソース</h3>
<ul>
<li><strong>Materials Project Documentation</strong>: https://docs.materialsproject.org/</li>
<li><strong>AFLOW Tutorial</strong>: http://aflowlib.org/tutorial/</li>
<li><strong>OQMD API</strong>: http://oqmd.org/documentation/</li>
<li><strong>SLURM Documentation</strong>: https://slurm.schedmd.com/documentation.html</li>
</ul>
<hr />
<h2>次のステップ</h2>
<p>第2章では、ASEとpymatgenを使った <strong>DFT計算の自動化</strong> を実践します。</p>
<p><strong><a href="./chapter-2.html">第2章: DFT計算の自動化 →</a></strong></p>
<hr />
<p><strong>ライセンス</strong>: CC BY 4.0
<strong>作成日</strong>: 2025-10-17
<strong>最終更新</strong>: 2025-10-19
<strong>作成者</strong>: Dr. Yusuke Hashimoto, Tohoku University
<strong>バージョン</strong>: 1.1</p><div class="navigation">
    <a href="index.html" class="nav-button">シリーズ目次に戻る</a>
    <a href="chapter-2.html" class="nav-button">次の章 →</a>
</div>
    </main>

    <footer>
        <p><strong>作成者</strong>: AI Terakoya Content Team</p>
        <p><strong>バージョン</strong>: 1.0 | <strong>作成日</strong>: 2025-10-17</p>
        <p><strong>ライセンス</strong>: Creative Commons BY 4.0</p>
        <p>© 2025 AI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
