<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á¨¨4Á´†ÔºöÁã¨Ëá™„Éá„Éº„Çø„Éô„Éº„ÇπÊßãÁØâ - AI Terakoya</title>

    <style>
        :root {
            --color-primary: #2c3e50;
            --color-primary-dark: #1a252f;
            --color-accent: #7b2cbf;
            --color-accent-light: #9d4edd;
            --color-text: #2d3748;
            --color-text-light: #4a5568;
            --color-bg: #ffffff;
            --color-bg-alt: #f7fafc;
            --color-border: #e2e8f0;
            --color-code-bg: #f8f9fa;
            --color-link: #3182ce;
            --color-link-hover: #2c5aa0;

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;

            --font-body: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

            --border-radius: 8px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-bg);
            font-size: 16px;
        }

        header {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--box-shadow);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            font-weight: 400;
            margin-bottom: var(--spacing-md);
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 var(--spacing-md) var(--spacing-xl);
        }

        h2 {
            font-size: 1.75rem;
            color: var(--color-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-xs);
            border-bottom: 3px solid var(--color-accent);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--color-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        h4 {
            font-size: 1.1rem;
            color: var(--color-primary-dark);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--color-link-hover);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        li {
            margin-bottom: var(--spacing-xs);
            color: var(--color-text);
        }

        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            overflow-x: auto;
            margin-bottom: var(--spacing-md);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: var(--font-mono);
            font-size: 0.9em;
            background-color: var(--color-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--spacing-md);
            font-size: 0.95rem;
        }

        th, td {
            border: 1px solid var(--color-border);
            padding: var(--spacing-sm);
            text-align: left;
        }

        th {
            background-color: var(--color-bg-alt);
            font-weight: 600;
            color: var(--color-primary);
        }

        blockquote {
            border-left: 4px solid var(--color-accent);
            padding-left: var(--spacing-md);
            margin: var(--spacing-md) 0;
            color: var(--color-text-light);
            font-style: italic;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        .mermaid {
            text-align: center;
            margin: var(--spacing-lg) 0;
            background-color: var(--color-bg-alt);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        details {
            background-color: var(--color-bg-alt);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--color-primary);
            user-select: none;
            padding: var(--spacing-xs);
            margin: calc(-1 * var(--spacing-md));
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
        }

        summary:hover {
            background-color: rgba(123, 44, 191, 0.1);
        }

        details[open] summary {
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }

        .learning-objectives {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--color-accent);
            margin-bottom: var(--spacing-xl);
        }

        .learning-objectives h2 {
            margin-top: 0;
            border-bottom: none;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
            padding-top: var(--spacing-lg);
            border-top: 2px solid var(--color-border);
        }

        .nav-button {
            flex: 1;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-light) 100%);
            color: white;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--box-shadow);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-decoration: none;
        }

        footer {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg) var(--spacing-md);
            background-color: var(--color-bg-alt);
            border-top: 1px solid var(--color-border);
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            h2 {
                font-size: 1.4rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            .meta {
                font-size: 0.85rem;
            }

            .navigation {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: var(--spacing-xs);
            }
        }
    </style>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>

    <!-- MathJax for LaTeX equation rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'mermaid'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Á¨¨4Á´†ÔºöÁã¨Ëá™„Éá„Éº„Çø„Éô„Éº„ÇπÊßãÁØâ</h1>
            <p class="subtitle">SQLite„Åã„ÇâPostgreSQL„Åæ„Åß - ÂÆüÈ®ì„Éá„Éº„Çø„ÅÆÊßãÈÄ†Âåñ„Å®ÂÖ¨Èñã</p>
            <div class="meta">
                <span class="meta-item">üìñ Ë™≠‰∫ÜÊôÇÈñì: 15-20ÂàÜ</span>
                <span class="meta-item">üìä Èõ£ÊòìÂ∫¶: ÂàùÁ¥ö„Äú‰∏≠Á¥ö</span>
                <span class="meta-item">üíª „Ç≥„Éº„Éâ‰æã: 10ÂÄã</span>
                <span class="meta-item">üìù ÊºîÁøíÂïèÈ°å: 3Âïè</span>
            </div>
        </div>
    </header>

    <main class="container">
<h1>Á¨¨4Á´†ÔºöÁã¨Ëá™„Éá„Éº„Çø„Éô„Éº„ÇπÊßãÁØâ</h1>
<p class="chapter-description" style="margin: 1.5rem 0; padding: 1rem; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-left: 4px solid #7b2cbf; border-radius: 8px; font-size: 1.05rem; line-height: 1.8; color: #2d3748;">Â∞è„Åï„ÅèÂßã„ÇÅ„Çã„É≠„Éº„Ç´„É´DB„Åã„ÇâÂÖ±Êúâ„ÉªÂÖ¨Èñã„Åæ„Åß„ÅÆÈÅìÁ≠ã„ÇíÁ§∫„Åó„Åæ„Åô„ÄÇÈÅãÁî®„É´„Éº„É´„Å®„Çª„Ç≠„É•„É™„ÉÜ„Ç£„ÅÆÂü∫Êú¨„ÇÇÊäº„Åï„Åà„Åæ„Åô„ÄÇ</p>




<p><strong>SQLite„Åã„ÇâPostgreSQL„Åæ„Åß - ÂÆüÈ®ì„Éá„Éº„Çø„ÅÆÊßãÈÄ†Âåñ„Å®ÂÖ¨Èñã</strong></p>
<h2>Â≠¶ÁøíÁõÆÊ®ô</h2>
<p>„Åì„ÅÆÁ´†„ÇíË™≠„ÇÄ„Åì„Å®„Åß„ÄÅ‰ª•‰∏ã„ÇíÁøíÂæó„Åß„Åç„Åæ„ÅôÔºö</p>
<ul>
<li>‚úÖ ÊùêÊñô„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆ„Çπ„Ç≠„Éº„Éû„ÇíË®≠Ë®à„Åß„Åç„Çã</li>
<li>‚úÖ SQLite„ÅßÂÆüÁî®ÁöÑ„Å™„Éá„Éº„Çø„Éô„Éº„Çπ„ÇíÊßãÁØâ„Åß„Åç„Çã</li>
<li>‚úÖ PostgreSQL„ÅßÂ§ßË¶èÊ®°„Éá„Éº„Çø„ÇíÁÆ°ÁêÜ„Åß„Åç„Çã</li>
<li>‚úÖ „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Å®„Éê„Éº„Ç∏„Éß„É≥ÁÆ°ÁêÜ„Åå„Åß„Åç„Çã</li>
<li>‚úÖ „Éá„Éº„Çø„ÇíÂÖ¨Èñã„Åó„ÄÅDOI„ÇíÂèñÂæó„Åß„Åç„Çã</li>
</ul>
<p><strong>Ë™≠‰∫ÜÊôÇÈñì</strong>: 15-20ÂàÜ
<strong>„Ç≥„Éº„Éâ‰æã</strong>: 10ÂÄã
<strong>ÊºîÁøíÂïèÈ°å</strong>: 3Âïè</p>
<hr />
<h2>4.1 „Éá„Éº„Çø„Éô„Éº„ÇπË®≠Ë®à„ÅÆÂü∫Á§é</h2>
<h3>4.1.1 „Çπ„Ç≠„Éº„ÉûË®≠Ë®à„ÅÆÂéüÂâá</h3>
<p>ÊùêÊñô„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆ„Çπ„Ç≠„Éº„ÉûË®≠Ë®à„Åß„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆ3„Å§„ÅÆ‰∏ªË¶Å„ÉÜ„Éº„Éñ„É´„ÇíÂÆöÁæ©„Åó„Åæ„ÅôÔºö</p>
<ol>
<li><strong>MaterialsÔºàÊùêÊñôÔºâ</strong>: ÊùêÊñô„ÅÆÂü∫Êú¨ÊÉÖÂ†±</li>
<li><strong>PropertiesÔºàÁâπÊÄßÔºâ</strong>: Ê∏¨ÂÆö„Åï„Çå„ÅüÁâπÊÄß„Éá„Éº„Çø</li>
<li><strong>ExperimentsÔºàÂÆüÈ®ìÔºâ</strong>: ÂÆüÈ®ìÊù°‰ª∂„Å®„É°„Çø„Éá„Éº„Çø</li>
</ol>
<p><strong>ERÂõ≥ÔºàEntity-Relationship DiagramÔºâ</strong>:</p>
<div class="mermaid">
erDiagram
    Materials ||--o{ Properties : has
    Materials ||--o{ Experiments : tested_in
    Experiments ||--o{ Properties : produces

    Materials {
        int material_id PK
        string formula
        string structure_type
        float density
        datetime created_at
    }

    Properties {
        int property_id PK
        int material_id FK
        int experiment_id FK
        string property_type
        float value
        float uncertainty
        string unit
    }

    Experiments {
        int experiment_id PK
        string experiment_type
        datetime date
        string operator
        string conditions
    }
</div>

<h3>4.1.2 Ê≠£Ë¶èÂåñ</h3>
<p><strong>Á¨¨1Ê≠£Ë¶èÂΩ¢Ôºà1NFÔºâ</strong>: ÂêÑÂàó„ÅØÂéüÂ≠êÁöÑ„Å™ÂÄ§
<strong>Á¨¨2Ê≠£Ë¶èÂΩ¢Ôºà2NFÔºâ</strong>: ÈÉ®ÂàÜÈñ¢Êï∞ÂæìÂ±ûÊÄß„ÇíÊéíÈô§
<strong>Á¨¨3Ê≠£Ë¶èÂΩ¢Ôºà3NFÔºâ</strong>: Êé®ÁßªÁöÑÈñ¢Êï∞ÂæìÂ±ûÊÄß„ÇíÊéíÈô§</p>
<p><strong>„Ç≥„Éº„Éâ‰æã1: „Çπ„Ç≠„Éº„ÉûÂÆöÁæ©ÔºàSQLiteÔºâ</strong></p>
<pre><code class="language-python">import sqlite3

# „Éá„Éº„Çø„Éô„Éº„ÇπÊé•Á∂ö
conn = sqlite3.connect('materials.db')
cursor = conn.cursor()

# Materials„ÉÜ„Éº„Éñ„É´
cursor.execute('''
CREATE TABLE IF NOT EXISTS materials (
    material_id INTEGER PRIMARY KEY AUTOINCREMENT,
    formula TEXT NOT NULL,
    structure_type TEXT,
    density REAL,
    space_group INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    notes TEXT
)
''')

# Properties„ÉÜ„Éº„Éñ„É´
cursor.execute('''
CREATE TABLE IF NOT EXISTS properties (
    property_id INTEGER PRIMARY KEY AUTOINCREMENT,
    material_id INTEGER NOT NULL,
    experiment_id INTEGER,
    property_type TEXT NOT NULL,
    value REAL NOT NULL,
    uncertainty REAL,
    unit TEXT,
    measured_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (material_id) REFERENCES materials(material_id),
    FOREIGN KEY (experiment_id) REFERENCES experiments(experiment_id)
)
''')

# Experiments„ÉÜ„Éº„Éñ„É´
cursor.execute('''
CREATE TABLE IF NOT EXISTS experiments (
    experiment_id INTEGER PRIMARY KEY AUTOINCREMENT,
    experiment_type TEXT NOT NULL,
    date DATE,
    operator TEXT,
    temperature REAL,
    pressure REAL,
    conditions TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
''')

# „Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ‰ΩúÊàêÔºàÊ§úÁ¥¢È´òÈÄüÂåñÔºâ
cursor.execute('''
CREATE INDEX IF NOT EXISTS idx_formula
ON materials(formula)
''')

cursor.execute('''
CREATE INDEX IF NOT EXISTS idx_property_type
ON properties(property_type)
''')

conn.commit()
print(&quot;„Éá„Éº„Çø„Éô„Éº„Çπ„Çπ„Ç≠„Éº„Éû‰ΩúÊàêÂÆå‰∫Ü&quot;)
</code></pre>
<hr />
<h2>4.2 SQLite„Å´„Çà„Çã„É≠„Éº„Ç´„É´DB</h2>
<h3>4.2.1 CRUDÊìç‰Ωú</h3>
<p><strong>„Ç≥„Éº„Éâ‰æã2: CreateÔºà„Éá„Éº„ÇøÊåøÂÖ•Ôºâ</strong></p>
<pre><code class="language-python">import sqlite3
from datetime import datetime

conn = sqlite3.connect('materials.db')
cursor = conn.cursor()

def insert_material(formula, structure_type, density):
    &quot;&quot;&quot;ÊùêÊñô„Éá„Éº„Çø„ÅÆÊåøÂÖ•&quot;&quot;&quot;
    cursor.execute('''
    INSERT INTO materials (formula, structure_type, density)
    VALUES (?, ?, ?)
    ''', (formula, structure_type, density))

    conn.commit()
    material_id = cursor.lastrowid
    print(f&quot;ÊùêÊñôËøΩÂä†: ID={material_id}, {formula}&quot;)
    return material_id

def insert_property(
    material_id,
    property_type,
    value,
    uncertainty=None,
    unit=None
):
    &quot;&quot;&quot;ÁâπÊÄß„Éá„Éº„Çø„ÅÆÊåøÂÖ•&quot;&quot;&quot;
    cursor.execute('''
    INSERT INTO properties
    (material_id, property_type, value, uncertainty, unit)
    VALUES (?, ?, ?, ?, ?)
    ''', (material_id, property_type, value, uncertainty, unit))

    conn.commit()
    print(f&quot;ÁâπÊÄßËøΩÂä†: {property_type}={value} {unit}&quot;)

# ‰ΩøÁî®‰æã
mat_id = insert_material(&quot;TiO2&quot;, &quot;rutile&quot;, 4.23)
insert_property(mat_id, &quot;band_gap&quot;, 3.0, 0.1, &quot;eV&quot;)
insert_property(mat_id, &quot;refractive_index&quot;, 2.61, 0.02, &quot;&quot;)
</code></pre>
<p><strong>„Ç≥„Éº„Éâ‰æã3: ReadÔºà„Éá„Éº„ÇøÂèñÂæóÔºâ</strong></p>
<pre><code class="language-python">def query_materials(formula_pattern=None):
    &quot;&quot;&quot;ÊùêÊñôÊ§úÁ¥¢&quot;&quot;&quot;
    if formula_pattern:
        cursor.execute('''
        SELECT * FROM materials
        WHERE formula LIKE ?
        ''', (f&quot;%{formula_pattern}%&quot;,))
    else:
        cursor.execute('SELECT * FROM materials')

    results = cursor.fetchall()

    print(f&quot;Ê§úÁ¥¢ÁµêÊûú: {len(results)}‰ª∂&quot;)
    for row in results:
        print(f&quot;ID: {row[0]}, Formula: {row[1]}, &quot;
              f&quot;Type: {row[2]}, Density: {row[3]}&quot;)

    return results

def query_properties(material_id):
    &quot;&quot;&quot;ÁâπÊÄß„Éá„Éº„ÇøÂèñÂæó&quot;&quot;&quot;
    cursor.execute('''
    SELECT p.property_type, p.value, p.uncertainty, p.unit
    FROM properties p
    WHERE p.material_id = ?
    ''', (material_id,))

    results = cursor.fetchall()

    print(f&quot;\nÊùêÊñôID {material_id} „ÅÆÁâπÊÄß:&quot;)
    for row in results:
        prop_type, value, unc, unit = row
        if unc:
            print(f&quot;- {prop_type}: {value} ¬± {unc} {unit}&quot;)
        else:
            print(f&quot;- {prop_type}: {value} {unit}&quot;)

    return results

# ‰ΩøÁî®‰æã
query_materials(&quot;TiO2&quot;)
query_properties(1)
</code></pre>
<p><strong>„Ç≥„Éº„Éâ‰æã4: UpdateÔºà„Éá„Éº„ÇøÊõ¥Êñ∞Ôºâ</strong></p>
<pre><code class="language-python">def update_material(material_id, **kwargs):
    &quot;&quot;&quot;ÊùêÊñô„Éá„Éº„Çø„ÅÆÊõ¥Êñ∞&quot;&quot;&quot;
    set_clause = &quot;, &quot;.join(
        [f&quot;{key} = ?&quot; for key in kwargs.keys()]
    )
    values = list(kwargs.values()) + [material_id]

    cursor.execute(f'''
    UPDATE materials
    SET {set_clause}
    WHERE material_id = ?
    ''', values)

    conn.commit()
    print(f&quot;ÊùêÊñôID {material_id} „ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü&quot;)

# ‰ΩøÁî®‰æã
update_material(1, density=4.24, notes=&quot;Updated density&quot;)
</code></pre>
<p><strong>„Ç≥„Éº„Éâ‰æã5: DeleteÔºà„Éá„Éº„ÇøÂâäÈô§Ôºâ</strong></p>
<pre><code class="language-python">def delete_material(material_id):
    &quot;&quot;&quot;ÊùêÊñô„Éá„Éº„Çø„ÅÆÂâäÈô§Ôºà„Ç´„Çπ„Ç±„Éº„ÉâÔºâ&quot;&quot;&quot;
    # Èñ¢ÈÄ£„Åô„ÇãÁâπÊÄß„Éá„Éº„Çø„ÇÇÂâäÈô§
    cursor.execute('''
    DELETE FROM properties WHERE material_id = ?
    ''', (material_id,))

    cursor.execute('''
    DELETE FROM materials WHERE material_id = ?
    ''', (material_id,))

    conn.commit()
    print(f&quot;ÊùêÊñôID {material_id} „ÇíÂâäÈô§„Åó„Åæ„Åó„Åü&quot;)

# ‰ΩøÁî®‰æãÔºàÊÖéÈáç„Å´‰ΩøÁî®Ôºâ
# delete_material(1)
</code></pre>
<hr />
<h2>4.3 PostgreSQL/MySQL„Åß„ÅÆÂ§ßË¶èÊ®°„Éá„Éº„ÇøÁÆ°ÁêÜ</h2>
<h3>4.3.1 PostgreSQLÊé•Á∂ö</h3>
<p><strong>„Ç≥„Éº„Éâ‰æã6: PostgreSQLÊé•Á∂ö„Å®„Çπ„Ç≠„Éº„Éû‰ΩúÊàê</strong></p>
<pre><code class="language-python">import psycopg2
from psycopg2 import sql

# PostgreSQLÊé•Á∂ö
conn = psycopg2.connect(
    host=&quot;localhost&quot;,
    database=&quot;materials_db&quot;,
    user=&quot;your_username&quot;,
    password=&quot;your_password&quot;
)

cursor = conn.cursor()

# „ÉÜ„Éº„Éñ„É´‰ΩúÊàêÔºàPostgreSQLÁâàÔºâ
cursor.execute('''
CREATE TABLE IF NOT EXISTS materials (
    material_id SERIAL PRIMARY KEY,
    formula VARCHAR(100) NOT NULL,
    structure_type VARCHAR(50),
    density REAL,
    space_group INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    notes TEXT,
    UNIQUE(formula)
)
''')

cursor.execute('''
CREATE TABLE IF NOT EXISTS properties (
    property_id SERIAL PRIMARY KEY,
    material_id INTEGER NOT NULL,
    experiment_id INTEGER,
    property_type VARCHAR(50) NOT NULL,
    value REAL NOT NULL,
    uncertainty REAL,
    unit VARCHAR(20),
    measured_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (material_id)
        REFERENCES materials(material_id)
        ON DELETE CASCADE,
    FOREIGN KEY (experiment_id)
        REFERENCES experiments(experiment_id)
        ON DELETE SET NULL
)
''')

# GIN„Ç§„É≥„Éá„ÉÉ„ÇØ„ÇπÔºàÂÖ®ÊñáÊ§úÁ¥¢Áî®Ôºâ
cursor.execute('''
CREATE INDEX IF NOT EXISTS idx_formula_gin
ON materials USING GIN (to_tsvector('english', formula))
''')

conn.commit()
print(&quot;PostgreSQL„Çπ„Ç≠„Éº„Éû‰ΩúÊàêÂÆå‰∫Ü&quot;)
</code></pre>
<h3>4.3.2 „Éê„É´„ÇØ„Ç§„É≥„Çµ„Éº„Éà</h3>
<p><strong>„Ç≥„Éº„Éâ‰æã7: Â§ßÈáè„Éá„Éº„Çø„ÅÆÂäπÁéáÁöÑÊåøÂÖ•</strong></p>
<pre><code class="language-python">import pandas as pd
from psycopg2.extras import execute_batch

def bulk_insert_materials(df):
    &quot;&quot;&quot;DataFrame„Åã„Çâ‰∏ÄÊã¨ÊåøÂÖ•&quot;&quot;&quot;
    data = [
        (
            row['formula'],
            row['structure_type'],
            row['density']
        )
        for _, row in df.iterrows()
    ]

    insert_query = '''
    INSERT INTO materials (formula, structure_type, density)
    VALUES (%s, %s, %s)
    ON CONFLICT (formula) DO NOTHING
    '''

    execute_batch(cursor, insert_query, data, page_size=1000)
    conn.commit()

    print(f&quot;{len(data)}‰ª∂„ÅÆ„Éá„Éº„Çø„ÇíÊåøÂÖ•„Åó„Åæ„Åó„Åü&quot;)

# ‰ΩøÁî®‰æã
df = pd.DataFrame({
    'formula': ['TiO2', 'ZnO', 'GaN', 'SiC'],
    'structure_type': ['rutile', 'wurtzite', 'wurtzite', 'zincblende'],
    'density': [4.23, 5.61, 6.15, 3.21]
})

bulk_insert_materials(df)
</code></pre>
<hr />
<h2>4.4 „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÊà¶Áï•</h2>
<h3>4.4.1 ÂÆöÊúü„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó</h3>
<p><strong>„Ç≥„Éº„Éâ‰æã8: Ëá™Âãï„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Çπ„ÇØ„É™„Éó„Éà</strong></p>
<pre><code class="language-python">import sqlite3
import shutil
from datetime import datetime
import os

class DatabaseBackup:
    &quot;&quot;&quot;„Éá„Éº„Çø„Éô„Éº„Çπ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÁÆ°ÁêÜ&quot;&quot;&quot;

    def __init__(self, db_path, backup_dir=&quot;backups&quot;):
        self.db_path = db_path
        self.backup_dir = backup_dir
        os.makedirs(backup_dir, exist_ok=True)

    def create_backup(self):
        &quot;&quot;&quot;„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê&quot;&quot;&quot;
        timestamp = datetime.now().strftime(&quot;%Y%m%d_%H%M%S&quot;)
        backup_name = f&quot;materials_db_{timestamp}.db&quot;
        backup_path = os.path.join(
            self.backup_dir, backup_name
        )

        # „Éá„Éº„Çø„Éô„Éº„Çπ„Çí„Ç≥„Éî„Éº
        shutil.copy2(self.db_path, backup_path)

        # ÂúßÁ∏ÆÔºà„Ç™„Éó„Ç∑„Éß„É≥Ôºâ
        import gzip
        with open(backup_path, 'rb') as f_in:
            with gzip.open(f&quot;{backup_path}.gz&quot;, 'wb') as f_out:
                shutil.copyfileobj(f_in, f_out)

        os.remove(backup_path)  # ÈùûÂúßÁ∏ÆÁâà„ÇíÂâäÈô§

        print(f&quot;„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê: {backup_path}.gz&quot;)
        return f&quot;{backup_path}.gz&quot;

    def restore_backup(self, backup_file):
        &quot;&quot;&quot;„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Åã„ÇâÂæ©ÂÖÉ&quot;&quot;&quot;
        import gzip

        # Ëß£Âáç
        temp_db = &quot;temp_restored.db&quot;
        with gzip.open(backup_file, 'rb') as f_in:
            with open(temp_db, 'wb') as f_out:
                shutil.copyfileobj(f_in, f_out)

        # ÁèæÂú®„ÅÆDB„Çí„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó
        self.create_backup()

        # Âæ©ÂÖÉ
        shutil.move(temp_db, self.db_path)
        print(f&quot;„Éá„Éº„Çø„Éô„Éº„ÇπÂæ©ÂÖÉÂÆå‰∫Ü: {backup_file}&quot;)

    def list_backups(self):
        &quot;&quot;&quot;„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰∏ÄË¶ß&quot;&quot;&quot;
        backups = sorted(
            [f for f in os.listdir(self.backup_dir)
             if f.endswith('.gz')]
        )

        print(&quot;=== „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰∏ÄË¶ß ===&quot;)
        for i, backup in enumerate(backups, 1):
            size = os.path.getsize(
                os.path.join(self.backup_dir, backup)
            ) / 1024  # KB
            print(f&quot;{i}. {backup} ({size:.1f} KB)&quot;)

        return backups

# ‰ΩøÁî®‰æã
backup_mgr = DatabaseBackup('materials.db')
backup_mgr.create_backup()
backup_mgr.list_backups()
</code></pre>
<h3>4.4.2 „Éê„Éº„Ç∏„Éß„É≥ÁÆ°ÁêÜÔºàGit LFSÔºâ</h3>
<p><strong>„Ç≥„Éº„Éâ‰æã9: Git LFS„Åß„Éá„Éº„Çø„Éê„Éº„Ç∏„Éß„É≥ÁÆ°ÁêÜ</strong></p>
<pre><code class="language-bash"># Git LFS„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó
git lfs install

# Â§ßÂÆπÈáè„Éï„Ç°„Ç§„É´„ÇíËøΩË∑°
git lfs track &quot;*.db&quot;
git lfs track &quot;*.db.gz&quot;

# .gitattributes„Å´Ëá™ÂãïËøΩÂä†„Åï„Çå„Çã
cat .gitattributes
# *.db filter=lfs diff=lfs merge=lfs -text
# *.db.gz filter=lfs diff=lfs merge=lfs -text

# „Ç≥„Éü„ÉÉ„Éà
git add materials.db .gitattributes
git commit -m &quot;Add materials database&quot;
git push origin main
</code></pre>
<hr />
<h2>4.5 „Éá„Éº„ÇøÂÖ¨Èñã„Å®DOIÂèñÂæó</h2>
<h3>4.5.1 Zenodo„Å∏„ÅÆ„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</h3>
<p><strong>„Ç≥„Éº„Éâ‰æã10: Zenodo API„Åß„Éá„Éº„ÇøÂÖ¨Èñã</strong></p>
<pre><code class="language-python">import requests
import json

ZENODO_TOKEN = &quot;your_zenodo_token&quot;
ZENODO_URL = &quot;https://zenodo.org/api/deposit/depositions&quot;

def create_zenodo_deposit(
    title,
    description,
    creators,
    keywords
):
    &quot;&quot;&quot;Zenodo„Å´„Éá„Éù„Ç∏„ÉÉ„Éà‰ΩúÊàê&quot;&quot;&quot;

    headers = {
        &quot;Content-Type&quot;: &quot;application/json&quot;
    }
    params = {&quot;access_token&quot;: ZENODO_TOKEN}

    # „É°„Çø„Éá„Éº„Çø
    data = {
        &quot;metadata&quot;: {
            &quot;title&quot;: title,
            &quot;upload_type&quot;: &quot;dataset&quot;,
            &quot;description&quot;: description,
            &quot;creators&quot;: creators,
            &quot;keywords&quot;: keywords,
            &quot;access_right&quot;: &quot;open&quot;,
            &quot;license&quot;: &quot;cc-by-4.0&quot;
        }
    }

    # „Éá„Éù„Ç∏„ÉÉ„Éà‰ΩúÊàê
    response = requests.post(
        ZENODO_URL,
        params=params,
        json=data,
        headers=headers
    )

    if response.status_code == 201:
        deposition = response.json()
        deposition_id = deposition['id']
        bucket_url = deposition['links']['bucket']

        print(f&quot;„Éá„Éù„Ç∏„ÉÉ„Éà‰ΩúÊàêÊàêÂäü: ID={deposition_id}&quot;)
        return deposition_id, bucket_url
    else:
        print(f&quot;„Ç®„É©„Éº: {response.status_code}&quot;)
        print(response.text)
        return None, None

def upload_file_to_zenodo(bucket_url, file_path):
    &quot;&quot;&quot;„Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ&quot;&quot;&quot;
    params = {&quot;access_token&quot;: ZENODO_TOKEN}

    with open(file_path, 'rb') as f:
        response = requests.put(
            f&quot;{bucket_url}/{os.path.basename(file_path)}&quot;,
            params=params,
            data=f
        )

    if response.status_code == 200:
        print(f&quot;„Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÊàêÂäü: {file_path}&quot;)
        return True
    else:
        print(f&quot;„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Ç®„É©„Éº: {response.status_code}&quot;)
        return False

def publish_zenodo_deposit(deposition_id):
    &quot;&quot;&quot;„Éá„Éù„Ç∏„ÉÉ„ÉàÂÖ¨ÈñãÔºàDOIÂèñÂæóÔºâ&quot;&quot;&quot;
    params = {&quot;access_token&quot;: ZENODO_TOKEN}
    url = f&quot;{ZENODO_URL}/{deposition_id}/actions/publish&quot;

    response = requests.post(url, params=params)

    if response.status_code == 202:
        result = response.json()
        doi = result['doi']
        print(f&quot;ÂÖ¨ÈñãÊàêÂäüÔºÅ DOI: {doi}&quot;)
        return doi
    else:
        print(f&quot;ÂÖ¨Èñã„Ç®„É©„Éº: {response.status_code}&quot;)
        return None

# ‰ΩøÁî®‰æã
deposition_id, bucket_url = create_zenodo_deposit(
    title=&quot;Materials Database - Experimental Data&quot;,
    description=&quot;Experimental materials properties dataset&quot;,
    creators=[
        {&quot;name&quot;: &quot;Hashimoto, Yusuke&quot;,
         &quot;affiliation&quot;: &quot;Tohoku University&quot;}
    ],
    keywords=[&quot;materials science&quot;, &quot;database&quot;,
              &quot;properties&quot;]
)

if deposition_id:
    # „Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ
    upload_file_to_zenodo(bucket_url, &quot;materials.db.gz&quot;)

    # ÂÖ¨ÈñãÔºàDOIÂèñÂæóÔºâ
    doi = publish_zenodo_deposit(deposition_id)
    print(f&quot;\nDOI: https://doi.org/{doi}&quot;)
</code></pre>
<hr />
<h2>4.6 ÂÆüË∑µ„Éó„É≠„Ç∏„Çß„ÇØ„Éà</h2>
<h3>4.6.1 ÂÆüÈ®ì„Éá„Éº„Çø„ÅÆÊßãÈÄ†Âåñ</h3>
<div class="mermaid">
flowchart LR
    A[ÂÆüÈ®ì„Éé„Éº„Éà] --> B[Excel„Éá„Éº„Çø]
    B --> C[pandas DataFrame]
    C --> D[„Éá„Éº„Çø„ÇØ„É™„Éº„Éã„É≥„Ç∞]
    D --> E[SQLite„Å´ÊåøÂÖ•]
    E --> F[ÂìÅË≥™„ÉÅ„Çß„ÉÉ„ÇØ]
    F --> G[PostgreSQL„Å´ÁßªË°å]
    G --> H[Zenodo„Å´ÂÖ¨Èñã]
    H --> I[DOIÂèñÂæó]

    style A fill:#e3f2fd
    style I fill:#e8f5e9
</div>

<hr />
<h2>4.7 Êú¨Á´†„ÅÆ„Åæ„Å®„ÇÅ</h2>
<h3>Â≠¶„Çì„Å†„Åì„Å®</h3>
<ol>
<li>
<p><strong>„Éá„Éº„Çø„Éô„Éº„ÇπË®≠Ë®à</strong>
   - ERÂõ≥„Å´„Çà„Çã„Çπ„Ç≠„Éº„ÉûË®≠Ë®à
   - Ê≠£Ë¶èÂåñÔºà1NF„ÄÅ2NF„ÄÅ3NFÔºâ
   - „Ç§„É≥„Éá„ÉÉ„ÇØ„ÇπÊà¶Áï•</p>
</li>
<li>
<p><strong>SQLiteÂÆüË£Ö</strong>
   - CRUDÊìç‰ΩúÔºàCreate„ÄÅRead„ÄÅUpdate„ÄÅDeleteÔºâ
   - „Éà„É©„É≥„Ç∂„ÇØ„Ç∑„Éß„É≥ÁÆ°ÁêÜ
   - „ÇØ„Ç®„É™ÊúÄÈÅ©Âåñ</p>
</li>
<li>
<p><strong>PostgreSQL</strong>
   - Â§ßË¶èÊ®°„Éá„Éº„ÇøÂØæÂøú
   - „Éê„É´„ÇØ„Ç§„É≥„Çµ„Éº„Éà
   - ÂÖ®ÊñáÊ§úÁ¥¢„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ</p>
</li>
<li>
<p><strong>„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó</strong>
   - ÂÆöÊúü„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóËá™ÂãïÂåñ
   - ÂúßÁ∏Æ„Çπ„Éà„É¨„Éº„Ç∏
   - Git LFS„Å´„Çà„Çã„Éê„Éº„Ç∏„Éß„É≥ÁÆ°ÁêÜ</p>
</li>
<li>
<p><strong>„Éá„Éº„ÇøÂÖ¨Èñã</strong>
   - Zenodo API„Åß„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ
   - DOIÂèñÂæó
   - „Ç™„Éº„Éó„É≥„É©„Ç§„Çª„É≥„ÇπÈÅ∏Êäû</p>
</li>
</ol>
<h3>ÈáçË¶Å„Å™„Éù„Ç§„É≥„Éà</h3>
<ul>
<li>‚úÖ „Çπ„Ç≠„Éº„ÉûË®≠Ë®à„ÅØÊúÄÂàù„ÅåËÇùÂøÉ</li>
<li>‚úÖ SQLite„ÅØÂ∞è„Äú‰∏≠Ë¶èÊ®°„Å´ÊúÄÈÅ©</li>
<li>‚úÖ PostgreSQL„ÅØÂ§ßË¶èÊ®°„Éá„Éº„Çø„Å´ÂØæÂøú</li>
<li>‚úÖ „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„ÅØÂøÖÈ†àÔºà3-2-1„É´„Éº„É´Ôºâ</li>
<li>‚úÖ „Éá„Éº„ÇøÂÖ¨Èñã„ÅßDOIÂèñÂæó„ÄÅÂºïÁî®ÂèØËÉΩ„Å´</li>
</ul>
<h3>„Ç∑„É™„Éº„Ç∫ÂÆå‰∫ÜÔºÅ</h3>
<p>„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅÊùêÊñô„Éá„Éº„Çø„Éô„Éº„ÇπÊ¥ªÁî®ÂÖ•ÈñÄ„Ç∑„É™„Éº„Ç∫„ÇíÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇ</p>
<p><strong>ÁøíÂæó„Åó„Åü„Çπ„Ç≠„É´</strong>:
- 4Â§ßÊùêÊñô„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÊ¥ªÁî®
- Materials Project API„ÅÆÂÆåÂÖ®„Éû„Çπ„Çø„Éº
- Ë§áÊï∞DB„ÅÆÁµ±Âêà„Å®„ÇØ„É™„Éº„Éã„É≥„Ç∞
- Áã¨Ëá™„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÊßãÁØâ„Å®ÂÖ¨Èñã</p>
<p><strong>Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó</strong>:
- <a href="../mi-introduction/index.html">MIÂÖ•ÈñÄ„Ç∑„É™„Éº„Ç∫</a>„ÅßÊ©üÊ¢∞Â≠¶Áøí„ÇíÂ≠¶„Å∂
- <a href="../bayesian-optimization/index.html">„Éô„Ç§„Ç∫ÊúÄÈÅ©ÂåñÂÖ•ÈñÄ</a>„ÅßÂäπÁéáÁöÑÊé¢Á¥¢
- Áã¨Ëá™„ÅÆÁ†îÁ©∂„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Å´ÂøúÁî®</p>
<p><strong><a href="./index.html">‚Üê „Ç∑„É™„Éº„Ç∫ÁõÆÊ¨°„Å´Êàª„Çã</a></strong></p>
<hr />
<h2>ÊºîÁøíÂïèÈ°å</h2>
<h3>ÂïèÈ°å1ÔºàÈõ£ÊòìÂ∫¶ÔºöeasyÔºâ</h3>
<p>SQLite„ÅßÊùêÊñô„Éá„Éº„Çø„Éô„Éº„Çπ„Çí‰ΩúÊàê„Åó„ÄÅ‰ª•‰∏ã„ÅÆ„Éá„Éº„Çø„ÇíÊåøÂÖ•„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
<p><strong>„Éá„Éº„Çø</strong>:
- TiO2: rutile, ÂØÜÂ∫¶4.23 g/cm¬≥, „Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó3.0 eV
- ZnO: wurtzite, ÂØÜÂ∫¶5.61 g/cm¬≥, „Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„Éó3.4 eV</p>
<p><strong>Ë¶ÅÊ±Ç‰∫ãÈ†Ö</strong>:
1. materials„ÄÅproperties„ÉÜ„Éº„Éñ„É´‰ΩúÊàê
2. „Éá„Éº„ÇøÊåøÂÖ•
3. ÂÖ®„Éá„Éº„ÇøÂèñÂæó„Åó„Å¶Ë°®Á§∫</p>
<details>
<summary>Ëß£Á≠î‰æã</summary>


<pre><code class="language-python">import sqlite3

conn = sqlite3.connect('materials_practice.db')
cursor = conn.cursor()

# „ÉÜ„Éº„Éñ„É´‰ΩúÊàê
cursor.execute('''
CREATE TABLE materials (
    material_id INTEGER PRIMARY KEY,
    formula TEXT,
    structure_type TEXT,
    density REAL
)
''')

cursor.execute('''
CREATE TABLE properties (
    property_id INTEGER PRIMARY KEY,
    material_id INTEGER,
    property_type TEXT,
    value REAL,
    unit TEXT,
    FOREIGN KEY (material_id) REFERENCES materials(material_id)
)
''')

# „Éá„Éº„ÇøÊåøÂÖ•
materials_data = [
    ('TiO2', 'rutile', 4.23),
    ('ZnO', 'wurtzite', 5.61)
]

for formula, struct, density in materials_data:
    cursor.execute('''
    INSERT INTO materials (formula, structure_type, density)
    VALUES (?, ?, ?)
    ''', (formula, struct, density))

# „Éê„É≥„Éâ„ÇÆ„É£„ÉÉ„ÉóËøΩÂä†
cursor.execute('''
INSERT INTO properties (material_id, property_type, value, unit)
VALUES (1, 'band_gap', 3.0, 'eV')
''')

cursor.execute('''
INSERT INTO properties (material_id, property_type, value, unit)
VALUES (2, 'band_gap', 3.4, 'eV')
''')

conn.commit()

# „Éá„Éº„ÇøÂèñÂæó
cursor.execute('''
SELECT m.formula, m.structure_type, m.density, p.value
FROM materials m
JOIN properties p ON m.material_id = p.material_id
WHERE p.property_type = 'band_gap'
''')

print(&quot;=== „Éá„Éº„Çø„Éô„Éº„ÇπÂÜÖÂÆπ ===&quot;)
for row in cursor.fetchall():
    print(f&quot;{row[0]}: {row[1]}, {row[2]} g/cm¬≥, &quot;
          f&quot;Eg={row[3]} eV&quot;)

conn.close()
</code></pre>


</details>

<hr />
<h3>ÂïèÈ°å2ÔºàÈõ£ÊòìÂ∫¶ÔºömediumÔºâ</h3>
<p>„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Ç∑„Çπ„ÉÜ„É†„ÇíÊßãÁØâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
<p><strong>Ë¶ÅÊ±Ç‰∫ãÈ†Ö</strong>:
1. Êó•Ê¨°„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÔºàÂúßÁ∏ÆÔºâ
2. ÊúÄÊñ∞5‰∏ñ‰ª£„ÅÆ„Åø‰øùÊåÅ
3. „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰∏ÄË¶ßË°®Á§∫Ê©üËÉΩ</p>
<details>
<summary>Ëß£Á≠î‰æã</summary>


<pre><code class="language-python">import os
import shutil
import gzip
from datetime import datetime

class BackupManager:
    def __init__(self, db_path, backup_dir=&quot;backups&quot;,
                 max_backups=5):
        self.db_path = db_path
        self.backup_dir = backup_dir
        self.max_backups = max_backups
        os.makedirs(backup_dir, exist_ok=True)

    def create_backup(self):
        &quot;&quot;&quot;„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê&quot;&quot;&quot;
        timestamp = datetime.now().strftime(&quot;%Y%m%d_%H%M%S&quot;)
        backup_name = f&quot;backup_{timestamp}.db.gz&quot;
        backup_path = os.path.join(self.backup_dir,
                                   backup_name)

        # ÂúßÁ∏Æ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó
        with open(self.db_path, 'rb') as f_in:
            with gzip.open(backup_path, 'wb') as f_out:
                shutil.copyfileobj(f_in, f_out)

        print(f&quot;„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê: {backup_name}&quot;)

        # Âè§„ÅÑ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÂâäÈô§
        self.cleanup_old_backups()

    def cleanup_old_backups(self):
        &quot;&quot;&quot;Âè§„ÅÑ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÂâäÈô§&quot;&quot;&quot;
        backups = sorted(
            [f for f in os.listdir(self.backup_dir)
             if f.endswith('.db.gz')]
        )

        if len(backups) &gt; self.max_backups:
            to_delete = backups[:-self.max_backups]
            for backup in to_delete:
                os.remove(
                    os.path.join(self.backup_dir, backup)
                )
                print(f&quot;ÂâäÈô§: {backup}&quot;)

    def list_backups(self):
        &quot;&quot;&quot;„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰∏ÄË¶ß&quot;&quot;&quot;
        backups = sorted(
            [f for f in os.listdir(self.backup_dir)
             if f.endswith('.db.gz')]
        )

        print(&quot;=== „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰∏ÄË¶ß ===&quot;)
        for backup in backups:
            size = os.path.getsize(
                os.path.join(self.backup_dir, backup)
            ) / 1024
            print(f&quot;{backup} ({size:.1f} KB)&quot;)

# ‰ΩøÁî®‰æã
backup_mgr = BackupManager('materials_practice.db',
                           max_backups=5)
backup_mgr.create_backup()
backup_mgr.list_backups()
</code></pre>


</details>

<hr />
<h3>ÂïèÈ°å3ÔºàÈõ£ÊòìÂ∫¶ÔºöhardÔºâ</h3>
<p>ÂÆüÈ®ì„Éá„Éº„Çø„ÇíSQLite„Å´Ê†ºÁ¥ç„Åó„ÄÅZenodo„Å´ÂÖ¨Èñã„Åô„ÇãÂÆåÂÖ®„Å™„ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÇíÊßãÁØâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
<p><strong>Ë¶ÅÊ±Ç‰∫ãÈ†Ö</strong>:
1. Excel„Éï„Ç°„Ç§„É´„Åã„ÇâÂÆüÈ®ì„Éá„Éº„ÇøË™≠„ÅøËæº„Åø
2. SQLite„Å´Ê†ºÁ¥ç
3. „Éá„Éº„ÇøÂìÅË≥™„ÉÅ„Çß„ÉÉ„ÇØ
4. „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàê
5. Zenodo„É°„Çø„Éá„Éº„ÇøÊ∫ñÂÇôÔºàÂÖ¨Èñã„ÅØ‰ªªÊÑèÔºâ</p>
<details>
<summary>Ëß£Á≠î‰æã</summary>


<pre><code class="language-python">import pandas as pd
import sqlite3
import json
from datetime import datetime

class ExperimentalDataPipeline:
    &quot;&quot;&quot;ÂÆüÈ®ì„Éá„Éº„ÇøÂÖ¨Èñã„Éë„Ç§„Éó„É©„Ç§„É≥&quot;&quot;&quot;

    def __init__(self, db_path='experimental_data.db'):
        self.db_path = db_path
        self.conn = sqlite3.connect(db_path)
        self.setup_database()

    def setup_database(self):
        &quot;&quot;&quot;„Éá„Éº„Çø„Éô„Éº„ÇπÂàùÊúüÂåñ&quot;&quot;&quot;
        cursor = self.conn.cursor()

        cursor.execute('''
        CREATE TABLE IF NOT EXISTS experiments (
            experiment_id INTEGER PRIMARY KEY,
            material_formula TEXT,
            experiment_type TEXT,
            date DATE,
            operator TEXT
        )
        ''')

        cursor.execute('''
        CREATE TABLE IF NOT EXISTS measurements (
            measurement_id INTEGER PRIMARY KEY,
            experiment_id INTEGER,
            property_type TEXT,
            value REAL,
            uncertainty REAL,
            unit TEXT,
            FOREIGN KEY (experiment_id)
                REFERENCES experiments(experiment_id)
        )
        ''')

        self.conn.commit()

    def load_excel_data(self, file_path):
        &quot;&quot;&quot;Excel„Åã„Çâ„Éá„Éº„ÇøË™≠„ÅøËæº„Åø&quot;&quot;&quot;
        df = pd.read_excel(file_path)
        print(f&quot;„Éá„Éº„ÇøË™≠„ÅøËæº„Åø: {len(df)}‰ª∂&quot;)
        return df

    def insert_data(self, df):
        &quot;&quot;&quot;„Éá„Éº„ÇøÊåøÂÖ•&quot;&quot;&quot;
        cursor = self.conn.cursor()

        for _, row in df.iterrows():
            # ÂÆüÈ®ì„Éá„Éº„ÇøÊåøÂÖ•
            cursor.execute('''
            INSERT INTO experiments
            (material_formula, experiment_type, date, operator)
            VALUES (?, ?, ?, ?)
            ''', (
                row['formula'],
                row['experiment_type'],
                row['date'],
                row['operator']
            ))

            exp_id = cursor.lastrowid

            # Ê∏¨ÂÆöÂÄ§ÊåøÂÖ•
            cursor.execute('''
            INSERT INTO measurements
            (experiment_id, property_type, value,
             uncertainty, unit)
            VALUES (?, ?, ?, ?, ?)
            ''', (
                exp_id,
                row['property'],
                row['value'],
                row.get('uncertainty'),
                row['unit']
            ))

        self.conn.commit()
        print(f&quot;{len(df)}‰ª∂„ÅÆ„Éá„Éº„Çø„ÇíÊåøÂÖ•&quot;)

    def quality_check(self):
        &quot;&quot;&quot;ÂìÅË≥™„ÉÅ„Çß„ÉÉ„ÇØ&quot;&quot;&quot;
        cursor = self.conn.cursor()

        # „Éá„Éº„Çø‰ª∂Êï∞
        cursor.execute('SELECT COUNT(*) FROM experiments')
        exp_count = cursor.fetchone()[0]

        cursor.execute('SELECT COUNT(*) FROM measurements')
        meas_count = cursor.fetchone()[0]

        # Ê¨†ÊêçÂÄ§„ÉÅ„Çß„ÉÉ„ÇØ
        cursor.execute('''
        SELECT COUNT(*) FROM measurements
        WHERE uncertainty IS NULL
        ''')
        missing_unc = cursor.fetchone()[0]

        print(&quot;=== ÂìÅË≥™„É¨„Éù„Éº„Éà ===&quot;)
        print(f&quot;ÂÆüÈ®ìÊï∞: {exp_count}&quot;)
        print(f&quot;Ê∏¨ÂÆöÊï∞: {meas_count}&quot;)
        print(f&quot;‰∏çÁ¢∫„Åã„ÅïÊ¨†Êêç: {missing_unc}‰ª∂&quot;)

    def prepare_zenodo_metadata(self, output_file='zenodo_metadata.json'):
        &quot;&quot;&quot;Zenodo„É°„Çø„Éá„Éº„ÇøÊ∫ñÂÇô&quot;&quot;&quot;
        metadata = {
            &quot;title&quot;: &quot;Experimental Materials Database&quot;,
            &quot;upload_type&quot;: &quot;dataset&quot;,
            &quot;description&quot;: &quot;Experimental data from lab measurements&quot;,
            &quot;creators&quot;: [
                {
                    &quot;name&quot;: &quot;Your Name&quot;,
                    &quot;affiliation&quot;: &quot;Your Institution&quot;
                }
            ],
            &quot;keywords&quot;: [
                &quot;materials science&quot;,
                &quot;experimental data&quot;,
                &quot;properties&quot;
            ],
            &quot;access_right&quot;: &quot;open&quot;,
            &quot;license&quot;: &quot;cc-by-4.0&quot;,
            &quot;version&quot;: &quot;1.0&quot;,
            &quot;publication_date&quot;: datetime.now().strftime(&quot;%Y-%m-%d&quot;)
        }

        with open(output_file, 'w') as f:
            json.dump(metadata, f, indent=2)

        print(f&quot;„É°„Çø„Éá„Éº„Çø‰øùÂ≠ò: {output_file}&quot;)

    def run(self, excel_file):
        &quot;&quot;&quot;„Éë„Ç§„Éó„É©„Ç§„É≥ÂÆüË°å&quot;&quot;&quot;
        print(&quot;=== ÂÆüÈ®ì„Éá„Éº„ÇøÂÖ¨Èñã„Éë„Ç§„Éó„É©„Ç§„É≥ ===&quot;)

        # „Éá„Éº„ÇøË™≠„ÅøËæº„Åø
        df = self.load_excel_data(excel_file)

        # „Éá„Éº„ÇøÊåøÂÖ•
        self.insert_data(df)

        # ÂìÅË≥™„ÉÅ„Çß„ÉÉ„ÇØ
        self.quality_check()

        # „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó
        backup_mgr = BackupManager(self.db_path)
        backup_mgr.create_backup()

        # Zenodo„É°„Çø„Éá„Éº„ÇøÊ∫ñÂÇô
        self.prepare_zenodo_metadata()

        print(&quot;\n=== ÂÆå‰∫Ü ===&quot;)
        print(&quot;Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó:&quot;)
        print(&quot;1. „Éá„Éº„Çø„Éô„Éº„ÇπÁ¢∫Ë™ç&quot;)
        print(&quot;2. Zenodo„Å´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ&quot;)
        print(&quot;3. DOIÂèñÂæó&quot;)

# ‰ΩøÁî®‰æãÔºàExcel„Éï„Ç°„Ç§„É´„ÅåÂøÖË¶ÅÔºâ
# pipeline = ExperimentalDataPipeline()
# pipeline.run('experimental_data.xlsx')
</code></pre>


</details>

<hr />
<h2>ÂèÇËÄÉÊñáÁåÆ</h2>
<ol>
<li>
<p>Wilkinson, M. D. et al. (2016). "The FAIR Guiding Principles." <em>Scientific Data</em>, 3, 160018.
   DOI: <a href="https://doi.org/10.1038/sdata.2016.18">10.1038/sdata.2016.18</a></p>
</li>
<li>
<p>Zenodo Documentation. "Developers." URL: <a href="https://developers.zenodo.org">developers.zenodo.org</a></p>
</li>
<li>
<p>SQLite Documentation. URL: <a href="https://sqlite.org/docs.html">sqlite.org/docs</a></p>
</li>
<li>
<p>PostgreSQL Documentation. URL: <a href="https://www.postgresql.org/docs/">postgresql.org/docs</a></p>
</li>
</ol>
<hr />
<h2>„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥</h2>
<h3>Ââç„ÅÆÁ´†</h3>
<p><strong><a href="./chapter-3.html">Á¨¨3Á´†Ôºö„Éá„Éº„Çø„Éô„Éº„ÇπÁµ±Âêà„Å®„ÉØ„Éº„ÇØ„Éï„É≠„Éº ‚Üê</a></strong></p>
<h3>„Ç∑„É™„Éº„Ç∫ÁõÆÊ¨°</h3>
<p><strong><a href="./index.html">‚Üê „Ç∑„É™„Éº„Ç∫ÁõÆÊ¨°„Å´Êàª„Çã</a></strong></p>
<hr />
<h2>ËëóËÄÖÊÉÖÂ†±</h2>
<p><strong>‰ΩúÊàêËÄÖ</strong>: AI Terakoya Content Team
<strong>Áõ£‰øÆ</strong>: Dr. Yusuke HashimotoÔºàÊù±ÂåóÂ§ßÂ≠¶Ôºâ
<strong>‰ΩúÊàêÊó•</strong>: 2025-10-17
<strong>„Éê„Éº„Ç∏„Éß„É≥</strong>: 1.0</p>
<p><strong>„É©„Ç§„Çª„É≥„Çπ</strong>: Creative Commons BY 4.0</p>
<hr />
<p><strong>ÊùêÊñô„Éá„Éº„Çø„Éô„Éº„ÇπÊ¥ªÁî®ÂÖ•ÈñÄ„Ç∑„É™„Éº„Ç∫„ÇíÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ</strong></p>
<p><strong>Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó</strong>: <a href="../mi-introduction/index.html">MIÂÖ•ÈñÄ„Ç∑„É™„Éº„Ç∫</a>„ÅßÊ©üÊ¢∞Â≠¶Áøí„ÅÆ‰∏ñÁïå„Å∏</p><div class="navigation">
    <a href="chapter-3.html" class="nav-button">‚Üê Ââç„ÅÆÁ´†</a>
    <a href="index.html" class="nav-button">„Ç∑„É™„Éº„Ç∫ÁõÆÊ¨°„Å´Êàª„Çã</a>
</div>
    </main>

    <footer>
        <p><strong>‰ΩúÊàêËÄÖ</strong>: AI Terakoya Content Team</p>
        <p><strong>Áõ£‰øÆ</strong>: Dr. Yusuke HashimotoÔºàÊù±ÂåóÂ§ßÂ≠¶Ôºâ</p>
        <p><strong>„Éê„Éº„Ç∏„Éß„É≥</strong>: 1.0 | <strong>‰ΩúÊàêÊó•</strong>: 2025-10-17</p>
        <p><strong>„É©„Ç§„Çª„É≥„Çπ</strong>: Creative Commons BY 4.0</p>
        <p>¬© 2025 AI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
