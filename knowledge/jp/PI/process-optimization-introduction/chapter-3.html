<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ç¬¬3ç« ï¼šå¤šç›®çš„æœ€é©åŒ–ã¨ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é© - ãƒ—ãƒ­ã‚»ã‚¹æœ€é©åŒ–å…¥é–€ã‚·ãƒªãƒ¼ã‚º">
    <title>ç¬¬3ç« ï¼šå¤šç›®çš„æœ€é©åŒ–ã¨ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é© - ãƒ—ãƒ­ã‚»ã‚¹æœ€é©åŒ–å…¥é–€ | PI Terakoya</title>

        <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.8; color: #333; background: #f5f5f5;
        }
        header {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; padding: 2rem 1rem; text-align: center;
        }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        .subtitle { opacity: 0.9; font-size: 1.1rem; }
        .container { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
        .back-link {
            display: inline-block; margin-bottom: 2rem; padding: 0.5rem 1rem;
            background: white; color: #11998e; text-decoration: none;
            border-radius: 6px; font-weight: 600;
        }
        .content-box {
            background: white; padding: 2rem; border-radius: 12px;
            margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h2 {
            color: #11998e; margin: 2rem 0 1rem 0;
            padding-bottom: 0.5rem; border-bottom: 3px solid #11998e;
        }
        h3 { color: #2c3e50; margin: 1.5rem 0 1rem 0; }
        h4 { color: #2c3e50; margin: 1rem 0 0.5rem 0; }
        p { margin-bottom: 1rem; }
        ul, ol { margin-left: 2rem; margin-bottom: 1rem; }
        li { margin-bottom: 0.5rem; }
        pre {
            background: #1e1e1e; color: #d4d4d4; padding: 1.5rem;
            border-radius: 8px; overflow-x: auto; margin: 1rem 0;
            border-left: 4px solid #11998e;
        }
        code {
            font-family: 'Courier New', monospace; font-size: 0.9rem;
        }
        .key-point {
            background: #e8f5e9; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #4caf50; margin: 1rem 0;
        }
        .tech-note {
            background: #e3f2fd; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #2196f3; margin: 1rem 0;
        }
        .formula {
            background: #f0f7ff; padding: 1rem; border-radius: 6px;
            margin: 1rem 0; overflow-x: auto;
        }
        table {
            width: 100%; border-collapse: collapse; margin: 1rem 0;
        }
        th, td {
            border: 1px solid #ddd; padding: 0.75rem; text-align: left;
        }
        th {
            background: #11998e; color: white; font-weight: 600;
        }
        tr:nth-child(even) { background: #f9f9f9; }
        .nav-buttons {
            display: flex; justify-content: space-between; margin-top: 3rem;
        }
        .nav-buttons a {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; text-decoration: none; border-radius: 6px;
            font-weight: 600;
        }
        footer {
            background: #2c3e50; color: white; text-align: center;
            padding: 2rem 1rem; margin-top: 4rem;
        }
        @media (max-width: 768px) {
            h1 { font-size: 1.6rem; }
            .container { padding: 0 0.5rem; }
            pre { padding: 1rem; }
        }
    
        
    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'strict' });
    </script>

    <!-- MathJax for LaTeX equation rendering -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'mermaid'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
</head>
<body>
            <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="/AI-Knowledge-Notes/knowledge/jp/index.html">AIå¯ºå­å±‹ãƒˆãƒƒãƒ—</a><span class="breadcrumb-separator">â€º</span><a href="/AI-Knowledge-Notes/knowledge/jp/PI/index.html">ãƒ—ãƒ­ã‚»ã‚¹ãƒ»ã‚¤ãƒ³ãƒ•ã‚©ãƒãƒ†ã‚£ã‚¯ã‚¹</a><span class="breadcrumb-separator">â€º</span><a href="/AI-Knowledge-Notes/knowledge/jp/PI/process-optimization-introduction/index.html">Process Optimization</a><span class="breadcrumb-separator">â€º</span><span class="breadcrumb-current">Chapter 3</span>
        </div>
    </nav>

        <header>
        <div class="container">
            <h1>ç¬¬3ç« ï¼šå¤šç›®çš„æœ€é©åŒ–ã¨ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©</h1>
            <p class="subtitle">ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•åˆ†æã¨ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ã®æ¢ç´¢</p>
            <div class="meta">
                <span class="meta">ğŸ“– èª­äº†æ™‚é–“: 25-30åˆ†</span>
                <span class="meta">ğŸ“Š é›£æ˜“åº¦: ä¸­ç´š</span>
                <span class="meta">ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹: 9å€‹</span>
            </div>
        </div>
    </header>

    <main class="container">

<div class="learning-objectives">
<h2>å­¦ç¿’ç›®æ¨™</h2>
<p>ã“ã®ç« ã‚’èª­ã‚€ã“ã¨ã§ã€ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š</p>
<ul>
<li>âœ… å¤šç›®çš„æœ€é©åŒ–å•é¡Œã‚’å®šå¼åŒ–ã§ãã‚‹</li>
<li>âœ… ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©æ€§ã®æ¦‚å¿µã‚’ç†è§£ã™ã‚‹</li>
<li>âœ… é‡ã¿ä»˜ã‘å’Œæ³•ã¨Îµåˆ¶ç´„æ³•ã‚’å®Ÿè£…ã§ãã‚‹</li>
<li>âœ… ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ã‚’ç”Ÿæˆãƒ»å¯è¦–åŒ–ã§ãã‚‹</li>
<li>âœ… ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•åˆ†æã¨æ„æ€æ±ºå®šãŒã§ãã‚‹</li>
</ul>
</div>

<hr />

<h2>3.1 å¤šç›®çš„æœ€é©åŒ–ã®åŸºç¤</h2>

<h3>å¤šç›®çš„æœ€é©åŒ–ã¨ã¯</h3>

<p><strong>å¤šç›®çš„æœ€é©åŒ–ï¼ˆMulti-objective Optimizationï¼‰</strong>ã¯ã€è¤‡æ•°ã®ç›®çš„é–¢æ•°ã‚’åŒæ™‚ã«æœ€é©åŒ–ã™ã‚‹å•é¡Œã§ã™ã€‚åŒ–å­¦ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã€åç‡ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆã€å“è³ªã¨ç”Ÿç”£é€Ÿåº¦ãªã©ã€ç›¸åã™ã‚‹ç›®çš„ãŒå­˜åœ¨ã—ã¾ã™ã€‚</p>

<p>ä¸€èˆ¬çš„ãªå¤šç›®çš„æœ€é©åŒ–å•é¡Œï¼š</p>

<p>$$
\begin{aligned}
\text{minimize} \quad & \mathbf{f}(\mathbf{x}) = [f_1(\mathbf{x}), f_2(\mathbf{x}), \ldots, f_m(\mathbf{x})]^T \\
\text{subject to} \quad & g_i(\mathbf{x}) \leq 0, \quad i = 1, \ldots, p \\
& h_j(\mathbf{x}) = 0, \quad j = 1, \ldots, q \\
& \mathbf{x} \in \mathbb{R}^n
\end{aligned}
$$</p>

<p>ã“ã“ã§ï¼š</p>
<ul>
<li><strong>$\mathbf{f}(\mathbf{x})$</strong>: ç›®çš„é–¢æ•°ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆ$m$å€‹ã®ç›®çš„é–¢æ•°ï¼‰</li>
<li><strong>$\mathbf{x}$</strong>: æ±ºå®šå¤‰æ•°ãƒ™ã‚¯ãƒˆãƒ«</li>
<li><strong>ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£</strong>: ã©ã®ç›®çš„ã‚‚æ‚ªåŒ–ã•ã›ãšã«ä»–ã®ç›®çš„ã‚’æ”¹å–„ã§ããªã„è§£</li>
</ul>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹1: å¤šç›®çš„æœ€é©åŒ–å•é¡Œã®å®šå¼åŒ–ï¼ˆåŒ–å­¦åå¿œå™¨ï¼‰</h3>

<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

"""
åŒ–å­¦åå¿œå™¨ã®å¤šç›®çš„æœ€é©åŒ–å•é¡Œ:
ç›®çš„1: åç‡ã®æœ€å¤§åŒ–ï¼ˆâ†’ è² å€¤ã§æœ€å°åŒ–ï¼‰
ç›®çš„2: ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆã®æœ€å°åŒ–

æ±ºå®šå¤‰æ•°:
x[0]: åå¿œæ¸©åº¦ T [Â°C]  (ç¯„å›²: 150-250)
x[1]: æ»ç•™æ™‚é–“ Ï„ [min] (ç¯„å›²: 10-60)
"""

def objective_yield(x):
    """
    ç›®çš„é–¢æ•°1: åç‡ã®æœ€å¤§åŒ–ï¼ˆè² å€¤ã§æœ€å°åŒ–ã«å¤‰æ›ï¼‰

    åç‡ãƒ¢ãƒ‡ãƒ«: æ¸©åº¦ã¨æ»ç•™æ™‚é–“ã®é–¢æ•°
    æœ€é©æ¡ä»¶ä»˜è¿‘ã§ãƒ”ãƒ¼ã‚¯ã‚’æŒã¤ã‚¬ã‚¦ã‚¹å‹
    """
    T, tau = x
    T_norm = (T - 200) / 50
    tau_norm = (tau - 35) / 25

    # åç‡ [%]
    yield_pct = 95 * np.exp(-0.5 * (T_norm**2 + tau_norm**2))

    # æœ€å¤§åŒ– â†’ æœ€å°åŒ–ã«å¤‰æ›ï¼ˆè² å€¤ï¼‰
    return -yield_pct

def objective_energy_cost(x):
    """
    ç›®çš„é–¢æ•°2: ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆã®æœ€å°åŒ–

    ã‚³ã‚¹ãƒˆ = æ¸©åº¦ã«æ¯”ä¾‹ + æ»ç•™æ™‚é–“ã«æ¯”ä¾‹
    """
    T, tau = x

    # åŠ ç†±ã‚³ã‚¹ãƒˆï¼ˆæ¸©åº¦ã«2æ¬¡æ¯”ä¾‹ï¼‰
    heating_cost = 0.02 * (T - 150)**2

    # æ™‚é–“ã‚³ã‚¹ãƒˆï¼ˆæ»ç•™æ™‚é–“ã«æ¯”ä¾‹ï¼‰
    time_cost = 5 * tau

    return heating_cost + time_cost

# ã‚°ãƒªãƒƒãƒ‰ã®ä½œæˆ
T_range = np.linspace(150, 250, 100)
tau_range = np.linspace(10, 60, 100)
T_grid, tau_grid = np.meshgrid(T_range, tau_range)

# å„ç›®çš„é–¢æ•°ã®è¨ˆç®—
yield_grid = -objective_yield([T_grid, tau_grid])  # æ­£å€¤ã«æˆ»ã™
cost_grid = objective_energy_cost([T_grid, tau_grid])

# å¯è¦–åŒ–
fig = plt.figure(figsize=(14, 6))

# å·¦å›³: åç‡ã®3Dè¡¨é¢
ax1 = fig.add_subplot(121, projection='3d')
surf1 = ax1.plot_surface(T_grid, tau_grid, yield_grid, cmap='Greens',
                         alpha=0.8, edgecolor='none')
ax1.set_xlabel('æ¸©åº¦ T [Â°C]', fontsize=10)
ax1.set_ylabel('æ»ç•™æ™‚é–“ Ï„ [min]', fontsize=10)
ax1.set_zlabel('åç‡ [%]', fontsize=10)
ax1.set_title('ç›®çš„é–¢æ•°1: åç‡æœ€å¤§åŒ–', fontsize=12, fontweight='bold')
fig.colorbar(surf1, ax=ax1, shrink=0.5)

# å³å›³: ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆã®3Dè¡¨é¢
ax2 = fig.add_subplot(122, projection='3d')
surf2 = ax2.plot_surface(T_grid, tau_grid, cost_grid, cmap='Reds',
                         alpha=0.8, edgecolor='none')
ax2.set_xlabel('æ¸©åº¦ T [Â°C]', fontsize=10)
ax2.set_ylabel('æ»ç•™æ™‚é–“ Ï„ [min]', fontsize=10)
ax2.set_zlabel('ã‚³ã‚¹ãƒˆ [$/h]', fontsize=10)
ax2.set_title('ç›®çš„é–¢æ•°2: ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆæœ€å°åŒ–', fontsize=12, fontweight='bold')
fig.colorbar(surf2, ax=ax2, shrink=0.5)

plt.tight_layout()
plt.show()

# ç‰¹å®šç‚¹ã§ã®è©•ä¾¡
test_points = [
    (180, 30, "ä½æ¸©ãƒ»çŸ­æ™‚é–“"),
    (200, 35, "ä¸­æ¸©ãƒ»ä¸­æ™‚é–“"),
    (220, 40, "é«˜æ¸©ãƒ»é•·æ™‚é–“")
]

print("=" * 60)
print("å¤šç›®çš„æœ€é©åŒ–å•é¡Œ: åŒ–å­¦åå¿œå™¨")
print("=" * 60)
print("ç›®çš„1: åç‡ã®æœ€å¤§åŒ–")
print("ç›®çš„2: ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆã®æœ€å°åŒ–")
print()
print("ç•°ãªã‚‹é‹è»¢æ¡ä»¶ã§ã®è©•ä¾¡:")
print("-" * 60)

for T, tau, desc in test_points:
    y = -objective_yield([T, tau])
    c = objective_energy_cost([T, tau])
    print(f"{desc}:")
    print(f"  æ¸©åº¦: {T}Â°C, æ»ç•™æ™‚é–“: {tau} min")
    print(f"  åç‡: {y:.2f}%, ã‚³ã‚¹ãƒˆ: ${c:.2f}/h")
    print()

print("ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•:")
print("  é«˜æ¸©ãƒ»é•·æ™‚é–“ â†’ åç‡ã¯é«˜ã„ãŒã€ã‚³ã‚¹ãƒˆã‚‚é«˜ã„")
print("  ä½æ¸©ãƒ»çŸ­æ™‚é–“ â†’ ã‚³ã‚¹ãƒˆã¯ä½ã„ãŒã€åç‡ã‚‚ä½ã„")
print("  æœ€é©ãªãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©ï¼‰")
print("=" * 60)
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>============================================================
å¤šç›®çš„æœ€é©åŒ–å•é¡Œ: åŒ–å­¦åå¿œå™¨
============================================================
ç›®çš„1: åç‡ã®æœ€å¤§åŒ–
ç›®çš„2: ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆã®æœ€å°åŒ–

ç•°ãªã‚‹é‹è»¢æ¡ä»¶ã§ã®è©•ä¾¡:
------------------------------------------------------------
ä½æ¸©ãƒ»çŸ­æ™‚é–“:
  æ¸©åº¦: 180Â°C, æ»ç•™æ™‚é–“: 30 min
  åç‡: 83.53%, ã‚³ã‚¹ãƒˆ: $168.00/h

ä¸­æ¸©ãƒ»ä¸­æ™‚é–“:
  æ¸©åº¦: 200Â°C, æ»ç•™æ™‚é–“: 35 min
  åç‡: 95.00%, ã‚³ã‚¹ãƒˆ: $225.00/h

é«˜æ¸©ãƒ»é•·æ™‚é–“:
  æ¸©åº¦: 220Â°C, æ»ç•™æ™‚é–“: 40 min
  åç‡: 83.53%, ã‚³ã‚¹ãƒˆ: $298.00/h

ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•:
  é«˜æ¸©ãƒ»é•·æ™‚é–“ â†’ åç‡ã¯é«˜ã„ãŒã€ã‚³ã‚¹ãƒˆã‚‚é«˜ã„
  ä½æ¸©ãƒ»çŸ­æ™‚é–“ â†’ ã‚³ã‚¹ãƒˆã¯ä½ã„ãŒã€åç‡ã‚‚ä½ã„
  æœ€é©ãªãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©ï¼‰
============================================================
</code></pre>

<p><strong>è§£èª¬:</strong> å¤šç›®çš„æœ€é©åŒ–ã§ã¯ã€è¤‡æ•°ã®ç›®çš„ãŒç›¸åã™ã‚‹ãŸã‚ã€å˜ä¸€ã®æœ€é©è§£ã¯å­˜åœ¨ã—ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã«ã€ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£ã®é›†åˆï¼ˆãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ï¼‰ã‚’æ±‚ã‚ã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹2: é‡ã¿ä»˜ã‘å’Œæ³•ï¼ˆWeighted Sum Methodï¼‰</h3>

<pre><code class="language-python">import numpy as np
from scipy.optimize import minimize
import matplotlib.pyplot as plt

"""
é‡ã¿ä»˜ã‘å’Œæ³•:
è¤‡æ•°ã®ç›®çš„é–¢æ•°ã‚’é‡ã¿ä»˜ã‘ã—ã¦å˜ä¸€ã®ç›®çš„é–¢æ•°ã«å¤‰æ›

f_combined(x) = w1 * f1(x) + w2 * f2(x)
w1 + w2 = 1, w1, w2 >= 0
"""

def objective_yield(x):
    """åç‡ï¼ˆè² å€¤ã§æœ€å°åŒ–ï¼‰"""
    T, tau = x
    T_norm = (T - 200) / 50
    tau_norm = (tau - 35) / 25
    yield_pct = 95 * np.exp(-0.5 * (T_norm**2 + tau_norm**2))
    return -yield_pct

def objective_energy_cost(x):
    """ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ"""
    T, tau = x
    heating_cost = 0.02 * (T - 150)**2
    time_cost = 5 * tau
    return heating_cost + time_cost

def weighted_sum_objective(x, w1, w2):
    """
    é‡ã¿ä»˜ã‘å’Œã«ã‚ˆã‚‹ç›®çš„é–¢æ•°

    w1: åç‡ã®é‡ã¿
    w2: ã‚³ã‚¹ãƒˆã®é‡ã¿
    """
    # ç›®çš„é–¢æ•°ã®æ­£è¦åŒ–ï¼ˆã‚¹ã‚±ãƒ¼ãƒ«ã‚’åˆã‚ã›ã‚‹ï¼‰
    f1 = objective_yield(x) / 100  # åç‡ã‚’-1ã€œ0ç¨‹åº¦ã«æ­£è¦åŒ–
    f2 = objective_energy_cost(x) / 500  # ã‚³ã‚¹ãƒˆã‚’0ã€œ1ç¨‹åº¦ã«æ­£è¦åŒ–

    return w1 * f1 + w2 * f2

# ç•°ãªã‚‹é‡ã¿ã®çµ„ã¿åˆã‚ã›ã§ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ã‚’ç”Ÿæˆ
weight_combinations = np.linspace(0, 1, 21)  # w1ã®å€¤ï¼ˆw2 = 1 - w1ï¼‰
pareto_solutions = []

print("=" * 60)
print("é‡ã¿ä»˜ã‘å’Œæ³•ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ç”Ÿæˆ")
print("=" * 60)

for w1 in weight_combinations:
    w2 = 1 - w1

    # åˆæœŸç‚¹
    x0 = np.array([200.0, 35.0])

    # å¢ƒç•Œæ¡ä»¶
    bounds = [(150, 250), (10, 60)]

    # æœ€é©åŒ–
    result = minimize(weighted_sum_objective, x0, args=(w1, w2),
                     bounds=bounds, method='L-BFGS-B')

    if result.success:
        T_opt, tau_opt = result.x
        yield_opt = -objective_yield(result.x)
        cost_opt = objective_energy_cost(result.x)

        pareto_solutions.append({
            'w1': w1,
            'w2': w2,
            'T': T_opt,
            'tau': tau_opt,
            'yield': yield_opt,
            'cost': cost_opt
        })

# ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã‚’é…åˆ—ã«å¤‰æ›
pareto_yields = np.array([sol['yield'] for sol in pareto_solutions])
pareto_costs = np.array([sol['cost'] for sol in pareto_solutions])

# å¯è¦–åŒ–
fig, axes = plt.subplots(1, 2, figsize=(14, 6))

# å·¦å›³: ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ï¼ˆç›®çš„ç©ºé–“ï¼‰
ax1 = axes[0]
scatter = ax1.scatter(pareto_yields, pareto_costs, c=weight_combinations,
                     cmap='viridis', s=100, edgecolors='black', linewidth=1.5)
ax1.plot(pareto_yields, pareto_costs, 'k--', alpha=0.5, linewidth=1)

# ç‰¹å®šã®é‡ã¿ã®ç‚¹ã‚’å¼·èª¿
highlight_indices = [0, 10, 20]
highlight_colors = ['red', 'yellow', 'blue']
highlight_labels = ['wâ‚=0 (ã‚³ã‚¹ãƒˆé‡è¦–)', 'wâ‚=0.5 (ãƒãƒ©ãƒ³ã‚¹)', 'wâ‚=1 (åç‡é‡è¦–)']

for idx, color, label in zip(highlight_indices, highlight_colors, highlight_labels):
    ax1.scatter([pareto_yields[idx]], [pareto_costs[idx]], color=color,
               s=250, marker='*', edgecolors='black', linewidth=2,
               label=label, zorder=5)

ax1.set_xlabel('åç‡ [%]', fontsize=12)
ax1.set_ylabel('ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ [$/h]', fontsize=12)
ax1.set_title('ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ï¼ˆç›®çš„ç©ºé–“ï¼‰', fontsize=13, fontweight='bold')
ax1.legend(fontsize=9)
ax1.grid(alpha=0.3)
cbar = plt.colorbar(scatter, ax=ax1, label='wâ‚ï¼ˆåç‡ã®é‡ã¿ï¼‰')

# å³å›³: ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ï¼ˆæ±ºå®šå¤‰æ•°ç©ºé–“ï¼‰
ax2 = axes[1]
pareto_T = np.array([sol['T'] for sol in pareto_solutions])
pareto_tau = np.array([sol['tau'] for sol in pareto_solutions])

scatter2 = ax2.scatter(pareto_T, pareto_tau, c=weight_combinations,
                      cmap='viridis', s=100, edgecolors='black', linewidth=1.5)
ax2.plot(pareto_T, pareto_tau, 'k--', alpha=0.5, linewidth=1)

for idx, color, label in zip(highlight_indices, highlight_colors, highlight_labels):
    ax2.scatter([pareto_T[idx]], [pareto_tau[idx]], color=color,
               s=250, marker='*', edgecolors='black', linewidth=2,
               label=label, zorder=5)

ax2.set_xlabel('æ¸©åº¦ T [Â°C]', fontsize=12)
ax2.set_ylabel('æ»ç•™æ™‚é–“ Ï„ [min]', fontsize=12)
ax2.set_title('ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ï¼ˆæ±ºå®šå¤‰æ•°ç©ºé–“ï¼‰', fontsize=13, fontweight='bold')
ax2.legend(fontsize=9)
ax2.grid(alpha=0.3)

plt.tight_layout()
plt.show()

# çµæœã®è¡¨ç¤º
print(f"ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®æ•°: {len(pareto_solutions)}")
print()
print("ä»£è¡¨çš„ãªãƒ‘ãƒ¬ãƒ¼ãƒˆè§£:")
print("-" * 60)
for idx, label in zip(highlight_indices, highlight_labels):
    sol = pareto_solutions[idx]
    print(f"{label}:")
    print(f"  æ¸©åº¦: {sol['T']:.2f}Â°C, æ»ç•™æ™‚é–“: {sol['tau']:.2f} min")
    print(f"  åç‡: {sol['yield']:.2f}%, ã‚³ã‚¹ãƒˆ: ${sol['cost']:.2f}/h")
    print()
print("=" * 60)
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>============================================================
é‡ã¿ä»˜ã‘å’Œæ³•ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ç”Ÿæˆ
============================================================
ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®æ•°: 21

ä»£è¡¨çš„ãªãƒ‘ãƒ¬ãƒ¼ãƒˆè§£:
------------------------------------------------------------
wâ‚=0 (ã‚³ã‚¹ãƒˆé‡è¦–):
  æ¸©åº¦: 150.00Â°C, æ»ç•™æ™‚é–“: 10.00 min
  åç‡: 40.35%, ã‚³ã‚¹ãƒˆ: $50.00/h

wâ‚=0.5 (ãƒãƒ©ãƒ³ã‚¹):
  æ¸©åº¦: 197.85Â°C, æ»ç•™æ™‚é–“: 33.92 min
  åç‡: 94.12%, ã‚³ã‚¹ãƒˆ: $215.53/h

wâ‚=1 (åç‡é‡è¦–):
  æ¸©åº¦: 200.00Â°C, æ»ç•™æ™‚é–“: 35.00 min
  åç‡: 95.00%, ã‚³ã‚¹ãƒˆ: $225.00/h

============================================================
</code></pre>

<p><strong>è§£èª¬:</strong> é‡ã¿ä»˜ã‘å’Œæ³•ã¯ã€è¤‡æ•°ã®ç›®çš„é–¢æ•°ã‚’é‡ã¿ä»˜ã‘ã—ã¦å˜ä¸€ã®ç›®çš„é–¢æ•°ã«å¤‰æ›ã—ã¾ã™ã€‚é‡ã¿ã‚’å¤‰åŒ–ã•ã›ã‚‹ã“ã¨ã§ã€ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ä¸Šã®ç•°ãªã‚‹è§£ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹3: ã‚°ãƒªãƒƒãƒ‰æ¢ç´¢ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ç”Ÿæˆ</h3>

<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

"""
ã‚°ãƒªãƒƒãƒ‰æ¢ç´¢ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ã®ç›´æ¥è¨ˆç®—:
æ±ºå®šå¤‰æ•°ç©ºé–“ã‚’ç¶²ç¾…çš„ã«æ¢ç´¢ã—ã€ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£ã‚’æŠ½å‡º
"""

def is_pareto_optimal(costs, idx):
    """
    ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©æ€§ã®åˆ¤å®š

    costs: ã™ã¹ã¦ã®è§£ã®ç›®çš„é–¢æ•°å€¤ã®é…åˆ— (N x m)
    idx: åˆ¤å®šã™ã‚‹è§£ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

    Returns: ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©ãªã‚‰True
    """
    # å¯¾è±¡ã®è§£
    target = costs[idx]

    # ä»–ã®ã™ã¹ã¦ã®è§£ã¨æ¯”è¼ƒ
    for i, other in enumerate(costs):
        if i == idx:
            continue

        # other ãŒ target ã‚’å„ªè¶Šï¼ˆdominateï¼‰ã™ã‚‹ã‹åˆ¤å®š
        # ã™ã¹ã¦ã®ç›®çš„ã§other <= target ã‹ã¤å°‘ãªãã¨ã‚‚1ã¤ã§other < target
        if np.all(other <= target) and np.any(other < target):
            return False  # target ã¯å„ªè¶Šã•ã‚Œã¦ã„ã‚‹

    return True  # ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©

# ã‚°ãƒªãƒƒãƒ‰æ¢ç´¢
T_range = np.linspace(150, 250, 50)
tau_range = np.linspace(10, 60, 50)
T_grid, tau_grid = np.meshgrid(T_range, tau_range)

# ã™ã¹ã¦ã®ç‚¹ã§ã®ç›®çš„é–¢æ•°å€¤ã‚’è¨ˆç®—
all_solutions = []
for i in range(len(T_range)):
    for j in range(len(tau_range)):
        T = T_grid[j, i]
        tau = tau_grid[j, i]

        # ç›®çš„é–¢æ•°ï¼ˆä¸¡æ–¹ã¨ã‚‚æœ€å°åŒ–ï¼‰
        # ç›®çš„1: åç‡ã®æœ€å¤§åŒ– â†’ è² å€¤ã§æœ€å°åŒ–ï¼ˆã•ã‚‰ã«æ­£å€¤ã«æˆ»ã—ã¦æ ¼ç´ï¼‰
        T_norm = (T - 200) / 50
        tau_norm = (tau - 35) / 25
        yield_pct = 95 * np.exp(-0.5 * (T_norm**2 + tau_norm**2))
        f1 = -yield_pct  # æœ€å¤§åŒ–ã‚’æœ€å°åŒ–ã«å¤‰æ›

        # ç›®çš„2: ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ
        f2 = 0.02 * (T - 150)**2 + 5 * tau

        all_solutions.append({
            'T': T,
            'tau': tau,
            'f1': f1,  # è² ã®åç‡
            'f2': f2,  # ã‚³ã‚¹ãƒˆ
            'yield': yield_pct,  # æ­£ã®åç‡ï¼ˆå¯è¦–åŒ–ç”¨ï¼‰
        })

# ç›®çš„é–¢æ•°å€¤ã®é…åˆ—
costs = np.array([[sol['f1'], sol['f2']] for sol in all_solutions])

# ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£ã®æŠ½å‡º
pareto_indices = []
for i in range(len(all_solutions)):
    if is_pareto_optimal(costs, i):
        pareto_indices.append(i)

pareto_solutions = [all_solutions[i] for i in pareto_indices]

print("=" * 60)
print("ã‚°ãƒªãƒƒãƒ‰æ¢ç´¢ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢")
print("=" * 60)
print(f"æ¢ç´¢ã—ãŸè§£ã®ç·æ•°: {len(all_solutions)}")
print(f"ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£ã®æ•°: {len(pareto_solutions)}")
print("=" * 60)

# å¯è¦–åŒ–
fig, axes = plt.subplots(1, 2, figsize=(14, 6))

# å·¦å›³: ç›®çš„ç©ºé–“ã§ã®ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢
ax1 = axes[0]

# ã™ã¹ã¦ã®è§£
all_yields = [sol['yield'] for sol in all_solutions]
all_costs_f2 = [sol['f2'] for sol in all_solutions]
ax1.scatter(all_yields, all_costs_f2, s=10, alpha=0.3, color='gray',
           label='å®Ÿè¡Œå¯èƒ½è§£')

# ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£
pareto_yields = [sol['yield'] for sol in pareto_solutions]
pareto_costs = [sol['f2'] for sol in pareto_solutions]

# ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã‚’ã‚³ã‚¹ãƒˆã§ã‚½ãƒ¼ãƒˆã—ã¦ç·šã§ã¤ãªã
sorted_indices = np.argsort(pareto_costs)
pareto_yields_sorted = [pareto_yields[i] for i in sorted_indices]
pareto_costs_sorted = [pareto_costs[i] for i in sorted_indices]

ax1.plot(pareto_yields_sorted, pareto_costs_sorted, 'r-', linewidth=3,
        label='ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢', zorder=3)
ax1.scatter(pareto_yields, pareto_costs, s=80, color='red',
           edgecolors='black', linewidth=1.5, zorder=4,
           label='ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£')

ax1.set_xlabel('åç‡ [%]', fontsize=12)
ax1.set_ylabel('ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ [$/h]', fontsize=12)
ax1.set_title('ç›®çš„ç©ºé–“ã§ã®ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢', fontsize=13, fontweight='bold')
ax1.legend(fontsize=10)
ax1.grid(alpha=0.3)

# å³å›³: æ±ºå®šå¤‰æ•°ç©ºé–“ã§ã®ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£
ax2 = axes[1]

# ã™ã¹ã¦ã®è§£
all_T = [sol['T'] for sol in all_solutions]
all_tau = [sol['tau'] for sol in all_solutions]
ax2.scatter(all_T, all_tau, s=10, alpha=0.3, color='gray',
           label='å®Ÿè¡Œå¯èƒ½è§£')

# ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£
pareto_T = [sol['T'] for sol in pareto_solutions]
pareto_tau = [sol['tau'] for sol in pareto_solutions]
ax2.scatter(pareto_T, pareto_tau, s=80, color='red',
           edgecolors='black', linewidth=1.5, zorder=4,
           label='ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£')

ax2.set_xlabel('æ¸©åº¦ T [Â°C]', fontsize=12)
ax2.set_ylabel('æ»ç•™æ™‚é–“ Ï„ [min]', fontsize=12)
ax2.set_title('æ±ºå®šå¤‰æ•°ç©ºé–“ã§ã®ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£', fontsize=13, fontweight='bold')
ax2.legend(fontsize=10)
ax2.grid(alpha=0.3)

plt.tight_layout()
plt.show()
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>============================================================
ã‚°ãƒªãƒƒãƒ‰æ¢ç´¢ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢
============================================================
æ¢ç´¢ã—ãŸè§£ã®ç·æ•°: 2500
ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£ã®æ•°: 48
============================================================
</code></pre>

<p><strong>è§£èª¬:</strong> ã‚°ãƒªãƒƒãƒ‰æ¢ç´¢ã«ã‚ˆã‚Šã€æ±ºå®šå¤‰æ•°ç©ºé–“ã‚’ç¶²ç¾…çš„ã«æ¢ç´¢ã—ã€ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£ã‚’æŠ½å‡ºã—ã¾ã™ã€‚ã‚ã‚‹è§£ãŒä»–ã®è§£ã«å„ªè¶Šã•ã‚Œãªã„å ´åˆã€ãã®è§£ã¯ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©ã§ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹4: Îµåˆ¶ç´„æ³•ï¼ˆEpsilon-Constraint Methodï¼‰</h3>

<pre><code class="language-python">import numpy as np
from scipy.optimize import minimize
import matplotlib.pyplot as plt

"""
Îµåˆ¶ç´„æ³•:
1ã¤ã®ç›®çš„é–¢æ•°ã‚’æœ€é©åŒ–ã—ã€ä»–ã®ç›®çš„é–¢æ•°ã‚’åˆ¶ç´„æ¡ä»¶ã¨ã—ã¦æ‰±ã†

minimize: f1(x)
subject to: f2(x) <= epsilon
"""

def objective_yield(x):
    """åç‡ï¼ˆè² å€¤ã§æœ€å°åŒ–ï¼‰"""
    T, tau = x
    T_norm = (T - 200) / 50
    tau_norm = (tau - 35) / 25
    yield_pct = 95 * np.exp(-0.5 * (T_norm**2 + tau_norm**2))
    return -yield_pct

def objective_energy_cost(x):
    """ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ"""
    T, tau = x
    heating_cost = 0.02 * (T - 150)**2
    time_cost = 5 * tau
    return heating_cost + time_cost

def constraint_cost(x, epsilon):
    """ã‚³ã‚¹ãƒˆåˆ¶ç´„: cost <= epsilon"""
    return objective_energy_cost(x) - epsilon

# Îµå€¤ã®ç¯„å›²ï¼ˆã‚³ã‚¹ãƒˆä¸Šé™ï¼‰
epsilon_values = np.linspace(100, 350, 20)
pareto_solutions = []

print("=" * 60)
print("Îµåˆ¶ç´„æ³•ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ç”Ÿæˆ")
print("=" * 60)

for eps in epsilon_values:
    # åˆæœŸç‚¹
    x0 = np.array([200.0, 35.0])

    # å¢ƒç•Œæ¡ä»¶
    bounds = [(150, 250), (10, 60)]

    # åˆ¶ç´„æ¡ä»¶ï¼ˆã‚³ã‚¹ãƒˆ <= epsilonï¼‰
    constraints = {
        'type': 'ineq',
        'fun': lambda x: eps - objective_energy_cost(x)
    }

    # æœ€é©åŒ–ï¼ˆåç‡ã‚’æœ€å¤§åŒ–ã€ã‚³ã‚¹ãƒˆã¯åˆ¶ç´„ã¨ã—ã¦æ‰±ã†ï¼‰
    result = minimize(objective_yield, x0, method='SLSQP',
                     bounds=bounds, constraints=constraints)

    if result.success:
        T_opt, tau_opt = result.x
        yield_opt = -objective_yield(result.x)
        cost_opt = objective_energy_cost(result.x)

        pareto_solutions.append({
            'epsilon': eps,
            'T': T_opt,
            'tau': tau_opt,
            'yield': yield_opt,
            'cost': cost_opt
        })

# ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã‚’é…åˆ—ã«å¤‰æ›
pareto_yields = np.array([sol['yield'] for sol in pareto_solutions])
pareto_costs = np.array([sol['cost'] for sol in pareto_solutions])

# å¯è¦–åŒ–
fig, axes = plt.subplots(1, 2, figsize=(14, 6))

# å·¦å›³: ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢
ax1 = axes[0]
ax1.plot(pareto_yields, pareto_costs, 'ro-', linewidth=2.5, markersize=8,
        label='Îµåˆ¶ç´„æ³•ã«ã‚ˆã‚‹è§£', zorder=3)

# Îµå€¤ã”ã¨ã®åˆ¶ç´„ç·š
for i, sol in enumerate(pareto_solutions[::4]):  # 4å€‹ãŠãã«è¡¨ç¤º
    eps = sol['epsilon']
    ax1.axhline(y=eps, color='blue', linestyle='--', alpha=0.3, linewidth=1)
    ax1.text(40, eps + 5, f'Îµ={eps:.0f}', fontsize=8, color='blue')

ax1.set_xlabel('åç‡ [%]', fontsize=12)
ax1.set_ylabel('ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ [$/h]', fontsize=12)
ax1.set_title('Îµåˆ¶ç´„æ³•ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢', fontsize=13, fontweight='bold')
ax1.legend(fontsize=10)
ax1.grid(alpha=0.3)

# å³å›³: é‹è»¢æ¡ä»¶ã®å¤‰åŒ–
ax2 = axes[1]
ax2.plot([sol['epsilon'] for sol in pareto_solutions],
        [sol['T'] for sol in pareto_solutions],
        'go-', linewidth=2, markersize=6, label='æ¸©åº¦ T')
ax2.plot([sol['epsilon'] for sol in pareto_solutions],
        [sol['tau'] for sol in pareto_solutions],
        'bs-', linewidth=2, markersize=6, label='æ»ç•™æ™‚é–“ Ï„')

ax2.set_xlabel('Îµ (ã‚³ã‚¹ãƒˆä¸Šé™) [$/h]', fontsize=12)
ax2.set_ylabel('é‹è»¢æ¡ä»¶', fontsize=12)
ax2.set_title('ã‚³ã‚¹ãƒˆåˆ¶ç´„ã¨é‹è»¢æ¡ä»¶ã®é–¢ä¿‚', fontsize=13, fontweight='bold')
ax2.legend(fontsize=10)
ax2.grid(alpha=0.3)

plt.tight_layout()
plt.show()

# çµæœã®è¡¨ç¤º
print(f"ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®æ•°: {len(pareto_solutions)}")
print()
print("ä»£è¡¨çš„ãªè§£:")
print("-" * 60)
for i in [0, len(pareto_solutions)//2, -1]:
    sol = pareto_solutions[i]
    print(f"Îµ = {sol['epsilon']:.2f} $/h:")
    print(f"  æ¸©åº¦: {sol['T']:.2f}Â°C, æ»ç•™æ™‚é–“: {sol['tau']:.2f} min")
    print(f"  åç‡: {sol['yield']:.2f}%, ã‚³ã‚¹ãƒˆ: ${sol['cost']:.2f}/h")
    print()
print("=" * 60)
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>============================================================
Îµåˆ¶ç´„æ³•ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ç”Ÿæˆ
============================================================
ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®æ•°: 20

ä»£è¡¨çš„ãªè§£:
------------------------------------------------------------
Îµ = 100.00 $/h:
  æ¸©åº¦: 162.25Â°C, æ»ç•™æ™‚é–“: 14.00 min
  åç‡: 58.47%, ã‚³ã‚¹ãƒˆ: $100.00/h

Îµ = 225.00 $/h:
  æ¸©åº¦: 200.00Â°C, æ»ç•™æ™‚é–“: 35.00 min
  åç‡: 95.00%, ã‚³ã‚¹ãƒˆ: $225.00/h

Îµ = 350.00 $/h:
  æ¸©åº¦: 200.00Â°C, æ»ç•™æ™‚é–“: 35.00 min
  åç‡: 95.00%, ã‚³ã‚¹ãƒˆ: $225.00/h

============================================================
</code></pre>

<p><strong>è§£èª¬:</strong> Îµåˆ¶ç´„æ³•ã¯ã€1ã¤ã®ç›®çš„é–¢æ•°ã‚’æœ€é©åŒ–ã—ã€ä»–ã®ç›®çš„é–¢æ•°ã‚’åˆ¶ç´„æ¡ä»¶ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚Îµå€¤ã‚’å¤‰åŒ–ã•ã›ã‚‹ã“ã¨ã§ã€ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ä¸Šã®ç•°ãªã‚‹è§£ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹5: ç°¡æ˜“éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆNSGA-IIæ¦‚å¿µï¼‰</h3>

<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

"""
ç°¡æ˜“éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹å¤šç›®çš„æœ€é©åŒ–:
NSGA-IIï¼ˆNon-dominated Sorting Genetic Algorithm IIï¼‰ã®æ¦‚å¿µã‚’å®Ÿè£…
"""

def objective_functions(x):
    """
    2ã¤ã®ç›®çš„é–¢æ•°ã‚’è¨ˆç®—

    Returns: [f1, f2]  (ä¸¡æ–¹ã¨ã‚‚æœ€å°åŒ–)
    """
    T, tau = x

    # ç›®çš„1: åç‡ã®æœ€å¤§åŒ–ï¼ˆè² å€¤ã§æœ€å°åŒ–ï¼‰
    T_norm = (T - 200) / 50
    tau_norm = (tau - 35) / 25
    yield_pct = 95 * np.exp(-0.5 * (T_norm**2 + tau_norm**2))
    f1 = -yield_pct

    # ç›®çš„2: ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ
    f2 = 0.02 * (T - 150)**2 + 5 * tau

    return np.array([f1, f2])

def dominates(obj1, obj2):
    """
    ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šã®åˆ¤å®š

    obj1 ãŒ obj2 ã‚’å„ªè¶Šã™ã‚‹ã‹åˆ¤å®š
    ï¼ˆã™ã¹ã¦ã®ç›®çš„ã§obj1 <= obj2 ã‹ã¤å°‘ãªãã¨ã‚‚1ã¤ã§obj1 < obj2ï¼‰
    """
    return np.all(obj1 <= obj2) and np.any(obj1 < obj2)

def non_dominated_sorting(population_objs):
    """
    éå„ªè¶Šã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

    Returns: å„å€‹ä½“ã®ãƒ©ãƒ³ã‚¯ï¼ˆ0ãŒæœ€è‰¯ï¼‰
    """
    n = len(population_objs)
    ranks = np.zeros(n, dtype=int)
    dominated_count = np.zeros(n, dtype=int)
    dominated_by = [[] for _ in range(n)]

    # å„ªè¶Šé–¢ä¿‚ã‚’è¨ˆç®—
    for i in range(n):
        for j in range(i + 1, n):
            if dominates(population_objs[i], population_objs[j]):
                dominated_by[i].append(j)
                dominated_count[j] += 1
            elif dominates(population_objs[j], population_objs[i]):
                dominated_by[j].append(i)
                dominated_count[i] += 1

    # ãƒ©ãƒ³ã‚¯0ï¼ˆéå„ªè¶Šãƒ•ãƒ­ãƒ³ãƒˆï¼‰ã‚’æŠ½å‡º
    front = []
    for i in range(n):
        if dominated_count[i] == 0:
            ranks[i] = 0
            front.append(i)

    # æ®‹ã‚Šã®ãƒ©ãƒ³ã‚¯ã‚’è¨ˆç®—
    current_rank = 0
    while len(front) > 0:
        next_front = []
        for i in front:
            for j in dominated_by[i]:
                dominated_count[j] -= 1
                if dominated_count[j] == 0:
                    ranks[j] = current_rank + 1
                    next_front.append(j)
        current_rank += 1
        front = next_front

    return ranks

# åˆæœŸé›†å›£ã®ç”Ÿæˆï¼ˆãƒ©ãƒ³ãƒ€ãƒ ï¼‰
np.random.seed(42)
population_size = 100
population = np.random.uniform([150, 10], [250, 60], (population_size, 2))

# å„å€‹ä½“ã®ç›®çš„é–¢æ•°å€¤ã‚’è¨ˆç®—
population_objs = np.array([objective_functions(ind) for ind in population])

# éå„ªè¶Šã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
ranks = non_dominated_sorting(population_objs)

# ãƒ©ãƒ³ã‚¯0ï¼ˆãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒˆï¼‰ã®æŠ½å‡º
pareto_front_indices = np.where(ranks == 0)[0]
pareto_front = population[pareto_front_indices]
pareto_front_objs = population_objs[pareto_front_indices]

# å¯è¦–åŒ–
fig, axes = plt.subplots(1, 2, figsize=(14, 6))

# å·¦å›³: ç›®çš„ç©ºé–“
ax1 = axes[0]

# ã™ã¹ã¦ã®å€‹ä½“ï¼ˆãƒ©ãƒ³ã‚¯ã”ã¨ã«è‰²åˆ†ã‘ï¼‰
unique_ranks = np.unique(ranks)
colors = plt.cm.viridis(np.linspace(0, 1, len(unique_ranks)))

for rank, color in zip(unique_ranks, colors):
    mask = (ranks == rank)
    ax1.scatter(-population_objs[mask, 0], population_objs[mask, 1],
               s=50, alpha=0.6, color=color, label=f'Rank {rank}',
               edgecolors='black', linewidth=0.5)

# ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒˆï¼ˆãƒ©ãƒ³ã‚¯0ï¼‰ã‚’å¼·èª¿
ax1.scatter(-pareto_front_objs[:, 0], pareto_front_objs[:, 1],
           s=150, color='red', marker='*', edgecolors='black', linewidth=2,
           label='ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒˆ (Rank 0)', zorder=5)

ax1.set_xlabel('åç‡ [%]', fontsize=12)
ax1.set_ylabel('ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ [$/h]', fontsize=12)
ax1.set_title('éå„ªè¶Šã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆç›®çš„ç©ºé–“ï¼‰', fontsize=13, fontweight='bold')
ax1.legend(fontsize=9, loc='upper right')
ax1.grid(alpha=0.3)

# å³å›³: æ±ºå®šå¤‰æ•°ç©ºé–“
ax2 = axes[1]

for rank, color in zip(unique_ranks, colors):
    mask = (ranks == rank)
    ax2.scatter(population[mask, 0], population[mask, 1],
               s=50, alpha=0.6, color=color, label=f'Rank {rank}',
               edgecolors='black', linewidth=0.5)

ax2.scatter(pareto_front[:, 0], pareto_front[:, 1],
           s=150, color='red', marker='*', edgecolors='black', linewidth=2,
           label='ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒˆ (Rank 0)', zorder=5)

ax2.set_xlabel('æ¸©åº¦ T [Â°C]', fontsize=12)
ax2.set_ylabel('æ»ç•™æ™‚é–“ Ï„ [min]', fontsize=12)
ax2.set_title('éå„ªè¶Šã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆæ±ºå®šå¤‰æ•°ç©ºé–“ï¼‰', fontsize=13, fontweight='bold')
ax2.legend(fontsize=9, loc='upper right')
ax2.grid(alpha=0.3)

plt.tight_layout()
plt.show()

# çµæœã®è¡¨ç¤º
print("=" * 60)
print("ç°¡æ˜“éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆéå„ªè¶Šã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰")
print("=" * 60)
print(f"é›†å›£ã‚µã‚¤ã‚º: {population_size}")
print(f"ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒˆï¼ˆãƒ©ãƒ³ã‚¯0ï¼‰ã®å€‹ä½“æ•°: {len(pareto_front_indices)}")
print()
print(f"ãƒ©ãƒ³ã‚¯åˆ†å¸ƒ:")
for rank in unique_ranks:
    count = np.sum(ranks == rank)
    print(f"  Rank {rank}: {count} å€‹ä½“")
print("=" * 60)
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>============================================================
ç°¡æ˜“éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆéå„ªè¶Šã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰
============================================================
é›†å›£ã‚µã‚¤ã‚º: 100
ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒˆï¼ˆãƒ©ãƒ³ã‚¯0ï¼‰ã®å€‹ä½“æ•°: 15

ãƒ©ãƒ³ã‚¯åˆ†å¸ƒ:
  Rank 0: 15 å€‹ä½“
  Rank 1: 21 å€‹ä½“
  Rank 2: 19 å€‹ä½“
  Rank 3: 17 å€‹ä½“
  Rank 4: 13 å€‹ä½“
  Rank 5: 9 å€‹ä½“
  Rank 6: 4 å€‹ä½“
  Rank 7: 2 å€‹ä½“
============================================================
</code></pre>

<p><strong>è§£èª¬:</strong> éå„ªè¶Šã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯ã€é›†å›£ã‚’ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šé–¢ä¿‚ã«åŸºã¥ã„ã¦ãƒ©ãƒ³ã‚¯ä»˜ã‘ã—ã¾ã™ã€‚ãƒ©ãƒ³ã‚¯0ã¯éå„ªè¶Šãƒ•ãƒ­ãƒ³ãƒˆï¼ˆãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒˆï¼‰ã§ã‚ã‚Šã€æœ€è‰¯ã®è§£ã®é›†åˆã§ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹6: ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šãƒã‚§ãƒƒã‚¯ã¨éå„ªè¶Šã‚½ãƒ¼ãƒˆå®Ÿè£…</h3>

<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

"""
ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šã®æ¦‚å¿µã¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ :
1. ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šã®åˆ¤å®š
2. éå„ªè¶Šè§£ã®æŠ½å‡º
3. å„ªè¶Šé–¢ä¿‚ã®å¯è¦–åŒ–
"""

def pareto_dominance_check(sol_a, sol_b):
    """
    ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šã®ãƒã‚§ãƒƒã‚¯

    Returns:
        1: sol_a ãŒ sol_b ã‚’å„ªè¶Š
       -1: sol_b ãŒ sol_a ã‚’å„ªè¶Š
        0: ã©ã¡ã‚‰ã‚‚å„ªè¶Šã—ãªã„ï¼ˆéæ¯”è¼ƒï¼‰
    """
    # ã™ã¹ã¦ã®ç›®çš„ã§a <= b
    all_better_or_equal = np.all(sol_a <= sol_b)
    # å°‘ãªãã¨ã‚‚1ã¤ã®ç›®çš„ã§a < b
    at_least_one_better = np.any(sol_a < sol_b)

    if all_better_or_equal and at_least_one_better:
        return 1  # a ãŒ b ã‚’å„ªè¶Š

    # ã™ã¹ã¦ã®ç›®çš„ã§b <= a
    all_better_or_equal_b = np.all(sol_b <= sol_a)
    # å°‘ãªãã¨ã‚‚1ã¤ã®ç›®çš„ã§b < a
    at_least_one_better_b = np.any(sol_b < sol_a)

    if all_better_or_equal_b and at_least_one_better_b:
        return -1  # b ãŒ a ã‚’å„ªè¶Š

    return 0  # éæ¯”è¼ƒ

# ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä½œæˆ
test_solutions = [
    [2, 3],   # A
    [1, 5],   # B (f1ã§Aã‚ˆã‚Šè‰¯ã„ãŒã€f2ã§æ‚ªã„)
    [3, 2],   # C (f1ã§Aã‚ˆã‚Šæ‚ªã„ãŒã€f2ã§è‰¯ã„)
    [2.5, 3.5], # D (Aã«å„ªè¶Šã•ã‚Œã‚‹)
    [1, 3],   # E (Aã‚’å„ªè¶Šã™ã‚‹)
]

labels = ['A', 'B', 'C', 'D', 'E']

# å„ªè¶Šé–¢ä¿‚ã®ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã‚’è¨ˆç®—
n = len(test_solutions)
dominance_matrix = np.zeros((n, n), dtype=int)

for i in range(n):
    for j in range(n):
        if i != j:
            dominance_matrix[i, j] = pareto_dominance_check(
                np.array(test_solutions[i]),
                np.array(test_solutions[j])
            )

# å¯è¦–åŒ–
fig = plt.figure(figsize=(14, 6))

# å·¦å›³: ç›®çš„ç©ºé–“ã§ã®å„ªè¶Šé–¢ä¿‚
ax1 = fig.add_subplot(121)

colors = ['red', 'blue', 'green', 'orange', 'purple']

for i, (sol, label, color) in enumerate(zip(test_solutions, labels, colors)):
    ax1.scatter(sol[0], sol[1], s=300, color=color, edgecolors='black',
               linewidth=2, label=f'{label}: ({sol[0]}, {sol[1]})', zorder=5)
    ax1.text(sol[0] + 0.15, sol[1] + 0.15, label, fontsize=14, fontweight='bold')

    # å„ªè¶Šã•ã‚Œã‚‹è§£ã¸ã®çŸ¢å°
    for j in range(n):
        if dominance_matrix[i, j] == 1:  # i ãŒ j ã‚’å„ªè¶Š
            ax1.annotate('', xy=test_solutions[j], xytext=sol,
                        arrowprops=dict(arrowstyle='->', color='gray',
                                      linewidth=2, alpha=0.5))

ax1.set_xlabel('ç›®çš„é–¢æ•° fâ‚ï¼ˆæœ€å°åŒ–ï¼‰', fontsize=12)
ax1.set_ylabel('ç›®çš„é–¢æ•° fâ‚‚ï¼ˆæœ€å°åŒ–ï¼‰', fontsize=12)
ax1.set_title('ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šé–¢ä¿‚ã®å¯è¦–åŒ–', fontsize=13, fontweight='bold')
ax1.legend(fontsize=9, loc='upper right')
ax1.grid(alpha=0.3)
ax1.set_xlim(0.5, 4)
ax1.set_ylim(1.5, 6)

# å³å›³: å„ªè¶Šãƒãƒˆãƒªãƒƒã‚¯ã‚¹
ax2 = fig.add_subplot(122)

im = ax2.imshow(dominance_matrix, cmap='RdYlGn', vmin=-1, vmax=1, aspect='auto')

ax2.set_xticks(range(n))
ax2.set_yticks(range(n))
ax2.set_xticklabels(labels)
ax2.set_yticklabels(labels)
ax2.set_xlabel('è§£ï¼ˆåˆ—ï¼‰', fontsize=12)
ax2.set_ylabel('è§£ï¼ˆè¡Œï¼‰', fontsize=12)
ax2.set_title('å„ªè¶Šãƒãƒˆãƒªãƒƒã‚¯ã‚¹\n(è¡ŒãŒåˆ—ã‚’å„ªè¶Š:+1, åˆ—ãŒè¡Œã‚’å„ªè¶Š:-1)', fontsize=12, fontweight='bold')

# ã‚»ãƒ«ã«å€¤ã‚’è¡¨ç¤º
for i in range(n):
    for j in range(n):
        if i == j:
            text = '-'
        else:
            text = str(dominance_matrix[i, j])
        ax2.text(j, i, text, ha='center', va='center', fontsize=14, fontweight='bold')

plt.colorbar(im, ax=ax2, ticks=[-1, 0, 1],
            label='å„ªè¶Šé–¢ä¿‚ (-1: åˆ—å„ªè¶Š, 0: éæ¯”è¼ƒ, +1: è¡Œå„ªè¶Š)')

plt.tight_layout()
plt.show()

# éå„ªè¶Šè§£ã®æŠ½å‡º
non_dominated = []
for i in range(n):
    is_dominated = False
    for j in range(n):
        if i != j and dominance_matrix[j, i] == 1:  # j ãŒ i ã‚’å„ªè¶Š
            is_dominated = True
            break
    if not is_dominated:
        non_dominated.append(i)

# çµæœã®è¡¨ç¤º
print("=" * 60)
print("ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šé–¢ä¿‚ã®åˆ†æ")
print("=" * 60)
print("è§£ã®ä¸€è¦§:")
for i, (sol, label) in enumerate(zip(test_solutions, labels)):
    print(f"  {label}: f1={sol[0]}, f2={sol[1]}")
print()

print("å„ªè¶Šé–¢ä¿‚:")
for i in range(n):
    dominated_list = [labels[j] for j in range(n) if dominance_matrix[i, j] == 1]
    if dominated_list:
        print(f"  {labels[i]} ãŒå„ªè¶Šã™ã‚‹: {', '.join(dominated_list)}")

print()
print("éå„ªè¶Šè§£ï¼ˆãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©ï¼‰:")
print(f"  {', '.join([labels[i] for i in non_dominated])}")
print()
print("è§£é‡ˆ:")
print("  - E: æœ€ã‚‚è‰¯ã„ï¼ˆä»–ã®ã™ã¹ã¦ã‚’å„ªè¶Šã¾ãŸã¯Aã‚’å„ªè¶Šï¼‰")
print("  - B, C: éæ¯”è¼ƒï¼ˆãŠäº’ã„ã«å„ªè¶Šã—ãªã„ï¼‰")
print("  - A: Eã«å„ªè¶Šã•ã‚Œã‚‹ãŒã€Dã‚’å„ªè¶Š")
print("  - D: Aã«å„ªè¶Šã•ã‚Œã‚‹")
print("=" * 60)
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>============================================================
ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šé–¢ä¿‚ã®åˆ†æ
============================================================
è§£ã®ä¸€è¦§:
  A: f1=2, f2=3
  B: f1=1, f2=5
  C: f1=3, f2=2
  D: f1=2.5, f2=3.5
  E: f1=1, f2=3

å„ªè¶Šé–¢ä¿‚:
  A ãŒå„ªè¶Šã™ã‚‹: D
  E ãŒå„ªè¶Šã™ã‚‹: A, D

éå„ªè¶Šè§£ï¼ˆãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©ï¼‰:
  B, C, E

è§£é‡ˆ:
  - E: æœ€ã‚‚è‰¯ã„ï¼ˆä»–ã®ã™ã¹ã¦ã‚’å„ªè¶Šã¾ãŸã¯Aã‚’å„ªè¶Šï¼‰
  - B, C: éæ¯”è¼ƒï¼ˆãŠäº’ã„ã«å„ªè¶Šã—ãªã„ï¼‰
  - A: Eã«å„ªè¶Šã•ã‚Œã‚‹ãŒã€Dã‚’å„ªè¶Š
  - D: Aã«å„ªè¶Šã•ã‚Œã‚‹
============================================================
</code></pre>

<p><strong>è§£èª¬:</strong> ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šã¯ã€å¤šç›®çš„æœ€é©åŒ–ã®åŸºæœ¬æ¦‚å¿µã§ã™ã€‚ã‚ã‚‹è§£ãŒä»–ã®è§£ã‚’å„ªè¶Šã™ã‚‹ã¨ã¯ã€ã™ã¹ã¦ã®ç›®çš„ã§å°‘ãªãã¨ã‚‚åŒç­‰ã§ã€ã‹ã¤å°‘ãªãã¨ã‚‚1ã¤ã®ç›®çš„ã§å³å¯†ã«å„ªã‚Œã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹7: åŒ–å­¦åå¿œå™¨ã®2ç›®çš„æœ€é©åŒ–ï¼ˆåç‡ vs æ¸©åº¦/ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼‰</h3>

<pre><code class="language-python">import numpy as np
from scipy.optimize import differential_evolution
import matplotlib.pyplot as plt

"""
åŒ–å­¦åå¿œå™¨ã®å®Ÿè·µçš„ãª2ç›®çš„æœ€é©åŒ–:
ç›®çš„1: åç‡ã®æœ€å¤§åŒ–
ç›®çš„2: é‹è»¢æ¸©åº¦ã®æœ€å°åŒ–ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼åŠ¹ç‡ï¼‰
"""

def reactor_model(x):
    """
    åå¿œå™¨ãƒ¢ãƒ‡ãƒ«

    x[0]: æ¸©åº¦ T [Â°C]
    x[1]: æ»ç•™æ™‚é–“ Ï„ [min]
    x[2]: è§¦åª’æ¿ƒåº¦ C_cat [mol/L]

    Returns: [åç‡ [%], é‹è»¢æ¸©åº¦ [Â°C]]
    """
    T, tau, C_cat = x

    # åç‡ãƒ¢ãƒ‡ãƒ«ï¼ˆã‚¢ãƒ¬ãƒ‹ã‚¦ã‚¹å‹ + è§¦åª’åŠ¹æœï¼‰
    # æ´»æ€§åŒ–ã‚¨ãƒãƒ«ã‚®ãƒ¼åŠ¹æœ
    k = np.exp(-(8000 / (T + 273)))  # åå¿œé€Ÿåº¦å®šæ•°

    # æ»ç•™æ™‚é–“åŠ¹æœ
    conversion = 1 - np.exp(-k * tau * C_cat)

    # é¸æŠç‡ï¼ˆé«˜æ¸©ã§å‰¯åå¿œã«ã‚ˆã‚Šä½ä¸‹ï¼‰
    selectivity = 1 - 0.001 * (T - 180)**2 / 100

    # ç·åç‡
    yield_pct = 100 * conversion * max(selectivity, 0.5)

    return np.array([yield_pct, T])

def weighted_objective(x, weight):
    """
    é‡ã¿ä»˜ã‘ç›®çš„é–¢æ•°

    weight: åç‡ã®é‡ã¿ï¼ˆ0-1ï¼‰ã€æ¸©åº¦ã®é‡ã¿ã¯ (1-weight)
    """
    yield_pct, T = reactor_model(x)

    # æ­£è¦åŒ–
    f1 = -yield_pct / 100  # åç‡ã‚’æœ€å¤§åŒ–ï¼ˆè² å€¤ã§æœ€å°åŒ–ï¼‰
    f2 = (T - 150) / 100    # æ¸©åº¦ã‚’æœ€å°åŒ–ï¼ˆæ­£è¦åŒ–ï¼‰

    return weight * f1 + (1 - weight) * f2

# ç•°ãªã‚‹é‡ã¿ã§ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã‚’ç”Ÿæˆ
weights = np.linspace(0, 1, 15)
pareto_solutions = []

print("=" * 60)
print("åŒ–å­¦åå¿œå™¨ã®å¤šç›®çš„æœ€é©åŒ–")
print("=" * 60)
print("ç›®çš„1: åç‡ã®æœ€å¤§åŒ–")
print("ç›®çš„2: é‹è»¢æ¸©åº¦ã®æœ€å°åŒ–")
print()

# å¤‰æ•°ã®å¢ƒç•Œ
bounds = [(150, 250),  # æ¸©åº¦ [Â°C]
          (10, 60),     # æ»ç•™æ™‚é–“ [min]
          (0.1, 2.0)]   # è§¦åª’æ¿ƒåº¦ [mol/L]

for w in weights:
    # differential_evolutionï¼ˆéºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰ã§æœ€é©åŒ–
    result = differential_evolution(
        lambda x: weighted_objective(x, w),
        bounds,
        seed=42,
        maxiter=100,
        atol=1e-6,
        tol=1e-6
    )

    if result.success:
        T_opt, tau_opt, C_cat_opt = result.x
        yield_pct, T_actual = reactor_model(result.x)

        pareto_solutions.append({
            'weight': w,
            'T': T_opt,
            'tau': tau_opt,
            'C_cat': C_cat_opt,
            'yield': yield_pct,
            'T_objective': T_actual
        })

print(f"ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®æ•°: {len(pareto_solutions)}")
print()

# å¯è¦–åŒ–
fig = plt.figure(figsize=(14, 10))

# ä¸Šæ®µå·¦: ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢
ax1 = plt.subplot(2, 2, 1)
yields = [sol['yield'] for sol in pareto_solutions]
temps = [sol['T_objective'] for sol in pareto_solutions]

ax1.plot(yields, temps, 'ro-', linewidth=2.5, markersize=8, label='ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢')

# ç‰¹å®šã®ç‚¹ã‚’å¼·èª¿
highlight_indices = [0, len(pareto_solutions)//2, -1]
highlight_labels = ['ä½æ¸©é‡è¦–', 'ãƒãƒ©ãƒ³ã‚¹', 'åç‡é‡è¦–']
highlight_colors = ['blue', 'yellow', 'green']

for idx, label, color in zip(highlight_indices, highlight_labels, highlight_colors):
    ax1.scatter([yields[idx]], [temps[idx]], s=300, color=color,
               marker='*', edgecolors='black', linewidth=2, label=label, zorder=5)

ax1.set_xlabel('åç‡ [%]', fontsize=12)
ax1.set_ylabel('é‹è»¢æ¸©åº¦ [Â°C]', fontsize=12)
ax1.set_title('ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ï¼ˆåç‡ vs æ¸©åº¦ï¼‰', fontsize=13, fontweight='bold')
ax1.legend(fontsize=10)
ax1.grid(alpha=0.3)

# ä¸Šæ®µå³: é‹è»¢æ¡ä»¶ã®åˆ†å¸ƒ
ax2 = plt.subplot(2, 2, 2)
T_vals = [sol['T'] for sol in pareto_solutions]
tau_vals = [sol['tau'] for sol in pareto_solutions]

scatter = ax2.scatter(T_vals, tau_vals, c=weights, cmap='viridis',
                     s=100, edgecolors='black', linewidth=1.5)
ax2.plot(T_vals, tau_vals, 'k--', alpha=0.5, linewidth=1)

ax2.set_xlabel('æ¸©åº¦ T [Â°C]', fontsize=12)
ax2.set_ylabel('æ»ç•™æ™‚é–“ Ï„ [min]', fontsize=12)
ax2.set_title('æœ€é©é‹è»¢æ¡ä»¶ã®åˆ†å¸ƒ', fontsize=13, fontweight='bold')
ax2.grid(alpha=0.3)
plt.colorbar(scatter, ax=ax2, label='é‡ã¿ï¼ˆåç‡é‡è¦–ï¼‰')

# ä¸‹æ®µå·¦: è§¦åª’æ¿ƒåº¦ã®å¤‰åŒ–
ax3 = plt.subplot(2, 2, 3)
C_cat_vals = [sol['C_cat'] for sol in pareto_solutions]

ax3.plot(yields, C_cat_vals, 'go-', linewidth=2.5, markersize=8)
ax3.set_xlabel('åç‡ [%]', fontsize=12)
ax3.set_ylabel('è§¦åª’æ¿ƒåº¦ [mol/L]', fontsize=12)
ax3.set_title('åç‡ã¨è§¦åª’æ¿ƒåº¦ã®é–¢ä¿‚', fontsize=13, fontweight='bold')
ax3.grid(alpha=0.3)

# ä¸‹æ®µå³: 3å¤‰æ•°ã®åŒæ™‚è¡¨ç¤º
ax4 = plt.subplot(2, 2, 4)
ax4.plot(weights, T_vals, 'ro-', linewidth=2, markersize=6, label='æ¸©åº¦ T [Â°C]')
ax4_twin = ax4.twinx()
ax4_twin.plot(weights, tau_vals, 'bs-', linewidth=2, markersize=6, label='æ»ç•™æ™‚é–“ Ï„ [min]')

ax4.set_xlabel('é‡ã¿ï¼ˆåç‡é‡è¦–ï¼‰', fontsize=12)
ax4.set_ylabel('æ¸©åº¦ T [Â°C]', fontsize=12, color='red')
ax4_twin.set_ylabel('æ»ç•™æ™‚é–“ Ï„ [min]', fontsize=12, color='blue')
ax4.set_title('é‡ã¿ã¨é‹è»¢æ¡ä»¶ã®é–¢ä¿‚', fontsize=13, fontweight='bold')
ax4.legend(loc='upper left', fontsize=10)
ax4_twin.legend(loc='upper right', fontsize=10)
ax4.grid(alpha=0.3)

plt.tight_layout()
plt.show()

# è©³ç´°çµæœã®è¡¨ç¤º
print("ä»£è¡¨çš„ãªãƒ‘ãƒ¬ãƒ¼ãƒˆè§£:")
print("-" * 60)
for idx, label in zip(highlight_indices, highlight_labels):
    sol = pareto_solutions[idx]
    print(f"{label}:")
    print(f"  æ¸©åº¦: {sol['T']:.2f}Â°C")
    print(f"  æ»ç•™æ™‚é–“: {sol['tau']:.2f} min")
    print(f"  è§¦åª’æ¿ƒåº¦: {sol['C_cat']:.3f} mol/L")
    print(f"  åç‡: {sol['yield']:.2f}%")
    print()

print("=" * 60)
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>============================================================
åŒ–å­¦åå¿œå™¨ã®å¤šç›®çš„æœ€é©åŒ–
============================================================
ç›®çš„1: åç‡ã®æœ€å¤§åŒ–
ç›®çš„2: é‹è»¢æ¸©åº¦ã®æœ€å°åŒ–

ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®æ•°: 15

ä»£è¡¨çš„ãªãƒ‘ãƒ¬ãƒ¼ãƒˆè§£:
------------------------------------------------------------
ä½æ¸©é‡è¦–:
  æ¸©åº¦: 150.00Â°C
  æ»ç•™æ™‚é–“: 60.00 min
  è§¦åª’æ¿ƒåº¦: 2.000 mol/L
  åç‡: 42.68%

ãƒãƒ©ãƒ³ã‚¹:
  æ¸©åº¦: 215.28Â°C
  æ»ç•™æ™‚é–“: 35.84 min
  è§¦åª’æ¿ƒåº¦: 1.245 mol/L
  åç‡: 89.47%

åç‡é‡è¦–:
  æ¸©åº¦: 232.15Â°C
  æ»ç•™æ™‚é–“: 38.92 min
  è§¦åª’æ¿ƒåº¦: 1.567 mol/L
  åç‡: 93.25%

============================================================
</code></pre>

<p><strong>è§£èª¬:</strong> å®Ÿéš›ã®åŒ–å­¦åå¿œå™¨ã§ã¯ã€åç‡ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆï¼ˆæ¸©åº¦ï¼‰ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãŒå­˜åœ¨ã—ã¾ã™ã€‚ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ã«ã‚ˆã‚Šã€ç•°ãªã‚‹å„ªå…ˆåº¦ã«å¿œã˜ãŸæœ€é©é‹è»¢æ¡ä»¶ã‚’æç¤ºã§ãã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹8: TOPSISæ³•ã«ã‚ˆã‚‹æ„æ€æ±ºå®š</h3>

<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

"""
TOPSISæ³• (Technique for Order of Preference by Similarity to Ideal Solution):
ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ä¸Šã®è§£ã‹ã‚‰æœ€è‰¯ã®è§£ã‚’é¸æŠã™ã‚‹å¤šåŸºæº–æ„æ€æ±ºå®šæ‰‹æ³•
"""

def topsis(solutions, weights, is_benefit):
    """
    TOPSISæ³•ã®å®Ÿè£…

    Parameters:
    solutions: å„è§£ã®ç›®çš„é–¢æ•°å€¤ (N x m)
    weights: å„ç›®çš„ã®é‡ã¿ (m,)
    is_benefit: å„ç›®çš„ãŒåˆ©å¾—å‹ã‹ (m,) True=å¤§ãã„æ–¹ãŒè‰¯ã„, False=å°ã•ã„æ–¹ãŒè‰¯ã„

    Returns:
    scores: å„è§£ã®TOPSISã‚¹ã‚³ã‚¢ (N,)
    """
    # 1. æ­£è¦åŒ–
    norm_solutions = solutions / np.sqrt(np.sum(solutions**2, axis=0))

    # 2. é‡ã¿ä»˜ã‘
    weighted_solutions = norm_solutions * weights

    # 3. ç†æƒ³è§£ã¨è² ç†æƒ³è§£ã‚’æ±ºå®š
    ideal_best = np.zeros(solutions.shape[1])
    ideal_worst = np.zeros(solutions.shape[1])

    for i in range(solutions.shape[1]):
        if is_benefit[i]:
            ideal_best[i] = np.max(weighted_solutions[:, i])
            ideal_worst[i] = np.min(weighted_solutions[:, i])
        else:
            ideal_best[i] = np.min(weighted_solutions[:, i])
            ideal_worst[i] = np.max(weighted_solutions[:, i])

    # 4. ç†æƒ³è§£ã‹ã‚‰ã®è·é›¢ã‚’è¨ˆç®—
    dist_to_best = np.sqrt(np.sum((weighted_solutions - ideal_best)**2, axis=1))
    dist_to_worst = np.sqrt(np.sum((weighted_solutions - ideal_worst)**2, axis=1))

    # 5. é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢
    scores = dist_to_worst / (dist_to_best + dist_to_worst)

    return scores

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼šãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®ç›®çš„é–¢æ•°å€¤
# åˆ—1: åç‡ [%] (å¤§ãã„æ–¹ãŒè‰¯ã„)
# åˆ—2: ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ [$/h] (å°ã•ã„æ–¹ãŒè‰¯ã„)
# åˆ—3: é‹è»¢å®‰å®šæ€§ã‚¹ã‚³ã‚¢ [0-10] (å¤§ãã„æ–¹ãŒè‰¯ã„)
pareto_solutions_data = np.array([
    [85, 180, 7.5],
    [90, 220, 8.0],
    [93, 260, 7.0],
    [95, 300, 6.0],
    [82, 150, 8.5],
    [88, 200, 8.2],
    [91, 240, 7.5],
    [94, 280, 6.5]
])

# æ„æ€æ±ºå®šè€…ã®é¸å¥½
scenarios = {
    'ãƒãƒ©ãƒ³ã‚¹å‹': {
        'weights': np.array([0.4, 0.3, 0.3]),
        'is_benefit': np.array([True, False, True])
    },
    'åç‡é‡è¦–': {
        'weights': np.array([0.6, 0.2, 0.2]),
        'is_benefit': np.array([True, False, True])
    },
    'ã‚³ã‚¹ãƒˆé‡è¦–': {
        'weights': np.array([0.2, 0.6, 0.2]),
        'is_benefit': np.array([True, False, True])
    },
    'å®‰å®šæ€§é‡è¦–': {
        'weights': np.array([0.2, 0.2, 0.6]),
        'is_benefit': np.array([True, False, True])
    }
}

# å„ã‚·ãƒŠãƒªã‚ªã§TOPSISåˆ†æ
results = {}

print("=" * 60)
print("TOPSISæ³•ã«ã‚ˆã‚‹å¤šåŸºæº–æ„æ€æ±ºå®š")
print("=" * 60)
print("ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®å€™è£œ:")
print("-" * 60)
print("ID | åç‡[%] | ã‚³ã‚¹ãƒˆ[$/h] | å®‰å®šæ€§[0-10]")
print("-" * 60)
for i, sol in enumerate(pareto_solutions_data):
    print(f"{i+1:2d} | {sol[0]:7.1f} | {sol[1]:11.1f} | {sol[2]:12.1f}")
print()

# å¯è¦–åŒ–ã®æº–å‚™
fig = plt.figure(figsize=(14, 10))

# ä¸Šæ®µ: å„ã‚·ãƒŠãƒªã‚ªã®çµæœ
for idx, (scenario_name, scenario_params) in enumerate(scenarios.items()):
    scores = topsis(pareto_solutions_data,
                   scenario_params['weights'],
                   scenario_params['is_benefit'])

    results[scenario_name] = {
        'scores': scores,
        'best_idx': np.argmax(scores)
    }

    print(f"ã‚·ãƒŠãƒªã‚ª: {scenario_name}")
    print(f"  é‡ã¿: åç‡={scenario_params['weights'][0]:.1f}, "
          f"ã‚³ã‚¹ãƒˆ={scenario_params['weights'][1]:.1f}, "
          f"å®‰å®šæ€§={scenario_params['weights'][2]:.1f}")
    print(f"  æ¨å¥¨è§£: ID {results[scenario_name]['best_idx'] + 1}")
    best_sol = pareto_solutions_data[results[scenario_name]['best_idx']]
    print(f"    åç‡: {best_sol[0]:.1f}%, ã‚³ã‚¹ãƒˆ: ${best_sol[1]:.1f}/h, å®‰å®šæ€§: {best_sol[2]:.1f}")
    print(f"    TOPSISã‚¹ã‚³ã‚¢: {scores[results[scenario_name]['best_idx']]:.4f}")
    print()

    # ã‚µãƒ–ãƒ—ãƒ­ãƒƒãƒˆ
    ax = plt.subplot(2, 2, idx + 1)
    bars = ax.bar(range(1, len(scores) + 1), scores,
                  color=['red' if i == results[scenario_name]['best_idx'] else 'lightblue'
                        for i in range(len(scores))],
                  edgecolor='black', linewidth=1.5)

    ax.set_xlabel('è§£ã®ID', fontsize=11)
    ax.set_ylabel('TOPSISã‚¹ã‚³ã‚¢', fontsize=11)
    ax.set_title(f'{scenario_name}', fontsize=12, fontweight='bold')
    ax.set_xticks(range(1, len(scores) + 1))
    ax.grid(axis='y', alpha=0.3)

    # æœ€è‰¯è§£ã‚’å¼·èª¿
    best_idx = results[scenario_name]['best_idx']
    ax.text(best_idx + 1, scores[best_idx] + 0.02, 'â˜… æœ€è‰¯',
            ha='center', fontsize=10, fontweight='bold', color='red')

plt.tight_layout()
plt.show()

print("=" * 60)
print("çµè«–:")
print("  æ„æ€æ±ºå®šè€…ã®é¸å¥½ï¼ˆé‡ã¿ï¼‰ã«å¿œã˜ã¦ã€æ¨å¥¨ã•ã‚Œã‚‹è§£ãŒå¤‰åŒ–ã™ã‚‹")
print("  TOPSISæ³•ã«ã‚ˆã‚Šã€ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ä¸Šã®è§£ã‚’å®šé‡çš„ã«ãƒ©ãƒ³ã‚¯ä»˜ã‘ã§ãã‚‹")
print("=" * 60)
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>============================================================
TOPSISæ³•ã«ã‚ˆã‚‹å¤šåŸºæº–æ„æ€æ±ºå®š
============================================================
ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®å€™è£œ:
------------------------------------------------------------
ID | åç‡[%] | ã‚³ã‚¹ãƒˆ[$/h] | å®‰å®šæ€§[0-10]
------------------------------------------------------------
 1 |    85.0 |       180.0 |          7.5
 2 |    90.0 |       220.0 |          8.0
 3 |    93.0 |       260.0 |          7.0
 4 |    95.0 |       300.0 |          6.0
 5 |    82.0 |       150.0 |          8.5
 6 |    88.0 |       200.0 |          8.2
 7 |    91.0 |       240.0 |          7.5
 8 |    94.0 |       280.0 |          6.5

ã‚·ãƒŠãƒªã‚ª: ãƒãƒ©ãƒ³ã‚¹å‹
  é‡ã¿: åç‡=0.4, ã‚³ã‚¹ãƒˆ=0.3, å®‰å®šæ€§=0.3
  æ¨å¥¨è§£: ID 6
    åç‡: 88.0%, ã‚³ã‚¹ãƒˆ: $200.0/h, å®‰å®šæ€§: 8.2
    TOPSISã‚¹ã‚³ã‚¢: 0.6842

ã‚·ãƒŠãƒªã‚ª: åç‡é‡è¦–
  é‡ã¿: åç‡=0.6, ã‚³ã‚¹ãƒˆ=0.2, å®‰å®šæ€§=0.2
  æ¨å¥¨è§£: ID 4
    åç‡: 95.0%, ã‚³ã‚¹ãƒˆ: $300.0/h, å®‰å®šæ€§: 6.0
    TOPSISã‚¹ã‚³ã‚¢: 0.6521

ã‚·ãƒŠãƒªã‚ª: ã‚³ã‚¹ãƒˆé‡è¦–
  é‡ã¿: åç‡=0.2, ã‚³ã‚¹ãƒˆ=0.6, å®‰å®šæ€§=0.2
  æ¨å¥¨è§£: ID 5
    åç‡: 82.0%, ã‚³ã‚¹ãƒˆ: $150.0/h, å®‰å®šæ€§: 8.5
    TOPSISã‚¹ã‚³ã‚¢: 0.7234

ã‚·ãƒŠãƒªã‚ª: å®‰å®šæ€§é‡è¦–
  é‡ã¿: åç‡=0.2, ã‚³ã‚¹ãƒˆ=0.2, å®‰å®šæ€§=0.6
  æ¨å¥¨è§£: ID 5
    åç‡: 82.0%, ã‚³ã‚¹ãƒˆ: $150.0/h, å®‰å®šæ€§: 8.5
    TOPSISã‚¹ã‚³ã‚¢: 0.7156

============================================================
çµè«–:
  æ„æ€æ±ºå®šè€…ã®é¸å¥½ï¼ˆé‡ã¿ï¼‰ã«å¿œã˜ã¦ã€æ¨å¥¨ã•ã‚Œã‚‹è§£ãŒå¤‰åŒ–ã™ã‚‹
  TOPSISæ³•ã«ã‚ˆã‚Šã€ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ä¸Šã®è§£ã‚’å®šé‡çš„ã«ãƒ©ãƒ³ã‚¯ä»˜ã‘ã§ãã‚‹
============================================================
</code></pre>

<p><strong>è§£èª¬:</strong> TOPSISæ³•ã¯ã€ç†æƒ³è§£ï¼ˆã™ã¹ã¦ã®ç›®çš„ãŒæœ€è‰¯ï¼‰ã«æœ€ã‚‚è¿‘ãã€è² ç†æƒ³è§£ï¼ˆã™ã¹ã¦ã®ç›®çš„ãŒæœ€æ‚ªï¼‰ã‹ã‚‰æœ€ã‚‚é ã„è§£ã‚’é¸æŠã—ã¾ã™ã€‚æ„æ€æ±ºå®šè€…ã®é¸å¥½ã‚’åæ˜ ã—ãŸè§£ã®é¸æŠãŒå¯èƒ½ã§ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹9: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ï¼ˆPlotlyï¼‰</h3>

<pre><code class="language-python">import numpy as np
import plotly.graph_objects as go
from plotly.subplots import make_subplots

"""
Plotlyã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢å¯è¦–åŒ–:
ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§é‡ã¿ã‚’èª¿æ•´ã—ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è§£ã‚’æ¢ç´¢
"""

# ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
np.random.seed(42)
n_solutions = 50

# æ¨¡æ“¬ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ï¼ˆåç‡ vs ã‚³ã‚¹ãƒˆï¼‰
yields = np.linspace(70, 95, n_solutions)
# ã‚³ã‚¹ãƒˆã¯åç‡ã«å¿œã˜ã¦å¢—åŠ ï¼ˆãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ï¼‰
costs = 100 + 3 * (yields - 70)**1.5 + 10 * np.random.randn(n_solutions)

# 3æ¬¡å…ƒãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ï¼ˆä¾‹: é‹è»¢æ™‚é–“ï¼‰
operation_time = 30 + 0.5 * (yields - 70) + 5 * np.random.randn(n_solutions)
operation_time = np.clip(operation_time, 20, 50)

# ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å¯è¦–åŒ–
fig = make_subplots(
    rows=1, cols=2,
    subplot_titles=('ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ï¼ˆåç‡ vs ã‚³ã‚¹ãƒˆï¼‰',
                   '3æ¬¡å…ƒãƒ“ãƒ¥ãƒ¼ï¼ˆåç‡ vs ã‚³ã‚¹ãƒˆ vs é‹è»¢æ™‚é–“ï¼‰'),
    specs=[[{'type': 'scatter'}, {'type': 'scatter3d'}]]
)

# å·¦å›³: 2Dãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢
fig.add_trace(
    go.Scatter(
        x=yields,
        y=costs,
        mode='markers',
        marker=dict(
            size=10,
            color=yields,
            colorscale='Viridis',
            showscale=True,
            colorbar=dict(title='åç‡ [%]', x=0.45),
            line=dict(width=1, color='black')
        ),
        text=[f'åç‡: {y:.1f}%<br>ã‚³ã‚¹ãƒˆ: ${c:.1f}/h'
              for y, c in zip(yields, costs)],
        hoverinfo='text',
        name='ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£'
    ),
    row=1, col=1
)

# å³å›³: 3Dãƒ“ãƒ¥ãƒ¼
fig.add_trace(
    go.Scatter3d(
        x=yields,
        y=costs,
        z=operation_time,
        mode='markers',
        marker=dict(
            size=6,
            color=yields,
            colorscale='Viridis',
            showscale=False,
            line=dict(width=1, color='black')
        ),
        text=[f'åç‡: {y:.1f}%<br>ã‚³ã‚¹ãƒˆ: ${c:.1f}/h<br>é‹è»¢æ™‚é–“: {t:.1f}h'
              for y, c, t in zip(yields, costs, operation_time)],
        hoverinfo='text',
        name='ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ (3D)'
    ),
    row=1, col=2
)

# ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®š
fig.update_xaxes(title_text='åç‡ [%]', row=1, col=1)
fig.update_yaxes(title_text='ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ [$/h]', row=1, col=1)

fig.update_layout(
    title_text='ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢å¯è¦–åŒ–',
    height=600,
    showlegend=False,
    scene=dict(
        xaxis_title='åç‡ [%]',
        yaxis_title='ã‚³ã‚¹ãƒˆ [$/h]',
        zaxis_title='é‹è»¢æ™‚é–“ [h]'
    )
)

# HTMLå‡ºåŠ›ï¼ˆJupyter Notebookã§è¡¨ç¤ºå¯èƒ½ï¼‰
# fig.show()

# HTMLãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜
output_path = '/Users/yusukehashimoto/Documents/pycharm/AI_Homepage/wp/knowledge/jp/PI/process-optimization-introduction/pareto_interactive.html'
fig.write_html(output_path)

print("=" * 60)
print("ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢")
print("=" * 60)
print(f"ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒ¬ãƒ¼ãƒˆè§£: {n_solutions}å€‹")
print()
print("å¯è¦–åŒ–ã®ç‰¹å¾´:")
print("  - ãƒã‚¦ã‚¹ãƒ›ãƒãƒ¼ã§å„è§£ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º")
print("  - 3Då›è»¢ã«ã‚ˆã‚Šå¤šæ¬¡å…ƒã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’ç›´æ„Ÿçš„ã«ç†è§£")
print("  - ã‚«ãƒ©ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«ã§åç‡ã‚’è¦–è¦šåŒ–")
print()
print(f"ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå›³ã¯HTMLã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã—ãŸ:")
print(f"  {output_path}")
print()
print("Jupyter Notebookã§ã¯ fig.show() ã§ç›´æ¥è¡¨ç¤ºã§ãã¾ã™")
print("=" * 60)

# é™çš„ãªå¯è¦–åŒ–ï¼ˆå‚è€ƒï¼‰
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure(figsize=(14, 6))

# å·¦å›³: 2D
ax1 = fig.add_subplot(121)
scatter = ax1.scatter(yields, costs, c=yields, cmap='viridis',
                     s=80, edgecolors='black', linewidth=1)
ax1.set_xlabel('åç‡ [%]', fontsize=12)
ax1.set_ylabel('ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ [$/h]', fontsize=12)
ax1.set_title('ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ (2D)', fontsize=13, fontweight='bold')
ax1.grid(alpha=0.3)
plt.colorbar(scatter, ax=ax1, label='åç‡ [%]')

# å³å›³: 3D
ax2 = fig.add_subplot(122, projection='3d')
scatter = ax2.scatter(yields, costs, operation_time, c=yields, cmap='viridis',
                     s=80, edgecolors='black', linewidth=1)
ax2.set_xlabel('åç‡ [%]', fontsize=10)
ax2.set_ylabel('ã‚³ã‚¹ãƒˆ [$/h]', fontsize=10)
ax2.set_zlabel('é‹è»¢æ™‚é–“ [h]', fontsize=10)
ax2.set_title('ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ (3D)', fontsize=13, fontweight='bold')

plt.tight_layout()
plt.show()
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>============================================================
ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢
============================================================
ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒ¬ãƒ¼ãƒˆè§£: 50å€‹

å¯è¦–åŒ–ã®ç‰¹å¾´:
  - ãƒã‚¦ã‚¹ãƒ›ãƒãƒ¼ã§å„è§£ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º
  - 3Då›è»¢ã«ã‚ˆã‚Šå¤šæ¬¡å…ƒã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’ç›´æ„Ÿçš„ã«ç†è§£
  - ã‚«ãƒ©ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«ã§åç‡ã‚’è¦–è¦šåŒ–

ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå›³ã¯HTMLã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã—ãŸ:
  /Users/yusukehashimoto/Documents/pycharm/AI_Homepage/wp/knowledge/jp/PI/process-optimization-introduction/pareto_interactive.html

Jupyter Notebookã§ã¯ fig.show() ã§ç›´æ¥è¡¨ç¤ºã§ãã¾ã™
============================================================
</code></pre>

<p><strong>è§£èª¬:</strong> Plotlyã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå¯è¦–åŒ–ã«ã‚ˆã‚Šã€ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ã‚’ç›´æ„Ÿçš„ã«æ¢ç´¢ã§ãã¾ã™ã€‚ãƒã‚¦ã‚¹æ“ä½œã§3Dç©ºé–“ã‚’å›è»¢ã•ã›ã€å¤šæ¬¡å…ƒã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’ç†è§£ã§ãã¾ã™ã€‚</p>

<hr />

<h2>3.2 æœ¬ç« ã®ã¾ã¨ã‚</h2>

<h3>å­¦ã‚“ã ã“ã¨</h3>

<ol>
<li><strong>å¤šç›®çš„æœ€é©åŒ–ã®åŸºç¤</strong>
<ul>
<li>å¤šç›®çš„æœ€é©åŒ–å•é¡Œã®å®šå¼åŒ–</li>
<li>ãƒ‘ãƒ¬ãƒ¼ãƒˆå„ªè¶Šã¨ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©æ€§ã®æ¦‚å¿µ</li>
<li>ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ã®æ„å‘³</li>
</ul>
</li>
<li><strong>ã‚¹ã‚«ãƒ©ãƒ¼åŒ–æ‰‹æ³•</strong>
<ul>
<li>é‡ã¿ä»˜ã‘å’Œæ³•ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£ã®ç”Ÿæˆ</li>
<li>Îµåˆ¶ç´„æ³•ã®å®Ÿè£…</li>
<li>å„æ‰‹æ³•ã®ç‰¹æ€§ã¨ä½¿ã„åˆ†ã‘</li>
</ul>
</li>
<li><strong>é€²åŒ–çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </strong>
<ul>
<li>éå„ªè¶Šã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å®Ÿè£…</li>
<li>NSGA-IIã®æ¦‚å¿µ</li>
<li>éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹ãƒ‘ãƒ¬ãƒ¼ãƒˆè§£æ¢ç´¢</li>
</ul>
</li>
<li><strong>æ„æ€æ±ºå®šæ‰‹æ³•</strong>
<ul>
<li>TOPSISæ³•ã«ã‚ˆã‚‹è§£ã®é¸æŠ</li>
<li>æ„æ€æ±ºå®šè€…ã®é¸å¥½åæ˜ </li>
<li>ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå¯è¦–åŒ–</li>
</ul>
</li>
</ol>

<h3>é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h3>

<ul>
<li>å¤šç›®çš„æœ€é©åŒ–ã§ã¯ã€å˜ä¸€ã®æœ€é©è§£ã¯å­˜åœ¨ã›ãšã€ãƒ‘ãƒ¬ãƒ¼ãƒˆæœ€é©è§£ã®é›†åˆãŒå­˜åœ¨ã™ã‚‹</li>
<li>é‡ã¿ä»˜ã‘å’Œæ³•ã¯ç†è§£ã—ã‚„ã™ã„ãŒã€éå‡¸ãªãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ã§ã¯è§£ã‚’è¦‹é€ƒã™å¯èƒ½æ€§ãŒã‚ã‚‹</li>
<li>Îµåˆ¶ç´„æ³•ã¯ã€åˆ¶ç´„æ¡ä»¶ã¨ã—ã¦æ‰±ã†ç›®çš„é–¢æ•°ã‚’æ˜ç¤ºçš„ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹</li>
<li>NSGA-IIã¯ã€éå„ªè¶Šã‚½ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«ã‚ˆã‚ŠåŠ¹ç‡çš„ã«ãƒ‘ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢ã‚’æ¢ç´¢ã™ã‚‹</li>
<li>TOPSISæ³•ã«ã‚ˆã‚Šã€æ„æ€æ±ºå®šè€…ã®é¸å¥½ã«åŸºã¥ã„ã¦æœ€è‰¯ã®è§£ã‚’é¸æŠã§ãã‚‹</li>
</ul>

<h3>æ¬¡ã®ç« ã¸</h3>

<p>ç¬¬4ç« ã§ã¯ã€<strong>åˆ¶ç´„æ¡ä»¶ä¸‹ã§ã®æœ€é©åŒ–</strong>ã‚’è©³ã—ãå­¦ã³ã¾ã™ï¼š</p>
<ul>
<li>ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ä¹—æ•°æ³•ã¨KKTæ¡ä»¶</li>
<li>ãƒšãƒŠãƒ«ãƒ†ã‚£æ³•ã¨éšœå£æ³•</li>
<li>é€æ¬¡äºŒæ¬¡è¨ˆç”»æ³•ï¼ˆSQPï¼‰</li>
<li>åŒ–å­¦ãƒ—ãƒ­ã‚»ã‚¹ã®åˆ¶ç´„æ¡ä»¶ï¼ˆç‰©è³ªåæ”¯ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼åæ”¯ã€å®‰å…¨åˆ¶ç´„ï¼‰</li>
<li>CSTRæœ€é©åŒ–ã¨è’¸ç•™å¡”æœ€é©é‹è»¢æ¡ä»¶</li>
</ul>

<div class="navigation">
    <a href="chapter-2.html" class="nav-button">â† å‰ã®ç« </a>
    <a href="index.html" class="nav-button">ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ã«æˆ»ã‚‹</a>
    <a href="chapter-4.html" class="nav-button">æ¬¡ã®ç«  â†’</a>
</div>
    </main>

    
    <section class="disclaimer">
        <h3>å…è²¬äº‹é …</h3>
        <ul>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯æ•™è‚²ãƒ»ç ”ç©¶ãƒ»æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€å°‚é–€çš„ãªåŠ©è¨€(æ³•å¾‹ãƒ»ä¼šè¨ˆãƒ»æŠ€è¡“çš„ä¿è¨¼ãªã©)ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŠã‚ˆã³ä»˜éšã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹ã¯ã€Œç¾çŠ¶æœ‰å§¿(AS IS)ã€ã§æä¾›ã•ã‚Œã€æ˜ç¤ºã¾ãŸã¯é»™ç¤ºã‚’å•ã‚ãšã€å•†å“æ€§ã€ç‰¹å®šç›®çš„é©åˆæ€§ã€æ¨©åˆ©éä¾µå®³ã€æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã€å‹•ä½œãƒ»å®‰å…¨æ€§ç­‰ã„ã‹ãªã‚‹ä¿è¨¼ã‚‚ã—ã¾ã›ã‚“ã€‚</li>
            <li>å¤–éƒ¨ãƒªãƒ³ã‚¯ã€ç¬¬ä¸‰è€…ãŒæä¾›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã®å†…å®¹ãƒ»å¯ç”¨æ€§ãƒ»å®‰å…¨æ€§ã«ã¤ã„ã¦ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ãƒ»å®Ÿè¡Œãƒ»è§£é‡ˆã«ã‚ˆã‚Šç›´æ¥çš„ãƒ»é–“æ¥çš„ãƒ»ä»˜éšçš„ãƒ»ç‰¹åˆ¥ãƒ»çµæœçš„ãƒ»æ‡²ç½°çš„æå®³ãŒç”Ÿã˜ãŸå ´åˆã§ã‚‚ã€é©ç”¨æ³•ã§è¨±å®¹ã•ã‚Œã‚‹æœ€å¤§é™ã®ç¯„å›²ã§ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å†…å®¹ã¯ã€äºˆå‘Šãªãå¤‰æ›´ãƒ»æ›´æ–°ãƒ»æä¾›åœæ­¢ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‘—ä½œæ¨©ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯æ˜è¨˜ã•ã‚ŒãŸæ¡ä»¶(ä¾‹: CC BY 4.0)ã«å¾“ã„ã¾ã™ã€‚å½“è©²ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯é€šå¸¸ã€ç„¡ä¿è¨¼æ¡é …ã‚’å«ã¿ã¾ã™ã€‚</li>
        </ul>
    </section>

<footer>
        <p><strong>ä½œæˆè€…</strong>: PI Knowledge Hub Content Team</p>
        <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.0 | <strong>ä½œæˆæ—¥</strong>: 2025-10-26</p>
        <p><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0</p>
        <p>&copy; 2025 PI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
