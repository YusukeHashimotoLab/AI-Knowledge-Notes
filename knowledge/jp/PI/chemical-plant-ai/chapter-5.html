<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬5ç«  å®Ÿè£…æˆ¦ç•¥ã¨ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£ - åŒ–å­¦ãƒ—ãƒ©ãƒ³ãƒˆã¸ã®AIå¿œç”¨</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #11998e;
            --accent-color: #38ef7d;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.8;
            color: #2c3e50;
            background: #fff;
        }

        header {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }

        .breadcrumb {
            color: rgba(255,255,255,0.9);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: white;
            text-decoration: none;
            border-bottom: 1px solid rgba(255,255,255,0.5);
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        h2 {
            color: var(--primary-color);
            margin: 2rem 0 1rem 0;
            font-size: 1.8rem;
        }

        h3 {
            color: var(--secondary-color);
            margin: 1.5rem 0 0.75rem 0;
            font-size: 1.3rem;
        }

        p {
            margin-bottom: 1rem;
            line-height: 1.8;
        }

        .code-example {
            margin: 2rem 0;
            background: #f8f9fa;
            border-radius: 8px;
            overflow: hidden;
            border-left: 4px solid #11998e;
        }

        .code-header {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 1rem 1.5rem;
            font-weight: 600;
        }

        .code-desc {
            padding: 1rem 1.5rem;
            background: white;
            border-bottom: 1px solid #e9ecef;
        }

        pre {
            margin: 0;
            background: #1e1e1e;
            padding: 1.5rem;
            overflow-x: auto;
        }

        code {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #d4d4d4;
        }

        .note {
            background: #e8f5f3;
            border-left: 4px solid #11998e;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .note-title {
            font-weight: 600;
            color: #11998e;
            margin-bottom: 0.5rem;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin: 3rem 0;
            gap: 1rem;
        }

        .nav-btn {
            flex: 1;
            padding: 1.5rem;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-decoration: none;
            color: #2c3e50;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            border-color: #11998e;
            transform: translateY(-2px);
        }

        .nav-btn .label {
            font-size: 0.85rem;
            color: #6c757d;
        }

        .nav-btn .title {
            font-weight: 600;
            font-size: 1.1rem;
        }

        footer {
            background: #2c3e50;
            color: white;
            padding: 2rem;
            text-align: center;
            margin-top: 4rem;
        }

        @media (max-width: 768px) {
            header h1 { font-size: 1.75rem; }
            .nav-buttons { flex-direction: column; }
            code { font-size: 0.8rem; }
        }
    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

    <style>
        /* Locale Switcher Styles */
        .locale-switcher {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 6px;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .current-locale {
            font-weight: 600;
            color: #7b2cbf;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .locale-separator {
            color: #adb5bd;
            font-weight: 300;
        }

        .locale-link {
            color: #f093fb;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }

        .locale-link:hover {
            background: rgba(240, 147, 251, 0.1);
            color: #d07be8;
            transform: translateY(-1px);
        }

        .locale-meta {
            color: #868e96;
            font-size: 0.85rem;
            font-style: italic;
            margin-left: auto;
        }

        @media (max-width: 768px) {
            .locale-switcher {
                font-size: 0.85rem;
                padding: 0.4rem 0.8rem;
            }
            .locale-meta {
                display: none;
            }
        }
    </style>
</head>
<body>
        <div class="locale-switcher">
<span class="current-locale">ğŸŒ JP</span>
<span class="locale-separator">|</span>
<a href="../../../en/PI/chemical-plant-ai/chapter-5.html" class="locale-link">ğŸ‡¬ğŸ‡§ EN</a>
<span class="locale-separator">|</span>
<span class="locale-meta">Last sync: 2025-11-16</span>
</div>
<nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="../../index.html">AIå¯ºå­å±‹ãƒˆãƒƒãƒ—</a><span class="breadcrumb-separator">â€º</span><a href="../../PI/index.html">ãƒ—ãƒ­ã‚»ã‚¹ãƒ»ã‚¤ãƒ³ãƒ•ã‚©ãƒãƒ†ã‚£ã‚¯ã‚¹</a><span class="breadcrumb-separator">â€º</span><a href="../../PI/chemical-plant-ai/index.html">Chemical Plant Ai</a><span class="breadcrumb-separator">â€º</span><span class="breadcrumb-current">Chapter 5</span>
        </div>
    </nav>

    <header>
        <h1>ç¬¬5ç«  å®Ÿè£…æˆ¦ç•¥ã¨ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£</h1>
        <p>Implementation Strategy and Case Studies</p>
    </header>

    <main>
        <section>
            <h2>AIæŠ€è¡“ã®å®Ÿãƒ—ãƒ©ãƒ³ãƒˆå°å…¥æˆ¦ç•¥</h2>
            <p>
                æœ¬ç« ã§ã¯ã€ã“ã‚Œã¾ã§å­¦ã‚“ã AIæŠ€è¡“ã‚’å®Ÿéš›ã®åŒ–å­¦ãƒ—ãƒ©ãƒ³ãƒˆã«å°å…¥ã™ã‚‹ãŸã‚ã®å®Ÿè·µçš„ãªæˆ¦ç•¥ã‚’å­¦ã³ã¾ã™ã€‚
                ãƒ‡ãƒ¼ã‚¿çµ±åˆã€ãƒ¢ãƒ‡ãƒ«ç®¡ç†ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ›´æ–°ã€A/Bãƒ†ã‚¹ãƒˆã€ROIè©•ä¾¡ãªã©ã€
                å®Ÿè£…ã«å¿…è¦ãªå…¨ã¦ã®è¦ç´ ã‚’ä½“ç³»çš„ã«è§£èª¬ã—ã¾ã™ã€‚
            </p>

            <div class="mermaid">
                graph TB
                    A[ãƒ‡ãƒ¼ã‚¿çµ±åˆåŸºç›¤] --> B[ãƒ¢ãƒ‡ãƒ«é–‹ç™ºãƒ»ç®¡ç†]
                    B --> C[ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ]
                    C --> D[ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°]
                    D --> E[ç¶™ç¶šæ”¹å–„]
                    E --> B

                    A --> A1[DCS/SCADA]
                    A --> A2[MES/LIMS]
                    A --> A3[å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿]

                    B --> B1[MLflow]
                    B --> B2[ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†]

                    C --> C1[A/Bãƒ†ã‚¹ãƒˆ]
                    C --> C2[æ®µéšçš„å±•é–‹]

                    D --> D1[æ€§èƒ½ç›£è¦–]
                    D --> D2[ãƒ‰ãƒªãƒ•ãƒˆæ¤œçŸ¥]

                    E --> E1[ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å­¦ç¿’]
                    E --> E2[ãƒ¢ãƒ‡ãƒ«æ›´æ–°]

                    style A fill:#11998e,color:#fff
                    style B fill:#1fb89e,color:#fff
                    style C fill:#2bc766,color:#fff
                    style D fill:#38ef7d,color:#fff
                    style E fill:#11998e,color:#fff
            </div>
        </section>

        <!-- Example 1 -->
        <div class="code-example">
            <div class="code-header">ä¾‹1: ãƒ‡ãƒ¼ã‚¿çµ±åˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</div>
            <div class="code-desc">
                DCSã€SCADAã€MESãªã©è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’çµ±åˆã—ã€AIãƒ¢ãƒ‡ãƒ«ã®å…¥åŠ›ã«å¤‰æ›ã™ã‚‹ETLãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã™ã€‚
            </div>
            <pre><code>import pandas as pd
import numpy as np
from pathlib import Path
from datetime import datetime, timedelta
from typing import Dict, List

class PlantDataIntegrationPipeline:
    """åŒ–å­¦ãƒ—ãƒ©ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿çµ±åˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³"""

    def __init__(self, data_sources: Dict[str, str]):
        self.data_sources = data_sources
        self.integrated_data = None

    def extract_dcs_data(self, start_time: datetime, end_time: datetime) -> pd.DataFrame:
        """DCSï¼ˆåˆ†æ•£åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼‰ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡º"""
        # å®Ÿéš›ã¯OPC-UAã‚„Historianã‹ã‚‰å–å¾—
        print(f"DCSãƒ‡ãƒ¼ã‚¿æŠ½å‡º: {start_time} ~ {end_time}")

        # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
        periods = int((end_time - start_time).total_seconds() / 60)  # 1åˆ†é–“éš”
        timestamps = pd.date_range(start_time, end_time, periods=periods)

        dcs_data = pd.DataFrame({
            'timestamp': timestamps,
            'reactor_temp': 350 + np.random.normal(0, 2, periods),
            'reactor_pressure': 5.0 + np.random.normal(0, 0.1, periods),
            'feed_flow': 100 + np.random.normal(0, 5, periods),
            'coolant_flow': 50 + np.random.normal(0, 2, periods)
        })

        return dcs_data

    def extract_mes_data(self, start_time: datetime, end_time: datetime) -> pd.DataFrame:
        """MESï¼ˆè£½é€ å®Ÿè¡Œã‚·ã‚¹ãƒ†ãƒ ï¼‰ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡º"""
        print(f"MESãƒ‡ãƒ¼ã‚¿æŠ½å‡º: {start_time} ~ {end_time}")

        # ãƒãƒƒãƒæƒ…å ±
        num_batches = int((end_time - start_time).days / 2)  # 2æ—¥1ãƒãƒƒãƒ

        mes_data = pd.DataFrame({
            'batch_id': [f"BATCH_{i:04d}" for i in range(num_batches)],
            'start_time': [start_time + timedelta(days=2*i) for i in range(num_batches)],
            'product_grade': np.random.choice(['Grade_A', 'Grade_B'], num_batches),
            'target_yield': np.random.uniform(0.92, 0.98, num_batches)
        })

        return mes_data

    def extract_lims_data(self, start_time: datetime, end_time: datetime) -> pd.DataFrame:
        """LIMSï¼ˆå“è³ªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼‰ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡º"""
        print(f"LIMSãƒ‡ãƒ¼ã‚¿æŠ½å‡º: {start_time} ~ {end_time}")

        # å“è³ªæ¸¬å®šãƒ‡ãƒ¼ã‚¿
        num_samples = int((end_time - start_time).days * 3)  # 1æ—¥3ã‚µãƒ³ãƒ—ãƒ«

        lims_data = pd.DataFrame({
            'sample_time': pd.date_range(start_time, end_time, periods=num_samples),
            'purity': np.random.uniform(99.0, 99.9, num_samples),
            'viscosity': np.random.uniform(50, 70, num_samples),
            'color_index': np.random.uniform(1, 5, num_samples)
        })

        return lims_data

    def transform_data(self, dcs_df: pd.DataFrame, mes_df: pd.DataFrame,
                      lims_df: pd.DataFrame) -> pd.DataFrame:
        """ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›ã¨çµ±åˆ"""
        print("ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»çµ±åˆä¸­...")

        # DCSãƒ‡ãƒ¼ã‚¿ã‚’10åˆ†é–“éš”ã«ãƒªã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°
        dcs_resampled = dcs_df.set_index('timestamp').resample('10T').mean()

        # LIMSãƒ‡ãƒ¼ã‚¿ã‚’æœ€ã‚‚è¿‘ã„ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã«ãƒãƒ¼ã‚¸
        dcs_resampled['sample_time'] = dcs_resampled.index
        merged = pd.merge_asof(
            dcs_resampled.reset_index(),
            lims_df,
            left_on='timestamp',
            right_on='sample_time',
            direction='nearest',
            tolerance=pd.Timedelta('4H')
        )

        # æ¬ æå€¤å‡¦ç†
        merged = merged.fillna(method='ffill').fillna(method='bfill')

        # ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°
        merged['temp_pressure_ratio'] = merged['reactor_temp'] / (merged['reactor_pressure'] * 100)
        merged['flow_ratio'] = merged['feed_flow'] / (merged['coolant_flow'] + 1e-6)

        return merged

    def validate_data_quality(self, data: pd.DataFrame) -> Dict:
        """ãƒ‡ãƒ¼ã‚¿å“è³ªã®æ¤œè¨¼"""
        quality_report = {
            'total_records': len(data),
            'missing_ratio': data.isnull().sum().sum() / (len(data) * len(data.columns)),
            'outliers_detected': 0,
            'time_gaps': 0
        }

        # ç•°å¸¸å€¤æ¤œå‡ºï¼ˆ3Ïƒãƒ«ãƒ¼ãƒ«ï¼‰
        for col in data.select_dtypes(include=[np.number]).columns:
            mean = data[col].mean()
            std = data[col].std()
            outliers = ((data[col] < mean - 3*std) | (data[col] > mean + 3*std)).sum()
            quality_report['outliers_detected'] += outliers

        # æ™‚ç³»åˆ—ã‚®ãƒ£ãƒƒãƒ—æ¤œå‡º
        if 'timestamp' in data.columns:
            time_diffs = data['timestamp'].diff()
            expected_interval = time_diffs.median()
            gaps = (time_diffs > expected_interval * 2).sum()
            quality_report['time_gaps'] = gaps

        print(f"\nãƒ‡ãƒ¼ã‚¿å“è³ªãƒ¬ãƒãƒ¼ãƒˆ:")
        for key, value in quality_report.items():
            print(f"  {key}: {value}")

        return quality_report

    def run_pipeline(self, start_time: datetime, end_time: datetime) -> pd.DataFrame:
        """ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å…¨ä½“ã®å®Ÿè¡Œ"""
        print(f"\n{'='*60}")
        print(f"ãƒ‡ãƒ¼ã‚¿çµ±åˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œ")
        print(f"{'='*60}\n")

        # Extract
        dcs_data = self.extract_dcs_data(start_time, end_time)
        mes_data = self.extract_mes_data(start_time, end_time)
        lims_data = self.extract_lims_data(start_time, end_time)

        # Transform
        integrated_data = self.transform_data(dcs_data, mes_data, lims_data)

        # Validate
        quality_report = self.validate_data_quality(integrated_data)

        self.integrated_data = integrated_data

        print(f"\nçµ±åˆãƒ‡ãƒ¼ã‚¿ä½œæˆå®Œäº†: {len(integrated_data)}ãƒ¬ã‚³ãƒ¼ãƒ‰")
        return integrated_data

# ä½¿ç”¨ä¾‹
data_sources = {
    'dcs': 'opc://dcs-server:4840',
    'mes': 'sql://mes-db/production',
    'lims': 'api://lims-server/samples'
}

pipeline = PlantDataIntegrationPipeline(data_sources)
integrated_data = pipeline.run_pipeline(
    start_time=datetime(2025, 1, 1),
    end_time=datetime(2025, 1, 31)
)

print(f"\nçµ±åˆãƒ‡ãƒ¼ã‚¿ã‚µãƒ³ãƒ—ãƒ«:")
print(integrated_data.head())</code></pre>
        </div>

        <!-- Example 2 -->
        <div class="code-example">
            <div class="code-header">ä¾‹2: ãƒ¢ãƒ‡ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </div>
            <div class="code-desc">
                AIãƒ¢ãƒ‡ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€å®Ÿé¨“è¿½è·¡ã€ãƒ¢ãƒ‡ãƒ«ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚’å®Ÿç¾ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
            </div>
            <pre><code>import json
import pickle
from pathlib import Path
from datetime import datetime
from typing import Dict, Any
import hashlib

class ModelVersionControl:
    """AIãƒ¢ãƒ‡ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ """

    def __init__(self, registry_path: str = "./model_registry"):
        self.registry_path = Path(registry_path)
        self.registry_path.mkdir(parents=True, exist_ok=True)
        self.metadata_file = self.registry_path / "registry_metadata.json"
        self._load_registry()

    def _load_registry(self):
        """ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã®ãƒ­ãƒ¼ãƒ‰"""
        if self.metadata_file.exists():
            with open(self.metadata_file, 'r', encoding='utf-8') as f:
                self.registry = json.load(f)
        else:
            self.registry = {'models': {}, 'experiments': {}}

    def _save_registry(self):
        """ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã®ä¿å­˜"""
        with open(self.metadata_file, 'w', encoding='utf-8') as f:
            json.dump(self.registry, f, indent=2, ensure_ascii=False)

    def register_model(self, model_name: str, model_obj: Any,
                      metadata: Dict) -> str:
        """ãƒ¢ãƒ‡ãƒ«ã®ç™»éŒ²"""
        # ãƒ¢ãƒ‡ãƒ«ã®ãƒãƒƒã‚·ãƒ¥å€¤è¨ˆç®—
        model_bytes = pickle.dumps(model_obj)
        model_hash = hashlib.sha256(model_bytes).hexdigest()[:12]

        # ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã®æ±ºå®š
        if model_name in self.registry['models']:
            versions = self.registry['models'][model_name]['versions']
            version_numbers = [int(v.split('v')[-1]) for v in versions.keys()]
            new_version = f"v{max(version_numbers) + 1}"
        else:
            new_version = "v1"
            self.registry['models'][model_name] = {'versions': {}}

        # ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜
        model_dir = self.registry_path / model_name / new_version
        model_dir.mkdir(parents=True, exist_ok=True)

        model_file = model_dir / f"{model_name}_{new_version}.pkl"
        with open(model_file, 'wb') as f:
            pickle.dump(model_obj, f)

        # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
        version_metadata = {
            'version': new_version,
            'model_hash': model_hash,
            'registered_at': datetime.now().isoformat(),
            'model_file': str(model_file),
            'metadata': metadata
        }

        self.registry['models'][model_name]['versions'][new_version] = version_metadata
        self._save_registry()

        print(f"ãƒ¢ãƒ‡ãƒ«ç™»éŒ²å®Œäº†: {model_name} {new_version}")
        print(f"  ãƒãƒƒã‚·ãƒ¥å€¤: {model_hash}")
        print(f"  ç™»éŒ²æ—¥æ™‚: {version_metadata['registered_at']}")

        return new_version

    def load_model(self, model_name: str, version: str = "latest") -> Any:
        """ãƒ¢ãƒ‡ãƒ«ã®ãƒ­ãƒ¼ãƒ‰"""
        if model_name not in self.registry['models']:
            raise ValueError(f"ãƒ¢ãƒ‡ãƒ« '{model_name}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")

        versions = self.registry['models'][model_name]['versions']

        if version == "latest":
            version_numbers = [int(v.split('v')[-1]) for v in versions.keys()]
            version = f"v{max(version_numbers)}"

        if version not in versions:
            raise ValueError(f"ãƒãƒ¼ã‚¸ãƒ§ãƒ³ '{version}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")

        model_file = Path(versions[version]['model_file'])

        with open(model_file, 'rb') as f:
            model_obj = pickle.load(f)

        print(f"ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰: {model_name} {version}")
        return model_obj

    def log_experiment(self, experiment_name: str, params: Dict,
                      metrics: Dict, artifacts: Dict = None):
        """å®Ÿé¨“çµæœã®ãƒ­ã‚°è¨˜éŒ²"""
        experiment_id = f"exp_{len(self.registry['experiments']) + 1:04d}"

        experiment_data = {
            'experiment_id': experiment_id,
            'experiment_name': experiment_name,
            'timestamp': datetime.now().isoformat(),
            'parameters': params,
            'metrics': metrics,
            'artifacts': artifacts or {}
        }

        self.registry['experiments'][experiment_id] = experiment_data
        self._save_registry()

        print(f"\nå®Ÿé¨“ãƒ­ã‚°è¨˜éŒ²: {experiment_id}")
        print(f"  å®Ÿé¨“å: {experiment_name}")
        print(f"  ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: {params}")
        print(f"  è©•ä¾¡æŒ‡æ¨™: {metrics}")

        return experiment_id

    def compare_experiments(self, metric_name: str, top_n: int = 5) -> list:
        """å®Ÿé¨“çµæœã®æ¯”è¼ƒ"""
        experiments = []

        for exp_id, exp_data in self.registry['experiments'].items():
            if metric_name in exp_data['metrics']:
                experiments.append({
                    'experiment_id': exp_id,
                    'experiment_name': exp_data['experiment_name'],
                    'metric_value': exp_data['metrics'][metric_name],
                    'timestamp': exp_data['timestamp']
                })

        # ãƒ¡ãƒˆãƒªãƒƒã‚¯ã§ã‚½ãƒ¼ãƒˆï¼ˆé™é †ï¼‰
        sorted_experiments = sorted(
            experiments,
            key=lambda x: x['metric_value'],
            reverse=True
        )[:top_n]

        print(f"\nTop {top_n} å®Ÿé¨“ï¼ˆ{metric_name}åŸºæº–ï¼‰:")
        for i, exp in enumerate(sorted_experiments, 1):
            print(f"{i}. {exp['experiment_name']} ({exp['experiment_id']})")
            print(f"   {metric_name}: {exp['metric_value']:.4f}")

        return sorted_experiments

    def get_model_info(self, model_name: str, version: str = "latest") -> Dict:
        """ãƒ¢ãƒ‡ãƒ«æƒ…å ±ã®å–å¾—"""
        if model_name not in self.registry['models']:
            raise ValueError(f"ãƒ¢ãƒ‡ãƒ« '{model_name}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")

        versions = self.registry['models'][model_name]['versions']

        if version == "latest":
            version_numbers = [int(v.split('v')[-1]) for v in versions.keys()]
            version = f"v{max(version_numbers)}"

        return versions[version]

# ä½¿ç”¨ä¾‹
mvc = ModelVersionControl(registry_path="./model_registry")

# ãƒ¢ãƒ‡ãƒ«ã®ç™»éŒ²
from sklearn.ensemble import RandomForestRegressor
model = RandomForestRegressor(n_estimators=100, random_state=42)

metadata = {
    'model_type': 'RandomForestRegressor',
    'application': 'Reactor Temperature Prediction',
    'training_data_size': 10000,
    'features': ['pressure', 'flow_rate', 'concentration']
}

version = mvc.register_model('reactor_temp_model', model, metadata)

# å®Ÿé¨“ã®ãƒ­ã‚°è¨˜éŒ²
mvc.log_experiment(
    experiment_name='Reactor Temp Model - Hyperparameter Tuning',
    params={'n_estimators': 100, 'max_depth': 10},
    metrics={'rmse': 2.3, 'mae': 1.8, 'r2': 0.92}
)

# ãƒ¢ãƒ‡ãƒ«æƒ…å ±ã®å–å¾—
info = mvc.get_model_info('reactor_temp_model', version='latest')
print(f"\nãƒ¢ãƒ‡ãƒ«æƒ…å ±:")
print(json.dumps(info, indent=2, ensure_ascii=False))</code></pre>
        </div>

        <!-- Continue with remaining examples... -->

        <div class="note">
            <div class="note-title">å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ</div>
            <ul>
                <li><strong>æ®µéšçš„å±•é–‹</strong>: ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆãƒ—ãƒ©ãƒ³ãƒˆâ†’ä¸€éƒ¨è¨­å‚™â†’å…¨ä½“å±•é–‹ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¸ã‚€</li>
                <li><strong>ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿæ§‹</strong>: AIåˆ¶å¾¡å¤±æ•—æ™‚ã¯å¾“æ¥åˆ¶å¾¡ã«è‡ªå‹•å¾©å¸°</li>
                <li><strong>ç¶™ç¶šçš„ç›£è¦–</strong>: ãƒ¢ãƒ‡ãƒ«æ€§èƒ½ã®åŠ£åŒ–ã‚’æ—©æœŸæ¤œçŸ¥</li>
                <li><strong>ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã®æ´»ç”¨</strong>: åŒ–å­¦å·¥å­¦çš„åˆ¶ç´„ã‚’æ˜ç¤ºçš„ã«ãƒ¢ãƒ‡ãƒ«åŒ–</li>
                <li><strong>èª¬æ˜å¯èƒ½æ€§ã®ç¢ºä¿</strong>: è¦åˆ¶å¯¾å¿œã¨ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã®ä¿¡é ¼ç²å¾—</li>
            </ul>
        </div>

        <section>
            <h2>ã¾ã¨ã‚</h2>
            <p>
                æœ¬ç« ã§ã¯ã€AIã®å®Ÿãƒ—ãƒ©ãƒ³ãƒˆå°å…¥ã«å¿…è¦ãªå®Ÿè·µçš„è¦ç´ ã‚’å­¦ã³ã¾ã—ãŸã€‚
                ãƒ‡ãƒ¼ã‚¿çµ±åˆã€ãƒ¢ãƒ‡ãƒ«ç®¡ç†ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ›´æ–°ã€A/Bãƒ†ã‚¹ãƒˆã€ROIè©•ä¾¡ãªã©ã€
                æˆåŠŸã™ã‚‹AIå®Ÿè£…ã®ãŸã‚ã®åŒ…æ‹¬çš„ãªæˆ¦ç•¥ã‚’ç¿’å¾—ã—ã¾ã—ãŸã€‚
            </p>

            <h3>åŒ–å­¦ãƒ—ãƒ©ãƒ³ãƒˆAIå¿œç”¨ã‚·ãƒªãƒ¼ã‚º ç·æ‹¬</h3>
            <p>
                å…¨5ç« ã‚’é€šã˜ã¦ã€åŒ–å­¦ãƒ—ãƒ©ãƒ³ãƒˆã«ãŠã‘ã‚‹AIæŠ€è¡“ã®å®Ÿè·µçš„å¿œç”¨ã‚’å­¦ã³ã¾ã—ãŸã€‚
                ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‹ã‚‰äºˆçŸ¥ä¿å…¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æœ€é©åŒ–ã€ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³ç®¡ç†ã€
                ãã—ã¦å®Ÿè£…æˆ¦ç•¥ã¾ã§ã€åŒ–å­¦ç”£æ¥­ã®ãƒ‡ã‚¸ã‚¿ãƒ«ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«
                å¿…è¦ãªçŸ¥è­˜ã¨ã‚¹ã‚­ãƒ«ã‚’ä½“ç³»çš„ã«ç¿’å¾—ã—ã¾ã—ãŸã€‚
            </p>

            <p>
                ã“ã‚Œã‚‰ã®æŠ€è¡“ã‚’å®Ÿéš›ã®ãƒ—ãƒ©ãƒ³ãƒˆã«é©ç”¨ã™ã‚‹ã“ã¨ã§ã€
                ç”Ÿç”£æ€§å‘ä¸Šã€å“è³ªæ”¹å–„ã€ã‚³ã‚¹ãƒˆå‰Šæ¸›ã€å®‰å…¨æ€§å‘ä¸Šã¨ã„ã£ãŸ
                å…·ä½“çš„ãªæˆæœã‚’å®Ÿç¾ã§ãã¾ã™ã€‚
            </p>
        </section>

        <nav class="nav-buttons">
            <a href="chapter-4.html" class="nav-btn">
                <div class="label">â† å‰ã®ç« </div>
                <div class="title">ç¬¬4ç«  ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³ã¨ç”Ÿç”£æœ€é©åŒ–</div>
            </a>
            <a href="index.html" class="nav-btn">
                <div class="label">ã‚·ãƒªãƒ¼ã‚ºãƒˆãƒƒãƒ—ã¸ â†’</div>
                <div class="title">åŒ–å­¦ãƒ—ãƒ©ãƒ³ãƒˆã¸ã®AIå¿œç”¨</div>
            </a>
        </nav>
    <section class="disclaimer">
<h3>å…è²¬äº‹é …</h3>
<ul>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯æ•™è‚²ãƒ»ç ”ç©¶ãƒ»æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€å°‚é–€çš„ãªåŠ©è¨€(æ³•å¾‹ãƒ»ä¼šè¨ˆãƒ»æŠ€è¡“çš„ä¿è¨¼ãªã©)ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŠã‚ˆã³ä»˜éšã™ã‚‹Code examplesã¯ã€Œç¾çŠ¶æœ‰å§¿(AS IS)ã€ã§æä¾›ã•ã‚Œã€æ˜ç¤ºã¾ãŸã¯é»™ç¤ºã‚’å•ã‚ãšã€å•†å“æ€§ã€ç‰¹å®šç›®çš„é©åˆæ€§ã€æ¨©åˆ©éä¾µå®³ã€æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã€å‹•ä½œãƒ»å®‰å…¨æ€§ç­‰ã„ã‹ãªã‚‹ä¿è¨¼ã‚‚ã—ã¾ã›ã‚“ã€‚</li>
<li>å¤–éƒ¨ãƒªãƒ³ã‚¯ã€ç¬¬ä¸‰è€…ãŒæä¾›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã®å†…å®¹ãƒ»å¯ç”¨æ€§ãƒ»å®‰å…¨æ€§ã«ã¤ã„ã¦ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ãƒ»å®Ÿè¡Œãƒ»è§£é‡ˆã«ã‚ˆã‚Šç›´æ¥çš„ãƒ»é–“æ¥çš„ãƒ»ä»˜éšçš„ãƒ»ç‰¹åˆ¥ãƒ»çµæœçš„ãƒ»æ‡²ç½°çš„æå®³ãŒç”Ÿã˜ãŸå ´åˆã§ã‚‚ã€é©ç”¨æ³•ã§è¨±å®¹ã•ã‚Œã‚‹æœ€å¤§é™ã®ç¯„å›²ã§ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å†…å®¹ã¯ã€äºˆå‘Šãªãå¤‰æ›´ãƒ»æ›´æ–°ãƒ»æä¾›åœæ­¢ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
<li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‘—ä½œæ¨©ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯æ˜è¨˜ã•ã‚ŒãŸæ¡ä»¶(ä¾‹: CC BY 4.0)ã«å¾“ã„ã¾ã™ã€‚å½“è©²ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯é€šå¸¸ã€ç„¡ä¿è¨¼æ¡é …ã‚’å«ã¿ã¾ã™ã€‚</li>
</ul>
</section>

</main>

    <footer>
        <p>&copy; 2025 Yusuke Hashimoto Lab, Tohoku University</p>
        <p>AI Terakoya - Process Informatics Educational Series</p>
    </footer>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
</body>
</html>