<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ç¬¬5ç« ï¼šå®Ÿæ™‚é–“ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè·µ - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ã¨ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ">
    <title>ç¬¬5ç« ï¼šå®Ÿæ™‚é–“ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè·µ - PI Terakoya</title>

        <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.8; color: #333; background: #f5f5f5;
        }
        header {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; padding: 2rem 1rem; text-align: center;
        }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        .subtitle { opacity: 0.9; font-size: 1.1rem; }
        .container { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
        .back-link {
            display: inline-block; margin-bottom: 2rem; padding: 0.5rem 1rem;
            background: white; color: #11998e; text-decoration: none;
            border-radius: 6px; font-weight: 600;
        }
        .content-box {
            background: white; padding: 2rem; border-radius: 12px;
            margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h2 {
            color: #11998e; margin: 2rem 0 1rem 0;
            padding-bottom: 0.5rem; border-bottom: 3px solid #11998e;
        }
        h3 { color: #2c3e50; margin: 1.5rem 0 1rem 0; }
        h4 { color: #2c3e50; margin: 1rem 0 0.5rem 0; }
        p { margin-bottom: 1rem; }
        ul, ol { margin-left: 2rem; margin-bottom: 1rem; }
        li { margin-bottom: 0.5rem; }
        pre {
            background: #1e1e1e; color: #d4d4d4; padding: 1.5rem;
            border-radius: 8px; overflow-x: auto; margin: 1rem 0;
            border-left: 4px solid #11998e;
        }
        code {
            font-family: 'Courier New', monospace; font-size: 0.9rem;
        }
        .key-point {
            background: #e8f5e9; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #4caf50; margin: 1rem 0;
        }
        .tech-note {
            background: #e3f2fd; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #2196f3; margin: 1rem 0;
        }
        .formula {
            background: #f0f7ff; padding: 1rem; border-radius: 6px;
            margin: 1rem 0; overflow-x: auto;
        }
        table {
            width: 100%; border-collapse: collapse; margin: 1rem 0;
        }
        th, td {
            border: 1px solid #ddd; padding: 0.75rem; text-align: left;
        }
        th {
            background: #11998e; color: white; font-weight: 600;
        }
        tr:nth-child(even) { background: #f9f9f9; }
        .nav-buttons {
            display: flex; justify-content: space-between; margin-top: 3rem;
        }
        .nav-buttons a {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; text-decoration: none; border-radius: 6px;
            font-weight: 600;
        }
        footer {
            background: #2c3e50; color: white; text-align: center;
            padding: 2rem 1rem; margin-top: 4rem;
        }
        @media (max-width: 768px) {
            h1 { font-size: 1.6rem; }
            .container { padding: 0 0.5rem; }
            pre { padding: 1rem; }
        }
    
        
    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'strict' });
    </script>

    <style>
        /* Locale Switcher Styles */
        .locale-switcher {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 6px;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .current-locale {
            font-weight: 600;
            color: #7b2cbf;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .locale-separator {
            color: #adb5bd;
            font-weight: 300;
        }

        .locale-link {
            color: #f093fb;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }

        .locale-link:hover {
            background: rgba(240, 147, 251, 0.1);
            color: #d07be8;
            transform: translateY(-1px);
        }

        .locale-meta {
            color: #868e96;
            font-size: 0.85rem;
            font-style: italic;
            margin-left: auto;
        }

        @media (max-width: 768px) {
            .locale-switcher {
                font-size: 0.85rem;
                padding: 0.4rem 0.8rem;
            }
            .locale-meta {
                display: none;
            }
        }
    </style>
</head>
<body>
            <div class="locale-switcher">
<span class="current-locale">ğŸŒ JP</span>
<span class="locale-separator">|</span>
<a href="../../../en/PI/process-monitoring-control-introduction/chapter-5.html" class="locale-link">ğŸ‡¬ğŸ‡§ EN</a>
<span class="locale-separator">|</span>
<span class="locale-meta">Last sync: 2025-11-16</span>
</div>
<nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="../../index.html">AIå¯ºå­å±‹ãƒˆãƒƒãƒ—</a><span class="breadcrumb-separator">â€º</span><a href="../../PI/index.html">ãƒ—ãƒ­ã‚»ã‚¹ãƒ»ã‚¤ãƒ³ãƒ•ã‚©ãƒãƒ†ã‚£ã‚¯ã‚¹</a><span class="breadcrumb-separator">â€º</span><a href="../../PI/process-monitoring-control-introduction/index.html">Process Monitoring Control</a><span class="breadcrumb-separator">â€º</span><span class="breadcrumb-current">Chapter 5</span>
        </div>
    </nav>

        <header>
        <div class="container">
            <h1>ç¬¬5ç« ï¼šå®Ÿæ™‚é–“ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè·µ</h1>
            <p class="subtitle">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ã‹ã‚‰çµ±åˆç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã¾ã§</p>
            <div class="meta">
                <span class="meta">ğŸ“– èª­äº†æ™‚é–“: 30-35åˆ†</span>
                <span class="meta">ğŸ“Š é›£æ˜“åº¦: ä¸­ç´šã€œä¸Šç´š</span>
                <span class="meta">ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹: 8å€‹</span>
            </div>
        </div>
    </header>

    <main class="container">

<div class="learning-objectives">
<h2>å­¦ç¿’ç›®æ¨™</h2>
<p>ã“ã®ç« ã‚’èª­ã‚€ã“ã¨ã§ã€ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š</p>
<ul>
<li>âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’è¨­è¨ˆã§ãã‚‹</li>
<li>âœ… Plotlyã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ§‹ç¯‰ã§ãã‚‹</li>
<li>âœ… ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã•ã‚ŒãŸãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’å®Ÿè£…ã§ãã‚‹</li>
<li>âœ… ãƒãƒ«ãƒãƒãƒ£ãƒ¼ãƒˆç›£è¦–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆæ¸©åº¦ã€åœ§åŠ›ã€æµé‡ï¼‰ã‚’é–‹ç™ºã§ãã‚‹</li>
<li>âœ… ã‚¢ãƒ©ãƒ¼ãƒ é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆãƒ»å®Ÿè£…ã§ãã‚‹</li>
<li>âœ… å±¥æ­´ãƒ‡ãƒ¼ã‚¿åˆ†æã¨KPIè¨ˆç®—ãŒã§ãã‚‹</li>
<li>âœ… ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã‚’æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ã§å¯è¦–åŒ–ã§ãã‚‹</li>
<li>âœ… å®Œå…¨ãªçµ±åˆç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆåŒ–å­¦åå¿œå™¨ã®å®Ÿä¾‹ï¼‰ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
</ul>
</div>

<hr />

<h2>5.1 ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h2>

<h3>ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“è¨­è¨ˆ</h3>

<p>å®Ÿæ™‚é–“ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ãƒ‡ãƒ¼ã‚¿åé›†ã€å‡¦ç†ã€å¯è¦–åŒ–ã€ä¿å­˜ã®4ã¤ã®ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰æ§‹æˆã•ã‚Œã¾ã™ã€‚</p>

<div class="mermaid">
graph TB
    subgraph "ãƒ‡ãƒ¼ã‚¿åé›†å±¤"
        A[ã‚»ãƒ³ã‚µãƒ¼] --> B[PLC/DCS]
        B --> C[OPC UAã‚µãƒ¼ãƒãƒ¼]
    end

    subgraph "ãƒ‡ãƒ¼ã‚¿å‡¦ç†å±¤"
        C --> D[ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°]
        D --> E[ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†]
        E --> F[ç•°å¸¸æ¤œçŸ¥]
        E --> G[åˆ¶å¾¡ãƒ«ãƒ¼ãƒ—]
    end

    subgraph "å¯è¦–åŒ–å±¤"
        F --> H[ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
        G --> H
        E --> I[ã‚¢ãƒ©ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ ]
        I --> H
    end

    subgraph "ãƒ‡ãƒ¼ã‚¿ä¿å­˜å±¤"
        E --> J[Historianãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹]
        F --> J
        J --> K[å±¥æ­´åˆ†æ]
    end

    style A fill:#e8f5e9
    style B fill:#c8e6c9
    style C fill:#a5d6a7
    style D fill:#81c784
    style E fill:#66bb6a
    style F fill:#4caf50
    style G fill:#388e3c
    style H fill:#2e7d32
    style I fill:#1b5e20
    style J fill:#f1f8e9
    style K fill:#dcedc8
</div>

<h3>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</h3>

<p>ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ãŒé€£ç¶šçš„ã«å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š</p>

<ol>
<li><strong>ãƒ‡ãƒ¼ã‚¿å–å¾—</strong>: ã‚»ãƒ³ã‚µãƒ¼ â†’ PLC â†’ ãƒ‡ãƒ¼ã‚¿åé›†ã‚µãƒ¼ãƒãƒ¼ï¼ˆ1ç§’ã€œ1åˆ†é–“éš”ï¼‰</li>
<li><strong>ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°</strong>: dequeã‚„ãƒªãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ã§ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ã«ä¿æŒ</li>
<li><strong>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†</strong>: çµ±è¨ˆè¨ˆç®—ã€ç•°å¸¸æ¤œçŸ¥ã€åˆ¶å¾¡ãƒ«ãƒ¼ãƒ—å®Ÿè¡Œ</li>
<li><strong>å¯è¦–åŒ–æ›´æ–°</strong>: ã‚°ãƒ©ãƒ•ã€ã‚²ãƒ¼ã‚¸ã€ã‚¢ãƒ©ãƒ¼ãƒ è¡¨ç¤ºï¼ˆ1ç§’ã€œ10ç§’é–“éš”ï¼‰</li>
<li><strong>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜</strong>: é•·æœŸä¿å­˜ç”¨Historianï¼ˆ1åˆ†ã€œ1æ™‚é–“é–“éš”ï¼‰</li>
</ol>

<hr />

<h2>5.2 ã‚³ãƒ¼ãƒ‰ä¾‹ï¼šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…</h2>

<div class="code-example">
<h4>ã‚³ãƒ¼ãƒ‰ä¾‹1: Plotlyã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­è¨ˆ</h4>

<p><strong>ç›®çš„</strong>: Plotlyã‚’ä½¿ã£ã¦ã€ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ç”¨ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’è¨­è¨ˆã™ã‚‹ï¼ˆé™çš„ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã€‚</p>

<pre><code class="language-python">import plotly.graph_objects as go
from plotly.subplots import make_subplots
import numpy as np
import pandas as pd

# ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
np.random.seed(42)
time_points = 100
time = pd.date_range('2025-01-01 00:00:00', periods=time_points, freq='1min')

# ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°ãƒ‡ãƒ¼ã‚¿
temperature = 175 + np.random.normal(0, 2, time_points) + 3 * np.sin(np.linspace(0, 4*np.pi, time_points))
pressure = 1.5 + np.random.normal(0, 0.05, time_points)
flow_rate = 50 + np.random.normal(0, 3, time_points)

# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ä½œæˆ
# 4ã¤ã®ã‚µãƒ–ãƒ—ãƒ­ãƒƒãƒˆã‚’é…ç½®: æ¸©åº¦ãƒˆãƒ¬ãƒ³ãƒ‰ã€åœ§åŠ›ãƒˆãƒ¬ãƒ³ãƒ‰ã€æµé‡ãƒˆãƒ¬ãƒ³ãƒ‰ã€æ¸©åº¦ã‚²ãƒ¼ã‚¸
fig = make_subplots(
    rows=2, cols=2,
    subplot_titles=('åå¿œå™¨æ¸©åº¦ãƒˆãƒ¬ãƒ³ãƒ‰', 'åœ§åŠ›ãƒˆãƒ¬ãƒ³ãƒ‰', 'æµé‡ãƒˆãƒ¬ãƒ³ãƒ‰', 'ç¾åœ¨æ¸©åº¦'),
    specs=[
        [{"type": "scatter"}, {"type": "scatter"}],
        [{"type": "scatter"}, {"type": "indicator"}]
    ],
    vertical_spacing=0.12,
    horizontal_spacing=0.1
)

# æ¸©åº¦ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆå·¦ä¸Šï¼‰
fig.add_trace(
    go.Scatter(
        x=time,
        y=temperature,
        mode='lines',
        name='æ¸©åº¦',
        line=dict(color='#11998e', width=2),
        fill='tozeroy',
        fillcolor='rgba(17, 153, 142, 0.1)'
    ),
    row=1, col=1
)

# ç®¡ç†é™ç•Œç·šã®è¿½åŠ 
fig.add_hline(y=175, line_dash="dash", line_color="red",
              annotation_text="ç›®æ¨™å€¤", row=1, col=1)
fig.add_hrect(y0=173, y1=177, fillcolor="green", opacity=0.1,
              line_width=0, row=1, col=1)

# åœ§åŠ›ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆå³ä¸Šï¼‰
fig.add_trace(
    go.Scatter(
        x=time,
        y=pressure,
        mode='lines',
        name='åœ§åŠ›',
        line=dict(color='#f59e0b', width=2)
    ),
    row=1, col=2
)
fig.add_hline(y=1.5, line_dash="dash", line_color="red", row=1, col=2)

# æµé‡ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆå·¦ä¸‹ï¼‰
fig.add_trace(
    go.Scatter(
        x=time,
        y=flow_rate,
        mode='lines',
        name='æµé‡',
        line=dict(color='#7b2cbf', width=2)
    ),
    row=2, col=1
)
fig.add_hline(y=50, line_dash="dash", line_color="red", row=2, col=1)

# æ¸©åº¦ã‚²ãƒ¼ã‚¸ï¼ˆå³ä¸‹ï¼‰
current_temp = temperature[-1]
fig.add_trace(
    go.Indicator(
        mode="gauge+number+delta",
        value=current_temp,
        title={'text': "åå¿œå™¨æ¸©åº¦ (Â°C)"},
        delta={'reference': 175, 'increasing': {'color': "red"}, 'decreasing': {'color': "blue"}},
        gauge={
            'axis': {'range': [None, 200]},
            'bar': {'color': "#11998e"},
            'steps': [
                {'range': [0, 173], 'color': "lightblue"},
                {'range': [173, 177], 'color': "lightgreen"},
                {'range': [177, 200], 'color': "lightcoral"}
            ],
            'threshold': {
                'line': {'color': "red", 'width': 4},
                'thickness': 0.75,
                'value': 175
            }
        }
    ),
    row=2, col=2
)

# ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®š
fig.update_xaxes(title_text="æ™‚åˆ»", row=1, col=1)
fig.update_xaxes(title_text="æ™‚åˆ»", row=1, col=2)
fig.update_xaxes(title_text="æ™‚åˆ»", row=2, col=1)

fig.update_yaxes(title_text="æ¸©åº¦ (Â°C)", row=1, col=1)
fig.update_yaxes(title_text="åœ§åŠ› (MPa)", row=1, col=2)
fig.update_yaxes(title_text="æµé‡ (mÂ³/h)", row=2, col=1)

fig.update_layout(
    title_text="ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - åŒ–å­¦åå¿œå™¨",
    title_font_size=20,
    title_x=0.5,
    height=800,
    showlegend=False,
    template="plotly_white"
)

# HTMLã¨ã—ã¦ä¿å­˜ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºå¯èƒ½ï¼‰
fig.write_html("process_monitoring_dashboard.html")
print("ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ 'process_monitoring_dashboard.html' ã«ä¿å­˜ã—ã¾ã—ãŸã€‚")
print("ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ç¢ºèªã—ã¦ãã ã•ã„ã€‚")

# çµ±è¨ˆã‚µãƒãƒªãƒ¼
print("\n=== ç¾åœ¨ã®ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ ===")
print(f"åå¿œå™¨æ¸©åº¦: {current_temp:.2f} Â°C (ç›®æ¨™: 175Â°C)")
print(f"åœ§åŠ›: {pressure[-1]:.3f} MPa (ç›®æ¨™: 1.5 MPa)")
print(f"æµé‡: {flow_rate[-1]:.2f} mÂ³/h (ç›®æ¨™: 50 mÂ³/h)")

# ã‚¢ãƒ©ãƒ¼ãƒ çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
temp_alarm = "æ­£å¸¸" if 173 <= current_temp <= 177 else "è­¦å‘Š"
pressure_alarm = "æ­£å¸¸" if 1.45 <= pressure[-1] <= 1.55 else "è­¦å‘Š"
flow_alarm = "æ­£å¸¸" if 45 <= flow_rate[-1] <= 55 else "è­¦å‘Š"

print(f"\n=== ã‚¢ãƒ©ãƒ¼ãƒ çŠ¶æ…‹ ===")
print(f"æ¸©åº¦: {temp_alarm}")
print(f"åœ§åŠ›: {pressure_alarm}")
print(f"æµé‡: {flow_alarm}")
</code></pre>

<p><strong>è§£èª¬</strong>: ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€Plotlyã‚’ä½¿ã£ã¦ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’è¨­è¨ˆã—ã¾ã™ã€‚ãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒ£ãƒ¼ãƒˆï¼ˆæ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ï¼‰ã¨ã‚²ãƒ¼ã‚¸ï¼ˆç¾åœ¨å€¤ï¼‰ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãŒç›´æ„Ÿçš„ã«ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã‚’æŠŠæ¡ã§ãã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚å®Ÿéš›ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã€ã“ã‚Œã‚’Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦å±•é–‹ã—ã¾ã™ã€‚</p>
</div>

<div class="code-example">
<h4>ã‚³ãƒ¼ãƒ‰ä¾‹2: ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã•ã‚ŒãŸãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°</h4>

<p><strong>ç›®çš„</strong>: dequeãƒãƒƒãƒ•ã‚¡ã‚’ä½¿ã£ã¦ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹ã€‚</p>

<pre><code class="language-python">import numpy as np
import pandas as pd
from collections import deque
import matplotlib.pyplot as plt
import time

# æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆè¨­å®š
plt.rcParams['font.sans-serif'] = ['Hiragino Sans', 'Arial']
plt.rcParams['axes.unicode_minus'] = False

class RealTimeDataStream:
    """
    ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼

    Parameters:
    -----------
    buffer_size : int
        ãƒ‡ãƒ¼ã‚¿ãƒãƒƒãƒ•ã‚¡ã®ã‚µã‚¤ã‚º
    sampling_interval : float
        ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°é–“éš”ï¼ˆç§’ï¼‰
    """

    def __init__(self, buffer_size=100, sampling_interval=1.0):
        self.buffer_size = buffer_size
        self.sampling_interval = sampling_interval

        # ãƒ‡ãƒ¼ã‚¿ãƒãƒƒãƒ•ã‚¡ï¼ˆå›ºå®šé•·ã‚­ãƒ¥ãƒ¼ï¼‰
        self.time_buffer = deque(maxlen=buffer_size)
        self.temp_buffer = deque(maxlen=buffer_size)
        self.pressure_buffer = deque(maxlen=buffer_size)
        self.flow_buffer = deque(maxlen=buffer_size)

        # é–‹å§‹æ™‚åˆ»
        self.start_time = pd.Timestamp.now()
        self.iteration = 0

    def generate_sensor_data(self):
        """ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆï¼ˆå®Ÿéš›ã¯PLC/DCSã‹ã‚‰å–å¾—ï¼‰"""
        elapsed = self.iteration * self.sampling_interval

        # åå¿œå™¨æ¸©åº¦ï¼ˆå‘¨æœŸå¤‰å‹• + ãƒã‚¤ã‚ºï¼‰
        temp_base = 175.0
        temp_variation = 3.0 * np.sin(2 * np.pi * elapsed / 300)
        temp_noise = np.random.normal(0, 0.8)
        temperature = temp_base + temp_variation + temp_noise

        # åœ§åŠ›ï¼ˆã‚ãšã‹ãªå¤‰å‹•ï¼‰
        pressure = 1.5 + np.random.normal(0, 0.02)

        # æµé‡ï¼ˆã‚¹ãƒ†ãƒƒãƒ—å¤‰åŒ–ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
        if elapsed < 60:
            flow_base = 50.0
        elif elapsed < 120:
            flow_base = 55.0  # 60ç§’ã§æµé‡å¢—åŠ 
        else:
            flow_base = 50.0  # 120ç§’ã§å…ƒã«æˆ»ã‚‹

        flow_rate = flow_base + np.random.normal(0, 2.0)

        return temperature, pressure, flow_rate

    def update(self):
        """ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®æ›´æ–°"""
        current_time = self.start_time + pd.Timedelta(seconds=self.iteration * self.sampling_interval)
        temp, pressure, flow = self.generate_sensor_data()

        # ãƒãƒƒãƒ•ã‚¡ã«è¿½åŠ 
        self.time_buffer.append(current_time)
        self.temp_buffer.append(temp)
        self.pressure_buffer.append(pressure)
        self.flow_buffer.append(flow)

        self.iteration += 1

        return current_time, temp, pressure, flow

    def get_statistics(self):
        """ãƒãƒƒãƒ•ã‚¡å†…ãƒ‡ãƒ¼ã‚¿ã®çµ±è¨ˆé‡"""
        if len(self.temp_buffer) == 0:
            return None

        stats = {
            'temp_mean': np.mean(self.temp_buffer),
            'temp_std': np.std(self.temp_buffer),
            'temp_latest': self.temp_buffer[-1],
            'pressure_mean': np.mean(self.pressure_buffer),
            'pressure_latest': self.pressure_buffer[-1],
            'flow_mean': np.mean(self.flow_buffer),
            'flow_latest': self.flow_buffer[-1],
            'buffer_utilization': len(self.temp_buffer) / self.buffer_size * 100
        }

        return stats


# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
print("=== ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°é–‹å§‹ ===")
print("180ç§’é–“ã®ãƒ‡ãƒ¼ã‚¿åé›†ã‚’è¡Œã„ã¾ã™...\n")

stream = RealTimeDataStream(buffer_size=200, sampling_interval=1.0)

# ãƒ‡ãƒ¼ã‚¿åé›†ï¼ˆ180ç§’é–“ã€1ç§’ã”ã¨ï¼‰
duration = 180  # ç§’
for i in range(duration):
    timestamp, temp, pressure, flow = stream.update()

    # 10ç§’ã”ã¨ã«é€²æ—è¡¨ç¤º
    if (i + 1) % 10 == 0:
        stats = stream.get_statistics()
        print(f"[{timestamp.strftime('%H:%M:%S')}] "
              f"æ¸©åº¦: {temp:.2f}Â°C (å¹³å‡: {stats['temp_mean']:.2f}Â°C) | "
              f"åœ§åŠ›: {pressure:.3f} MPa | "
              f"æµé‡: {flow:.2f} mÂ³/h")

    # å®Ÿéš›ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚·ã‚¹ãƒ†ãƒ ã§ã¯time.sleep()ã‚’ä½¿ç”¨
    # ã“ã“ã§ã¯é«˜é€ŸåŒ–ã®ãŸã‚ã‚¹ã‚­ãƒƒãƒ—

print("\nãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†ï¼\n")

# åé›†ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–
fig, axes = plt.subplots(3, 1, figsize=(14, 12))

# æ¸©åº¦ãƒˆãƒ¬ãƒ³ãƒ‰
axes[0].plot(list(stream.time_buffer), list(stream.temp_buffer),
             color='#11998e', linewidth=1.5, label='æ¸©åº¦')
axes[0].axhline(y=175, color='red', linestyle='--', linewidth=2, label='ç›®æ¨™å€¤')
axes[0].fill_between(list(stream.time_buffer), 173, 177, alpha=0.15, color='green', label='ç®¡ç†ç¯„å›²')
axes[0].set_ylabel('æ¸©åº¦ (Â°C)', fontsize=12)
axes[0].set_title('ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ - åå¿œå™¨æ¸©åº¦', fontsize=14, fontweight='bold')
axes[0].legend()
axes[0].grid(alpha=0.3)

# åœ§åŠ›ãƒˆãƒ¬ãƒ³ãƒ‰
axes[1].plot(list(stream.time_buffer), list(stream.pressure_buffer),
             color='#f59e0b', linewidth=1.5, label='åœ§åŠ›')
axes[1].axhline(y=1.5, color='red', linestyle='--', linewidth=2, label='ç›®æ¨™å€¤')
axes[1].set_ylabel('åœ§åŠ› (MPa)', fontsize=12)
axes[1].set_title('åœ§åŠ›ãƒˆãƒ¬ãƒ³ãƒ‰', fontsize=14, fontweight='bold')
axes[1].legend()
axes[1].grid(alpha=0.3)

# æµé‡ãƒˆãƒ¬ãƒ³ãƒ‰
axes[2].plot(list(stream.time_buffer), list(stream.flow_buffer),
             color='#7b2cbf', linewidth=1.5, label='æµé‡')
axes[2].axhline(y=50, color='red', linestyle='--', linewidth=2, label='ç›®æ¨™å€¤')
axes[2].axvline(x=list(stream.time_buffer)[60], color='orange', linestyle=':', alpha=0.5, label='æµé‡å¤‰åŒ–')
axes[2].axvline(x=list(stream.time_buffer)[120], color='orange', linestyle=':', alpha=0.5)
axes[2].set_xlabel('æ™‚åˆ»', fontsize=12)
axes[2].set_ylabel('æµé‡ (mÂ³/h)', fontsize=12)
axes[2].set_title('æµé‡ãƒˆãƒ¬ãƒ³ãƒ‰', fontsize=14, fontweight='bold')
axes[2].legend()
axes[2].grid(alpha=0.3)

plt.tight_layout()
plt.show()

# æœ€çµ‚çµ±è¨ˆ
final_stats = stream.get_statistics()
print("=== æœ€çµ‚çµ±è¨ˆ ===")
for key, value in final_stats.items():
    print(f"  {key}: {value:.2f}")
</code></pre>

<p><strong>è§£èª¬</strong>: ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€dequeã‚’ä½¿ã£ãŸåŠ¹ç‡çš„ãªãƒ‡ãƒ¼ã‚¿ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚å›ºå®šé•·ã‚­ãƒ¥ãƒ¼ï¼ˆdequeï¼‰ã¯ã€å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•çš„ã«å‰Šé™¤ã—ãªãŒã‚‰æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã€ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†ã«æœ€é©ã§ã™ã€‚å®Ÿéš›ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã€PLC/DCSã‹ã‚‰é€£ç¶šçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ã“ã®ã‚ˆã†ãªãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã‚’è¡Œã„ã¾ã™ã€‚</p>
</div>

<div class="code-example">
<h4>ã‚³ãƒ¼ãƒ‰ä¾‹3: ãƒãƒ«ãƒãƒãƒ£ãƒ¼ãƒˆç›£è¦–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</h4>

<p><strong>ç›®çš„</strong>: è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°ã‚’åŒæ™‚ã«ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹åŒ…æ‹¬çš„ãªç›£è¦–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚</p>

<pre><code class="language-python">import plotly.graph_objects as go
from plotly.subplots import make_subplots
import numpy as np
import pandas as pd

class ProcessMonitoringInterface:
    """
    ãƒãƒ«ãƒãƒãƒ£ãƒ¼ãƒˆãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

    Parameters:
    -----------
    process_name : str
        ãƒ—ãƒ­ã‚»ã‚¹å
    variables : list of dict
        ç›£è¦–å¤‰æ•°ã®ãƒªã‚¹ãƒˆï¼ˆname, unit, target, rangeï¼‰
    """

    def __init__(self, process_name, variables):
        self.process_name = process_name
        self.variables = variables
        self.n_vars = len(variables)

    def create_monitoring_dashboard(self, time_data, variable_data):
        """
        ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆ

        Parameters:
        -----------
        time_data : array-like
            æ™‚é–“ãƒ‡ãƒ¼ã‚¿
        variable_data : dict
            å¤‰æ•°åã‚’ã‚­ãƒ¼ã¨ã—ãŸãƒ‡ãƒ¼ã‚¿è¾æ›¸

        Returns:
        --------
        fig : plotly.graph_objects.Figure
        """
        # ã‚µãƒ–ãƒ—ãƒ­ãƒƒãƒˆæ§‹æˆï¼ˆå¤‰æ•°æ•°ã«å¿œã˜ã¦å‹•çš„ã«é…ç½®ï¼‰
        n_rows = int(np.ceil(self.n_vars / 2))
        n_cols = 2 if self.n_vars > 1 else 1

        fig = make_subplots(
            rows=n_rows,
            cols=n_cols,
            subplot_titles=[var['name'] for var in self.variables],
            vertical_spacing=0.12,
            horizontal_spacing=0.1
        )

        # å„å¤‰æ•°ã®ãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒ£ãƒ¼ãƒˆã‚’è¿½åŠ 
        for idx, var in enumerate(self.variables):
            row = idx // 2 + 1
            col = idx % 2 + 1

            data = variable_data[var['name']]

            # ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³
            fig.add_trace(
                go.Scatter(
                    x=time_data,
                    y=data,
                    mode='lines',
                    name=var['name'],
                    line=dict(color=var.get('color', '#11998e'), width=2)
                ),
                row=row, col=col
            )

            # ç›®æ¨™å€¤ãƒ©ã‚¤ãƒ³
            if 'target' in var:
                fig.add_hline(
                    y=var['target'],
                    line_dash="dash",
                    line_color="red",
                    annotation_text=f"ç›®æ¨™: {var['target']}",
                    row=row, col=col
                )

            # ç®¡ç†ç¯„å›²
            if 'range' in var:
                lower, upper = var['range']
                fig.add_hrect(
                    y0=lower, y1=upper,
                    fillcolor="green", opacity=0.1,
                    line_width=0,
                    row=row, col=col
                )

            # è»¸ãƒ©ãƒ™ãƒ«
            fig.update_xaxes(title_text="æ™‚åˆ»", row=row, col=col)
            fig.update_yaxes(title_text=f"{var['name']} ({var['unit']})", row=row, col=col)

        # å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
        fig.update_layout(
            title_text=f"{self.process_name} - ãƒãƒ«ãƒå¤‰æ•°ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
            title_font_size=20,
            title_x=0.5,
            height=300 * n_rows,
            showlegend=False,
            template="plotly_white"
        )

        return fig


# ç›£è¦–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æ§‹ç¯‰ä¾‹
# åŒ–å­¦åå¿œå™¨ã®ç›£è¦–å¤‰æ•°å®šç¾©
variables = [
    {'name': 'åå¿œå™¨æ¸©åº¦', 'unit': 'Â°C', 'target': 175, 'range': (173, 177), 'color': '#11998e'},
    {'name': 'ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦', 'unit': 'Â°C', 'target': 165, 'range': (163, 167), 'color': '#f59e0b'},
    {'name': 'åå¿œå™¨åœ§åŠ›', 'unit': 'MPa', 'target': 1.5, 'range': (1.45, 1.55), 'color': '#7b2cbf'},
    {'name': 'åŸæ–™æµé‡', 'unit': 'mÂ³/h', 'target': 50, 'range': (48, 52), 'color': '#e63946'},
    {'name': 'å†·å´æ°´æµé‡', 'unit': 'mÂ³/h', 'target': 100, 'range': (95, 105), 'color': '#06a77d'},
    {'name': 'pH', 'unit': '-', 'target': 7.0, 'range': (6.8, 7.2), 'color': '#ff006e'}
]

# ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆ24æ™‚é–“ã€1åˆ†é–“éš”ï¼‰
np.random.seed(42)
n_points = 1440
time_data = pd.date_range('2025-01-01 00:00:00', periods=n_points, freq='1min')

# å„å¤‰æ•°ã®ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
variable_data = {}

# åå¿œå™¨æ¸©åº¦
variable_data['åå¿œå™¨æ¸©åº¦'] = 175 + np.random.normal(0, 1.5, n_points) + \
                              2 * np.sin(2 * np.pi * np.arange(n_points) / 360)

# ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦
variable_data['ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦'] = 165 + np.random.normal(0, 1.2, n_points) + \
                                 1.5 * np.sin(2 * np.pi * np.arange(n_points) / 360)

# åå¿œå™¨åœ§åŠ›
variable_data['åå¿œå™¨åœ§åŠ›'] = 1.5 + np.random.normal(0, 0.02, n_points)

# åŸæ–™æµé‡
variable_data['åŸæ–™æµé‡'] = 50 + np.random.normal(0, 1.5, n_points)

# å†·å´æ°´æµé‡
variable_data['å†·å´æ°´æµé‡'] = 100 + np.random.normal(0, 2.5, n_points)

# pH
variable_data['pH'] = 7.0 + np.random.normal(0, 0.15, n_points)

# ç›£è¦–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ä½œæˆ
interface = ProcessMonitoringInterface(
    process_name="åŒ–å­¦åå¿œå™¨ R-101",
    variables=variables
)

fig = interface.create_monitoring_dashboard(time_data, variable_data)

# HTMLã¨ã—ã¦ä¿å­˜
fig.write_html("multi_variable_monitoring_dashboard.html")
print("ãƒãƒ«ãƒå¤‰æ•°ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚")

# ç¾åœ¨ã®çŠ¶æ…‹ã‚µãƒãƒªãƒ¼
print("\n=== ç¾åœ¨ã®ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ï¼ˆæœ€æ–°å€¤ï¼‰ ===")
for var in variables:
    latest_value = variable_data[var['name']][-1]
    target = var.get('target', None)
    status = "æ­£å¸¸"

    if target and 'range' in var:
        lower, upper = var['range']
        if not (lower <= latest_value <= upper):
            status = "è­¦å‘Š"

    print(f"{var['name']:<15}: {latest_value:>7.2f} {var['unit']:<5} (ç›®æ¨™: {target}) - {status}")
</code></pre>

<p><strong>è§£èª¬</strong>: ã“ã®ãƒãƒ«ãƒãƒãƒ£ãƒ¼ãƒˆç›£è¦–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ã€ãƒ—ãƒ­ã‚»ã‚¹ã®è¤‡æ•°ã®å¤‰æ•°ã‚’åŒæ™‚ã«ç›£è¦–ã§ãã‚‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’å‹•çš„ã«ç”Ÿæˆã—ã¾ã™ã€‚å„å¤‰æ•°ã«å¯¾ã—ã¦ç›®æ¨™å€¤ã¨ç®¡ç†ç¯„å›²ã‚’å¯è¦–åŒ–ã™ã‚‹ã“ã¨ã§ã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãŒä¸€ç›®ã§ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã‚’æŠŠæ¡ã§ãã¾ã™ã€‚å®Ÿéš›ã®ãƒ—ãƒ©ãƒ³ãƒˆã§ã¯ã€æ•°åã€œæ•°ç™¾ã®å¤‰æ•°ã‚’ç›£è¦–ã—ã¾ã™ã€‚</p>
</div>

<div class="code-example">
<h4>ã‚³ãƒ¼ãƒ‰ä¾‹4: ã‚¢ãƒ©ãƒ¼ãƒ é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…</h4>

<p><strong>ç›®çš„</strong>: é‡è¦åº¦ãƒ¬ãƒ™ãƒ«åˆ¥ã®ã‚¢ãƒ©ãƒ¼ãƒ é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã€ã‚¢ãƒ©ãƒ¼ãƒ ãƒ­ã‚°ã‚’ç®¡ç†ã™ã‚‹ã€‚</p>

<pre><code class="language-python">import pandas as pd
import numpy as np
from datetime import datetime
from enum import Enum

class AlarmSeverity(Enum):
    """ã‚¢ãƒ©ãƒ¼ãƒ é‡è¦åº¦ãƒ¬ãƒ™ãƒ«"""
    INFO = 1      # æƒ…å ±
    WARNING = 2   # è­¦å‘Š
    ALARM = 3     # ã‚¢ãƒ©ãƒ¼ãƒ 
    CRITICAL = 4  # ç·Šæ€¥

class AlarmManager:
    """
    ãƒ—ãƒ­ã‚»ã‚¹ã‚¢ãƒ©ãƒ¼ãƒ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

    Parameters:
    -----------
    alarm_rules : list of dict
        ã‚¢ãƒ©ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã®ãƒªã‚¹ãƒˆ
    """

    def __init__(self, alarm_rules):
        self.alarm_rules = alarm_rules
        self.active_alarms = {}
        self.alarm_history = []

    def check_alarms(self, process_data):
        """
        ã‚¢ãƒ©ãƒ¼ãƒ çŠ¶æ…‹ã®ãƒã‚§ãƒƒã‚¯

        Parameters:
        -----------
        process_data : dict
            ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°ã®ç¾åœ¨å€¤

        Returns:
        --------
        new_alarms : list
            æ–°è¦ç™ºç”Ÿã‚¢ãƒ©ãƒ¼ãƒ 
        """
        new_alarms = []
        current_time = datetime.now()

        for rule in self.alarm_rules:
            variable = rule['variable']
            value = process_data.get(variable, None)

            if value is None:
                continue

            # ã‚¢ãƒ©ãƒ¼ãƒ æ¡ä»¶ã®ãƒã‚§ãƒƒã‚¯
            alarm_triggered = self._evaluate_condition(value, rule)

            alarm_id = f"{variable}_{rule['name']}"

            if alarm_triggered:
                # ã‚¢ãƒ©ãƒ¼ãƒ ç™ºç”Ÿ
                if alarm_id not in self.active_alarms:
                    alarm = {
                        'id': alarm_id,
                        'variable': variable,
                        'name': rule['name'],
                        'severity': rule['severity'],
                        'value': value,
                        'condition': rule['condition'],
                        'threshold': rule['threshold'],
                        'timestamp': current_time,
                        'acknowledged': False
                    }

                    self.active_alarms[alarm_id] = alarm
                    self.alarm_history.append(alarm.copy())
                    new_alarms.append(alarm)
            else:
                # ã‚¢ãƒ©ãƒ¼ãƒ å¾©å¸°
                if alarm_id in self.active_alarms:
                    alarm = self.active_alarms.pop(alarm_id)
                    alarm['cleared_time'] = current_time
                    alarm['duration'] = (current_time - alarm['timestamp']).total_seconds()

        return new_alarms

    def _evaluate_condition(self, value, rule):
        """ã‚¢ãƒ©ãƒ¼ãƒ æ¡ä»¶ã®è©•ä¾¡"""
        condition = rule['condition']
        threshold = rule['threshold']

        if condition == 'greater_than':
            return value > threshold
        elif condition == 'less_than':
            return value < threshold
        elif condition == 'out_of_range':
            lower, upper = threshold
            return value < lower or value > upper
        elif condition == 'deviation':
            target = rule['target']
            deviation = rule['threshold']
            return abs(value - target) > deviation
        else:
            return False

    def acknowledge_alarm(self, alarm_id):
        """ã‚¢ãƒ©ãƒ¼ãƒ ã®ç¢ºèª"""
        if alarm_id in self.active_alarms:
            self.active_alarms[alarm_id]['acknowledged'] = True
            return True
        return False

    def get_active_alarms(self, severity=None):
        """
        ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ©ãƒ¼ãƒ ã®å–å¾—

        Parameters:
        -----------
        severity : AlarmSeverity or None
            é‡è¦åº¦ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

        Returns:
        --------
        alarms : list
        """
        alarms = list(self.active_alarms.values())

        if severity:
            alarms = [a for a in alarms if a['severity'] == severity]

        # é‡è¦åº¦ã§é™é †ã‚½ãƒ¼ãƒˆ
        alarms.sort(key=lambda x: x['severity'].value, reverse=True)

        return alarms

    def get_alarm_statistics(self):
        """ã‚¢ãƒ©ãƒ¼ãƒ çµ±è¨ˆã®å–å¾—"""
        total_alarms = len(self.alarm_history)
        active_count = len(self.active_alarms)
        acknowledged_count = sum(1 for a in self.active_alarms.values() if a['acknowledged'])

        severity_counts = {}
        for severity in AlarmSeverity:
            count = sum(1 for a in self.alarm_history if a['severity'] == severity)
            severity_counts[severity.name] = count

        stats = {
            'total_alarms': total_alarms,
            'active_alarms': active_count,
            'acknowledged_alarms': acknowledged_count,
            'unacknowledged_alarms': active_count - acknowledged_count,
            'severity_breakdown': severity_counts
        }

        return stats


# ã‚¢ãƒ©ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã®å®šç¾©
alarm_rules = [
    {
        'variable': 'åå¿œå™¨æ¸©åº¦',
        'name': 'é«˜æ¸©è­¦å‘Š',
        'severity': AlarmSeverity.WARNING,
        'condition': 'greater_than',
        'threshold': 177
    },
    {
        'variable': 'åå¿œå™¨æ¸©åº¦',
        'name': 'é«˜æ¸©ã‚¢ãƒ©ãƒ¼ãƒ ',
        'severity': AlarmSeverity.ALARM,
        'condition': 'greater_than',
        'threshold': 180
    },
    {
        'variable': 'åå¿œå™¨æ¸©åº¦',
        'name': 'ä½æ¸©è­¦å‘Š',
        'severity': AlarmSeverity.WARNING,
        'condition': 'less_than',
        'threshold': 173
    },
    {
        'variable': 'åå¿œå™¨åœ§åŠ›',
        'name': 'åœ§åŠ›ç•°å¸¸',
        'severity': AlarmSeverity.CRITICAL,
        'condition': 'out_of_range',
        'threshold': (1.4, 1.6)
    },
    {
        'variable': 'åŸæ–™æµé‡',
        'name': 'æµé‡åå·®',
        'severity': AlarmSeverity.WARNING,
        'condition': 'deviation',
        'target': 50,
        'threshold': 5
    }
]

# ã‚¢ãƒ©ãƒ¼ãƒ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®åˆæœŸåŒ–
alarm_mgr = AlarmManager(alarm_rules)

# ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: 1æ™‚é–“ã®ãƒ—ãƒ­ã‚»ã‚¹é‹è»¢
np.random.seed(42)
n_samples = 60  # 1åˆ†ã”ã¨ã€60åˆ†é–“

print("=== ãƒ—ãƒ­ã‚»ã‚¹ã‚¢ãƒ©ãƒ¼ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ  ===\n")
print("1æ™‚é–“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¾ã™...\n")

for i in range(n_samples):
    # ãƒ—ãƒ­ã‚»ã‚¹ãƒ‡ãƒ¼ã‚¿ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    process_data = {
        'åå¿œå™¨æ¸©åº¦': 175 + np.random.normal(0, 2) + 5 * np.sin(2 * np.pi * i / 60),
        'åå¿œå™¨åœ§åŠ›': 1.5 + np.random.normal(0, 0.05),
        'åŸæ–™æµé‡': 50 + np.random.normal(0, 3)
    }

    # ã‚¢ãƒ©ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯
    new_alarms = alarm_mgr.check_alarms(process_data)

    # æ–°è¦ã‚¢ãƒ©ãƒ¼ãƒ ã®è¡¨ç¤º
    if new_alarms:
        for alarm in new_alarms:
            severity_color = {
                AlarmSeverity.INFO: 'ğŸ”µ',
                AlarmSeverity.WARNING: 'ğŸŸ¡',
                AlarmSeverity.ALARM: 'ğŸŸ ',
                AlarmSeverity.CRITICAL: 'ğŸ”´'
            }
            icon = severity_color.get(alarm['severity'], 'âšª')

            print(f"[{alarm['timestamp'].strftime('%H:%M:%S')}] {icon} {alarm['severity'].name}: "
                  f"{alarm['variable']} - {alarm['name']} "
                  f"(å€¤: {alarm['value']:.2f})")

# æœ€çµ‚çµ±è¨ˆ
print("\n" + "="*60)
print("=== ã‚¢ãƒ©ãƒ¼ãƒ çµ±è¨ˆã‚µãƒãƒªãƒ¼ ===")
stats = alarm_mgr.get_alarm_statistics()

print(f"\nç·ã‚¢ãƒ©ãƒ¼ãƒ æ•°: {stats['total_alarms']}")
print(f"ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ©ãƒ¼ãƒ : {stats['active_alarms']}")
print(f"  - æœªç¢ºèª: {stats['unacknowledged_alarms']}")
print(f"  - ç¢ºèªæ¸ˆã¿: {stats['acknowledged_alarms']}")

print("\né‡è¦åº¦åˆ¥å†…è¨³:")
for severity, count in stats['severity_breakdown'].items():
    print(f"  {severity:<10}: {count:>3}ä»¶")

# ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ©ãƒ¼ãƒ ã®ä¸€è¦§
active_alarms = alarm_mgr.get_active_alarms()
if active_alarms:
    print("\n=== ç¾åœ¨ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ©ãƒ¼ãƒ  ===")
    for alarm in active_alarms:
        duration = (datetime.now() - alarm['timestamp']).total_seconds()
        ack_status = "ç¢ºèªæ¸ˆã¿" if alarm['acknowledged'] else "æœªç¢ºèª"
        print(f"  - [{alarm['severity'].name}] {alarm['variable']}: {alarm['name']} "
              f"({duration:.0f}ç§’ç¶™ç¶šä¸­, {ack_status})")
else:
    print("\nç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¢ãƒ©ãƒ¼ãƒ ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚")

# ã‚¢ãƒ©ãƒ¼ãƒ å±¥æ­´ã®DataFrameåŒ–
if alarm_mgr.alarm_history:
    df_alarms = pd.DataFrame(alarm_mgr.alarm_history)
    df_alarms['severity_name'] = df_alarms['severity'].apply(lambda x: x.name)

    print("\n=== ã‚¢ãƒ©ãƒ¼ãƒ å±¥æ­´ãƒˆãƒƒãƒ—10 ===")
    print(df_alarms[['timestamp', 'variable', 'name', 'severity_name', 'value']].head(10).to_string(index=False))
</code></pre>

<p><strong>æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›</strong>:</p>
<pre><code>=== ãƒ—ãƒ­ã‚»ã‚¹ã‚¢ãƒ©ãƒ¼ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ  ===

1æ™‚é–“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¾ã™...

[14:23:12] ğŸŸ¡ WARNING: åå¿œå™¨æ¸©åº¦ - é«˜æ¸©è­¦å‘Š (å€¤: 178.45)
[14:31:45] ğŸŸ¡ WARNING: åŸæ–™æµé‡ - æµé‡åå·® (å€¤: 56.23)
[14:42:18] ğŸ”´ CRITICAL: åå¿œå™¨åœ§åŠ› - åœ§åŠ›ç•°å¸¸ (å€¤: 1.62)

============================================================
=== ã‚¢ãƒ©ãƒ¼ãƒ çµ±è¨ˆã‚µãƒãƒªãƒ¼ ===

ç·ã‚¢ãƒ©ãƒ¼ãƒ æ•°: 8
ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ©ãƒ¼ãƒ : 2
  - æœªç¢ºèª: 2
  - ç¢ºèªæ¸ˆã¿: 0

é‡è¦åº¦åˆ¥å†…è¨³:
  INFO      :   0ä»¶
  WARNING   :   5ä»¶
  ALARM     :   1ä»¶
  CRITICAL  :   2ä»¶

=== ç¾åœ¨ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ©ãƒ¼ãƒ  ===
  - [CRITICAL] åå¿œå™¨åœ§åŠ›: åœ§åŠ›ç•°å¸¸ (123ç§’ç¶™ç¶šä¸­, æœªç¢ºèª)
  - [WARNING] åå¿œå™¨æ¸©åº¦: é«˜æ¸©è­¦å‘Š (89ç§’ç¶™ç¶šä¸­, æœªç¢ºèª)
</code></pre>

<p><strong>è§£èª¬</strong>: ã“ã®ã‚¢ãƒ©ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°ã‚’é€£ç¶šçš„ã«ç›£è¦–ã—ã€ç•°å¸¸çŠ¶æ…‹ã‚’é‡è¦åº¦ãƒ¬ãƒ™ãƒ«åˆ¥ã«é€šçŸ¥ã—ã¾ã™ã€‚ã‚¢ãƒ©ãƒ¼ãƒ å±¥æ­´ã®è¨˜éŒ²ã€ç¢ºèªï¼ˆAcknowledgementï¼‰æ©Ÿèƒ½ã€çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆã«ã‚ˆã‚Šã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãŒåŠ¹ç‡çš„ã«ã‚¢ãƒ©ãƒ¼ãƒ ã‚’ç®¡ç†ã§ãã¾ã™ã€‚å®Ÿéš›ã®ãƒ—ãƒ©ãƒ³ãƒˆã§ã¯ã€ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã‚„Slacké€£æºã‚‚å®Ÿè£…ã—ã¾ã™ã€‚</p>
</div>

<div class="code-example">
<h4>ã‚³ãƒ¼ãƒ‰ä¾‹5: å±¥æ­´ãƒ‡ãƒ¼ã‚¿ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã¨ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º</h4>

<p><strong>ç›®çš„</strong>: å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å‚¾å‘ã‚’åˆ†æã—ã€ãƒ”ãƒ¼ã‚¯ãƒ»è°·ãƒ»ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’è‡ªå‹•æ¤œå‡ºã™ã‚‹ã€‚</p>

<pre><code class="language-python">import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from scipy.signal import find_peaks, savgol_filter

# æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆè¨­å®š
plt.rcParams['font.sans-serif'] = ['Hiragino Sans', 'Arial']
plt.rcParams['axes.unicode_minus'] = False

def analyze_historical_trends(time_data, values, variable_name):
    """
    å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã®ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ

    Parameters:
    -----------
    time_data : array-like
        æ™‚é–“ãƒ‡ãƒ¼ã‚¿
    values : array-like
        å¤‰æ•°å€¤
    variable_name : str
        å¤‰æ•°å

    Returns:
    --------
    analysis : dict
        åˆ†æçµæœ
    """
    # ç§»å‹•å¹³å‡ã§ãƒˆãƒ¬ãƒ³ãƒ‰æŠ½å‡º
    window_size = 60  # 60ãƒã‚¤ãƒ³ãƒˆç§»å‹•å¹³å‡
    trend = pd.Series(values).rolling(window=window_size, center=True).mean().values

    # Savitzky-Golayãƒ•ã‚£ãƒ«ã‚¿ã§å¹³æ»‘åŒ–
    if len(values) > 51:
        smoothed = savgol_filter(values, window_length=51, polyorder=3)
    else:
        smoothed = values

    # ãƒ”ãƒ¼ã‚¯æ¤œå‡º
    peaks, peak_props = find_peaks(smoothed, prominence=1.5, distance=30)
    valleys, valley_props = find_peaks(-smoothed, prominence=1.5, distance=30)

    # çµ±è¨ˆé‡
    mean_value = np.mean(values)
    std_value = np.std(values)
    max_value = np.max(values)
    min_value = np.min(values)

    # ãƒˆãƒ¬ãƒ³ãƒ‰å‚¾ãï¼ˆæœ€å°äºŒä¹—æ³•ï¼‰
    x = np.arange(len(values))
    slope = np.polyfit(x, values, 1)[0]

    analysis = {
        'variable': variable_name,
        'trend': trend,
        'smoothed': smoothed,
        'peaks': peaks,
        'valleys': valleys,
        'peak_values': values[peaks],
        'valley_values': values[valleys],
        'mean': mean_value,
        'std': std_value,
        'max': max_value,
        'min': min_value,
        'slope': slope,
        'n_peaks': len(peaks),
        'n_valleys': len(valleys)
    }

    return analysis


# å±¥æ­´ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆ7æ—¥é–“ã€1æ™‚é–“é–“éš”ï¼‰
np.random.seed(42)
n_days = 7
n_points = n_days * 24
time_data = pd.date_range('2025-01-01', periods=n_points, freq='1h')

# åå¿œå™¨æ¸©åº¦ãƒ‡ãƒ¼ã‚¿ï¼ˆæ—¥å‘¨æœŸå¤‰å‹• + ãƒˆãƒ¬ãƒ³ãƒ‰ + ãƒã‚¤ã‚ºï¼‰
base_temp = 175
daily_cycle = 5 * np.sin(2 * np.pi * np.arange(n_points) / 24)  # æ—¥å‘¨æœŸ
weekly_trend = 3 * np.sin(2 * np.pi * np.arange(n_points) / (7*24))  # é€±å‘¨æœŸ
noise = np.random.normal(0, 1.2, n_points)
temperature = base_temp + daily_cycle + weekly_trend + noise

# ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æå®Ÿè¡Œ
analysis = analyze_historical_trends(time_data, temperature, 'åå¿œå™¨æ¸©åº¦')

# å¯è¦–åŒ–
fig, axes = plt.subplots(3, 1, figsize=(16, 12))

# å…ƒãƒ‡ãƒ¼ã‚¿ã¨ãƒˆãƒ¬ãƒ³ãƒ‰
axes[0].plot(time_data, temperature, 'b-', linewidth=0.8, alpha=0.5, label='ç”Ÿãƒ‡ãƒ¼ã‚¿')
axes[0].plot(time_data, analysis['smoothed'], 'r-', linewidth=2, label='å¹³æ»‘åŒ–ãƒ‡ãƒ¼ã‚¿')
axes[0].plot(time_data, analysis['trend'], 'g--', linewidth=2, label='ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆç§»å‹•å¹³å‡ï¼‰')
axes[0].scatter(time_data[analysis['peaks']], analysis['peak_values'],
                color='red', s=80, marker='^', label='ãƒ”ãƒ¼ã‚¯', zorder=5)
axes[0].scatter(time_data[analysis['valleys']], analysis['valley_values'],
                color='blue', s=80, marker='v', label='è°·', zorder=5)
axes[0].axhline(y=analysis['mean'], color='black', linestyle='--', alpha=0.5, label='å¹³å‡å€¤')
axes[0].set_ylabel('æ¸©åº¦ (Â°C)', fontsize=12)
axes[0].set_title('å±¥æ­´ãƒ‡ãƒ¼ã‚¿ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ - åå¿œå™¨æ¸©åº¦ï¼ˆ7æ—¥é–“ï¼‰', fontsize=14, fontweight='bold')
axes[0].legend(loc='upper right')
axes[0].grid(alpha=0.3)

# ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ï¼ˆåˆ†å¸ƒåˆ†æï¼‰
axes[1].hist(temperature, bins=30, color='#11998e', alpha=0.7, edgecolor='black')
axes[1].axvline(x=analysis['mean'], color='red', linestyle='--', linewidth=2,
                label=f"å¹³å‡: {analysis['mean']:.2f}Â°C")
axes[1].axvline(x=analysis['mean'] + analysis['std'], color='orange', linestyle=':',
                linewidth=2, label=f"Â±1Ïƒ: {analysis['std']:.2f}Â°C")
axes[1].axvline(x=analysis['mean'] - analysis['std'], color='orange', linestyle=':', linewidth=2)
axes[1].set_xlabel('æ¸©åº¦ (Â°C)', fontsize=12)
axes[1].set_ylabel('é »åº¦', fontsize=12)
axes[1].set_title('æ¸©åº¦åˆ†å¸ƒ', fontsize=13, fontweight='bold')
axes[1].legend()
axes[1].grid(alpha=0.3)

# æ—¥æ¬¡çµ±è¨ˆï¼ˆãƒœãƒƒã‚¯ã‚¹ãƒ—ãƒ­ãƒƒãƒˆï¼‰
df_temp = pd.DataFrame({'timestamp': time_data, 'temperature': temperature})
df_temp['day'] = df_temp['timestamp'].dt.day
daily_data = [df_temp[df_temp['day'] == day]['temperature'].values for day in range(1, n_days+1)]

bp = axes[2].boxplot(daily_data, labels=[f'{i+1}æ—¥' for i in range(n_days)],
                      patch_artist=True, showmeans=True)

for patch in bp['boxes']:
    patch.set_facecolor('#11998e')
    patch.set_alpha(0.6)

axes[2].set_xlabel('æ—¥', fontsize=12)
axes[2].set_ylabel('æ¸©åº¦ (Â°C)', fontsize=12)
axes[2].set_title('æ—¥æ¬¡æ¸©åº¦åˆ†å¸ƒï¼ˆãƒœãƒƒã‚¯ã‚¹ãƒ—ãƒ­ãƒƒãƒˆï¼‰', fontsize=13, fontweight='bold')
axes[2].grid(alpha=0.3, axis='y')

plt.tight_layout()
plt.show()

# åˆ†æçµæœã®ã‚µãƒãƒªãƒ¼
print("=== å±¥æ­´ãƒ‡ãƒ¼ã‚¿ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æçµæœ ===\n")
print(f"å¤‰æ•°: {analysis['variable']}")
print(f"æœŸé–“: {time_data[0]} ï½ {time_data[-1]} ({n_days}æ—¥é–“)")
print(f"\nçµ±è¨ˆé‡:")
print(f"  å¹³å‡å€¤: {analysis['mean']:.2f} Â°C")
print(f"  æ¨™æº–åå·®: {analysis['std']:.2f} Â°C")
print(f"  æœ€å¤§å€¤: {analysis['max']:.2f} Â°C")
print(f"  æœ€å°å€¤: {analysis['min']:.2f} Â°C")
print(f"  ç¯„å›²: {analysis['max'] - analysis['min']:.2f} Â°C")

print(f"\nãƒˆãƒ¬ãƒ³ãƒ‰:")
print(f"  å‚¾ã: {analysis['slope']:.4f} Â°C/æ™‚é–“")
print(f"  7æ—¥é–“ã®å¤‰åŒ–: {analysis['slope'] * n_points:.2f} Â°C")

print(f"\nãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º:")
print(f"  ãƒ”ãƒ¼ã‚¯æ•°: {analysis['n_peaks']}")
print(f"  è°·ã®æ•°: {analysis['n_valleys']}")

if analysis['n_peaks'] > 0:
    print(f"  å¹³å‡ãƒ”ãƒ¼ã‚¯å€¤: {np.mean(analysis['peak_values']):.2f} Â°C")
if analysis['n_valleys'] > 0:
    print(f"  å¹³å‡è°·å€¤: {np.mean(analysis['valley_values']):.2f} Â°C")

# ç•°å¸¸æœŸé–“ã®æ¤œå‡ºï¼ˆÂ±3Ïƒç¯„å›²å¤–ï¼‰
outliers = np.abs(temperature - analysis['mean']) > 3 * analysis['std']
outlier_count = np.sum(outliers)

print(f"\nç•°å¸¸æ¤œå‡º:")
print(f"  Â±3Ïƒç¯„å›²å¤–ã®ãƒã‚¤ãƒ³ãƒˆ: {outlier_count}å€‹ ({outlier_count/len(temperature)*100:.2f}%)")

if outlier_count > 0:
    outlier_times = time_data[outliers]
    print(f"  æœ€åˆã®ç•°å¸¸æ™‚åˆ»: {outlier_times[0]}")
    print(f"  æœ€å¾Œã®ç•°å¸¸æ™‚åˆ»: {outlier_times[-1]}")
</code></pre>

<p><strong>è§£èª¬</strong>: å±¥æ­´ãƒ‡ãƒ¼ã‚¿åˆ†æã¯ã€ãƒ—ãƒ­ã‚»ã‚¹ã®é•·æœŸçš„ãªå‚¾å‘ã‚’æŠŠæ¡ã—ã€ç•°å¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œå‡ºã™ã‚‹ãŸã‚ã«é‡è¦ã§ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ç§»å‹•å¹³å‡ã«ã‚ˆã‚‹ãƒˆãƒ¬ãƒ³ãƒ‰æŠ½å‡ºã€Savitzky-Golayãƒ•ã‚£ãƒ«ã‚¿ã«ã‚ˆã‚‹å¹³æ»‘åŒ–ã€ãƒ”ãƒ¼ã‚¯ãƒ»è°·ã®è‡ªå‹•æ¤œå‡ºã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ãƒœãƒƒã‚¯ã‚¹ãƒ—ãƒ­ãƒƒãƒˆã«ã‚ˆã‚‹æ—¥æ¬¡æ¯”è¼ƒã¯ã€å‘¨æœŸçš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„ç•°å¸¸æ—¥ã‚’ç‰¹å®šã™ã‚‹ã®ã«æœ‰åŠ¹ã§ã™ã€‚</p>
</div>

<div class="code-example">
<h4>ã‚³ãƒ¼ãƒ‰ä¾‹6: KPIè¨ˆç®—ã¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º</h4>

<p><strong>ç›®çš„</strong>: ãƒ—ãƒ­ã‚»ã‚¹ç”£æ¥­ã§ä½¿ç”¨ã•ã‚Œã‚‹ä¸»è¦KPIï¼ˆOEEã€ç¨¼åƒç‡ã€å“è³ªç‡ï¼‰ã‚’è¨ˆç®—ã—ã€å¯è¦–åŒ–ã™ã‚‹ã€‚</p>

<pre><code class="language-python">import numpy as np
import pandas as pd
import plotly.graph_objects as go
from plotly.subplots import make_subplots

class ProcessKPICalculator:
    """
    ãƒ—ãƒ­ã‚»ã‚¹KPIè¨ˆç®—ã‚·ã‚¹ãƒ†ãƒ 

    ä¸»è¦KPI:
    - OEE (Overall Equipment Effectiveness): è¨­å‚™ç·åˆåŠ¹ç‡
    - å¯ç”¨ç‡ (Availability)
    - æ€§èƒ½ç¨¼åƒç‡ (Performance)
    - å“è³ªç‡ (Quality)
    """

    def __init__(self, planned_production_time, ideal_cycle_time):
        """
        Parameters:
        -----------
        planned_production_time : float
            è¨ˆç”»ç¨¼åƒæ™‚é–“ï¼ˆåˆ†ï¼‰
        ideal_cycle_time : float
            ç†æƒ³ã‚µã‚¤ã‚¯ãƒ«ã‚¿ã‚¤ãƒ ï¼ˆåˆ†/å€‹ï¼‰
        """
        self.planned_production_time = planned_production_time
        self.ideal_cycle_time = ideal_cycle_time

    def calculate_availability(self, actual_production_time):
        """
        å¯ç”¨ç‡ = å®Ÿç¨¼åƒæ™‚é–“ / è¨ˆç”»ç¨¼åƒæ™‚é–“

        Parameters:
        -----------
        actual_production_time : float
            å®Ÿç¨¼åƒæ™‚é–“ï¼ˆåˆ†ï¼‰

        Returns:
        --------
        availability : float
            å¯ç”¨ç‡ï¼ˆ0-1ï¼‰
        """
        availability = actual_production_time / self.planned_production_time
        return min(availability, 1.0)

    def calculate_performance(self, actual_output, actual_production_time):
        """
        æ€§èƒ½ç¨¼åƒç‡ = (ç†æƒ³ã‚µã‚¤ã‚¯ãƒ«ã‚¿ã‚¤ãƒ  Ã— å®Ÿç”Ÿç”£é‡) / å®Ÿç¨¼åƒæ™‚é–“

        Parameters:
        -----------
        actual_output : int
            å®Ÿç”Ÿç”£é‡ï¼ˆå€‹ï¼‰
        actual_production_time : float
            å®Ÿç¨¼åƒæ™‚é–“ï¼ˆåˆ†ï¼‰

        Returns:
        --------
        performance : float
            æ€§èƒ½ç¨¼åƒç‡ï¼ˆ0-1ï¼‰
        """
        ideal_production_time = self.ideal_cycle_time * actual_output
        performance = ideal_production_time / actual_production_time
        return min(performance, 1.0)

    def calculate_quality(self, actual_output, good_output):
        """
        å“è³ªç‡ = è‰¯å“æ•° / ç·ç”Ÿç”£é‡

        Parameters:
        -----------
        actual_output : int
            ç·ç”Ÿç”£é‡ï¼ˆå€‹ï¼‰
        good_output : int
            è‰¯å“æ•°ï¼ˆå€‹ï¼‰

        Returns:
        --------
        quality : float
            å“è³ªç‡ï¼ˆ0-1ï¼‰
        """
        if actual_output == 0:
            return 0.0

        quality = good_output / actual_output
        return min(quality, 1.0)

    def calculate_oee(self, actual_production_time, actual_output, good_output):
        """
        OEE = å¯ç”¨ç‡ Ã— æ€§èƒ½ç¨¼åƒç‡ Ã— å“è³ªç‡

        Parameters:
        -----------
        actual_production_time : float
            å®Ÿç¨¼åƒæ™‚é–“ï¼ˆåˆ†ï¼‰
        actual_output : int
            å®Ÿç”Ÿç”£é‡ï¼ˆå€‹ï¼‰
        good_output : int
            è‰¯å“æ•°ï¼ˆå€‹ï¼‰

        Returns:
        --------
        oee_metrics : dict
            OEEã¨ãã®æ§‹æˆè¦ç´ 
        """
        availability = self.calculate_availability(actual_production_time)
        performance = self.calculate_performance(actual_output, actual_production_time)
        quality = self.calculate_quality(actual_output, good_output)

        oee = availability * performance * quality

        metrics = {
            'OEE': oee,
            'Availability': availability,
            'Performance': performance,
            'Quality': quality
        }

        return metrics


# KPIè¨ˆç®—ä¾‹
# åŒ–å­¦ãƒ—ãƒ©ãƒ³ãƒˆã®1é€±é–“ã®ãƒ‡ãƒ¼ã‚¿
planned_time = 7 * 24 * 60  # 7æ—¥é–“ï¼ˆåˆ†ï¼‰
ideal_cycle_time = 2.0  # ç†æƒ³ã‚µã‚¤ã‚¯ãƒ«ã‚¿ã‚¤ãƒ ï¼ˆåˆ†/ãƒãƒƒãƒï¼‰

kpi_calc = ProcessKPICalculator(planned_time, ideal_cycle_time)

# é€±æ¬¡ãƒ‡ãƒ¼ã‚¿
week_data = {
    'æœˆæ›œ': {'actual_time': 22*60, 'output': 620, 'good': 598},
    'ç«æ›œ': {'actual_time': 23*60, 'output': 680, 'good': 672},
    'æ°´æ›œ': {'actual_time': 21*60, 'output': 610, 'good': 595},
    'æœ¨æ›œ': {'actual_time': 23*60, 'output': 685, 'good': 678},
    'é‡‘æ›œ': {'actual_time': 22*60, 'output': 650, 'good': 640},
    'åœŸæ›œ': {'actual_time': 18*60, 'output': 520, 'good': 512},
    'æ—¥æ›œ': {'actual_time': 15*60, 'output': 430, 'good': 425}
}

# æ—¥æ¬¡KPIè¨ˆç®—
daily_kpis = {}
for day, data in week_data.items():
    kpis = kpi_calc.calculate_oee(
        data['actual_time'],
        data['output'],
        data['good']
    )
    daily_kpis[day] = kpis

# KPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆ
fig = make_subplots(
    rows=2, cols=2,
    subplot_titles=('æ—¥æ¬¡OEEæ¨ç§»', 'OEEæ§‹æˆè¦ç´ ', 'é€±æ¬¡OEE', 'ç”Ÿç”£é‡ã¨è‰¯å“ç‡'),
    specs=[
        [{"type": "scatter"}, {"type": "bar"}],
        [{"type": "indicator"}, {"type": "scatter"}]
    ],
    vertical_spacing=0.15,
    horizontal_spacing=0.12
)

days = list(week_data.keys())
oee_values = [daily_kpis[day]['OEE'] * 100 for day in days]
availability_values = [daily_kpis[day]['Availability'] * 100 for day in days]
performance_values = [daily_kpis[day]['Performance'] * 100 for day in days]
quality_values = [daily_kpis[day]['Quality'] * 100 for day in days]

# æ—¥æ¬¡OEEæ¨ç§»ï¼ˆå·¦ä¸Šï¼‰
fig.add_trace(
    go.Scatter(
        x=days,
        y=oee_values,
        mode='lines+markers',
        name='OEE',
        line=dict(color='#11998e', width=3),
        marker=dict(size=10)
    ),
    row=1, col=1
)
fig.add_hline(y=85, line_dash="dash", line_color="green",
              annotation_text="ç›®æ¨™: 85%", row=1, col=1)
fig.add_hline(y=60, line_dash="dash", line_color="orange",
              annotation_text="æœ€ä½åŸºæº–: 60%", row=1, col=1)

# OEEæ§‹æˆè¦ç´ ï¼ˆå³ä¸Šï¼‰
fig.add_trace(
    go.Bar(x=days, y=availability_values, name='å¯ç”¨ç‡',
           marker_color='#11998e'),
    row=1, col=2
)
fig.add_trace(
    go.Bar(x=days, y=performance_values, name='æ€§èƒ½ç¨¼åƒç‡',
           marker_color='#f59e0b'),
    row=1, col=2
)
fig.add_trace(
    go.Bar(x=days, y=quality_values, name='å“è³ªç‡',
           marker_color='#7b2cbf'),
    row=1, col=2
)

# é€±æ¬¡OEEï¼ˆå·¦ä¸‹ï¼‰
weekly_oee = np.mean(oee_values)
fig.add_trace(
    go.Indicator(
        mode="gauge+number+delta",
        value=weekly_oee,
        title={'text': "é€±æ¬¡OEE (%)"},
        delta={'reference': 85, 'increasing': {'color': "green"}, 'decreasing': {'color': "red"}},
        gauge={
            'axis': {'range': [None, 100]},
            'bar': {'color': "#11998e"},
            'steps': [
                {'range': [0, 60], 'color': "lightcoral"},
                {'range': [60, 85], 'color': "lightyellow"},
                {'range': [85, 100], 'color': "lightgreen"}
            ],
            'threshold': {
                'line': {'color': "red", 'width': 4},
                'thickness': 0.75,
                'value': 85
            }
        }
    ),
    row=2, col=1
)

# ç”Ÿç”£é‡ã¨è‰¯å“ç‡ï¼ˆå³ä¸‹ï¼‰
output_values = [week_data[day]['output'] for day in days]
good_values = [week_data[day]['good'] for day in days]

fig.add_trace(
    go.Scatter(
        x=days,
        y=output_values,
        mode='lines+markers',
        name='ç·ç”Ÿç”£é‡',
        line=dict(color='#11998e', width=2),
        yaxis='y'
    ),
    row=2, col=2
)

fig.add_trace(
    go.Scatter(
        x=days,
        y=good_values,
        mode='lines+markers',
        name='è‰¯å“æ•°',
        line=dict(color='#4caf50', width=2),
        yaxis='y'
    ),
    row=2, col=2
)

# ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®š
fig.update_xaxes(title_text="æ›œæ—¥", row=1, col=1)
fig.update_xaxes(title_text="æ›œæ—¥", row=1, col=2)
fig.update_xaxes(title_text="æ›œæ—¥", row=2, col=2)

fig.update_yaxes(title_text="OEE (%)", row=1, col=1)
fig.update_yaxes(title_text="å‰²åˆ (%)", row=1, col=2)
fig.update_yaxes(title_text="ç”Ÿç”£é‡ (ãƒãƒƒãƒ)", row=2, col=2)

fig.update_layout(
    title_text="ãƒ—ãƒ­ã‚»ã‚¹KPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆ",
    title_font_size=20,
    title_x=0.5,
    height=900,
    showlegend=True,
    template="plotly_white"
)

fig.write_html("kpi_dashboard.html")
print("KPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚\n")

# KPIãƒ¬ãƒãƒ¼ãƒˆ
print("=== é€±æ¬¡KPIãƒ¬ãƒãƒ¼ãƒˆ ===\n")
print(f"{'æ›œæ—¥':<8} {'OEE':>7} {'å¯ç”¨ç‡':>7} {'æ€§èƒ½':>7} {'å“è³ª':>7} {'ç”Ÿç”£é‡':>8} {'è‰¯å“':>8}")
print("-" * 65)

for day in days:
    kpi = daily_kpis[day]
    data = week_data[day]
    print(f"{day:<8} "
          f"{kpi['OEE']*100:>6.1f}% "
          f"{kpi['Availability']*100:>6.1f}% "
          f"{kpi['Performance']*100:>6.1f}% "
          f"{kpi['Quality']*100:>6.1f}% "
          f"{data['output']:>7}å€‹ "
          f"{data['good']:>7}å€‹")

print("-" * 65)
print(f"é€±æ¬¡å¹³å‡: {weekly_oee:>5.1f}%\n")

# æ”¹å–„ææ¡ˆ
print("=== æ”¹å–„ææ¡ˆ ===")
avg_availability = np.mean(availability_values)
avg_performance = np.mean(performance_values)
avg_quality = np.mean(quality_values)

bottleneck = min([
    ('å¯ç”¨ç‡', avg_availability),
    ('æ€§èƒ½ç¨¼åƒç‡', avg_performance),
    ('å“è³ªç‡', avg_quality)
], key=lambda x: x[1])

print(f"æœ€å¤§ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯: {bottleneck[0]} ({bottleneck[1]:.1f}%)")

if bottleneck[0] == 'å¯ç”¨ç‡':
    print("  â†’ è¨­å‚™åœæ­¢æ™‚é–“ã®å‰Šæ¸›ã€äºˆçŸ¥ä¿å…¨ã®å°å…¥ã‚’æ¤œè¨")
elif bottleneck[0] == 'æ€§èƒ½ç¨¼åƒç‡':
    print("  â†’ ãƒ—ãƒ­ã‚»ã‚¹æœ€é©åŒ–ã€ãƒœãƒˆãƒ«ãƒãƒƒã‚¯å·¥ç¨‹ã®æ”¹å–„ã‚’æ¤œè¨")
else:
    print("  â†’ å“è³ªç®¡ç†å¼·åŒ–ã€ä¸è‰¯åŸå› ã®ç‰¹å®šã¨å¯¾ç­–ã‚’æ¤œè¨")

# OEEã‚¯ãƒ©ã‚¹åˆ†é¡
if weekly_oee >= 85:
    oee_class = "ä¸–ç•Œã‚¯ãƒ©ã‚¹"
elif weekly_oee >= 60:
    oee_class = "å¹³å‡çš„"
else:
    oee_class = "æ”¹å–„ãŒå¿…è¦"

print(f"\nOEEè©•ä¾¡: {oee_class} (ç›®æ¨™: 85%ä»¥ä¸Š)")
</code></pre>

<p><strong>æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›</strong>:</p>
<pre><code>=== é€±æ¬¡KPIãƒ¬ãƒãƒ¼ãƒˆ ===

æ›œæ—¥        OEE   å¯ç”¨ç‡   æ€§èƒ½   å“è³ª   ç”Ÿç”£é‡     è‰¯å“
-----------------------------------------------------------------
æœˆæ›œ       84.4%  91.7%  93.5%  96.5%     620å€‹     598å€‹
ç«æ›œ       91.2%  95.8%  97.1%  98.8%     680å€‹     672å€‹
æ°´æ›œ       82.1%  87.5%  95.2%  97.5%     610å€‹     595å€‹
æœ¨æ›œ       91.8%  95.8%  97.5%  99.0%     685å€‹     678å€‹
é‡‘æ›œ       87.9%  91.7%  97.2%  98.5%     650å€‹     640å€‹
åœŸæ›œ       85.2%  75.0%  96.3%  98.5%     520å€‹     512å€‹
æ—¥æ›œ       83.6%  62.5%  95.3%  98.8%     430å€‹     425å€‹
-----------------------------------------------------------------
é€±æ¬¡å¹³å‡:  86.6%

=== æ”¹å–„ææ¡ˆ ===
æœ€å¤§ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯: å¯ç”¨ç‡ (85.7%)
  â†’ è¨­å‚™åœæ­¢æ™‚é–“ã®å‰Šæ¸›ã€äºˆçŸ¥ä¿å…¨ã®å°å…¥ã‚’æ¤œè¨

OEEè©•ä¾¡: ä¸–ç•Œã‚¯ãƒ©ã‚¹ (ç›®æ¨™: 85%ä»¥ä¸Š)
</code></pre>

<p><strong>è§£èª¬</strong>: OEEï¼ˆè¨­å‚™ç·åˆåŠ¹ç‡ï¼‰ã¯ã€è£½é€ æ¥­ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ç”£æ¥­ã§æœ€ã‚‚é‡è¦ãªKPIã®ä¸€ã¤ã§ã™ã€‚å¯ç”¨ç‡ã€æ€§èƒ½ç¨¼åƒç‡ã€å“è³ªç‡ã®3è¦ç´ ã§æ§‹æˆã•ã‚Œã€è¨­å‚™ã®ç·åˆçš„ãªç”Ÿç”£æ€§ã‚’è©•ä¾¡ã—ã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æ—¥æ¬¡ãƒ»é€±æ¬¡ã®OEEè¨ˆç®—ã€å¯è¦–åŒ–ã€ãƒœãƒˆãƒ«ãƒãƒƒã‚¯åˆ†æã€æ”¹å–„ææ¡ˆã¾ã§ã‚’è‡ªå‹•åŒ–ã—ã¦ã„ã¾ã™ã€‚</p>
</div>

<div class="code-example">
<h4>ã‚³ãƒ¼ãƒ‰ä¾‹7: ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã®å¯è¦–åŒ–ï¼ˆæœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ï¼‰</h4>

<p><strong>ç›®çš„</strong>: ãƒ—ãƒ­ã‚»ã‚¹ã®é‹è»¢çŠ¶æ…‹ã‚’æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ã§ãƒ¢ãƒ‡ãƒ«åŒ–ã—ã€çŠ¶æ…‹é·ç§»ã‚’å¯è¦–åŒ–ã™ã‚‹ã€‚</p>

<pre><code class="language-python">import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from enum import Enum

# æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆè¨­å®š
plt.rcParams['font.sans-serif'] = ['Hiragino Sans', 'Arial']
plt.rcParams['axes.unicode_minus'] = False

class ProcessState(Enum):
    """ãƒ—ãƒ­ã‚»ã‚¹é‹è»¢çŠ¶æ…‹"""
    STOPPED = 0      # åœæ­¢
    STARTUP = 1      # èµ·å‹•ä¸­
    RUNNING = 2      # å®šå¸¸é‹è»¢
    SHUTDOWN = 3     # åœæ­¢æ“ä½œä¸­
    ALARM = 4        # ã‚¢ãƒ©ãƒ¼ãƒ çŠ¶æ…‹
    MAINTENANCE = 5  # ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

class ProcessStateMachine:
    """
    ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹æ©Ÿæ¢°

    çŠ¶æ…‹é·ç§»ãƒ«ãƒ¼ãƒ«:
    STOPPED â†’ STARTUP â†’ RUNNING
    RUNNING â†’ SHUTDOWN â†’ STOPPED
    ANY â†’ ALARM (ã‚¢ãƒ©ãƒ¼ãƒ ç™ºç”Ÿæ™‚)
    ALARM â†’ å‰ã®çŠ¶æ…‹ (ã‚¢ãƒ©ãƒ¼ãƒ å¾©å¸°æ™‚)
    STOPPED â†” MAINTENANCE
    """

    def __init__(self, initial_state=ProcessState.STOPPED):
        self.current_state = initial_state
        self.previous_state = None
        self.state_history = [(pd.Timestamp.now(), initial_state)]

        # çŠ¶æ…‹é·ç§»ãƒ«ãƒ¼ãƒ«
        self.transitions = {
            ProcessState.STOPPED: [ProcessState.STARTUP, ProcessState.MAINTENANCE],
            ProcessState.STARTUP: [ProcessState.RUNNING, ProcessState.ALARM],
            ProcessState.RUNNING: [ProcessState.SHUTDOWN, ProcessState.ALARM],
            ProcessState.SHUTDOWN: [ProcessState.STOPPED, ProcessState.ALARM],
            ProcessState.ALARM: [],  # ã‚¢ãƒ©ãƒ¼ãƒ ã‹ã‚‰ã¯ä»»æ„ã®çŠ¶æ…‹ã«å¾©å¸°å¯èƒ½
            ProcessState.MAINTENANCE: [ProcessState.STOPPED]
        }

    def transition(self, new_state, timestamp=None):
        """
        çŠ¶æ…‹é·ç§»

        Parameters:
        -----------
        new_state : ProcessState
            æ–°ã—ã„çŠ¶æ…‹
        timestamp : pd.Timestamp or None
            é·ç§»æ™‚åˆ»

        Returns:
        --------
        success : bool
            é·ç§»ã®æˆåŠŸ/å¤±æ•—
        """
        if timestamp is None:
            timestamp = pd.Timestamp.now()

        # ã‚¢ãƒ©ãƒ¼ãƒ çŠ¶æ…‹ã¸ã®é·ç§»ã¯å¸¸ã«è¨±å¯
        if new_state == ProcessState.ALARM:
            self.previous_state = self.current_state
            self.current_state = new_state
            self.state_history.append((timestamp, new_state))
            return True

        # ã‚¢ãƒ©ãƒ¼ãƒ çŠ¶æ…‹ã‹ã‚‰ã®å¾©å¸°
        if self.current_state == ProcessState.ALARM:
            self.current_state = new_state
            self.state_history.append((timestamp, new_state))
            return True

        # é€šå¸¸ã®çŠ¶æ…‹é·ç§»ãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯
        if new_state in self.transitions[self.current_state]:
            self.current_state = new_state
            self.state_history.append((timestamp, new_state))
            return True

        # ä¸æ­£ãªé·ç§»
        return False

    def get_state_duration(self):
        """ç¾åœ¨ã®çŠ¶æ…‹ã®ç¶™ç¶šæ™‚é–“ï¼ˆç§’ï¼‰"""
        if len(self.state_history) < 2:
            return 0

        current_time = pd.Timestamp.now()
        last_transition = self.state_history[-1][0]
        duration = (current_time - last_transition).total_seconds()

        return duration

    def get_state_statistics(self):
        """çŠ¶æ…‹åˆ¥ã®çµ±è¨ˆæƒ…å ±"""
        if len(self.state_history) < 2:
            return {}

        df_history = pd.DataFrame(self.state_history, columns=['timestamp', 'state'])
        df_history['duration'] = df_history['timestamp'].diff().shift(-1).dt.total_seconds()

        stats = {}
        for state in ProcessState:
            state_data = df_history[df_history['state'] == state]
            if len(state_data) > 0:
                stats[state.name] = {
                    'count': len(state_data),
                    'total_duration': state_data['duration'].sum(),
                    'avg_duration': state_data['duration'].mean()
                }

        return stats


# ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹æ©Ÿæ¢°ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
print("=== ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹æ©Ÿæ¢°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ===\n")

# åˆæœŸåŒ–
state_machine = ProcessStateMachine(initial_state=ProcessState.STOPPED)

# 1æ—¥é–“ã®ãƒ—ãƒ­ã‚»ã‚¹é‹è»¢ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
start_time = pd.Timestamp('2025-01-01 00:00:00')

# çŠ¶æ…‹é·ç§»ã‚·ãƒŠãƒªã‚ª
transitions_scenario = [
    (start_time + pd.Timedelta(hours=0), ProcessState.STOPPED),
    (start_time + pd.Timedelta(hours=1), ProcessState.STARTUP),
    (start_time + pd.Timedelta(hours=2), ProcessState.RUNNING),
    (start_time + pd.Timedelta(hours=8), ProcessState.ALARM),      # ã‚¢ãƒ©ãƒ¼ãƒ ç™ºç”Ÿ
    (start_time + pd.Timedelta(hours=8.5), ProcessState.RUNNING),  # ã‚¢ãƒ©ãƒ¼ãƒ å¾©å¸°
    (start_time + pd.Timedelta(hours=16), ProcessState.SHUTDOWN),
    (start_time + pd.Timedelta(hours=17), ProcessState.STOPPED),
    (start_time + pd.Timedelta(hours=18), ProcessState.MAINTENANCE),
    (start_time + pd.Timedelta(hours=22), ProcessState.STOPPED),
]

# çŠ¶æ…‹é·ç§»å®Ÿè¡Œ
for timestamp, new_state in transitions_scenario[1:]:
    success = state_machine.transition(new_state, timestamp)
    if success:
        print(f"[{timestamp.strftime('%H:%M')}] {state_machine.current_state.name}")
    else:
        print(f"[{timestamp.strftime('%H:%M')}] ä¸æ­£ãªé·ç§»: â†’ {new_state.name}")

# çŠ¶æ…‹å±¥æ­´ã®å¯è¦–åŒ–
df_history = pd.DataFrame(state_machine.state_history, columns=['timestamp', 'state'])
df_history['state_code'] = df_history['state'].apply(lambda x: x.value)
df_history['state_name'] = df_history['state'].apply(lambda x: x.name)

# Ganttãƒãƒ£ãƒ¼ãƒˆé¢¨ã®å¯è¦–åŒ–
fig, ax = plt.subplots(figsize=(16, 6))

# çŠ¶æ…‹ã”ã¨ã«è‰²ã‚’å®šç¾©
state_colors = {
    ProcessState.STOPPED: '#gray',
    ProcessState.STARTUP: '#ffeb3b',
    ProcessState.RUNNING: '#4caf50',
    ProcessState.SHUTDOWN: '#ff9800',
    ProcessState.ALARM: '#f44336',
    ProcessState.MAINTENANCE: '#2196f3'
}

# å„çŠ¶æ…‹æœŸé–“ã‚’ãƒãƒ¼ã§è¡¨ç¤º
for i in range(len(df_history) - 1):
    start = df_history.iloc[i]['timestamp']
    end = df_history.iloc[i + 1]['timestamp']
    state = df_history.iloc[i]['state']

    ax.barh(
        0,
        width=(end - start).total_seconds() / 3600,  # æ™‚é–“å˜ä½
        left=(start - start_time).total_seconds() / 3600,
        height=0.5,
        color=state_colors[state],
        edgecolor='black',
        linewidth=1.5,
        label=state.name if i == 0 or df_history.iloc[i-1]['state'] != state else ""
    )

    # çŠ¶æ…‹åã‚’ãƒãƒ¼ã®ä¸­å¤®ã«è¡¨ç¤º
    duration = (end - start).total_seconds() / 3600
    if duration > 0.5:  # 30åˆ†ä»¥ä¸Šã®çŠ¶æ…‹ã®ã¿ãƒ©ãƒ™ãƒ«è¡¨ç¤º
        mid_point = (start - start_time).total_seconds() / 3600 + duration / 2
        ax.text(mid_point, 0, state.name, ha='center', va='center',
                fontsize=11, fontweight='bold', color='white')

# å‡¡ä¾‹ï¼ˆé‡è¤‡ã‚’é™¤å»ï¼‰
handles, labels = ax.get_legend_handles_labels()
by_label = dict(zip(labels, handles))
ax.legend(by_label.values(), by_label.keys(), loc='upper right', fontsize=10)

ax.set_xlabel('æ™‚åˆ»ï¼ˆæ™‚ï¼‰', fontsize=12)
ax.set_yticks([])
ax.set_xlim(0, 24)
ax.set_title('ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹é·ç§»ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆ24æ™‚é–“ï¼‰', fontsize=14, fontweight='bold')
ax.grid(alpha=0.3, axis='x')

plt.tight_layout()
plt.show()

# çµ±è¨ˆæƒ…å ±
print("\n=== çŠ¶æ…‹çµ±è¨ˆ ===")
stats = state_machine.get_state_statistics()

print(f"\n{'çŠ¶æ…‹':<15} {'å›æ•°':>6} {'åˆè¨ˆæ™‚é–“':>10} {'å¹³å‡æ™‚é–“':>10}")
print("-" * 50)

for state_name, stat in stats.items():
    total_hours = stat['total_duration'] / 3600
    avg_hours = stat['avg_duration'] / 3600
    print(f"{state_name:<15} {stat['count']:>6}å› "
          f"{total_hours:>9.2f}æ™‚é–“ {avg_hours:>9.2f}æ™‚é–“")

# ç¨¼åƒç‡è¨ˆç®—
total_time = 24  # æ™‚é–“
running_time = stats.get('RUNNING', {}).get('total_duration', 0) / 3600
availability = running_time / total_time * 100

print(f"\nç¨¼åƒç‡: {availability:.1f}% ({running_time:.2f}æ™‚é–“ / {total_time}æ™‚é–“)")
</code></pre>

<p><strong>æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›</strong>:</p>
<pre><code>=== ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹æ©Ÿæ¢°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ===

[01:00] STARTUP
[02:00] RUNNING
[08:00] ALARM
[08:30] RUNNING
[16:00] SHUTDOWN
[17:00] STOPPED
[18:00] MAINTENANCE
[22:00] STOPPED

=== çŠ¶æ…‹çµ±è¨ˆ ===

çŠ¶æ…‹                å›æ•°     åˆè¨ˆæ™‚é–“     å¹³å‡æ™‚é–“
--------------------------------------------------
STOPPED             2å›      5.00æ™‚é–“      2.50æ™‚é–“
STARTUP             1å›      1.00æ™‚é–“      1.00æ™‚é–“
RUNNING             2å›     13.50æ™‚é–“      6.75æ™‚é–“
ALARM               1å›      0.50æ™‚é–“      0.50æ™‚é–“
SHUTDOWN            1å›      1.00æ™‚é–“      1.00æ™‚é–“
MAINTENANCE         1å›      4.00æ™‚é–“      4.00æ™‚é–“

ç¨¼åƒç‡: 56.2% (13.50æ™‚é–“ / 24æ™‚é–“)
</code></pre>

<p><strong>è§£èª¬</strong>: æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ï¼ˆFSMï¼‰ã¯ã€ãƒ—ãƒ­ã‚»ã‚¹ã®é‹è»¢çŠ¶æ…‹ã‚’æ˜ç¢ºã«ãƒ¢ãƒ‡ãƒ«åŒ–ã—ã€çŠ¶æ…‹é·ç§»ã‚’ç®¡ç†ã™ã‚‹å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ãƒ—ãƒ­ã‚»ã‚¹ã®èµ·å‹•ã€å®šå¸¸é‹è»¢ã€åœæ­¢ã€ã‚¢ãƒ©ãƒ¼ãƒ ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®å„çŠ¶æ…‹ã¨ã€ãã‚Œã‚‰ã®é–“ã®é·ç§»ãƒ«ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®å¯è¦–åŒ–ã«ã‚ˆã‚Šã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãŒãƒ—ãƒ­ã‚»ã‚¹ã®é‹è»¢å±¥æ­´ã‚’ç›´æ„Ÿçš„ã«æŠŠæ¡ã§ãã¾ã™ã€‚</p>
</div>

<div class="code-example">
<h4>ã‚³ãƒ¼ãƒ‰ä¾‹8: å®Œå…¨ãªçµ±åˆç›£è¦–ã‚·ã‚¹ãƒ†ãƒ  - åŒ–å­¦åå¿œå™¨ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£</h4>

<p><strong>ç›®çš„</strong>: ã“ã‚Œã¾ã§å­¦ã‚“ã å…¨ã¦ã®è¦ç´ ã‚’çµ±åˆã—ã€åŒ–å­¦åå¿œå™¨ã®å®Œå…¨ãªç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚</p>

<pre><code class="language-python">import numpy as np
import pandas as pd
import plotly.graph_objects as go
from plotly.subplots import make_subplots
from collections import deque
from datetime import datetime

class IntegratedProcessMonitoringSystem:
    """
    çµ±åˆãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 

    æ©Ÿèƒ½:
    - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿åé›†
    - ãƒãƒ«ãƒå¤‰æ•°ãƒˆãƒ¬ãƒ³ãƒ‰ç›£è¦–
    - ã‚¢ãƒ©ãƒ¼ãƒ ç®¡ç†
    - KPIè¨ˆç®—
    - çŠ¶æ…‹ç®¡ç†
    """

    def __init__(self, process_name):
        self.process_name = process_name

        # ãƒ‡ãƒ¼ã‚¿ãƒãƒƒãƒ•ã‚¡ï¼ˆ1æ™‚é–“åˆ†ã€1ç§’é–“éš”ï¼‰
        self.buffer_size = 3600
        self.time_buffer = deque(maxlen=self.buffer_size)
        self.data_buffers = {
            'åå¿œå™¨æ¸©åº¦': deque(maxlen=self.buffer_size),
            'ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦': deque(maxlen=self.buffer_size),
            'åå¿œå™¨åœ§åŠ›': deque(maxlen=self.buffer_size),
            'åŸæ–™æµé‡': deque(maxlen=self.buffer_size),
            'ç”Ÿæˆç‰©æ¿ƒåº¦': deque(maxlen=self.buffer_size)
        }

        # ã‚¢ãƒ©ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ 
        self.active_alarms = []

        # KPIãƒ‡ãƒ¼ã‚¿
        self.kpi_data = {
            'production_count': 0,
            'good_count': 0,
            'running_time': 0
        }

        # ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹
        self.process_state = 'RUNNING'
        self.iteration = 0

    def generate_process_data(self):
        """ãƒ—ãƒ­ã‚»ã‚¹ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆï¼ˆå®Ÿéš›ã¯PLC/DCSã‹ã‚‰å–å¾—ï¼‰"""
        elapsed = self.iteration

        # åå¿œå™¨æ¸©åº¦ï¼ˆç›®æ¨™175Â°Cï¼‰
        temp_base = 175.0
        temp_noise = np.random.normal(0, 1.2)
        temp_disturbance = 3 * np.sin(2 * np.pi * elapsed / 300)  # 5åˆ†å‘¨æœŸ
        reactor_temp = temp_base + temp_noise + temp_disturbance

        # ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦ï¼ˆåå¿œå™¨æ¸©åº¦ã‚ˆã‚Šä½ã„ï¼‰
        jacket_temp = reactor_temp - 10 + np.random.normal(0, 0.8)

        # åœ§åŠ›ï¼ˆç›®æ¨™1.5 MPaï¼‰
        pressure = 1.5 + np.random.normal(0, 0.03)

        # åŸæ–™æµé‡ï¼ˆç›®æ¨™50 mÂ³/hï¼‰
        flow_rate = 50 + np.random.normal(0, 2.5)

        # ç”Ÿæˆç‰©æ¿ƒåº¦ï¼ˆç›®æ¨™80%ï¼‰
        concentration = 80 + np.random.normal(0, 3) - 0.5 * (reactor_temp - 175)

        return {
            'åå¿œå™¨æ¸©åº¦': reactor_temp,
            'ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦': jacket_temp,
            'åå¿œå™¨åœ§åŠ›': pressure,
            'åŸæ–™æµé‡': flow_rate,
            'ç”Ÿæˆç‰©æ¿ƒåº¦': concentration
        }

    def check_process_alarms(self, data):
        """ãƒ—ãƒ­ã‚»ã‚¹ã‚¢ãƒ©ãƒ¼ãƒ ã®ãƒã‚§ãƒƒã‚¯"""
        alarms = []

        # æ¸©åº¦ã‚¢ãƒ©ãƒ¼ãƒ 
        if data['åå¿œå™¨æ¸©åº¦'] > 180:
            alarms.append({'severity': 'CRITICAL', 'variable': 'åå¿œå™¨æ¸©åº¦',
                          'message': 'é«˜æ¸©ã‚¢ãƒ©ãƒ¼ãƒ ', 'value': data['åå¿œå™¨æ¸©åº¦']})
        elif data['åå¿œå™¨æ¸©åº¦'] > 177:
            alarms.append({'severity': 'WARNING', 'variable': 'åå¿œå™¨æ¸©åº¦',
                          'message': 'é«˜æ¸©è­¦å‘Š', 'value': data['åå¿œå™¨æ¸©åº¦']})
        elif data['åå¿œå™¨æ¸©åº¦'] < 173:
            alarms.append({'severity': 'WARNING', 'variable': 'åå¿œå™¨æ¸©åº¦',
                          'message': 'ä½æ¸©è­¦å‘Š', 'value': data['åå¿œå™¨æ¸©åº¦']})

        # åœ§åŠ›ã‚¢ãƒ©ãƒ¼ãƒ 
        if data['åå¿œå™¨åœ§åŠ›'] > 1.6 or data['åå¿œå™¨åœ§åŠ›'] < 1.4:
            alarms.append({'severity': 'CRITICAL', 'variable': 'åå¿œå™¨åœ§åŠ›',
                          'message': 'åœ§åŠ›ç•°å¸¸', 'value': data['åå¿œå™¨åœ§åŠ›']})

        # æ¿ƒåº¦ã‚¢ãƒ©ãƒ¼ãƒ 
        if data['ç”Ÿæˆç‰©æ¿ƒåº¦'] < 75:
            alarms.append({'severity': 'WARNING', 'variable': 'ç”Ÿæˆç‰©æ¿ƒåº¦',
                          'message': 'å“è³ªä½ä¸‹', 'value': data['ç”Ÿæˆç‰©æ¿ƒåº¦']})

        self.active_alarms = alarms
        return alarms

    def update(self):
        """ã‚·ã‚¹ãƒ†ãƒ ã®æ›´æ–°ï¼ˆ1ç§’ã”ã¨ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ï¼‰"""
        current_time = datetime.now()
        data = self.generate_process_data()

        # ãƒ‡ãƒ¼ã‚¿ãƒãƒƒãƒ•ã‚¡ã«è¿½åŠ 
        self.time_buffer.append(current_time)
        for var, value in data.items():
            self.data_buffers[var].append(value)

        # ã‚¢ãƒ©ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯
        alarms = self.check_process_alarms(data)

        # KPIæ›´æ–°
        self.kpi_data['running_time'] += 1  # ç§’

        self.iteration += 1

        return data, alarms

    def create_integrated_dashboard(self):
        """çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½œæˆ"""
        if len(self.time_buffer) < 10:
            return None

        # ãƒ‡ãƒ¼ã‚¿ã‚’numpyé…åˆ—ã«å¤‰æ›
        time_array = list(self.time_buffer)
        reactor_temp = np.array(list(self.data_buffers['åå¿œå™¨æ¸©åº¦']))
        jacket_temp = np.array(list(self.data_buffers['ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦']))
        pressure = np.array(list(self.data_buffers['åå¿œå™¨åœ§åŠ›']))
        flow_rate = np.array(list(self.data_buffers['åŸæ–™æµé‡']))
        concentration = np.array(list(self.data_buffers['ç”Ÿæˆç‰©æ¿ƒåº¦']))

        # ã‚µãƒ–ãƒ—ãƒ­ãƒƒãƒˆã®ä½œæˆ
        fig = make_subplots(
            rows=3, cols=2,
            subplot_titles=(
                'åå¿œå™¨æ¸©åº¦ãƒˆãƒ¬ãƒ³ãƒ‰', 'ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦ãƒˆãƒ¬ãƒ³ãƒ‰',
                'åå¿œå™¨åœ§åŠ›ãƒˆãƒ¬ãƒ³ãƒ‰', 'åŸæ–™æµé‡ãƒˆãƒ¬ãƒ³ãƒ‰',
                'ç”Ÿæˆç‰©æ¿ƒåº¦ãƒˆãƒ¬ãƒ³ãƒ‰', 'ç¾åœ¨ã®ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹'
            ),
            specs=[
                [{"type": "scatter"}, {"type": "scatter"}],
                [{"type": "scatter"}, {"type": "scatter"}],
                [{"type": "scatter"}, {"type": "indicator"}]
            ],
            vertical_spacing=0.12,
            horizontal_spacing=0.12
        )

        # åå¿œå™¨æ¸©åº¦
        fig.add_trace(
            go.Scatter(x=time_array, y=reactor_temp, mode='lines',
                      name='åå¿œå™¨æ¸©åº¦', line=dict(color='#11998e', width=2)),
            row=1, col=1
        )
        fig.add_hline(y=175, line_dash="dash", line_color="red", row=1, col=1)
        fig.add_hrect(y0=173, y1=177, fillcolor="green", opacity=0.1,
                      line_width=0, row=1, col=1)

        # ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦
        fig.add_trace(
            go.Scatter(x=time_array, y=jacket_temp, mode='lines',
                      name='ã‚¸ãƒ£ã‚±ãƒƒãƒˆæ¸©åº¦', line=dict(color='#f59e0b', width=2)),
            row=1, col=2
        )

        # åœ§åŠ›
        fig.add_trace(
            go.Scatter(x=time_array, y=pressure, mode='lines',
                      name='åœ§åŠ›', line=dict(color='#7b2cbf', width=2)),
            row=2, col=1
        )
        fig.add_hline(y=1.5, line_dash="dash", line_color="red", row=2, col=1)

        # æµé‡
        fig.add_trace(
            go.Scatter(x=time_array, y=flow_rate, mode='lines',
                      name='æµé‡', line=dict(color='#e63946', width=2)),
            row=2, col=2
        )
        fig.add_hline(y=50, line_dash="dash", line_color="red", row=2, col=2)

        # æ¿ƒåº¦
        fig.add_trace(
            go.Scatter(x=time_array, y=concentration, mode='lines',
                      name='æ¿ƒåº¦', line=dict(color='#06a77d', width=2)),
            row=3, col=1
        )
        fig.add_hline(y=80, line_dash="dash", line_color="red", row=3, col=1)

        # ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿
        current_temp = reactor_temp[-1]
        fig.add_trace(
            go.Indicator(
                mode="gauge+number",
                value=current_temp,
                title={'text': "åå¿œå™¨æ¸©åº¦ (Â°C)"},
                gauge={
                    'axis': {'range': [None, 200]},
                    'bar': {'color': "#11998e"},
                    'steps': [
                        {'range': [0, 173], 'color': "lightblue"},
                        {'range': [173, 177], 'color': "lightgreen"},
                        {'range': [177, 200], 'color': "lightcoral"}
                    ],
                    'threshold': {
                        'line': {'color': "red", 'width': 4},
                        'thickness': 0.75,
                        'value': 175
                    }
                }
            ),
            row=3, col=2
        )

        # è»¸ãƒ©ãƒ™ãƒ«
        fig.update_yaxes(title_text="æ¸©åº¦ (Â°C)", row=1, col=1)
        fig.update_yaxes(title_text="æ¸©åº¦ (Â°C)", row=1, col=2)
        fig.update_yaxes(title_text="åœ§åŠ› (MPa)", row=2, col=1)
        fig.update_yaxes(title_text="æµé‡ (mÂ³/h)", row=2, col=2)
        fig.update_yaxes(title_text="æ¿ƒåº¦ (%)", row=3, col=1)

        fig.update_layout(
            title_text=f"{self.process_name} - çµ±åˆç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
            title_font_size=20,
            title_x=0.5,
            height=1000,
            showlegend=False,
            template="plotly_white"
        )

        return fig


# çµ±åˆç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
print("=== çµ±åˆãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ  ===")
print("åŒ–å­¦åå¿œå™¨ R-101 ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•\n")

# ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
monitoring_system = IntegratedProcessMonitoringSystem("åŒ–å­¦åå¿œå™¨ R-101")

# 10åˆ†é–“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ600ç§’ï¼‰
print("10åˆ†é–“ã®ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‚’é–‹å§‹ã—ã¾ã™...\n")

alarm_count = 0
for i in range(600):
    data, alarms = monitoring_system.update()

    # 30ç§’ã”ã¨ã«çŠ¶æ…‹è¡¨ç¤º
    if (i + 1) % 30 == 0:
        print(f"[{i+1:>3}ç§’] "
              f"æ¸©åº¦: {data['åå¿œå™¨æ¸©åº¦']:>6.2f}Â°C | "
              f"åœ§åŠ›: {data['åå¿œå™¨åœ§åŠ›']:>5.3f} MPa | "
              f"æ¿ƒåº¦: {data['ç”Ÿæˆç‰©æ¿ƒåº¦']:>5.2f}% | "
              f"ã‚¢ãƒ©ãƒ¼ãƒ : {len(alarms)}ä»¶")

        if alarms:
            for alarm in alarms:
                severity_icon = 'ğŸ”´' if alarm['severity'] == 'CRITICAL' else 'ğŸŸ¡'
                print(f"  {severity_icon} {alarm['variable']}: {alarm['message']} ({alarm['value']:.2f})")
            alarm_count += len(alarms)

print("\nãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–å®Œäº†ï¼\n")

# çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ç”Ÿæˆ
fig = monitoring_system.create_integrated_dashboard()
if fig:
    fig.write_html("integrated_monitoring_system.html")
    print("çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ 'integrated_monitoring_system.html' ã«ä¿å­˜ã—ã¾ã—ãŸã€‚\n")

# æœ€çµ‚çµ±è¨ˆ
print("=== ãƒ—ãƒ­ã‚»ã‚¹çµ±è¨ˆã‚µãƒãƒªãƒ¼ ===")
print(f"ç›£è¦–æ™‚é–“: {monitoring_system.kpi_data['running_time']} ç§’ (10åˆ†)")
print(f"ç·ã‚¢ãƒ©ãƒ¼ãƒ æ•°: {alarm_count}ä»¶")

# å„å¤‰æ•°ã®çµ±è¨ˆ
print("\nå¤‰æ•°çµ±è¨ˆ:")
for var_name, buffer in monitoring_system.data_buffers.items():
    data_array = np.array(list(buffer))
    print(f"  {var_name:<15}: å¹³å‡ {np.mean(data_array):>7.2f}, "
          f"æ¨™æº–åå·® {np.std(data_array):>5.2f}, "
          f"æœ€å¤§ {np.max(data_array):>7.2f}, "
          f"æœ€å° {np.min(data_array):>7.2f}")

print("\nã‚·ã‚¹ãƒ†ãƒ æ­£å¸¸çµ‚äº†ã€‚")
</code></pre>

<p><strong>è§£èª¬</strong>: ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€æœ¬ç« ã§å­¦ã‚“ã å…¨ã¦ã®è¦ç´ ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿åé›†ã€ãƒãƒ«ãƒå¤‰æ•°ç›£è¦–ã€ã‚¢ãƒ©ãƒ¼ãƒ ç®¡ç†ã€KPIè¨ˆç®—ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å¯è¦–åŒ–ï¼‰ã‚’çµ±åˆã—ãŸå®Œå…¨ãªãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚åŒ–å­¦åå¿œå™¨ã‚’ä¾‹ã«ã€å®Ÿéš›ã®ãƒ—ãƒ©ãƒ³ãƒˆã§ä½¿ç”¨ã•ã‚Œã‚‹ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚å®Ÿé‹ç”¨ã§ã¯ã€ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆDash, Streamlitç­‰ï¼‰ã¨ã—ã¦å±•é–‹ã—ã€è¤‡æ•°ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
</div>

<hr />

<h2>5.3 æœ¬ç« ã®ã¾ã¨ã‚</h2>

<h3>å­¦ã‚“ã ã“ã¨</h3>

<ol>
<li><strong>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</strong>
    <ul>
        <li>ãƒ‡ãƒ¼ã‚¿åé›†å±¤ã€å‡¦ç†å±¤ã€å¯è¦–åŒ–å±¤ã€ä¿å­˜å±¤ã®4å±¤æ§‹é€ </li>
        <li>ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼: ã‚»ãƒ³ã‚µãƒ¼ â†’ ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚° â†’ å‡¦ç† â†’ å¯è¦–åŒ– â†’ ä¿å­˜</li>
        <li>ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã®åŸå‰‡ã¨ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£</li>
    </ul>
</li>
<li><strong>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­è¨ˆã¨å¯è¦–åŒ–</strong>
    <ul>
        <li>Plotlyã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰</li>
        <li>ãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒ£ãƒ¼ãƒˆã€ã‚²ãƒ¼ã‚¸ã€ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã®åŠ¹æœçš„ãªé…ç½®</li>
        <li>ã‚ªãƒšãƒ¬ãƒ¼ã‚¿å‘ã‘UIãƒ‡ã‚¶ã‚¤ãƒ³ã®åŸå‰‡</li>
    </ul>
</li>
<li><strong>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å‡¦ç†</strong>
    <ul>
        <li>dequeã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªãƒ‡ãƒ¼ã‚¿ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°</li>
        <li>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã®çµ±è¨ˆå‡¦ç†</li>
        <li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç•°å¸¸æ¤œçŸ¥</li>
    </ul>
</li>
<li><strong>ã‚¢ãƒ©ãƒ¼ãƒ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </strong>
    <ul>
        <li>é‡è¦åº¦ãƒ¬ãƒ™ãƒ«åˆ¥ã®ã‚¢ãƒ©ãƒ¼ãƒ åˆ†é¡ï¼ˆINFO, WARNING, ALARM, CRITICALï¼‰</li>
        <li>ã‚¢ãƒ©ãƒ¼ãƒ å±¥æ­´ç®¡ç†ã¨ã‚¢ã‚¯ãƒãƒªãƒƒã‚¸ãƒ¡ãƒ³ãƒˆ</li>
        <li>ã‚¢ãƒ©ãƒ¼ãƒ ãƒ•ãƒ©ãƒƒãƒ‰é˜²æ­¢æˆ¦ç•¥</li>
    </ul>
</li>
<li><strong>KPIã¨ãƒ—ãƒ­ã‚»ã‚¹åˆ†æ</strong>
    <ul>
        <li>OEEï¼ˆè¨­å‚™ç·åˆåŠ¹ç‡ï¼‰ã®è¨ˆç®—ã¨è©•ä¾¡</li>
        <li>å±¥æ­´ãƒ‡ãƒ¼ã‚¿ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã¨ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º</li>
        <li>ãƒœãƒˆãƒ«ãƒãƒƒã‚¯åˆ†æã¨æ”¹å–„ææ¡ˆ</li>
    </ul>
</li>
<li><strong>çµ±åˆç›£è¦–ã‚·ã‚¹ãƒ†ãƒ </strong>
    <ul>
        <li>å…¨æ©Ÿèƒ½ã‚’çµ±åˆã—ãŸå®Œå…¨ãªã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰</li>
        <li>åŒ–å­¦åå¿œå™¨ã®å®Ÿè·µçš„ãªã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£</li>
        <li>å®Ÿé‹ç”¨ã¸ã®å±•é–‹æˆ¦ç•¥</li>
    </ul>
</li>
</ol>

<h3>é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h3>

<ul>
<li><strong>ãƒ‡ãƒ¼ã‚¿ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°</strong>: dequeã‚’ä½¿ã£ãŸå›ºå®šé•·ã‚­ãƒ¥ãƒ¼ã§ã€ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†ã‚’å®Ÿç¾</li>
<li><strong>ã‚¢ãƒ©ãƒ¼ãƒ è¨­è¨ˆ</strong>: é‡è¦åº¦åˆ†é¡ã¨é©åˆ‡ãªé–¾å€¤è¨­å®šã§ã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã®è² æ‹…ã‚’è»½æ¸›</li>
<li><strong>KPIå¯è¦–åŒ–</strong>: OEEã¨ãã®æ§‹æˆè¦ç´ ã‚’è¦–è¦šçš„ã«è¡¨ç¤ºã—ã€æ”¹å–„æ©Ÿä¼šã‚’æ˜ç¢ºåŒ–</li>
<li><strong>çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</strong>: è¤‡æ•°ã®å¤‰æ•°ã‚’åŒæ™‚ã«ç›£è¦–ã§ãã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ã€ãƒ—ãƒ­ã‚»ã‚¹å…¨ä½“ã‚’ä¿¯ç°</li>
<li><strong>ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£</strong>: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸè¨­è¨ˆã§ã€å¤‰æ•°è¿½åŠ ã‚„æ©Ÿèƒ½æ‹¡å¼µãŒå®¹æ˜“</li>
</ul>

<h3>å®Ÿå‹™ã§ã®å¿œç”¨</h3>

<p>æœ¬ç« ã§å­¦ã‚“ã ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿãƒ—ãƒ­ã‚»ã‚¹ã§æ´»ç”¨ã§ãã¾ã™ï¼š</p>
<ul>
<li><strong>åŒ–å­¦ãƒ—ãƒ©ãƒ³ãƒˆ</strong>: åå¿œå™¨ã€è’¸ç•™å¡”ã€ç†±äº¤æ›å™¨ã®çµ±åˆç›£è¦–</li>
<li><strong>è£½è–¬ãƒ—ãƒ©ãƒ³ãƒˆ</strong>: GMPæº–æ‹ ã®è¨˜éŒ²ç®¡ç†ã¨ã‚¢ãƒ©ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ </li>
<li><strong>é£Ÿå“ãƒ—ãƒ©ãƒ³ãƒˆ</strong>: HACCPå¯¾å¿œã®æ¸©åº¦ãƒ»pHç®¡ç†</li>
<li><strong>åŠå°ä½“è£½é€ </strong>: ã‚¯ãƒªãƒ¼ãƒ³ãƒ«ãƒ¼ãƒ ç’°å¢ƒã®ç²¾å¯†ç›£è¦–</li>
<li><strong>ç™ºé›»ãƒ—ãƒ©ãƒ³ãƒˆ</strong>: ãƒœã‚¤ãƒ©ãƒ¼ã€ã‚¿ãƒ¼ãƒ“ãƒ³ã®åŠ¹ç‡ç›£è¦–</li>
</ul>

<h3>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>

<p>ã‚·ãƒªãƒ¼ã‚ºã‚’å®Œäº†ã—ãŸã‚ãªãŸã¯ã€ä»¥ä¸‹ã®ã‚¹ã‚­ãƒ«ã‚’ç¿’å¾—ã—ã¾ã—ãŸï¼š</p>
<ul>
<li>âœ… ãƒ—ãƒ­ã‚»ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã®åŸºç¤çŸ¥è­˜ã¨å®Ÿè£…èƒ½åŠ›</li>
<li>âœ… çµ±è¨ˆçš„ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ï¼ˆSPCï¼‰ã®å®Ÿè·µã‚¹ã‚­ãƒ«</li>
<li>âœ… æ©Ÿæ¢°å­¦ç¿’ãƒ»æ·±å±¤å­¦ç¿’ã«ã‚ˆã‚‹ç•°å¸¸æ¤œçŸ¥</li>
<li>âœ… PIDåˆ¶å¾¡ã®ç†è«–ã¨å®Ÿè£…</li>
<li>âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰èƒ½åŠ›</li>
</ul>

<p><strong>ã•ã‚‰ãªã‚‹å­¦ç¿’ã®ãŸã‚ã«:</strong></p>
<ol>
<li><strong>ãƒ¢ãƒ‡ãƒ«äºˆæ¸¬åˆ¶å¾¡ï¼ˆMPCï¼‰</strong>: å¤šå¤‰æ•°åˆ¶å¾¡ã®é«˜åº¦ãªæ‰‹æ³•</li>
<li><strong>ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³</strong>: ãƒ—ãƒ­ã‚»ã‚¹ã®ä»®æƒ³ãƒ¢ãƒ‡ãƒ«æ§‹ç¯‰ã¨äºˆæ¸¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</li>
<li><strong>å¼·åŒ–å­¦ç¿’åˆ¶å¾¡</strong>: AIã«ã‚ˆã‚‹é©å¿œçš„ãƒ—ãƒ­ã‚»ã‚¹åˆ¶å¾¡</li>
<li><strong>ã‚½ãƒ•ãƒˆã‚»ãƒ³ã‚µãƒ¼é–‹ç™º</strong>: æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹å›°é›£ãªå¤‰æ•°ã®æ¨å®š</li>
<li><strong>ã‚¯ãƒ©ã‚¦ãƒ‰çµ±åˆ</strong>: AWS/Azure/GCPã¨ã®é€£æºã¨ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿åˆ†æ</li>
</ol>

<div class="navigation">
    <span class="coming-soon">â† å‰ã®ç« ï¼ˆæº–å‚™ä¸­ï¼‰</span>
    <a href="index.html" class="nav-button">ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ã«æˆ»ã‚‹</a>
</div>

<hr />

<h2>ã‚·ãƒªãƒ¼ã‚ºå®Œäº†ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h2>

<p>ã‚ãªãŸã¯ã€Œãƒ—ãƒ­ã‚»ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»åˆ¶å¾¡å…¥é–€ã‚·ãƒªãƒ¼ã‚º v1.0ã€ã®å…¨5ç« ã‚’å®Œäº†ã—ã¾ã—ãŸã€‚ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‹ã‚‰ã€çµ±è¨ˆçš„ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ã€ç•°å¸¸æ¤œçŸ¥ã€PIDåˆ¶å¾¡ã€ãã—ã¦ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã¾ã§ã€ãƒ—ãƒ­ã‚»ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®åŒ…æ‹¬çš„ãªçŸ¥è­˜ã¨ã‚¹ã‚­ãƒ«ã‚’ç¿’å¾—ã—ã¾ã—ãŸã€‚</p>

<p><strong>ã“ã®çŸ¥è­˜ã‚’æ´»ã‹ã—ã¦ã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸é€²ã¿ã¾ã—ã‚‡ã†ï¼š</strong></p>
<ul>
<li>âœ… è‡ªç¤¾ãƒ—ãƒ­ã‚»ã‚¹ã¸ã®é©ç”¨ã‚’æ¤œè¨ã™ã‚‹</li>
<li>âœ… å­¦ã‚“ã ã‚³ãƒ¼ãƒ‰ã‚’GitHubã§å…¬é–‹ãƒ»å…±æœ‰ã™ã‚‹</li>
<li>âœ… å®Ÿãƒ‡ãƒ¼ã‚¿ã§ã‚½ãƒ•ãƒˆã‚»ãƒ³ã‚µãƒ¼ã‚„ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’æ§‹ç¯‰ã™ã‚‹</li>
<li>âœ… ãƒ—ãƒ­ã‚»ã‚¹åˆ¶å¾¡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã®ã‚­ãƒ£ãƒªã‚¢ã‚’ç™ºå±•ã•ã›ã‚‹</li>
</ul>

<p><strong>ã‚ãªãŸã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ï¼</strong><br />
ã“ã®ã‚·ãƒªãƒ¼ã‚ºã®æ”¹å–„ææ¡ˆã€è³ªå•ã€æˆåŠŸäº‹ä¾‹ãªã©ãŒã‚ã‚Œã°ã€ãœã²ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚</p>

<p><strong>é€£çµ¡å…ˆ</strong>: yusuke.hashimoto.b8@tohoku.ac.jp</p>

    </main>

    
    <section class="disclaimer">
        <h3>å…è²¬äº‹é …</h3>
        <ul>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯æ•™è‚²ãƒ»ç ”ç©¶ãƒ»æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€å°‚é–€çš„ãªåŠ©è¨€(æ³•å¾‹ãƒ»ä¼šè¨ˆãƒ»æŠ€è¡“çš„ä¿è¨¼ãªã©)ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŠã‚ˆã³ä»˜éšã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹ã¯ã€Œç¾çŠ¶æœ‰å§¿(AS IS)ã€ã§æä¾›ã•ã‚Œã€æ˜ç¤ºã¾ãŸã¯é»™ç¤ºã‚’å•ã‚ãšã€å•†å“æ€§ã€ç‰¹å®šç›®çš„é©åˆæ€§ã€æ¨©åˆ©éä¾µå®³ã€æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã€å‹•ä½œãƒ»å®‰å…¨æ€§ç­‰ã„ã‹ãªã‚‹ä¿è¨¼ã‚‚ã—ã¾ã›ã‚“ã€‚</li>
            <li>å¤–éƒ¨ãƒªãƒ³ã‚¯ã€ç¬¬ä¸‰è€…ãŒæä¾›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã®å†…å®¹ãƒ»å¯ç”¨æ€§ãƒ»å®‰å…¨æ€§ã«ã¤ã„ã¦ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ãƒ»å®Ÿè¡Œãƒ»è§£é‡ˆã«ã‚ˆã‚Šç›´æ¥çš„ãƒ»é–“æ¥çš„ãƒ»ä»˜éšçš„ãƒ»ç‰¹åˆ¥ãƒ»çµæœçš„ãƒ»æ‡²ç½°çš„æå®³ãŒç”Ÿã˜ãŸå ´åˆã§ã‚‚ã€é©ç”¨æ³•ã§è¨±å®¹ã•ã‚Œã‚‹æœ€å¤§é™ã®ç¯„å›²ã§ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å†…å®¹ã¯ã€äºˆå‘Šãªãå¤‰æ›´ãƒ»æ›´æ–°ãƒ»æä¾›åœæ­¢ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‘—ä½œæ¨©ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯æ˜è¨˜ã•ã‚ŒãŸæ¡ä»¶(ä¾‹: CC BY 4.0)ã«å¾“ã„ã¾ã™ã€‚å½“è©²ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯é€šå¸¸ã€ç„¡ä¿è¨¼æ¡é …ã‚’å«ã¿ã¾ã™ã€‚</li>
        </ul>
    </section>

<footer>
        <p><strong>ä½œæˆè€…</strong>: PI Knowledge Hub - Dr. Yusuke Hashimoto, Tohoku University</p>
        <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.0 | <strong>ä½œæˆæ—¥</strong>: 2025-10-26</p>
        <p><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0</p>
        <p>&copy; 2025 PI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
