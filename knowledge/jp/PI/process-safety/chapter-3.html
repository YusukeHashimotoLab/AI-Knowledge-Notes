<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ç¬¬3ç« ï¼šFMEAã¨æ•…éšœã®æœ¨è§£æ - ãƒ—ãƒ­ã‚»ã‚¹å®‰å…¨æ€§è©•ä¾¡å…¥é–€ã‚·ãƒªãƒ¼ã‚º">
    <title>ç¬¬3ç« ï¼šFMEAã¨æ•…éšœã®æœ¨è§£æ - ãƒ—ãƒ­ã‚»ã‚¹å®‰å…¨æ€§è©•ä¾¡å…¥é–€ | PI Terakoya</title>

        <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.8; color: #333; background: #f5f5f5;
        }
        header {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; padding: 2rem 1rem; text-align: center;
        }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        .subtitle { opacity: 0.9; font-size: 1.1rem; }
        .container { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
        .back-link {
            display: inline-block; margin-bottom: 2rem; padding: 0.5rem 1rem;
            background: white; color: #11998e; text-decoration: none;
            border-radius: 6px; font-weight: 600;
        }
        .content-box {
            background: white; padding: 2rem; border-radius: 12px;
            margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h2 {
            color: #11998e; margin: 2rem 0 1rem 0;
            padding-bottom: 0.5rem; border-bottom: 3px solid #11998e;
        }
        h3 { color: #2c3e50; margin: 1.5rem 0 1rem 0; }
        h4 { color: #2c3e50; margin: 1rem 0 0.5rem 0; }
        p { margin-bottom: 1rem; }
        ul, ol { margin-left: 2rem; margin-bottom: 1rem; }
        li { margin-bottom: 0.5rem; }
        pre {
            background: #1e1e1e; color: #d4d4d4; padding: 1.5rem;
            border-radius: 8px; overflow-x: auto; margin: 1rem 0;
            border-left: 4px solid #11998e;
        }
        code {
            font-family: 'Courier New', monospace; font-size: 0.9rem;
        }
        .key-point {
            background: #e8f5e9; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #4caf50; margin: 1rem 0;
        }
        .tech-note {
            background: #e3f2fd; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #2196f3; margin: 1rem 0;
        }
        .formula {
            background: #f0f7ff; padding: 1rem; border-radius: 6px;
            margin: 1rem 0; overflow-x: auto;
        }
        table {
            width: 100%; border-collapse: collapse; margin: 1rem 0;
        }
        th, td {
            border: 1px solid #ddd; padding: 0.75rem; text-align: left;
        }
        th {
            background: #11998e; color: white; font-weight: 600;
        }
        tr:nth-child(even) { background: #f9f9f9; }
        .nav-buttons {
            display: flex; justify-content: space-between; margin-top: 3rem;
        }
        .nav-buttons a {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; text-decoration: none; border-radius: 6px;
            font-weight: 600;
        }
        footer {
            background: #2c3e50; color: white; text-align: center;
            padding: 2rem 1rem; margin-top: 4rem;
        }
        @media (max-width: 768px) {
            h1 { font-size: 1.6rem; }
            .container { padding: 0 0.5rem; }
            pre { padding: 1rem; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>ç¬¬3ç« ï¼šFMEAã¨æ•…éšœã®æœ¨è§£æ</h1>
            <p class="subtitle">ã‚·ã‚¹ãƒ†ãƒ æ•…éšœãƒ¢ãƒ¼ãƒ‰ã®ä½“ç³»çš„åˆ†æã¨ä¿¡é ¼æ€§è©•ä¾¡</p>
            <div class="meta">
                <span class="meta">ğŸ“š ãƒ—ãƒ­ã‚»ã‚¹å®‰å…¨æ€§è©•ä¾¡å…¥é–€</span>
                <span class="meta">â±ï¸ èª­äº†æ™‚é–“: 30-35åˆ†</span>
                <span class="meta">ğŸ¯ é›£æ˜“åº¦: ä¸­ç´š</span>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="learning-objectives">
            <h2>ã“ã®ç« ã§å­¦ã¶ã“ã¨</h2>
            <ul>
                <li><strong>FMEAï¼ˆæ•…éšœãƒ¢ãƒ¼ãƒ‰å½±éŸ¿è§£æï¼‰</strong>ã®å®Ÿè£…æ–¹æ³•ã¨RPNè¨ˆç®—</li>
                <li><strong>æ•…éšœã®æœ¨è§£æï¼ˆFTAï¼‰</strong>ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ ä¿¡é ¼æ€§è©•ä¾¡</li>
                <li><strong>æœ€å°ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆ</strong>ã®å°å‡ºã¨é‡è¦åº¦åˆ†æ</li>
                <li>FMEA/FTAã‚’çµ±åˆã—ãŸä½“ç³»çš„å®‰å…¨æ€§è©•ä¾¡æ‰‹æ³•</li>
            </ul>
        </div>

        <h2>3.1 FMEAï¼ˆæ•…éšœãƒ¢ãƒ¼ãƒ‰å½±éŸ¿è§£æï¼‰</h2>

        <p>
            FMEAï¼ˆFailure Mode and Effects Analysisï¼‰ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã®å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã„ã¦ã€
            è€ƒãˆã‚‰ã‚Œã‚‹æ•…éšœãƒ¢ãƒ¼ãƒ‰ã€ãã®å½±éŸ¿ã€ç™ºç”Ÿç¢ºç‡ã€æ¤œå‡ºæ€§ã‚’ä½“ç³»çš„ã«åˆ†æã™ã‚‹æ‰‹æ³•ã§ã™ã€‚
            ãƒ—ãƒ­ã‚»ã‚¹ç”£æ¥­ã§ã¯ã€è¨­å‚™ã®ä¿¡é ¼æ€§è©•ä¾¡ã‚„ä¿å…¨è¨ˆç”»ã®ç­–å®šã«åºƒãæ´»ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
        </p>

        <h3>3.1.1 åŸºæœ¬çš„ãªFMEAå®Ÿè£…</h3>

        <p>
            FMEAã®æ ¸å¿ƒã¯ã€ãƒªã‚¹ã‚¯å„ªå…ˆåº¦æ•°ï¼ˆRPN: Risk Priority Numberï¼‰ã®è¨ˆç®—ã§ã™ã€‚
            RPN = æ·±åˆ»åº¦(S) Ã— ç™ºç”Ÿåº¦(O) Ã— æ¤œå‡ºåº¦(D) ã§ç®—å‡ºã•ã‚Œã€1000ç‚¹æº€ç‚¹ã§è©•ä¾¡ã—ã¾ã™ã€‚
        </p>

        <pre><code class="language-python"># Example 1: Basic FMEA Implementation
import pandas as pd
import numpy as np
from typing import List, Dict

class FMEA:
    """æ•…éšœãƒ¢ãƒ¼ãƒ‰å½±éŸ¿è§£æï¼ˆFMEAï¼‰ã‚·ã‚¹ãƒ†ãƒ 

    å„æ©Ÿå™¨ã®æ•…éšœãƒ¢ãƒ¼ãƒ‰ã€å½±éŸ¿ã€ãƒªã‚¹ã‚¯ã‚’ä½“ç³»çš„ã«åˆ†æ
    """

    def __init__(self):
        self.analysis_data = []

    def add_failure_mode(self, component: str, failure_mode: str,
                        effects: str, causes: str,
                        severity: int, occurrence: int, detection: int,
                        current_controls: str = ""):
        """æ•…éšœãƒ¢ãƒ¼ãƒ‰ã‚’è¿½åŠ 

        Args:
            component: å¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            failure_mode: æ•…éšœãƒ¢ãƒ¼ãƒ‰
            effects: å½±éŸ¿
            causes: åŸå› 
            severity: æ·±åˆ»åº¦ (1-10)
            occurrence: ç™ºç”Ÿåº¦ (1-10)
            detection: æ¤œå‡ºåº¦ (1-10)
            current_controls: ç¾åœ¨ã®ç®¡ç†ç­–
        """
        rpn = severity * occurrence * detection

        self.analysis_data.append({
            'Component': component,
            'Failure Mode': failure_mode,
            'Effects': effects,
            'Causes': causes,
            'Severity': severity,
            'Occurrence': occurrence,
            'Detection': detection,
            'RPN': rpn,
            'Current Controls': current_controls
        })

    def get_analysis(self) -> pd.DataFrame:
        """FMEAåˆ†æçµæœã‚’å–å¾—"""
        df = pd.DataFrame(self.analysis_data)
        return df.sort_values('RPN', ascending=False)

    def get_high_risk_items(self, threshold: int = 200) -> pd.DataFrame:
        """é«˜ãƒªã‚¹ã‚¯é …ç›®ã‚’æŠ½å‡º

        Args:
            threshold: RPNã—ãã„å€¤ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ200ä»¥ä¸Šã‚’é«˜ãƒªã‚¹ã‚¯ã¨åˆ¤å®šï¼‰
        """
        df = self.get_analysis()
        return df[df['RPN'] >= threshold]

# å®Ÿä½¿ç”¨ä¾‹ï¼šåŒ–å­¦åå¿œå™¨ã®FMEA
fmea = FMEA()

# æ¸©åº¦åˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ ã®æ•…éšœãƒ¢ãƒ¼ãƒ‰
fmea.add_failure_mode(
    component="æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼",
    failure_mode="ã‚»ãƒ³ã‚µãƒ¼æ•…éšœï¼ˆé«˜æ¸©å´ï¼‰",
    effects="åå¿œæš´èµ°ã€åœ§åŠ›ä¸Šæ˜‡ã€çˆ†ç™ºãƒªã‚¹ã‚¯",
    causes="ã‚»ãƒ³ã‚µãƒ¼åŠ£åŒ–ã€é…ç·šæ–­ç·š",
    severity=9,
    occurrence=3,
    detection=4,
    current_controls="å†—é•·ã‚»ãƒ³ã‚µãƒ¼ã€å®šæœŸæ ¡æ­£"
)

fmea.add_failure_mode(
    component="å†·å´æ°´ãƒãƒ³ãƒ—",
    failure_mode="ãƒãƒ³ãƒ—åœæ­¢",
    effects="åå¿œå™¨éç†±ã€è£½å“å“è³ªä½ä¸‹",
    causes="ãƒ¢ãƒ¼ã‚¿ãƒ¼æ•…éšœã€è»¸å—æ‘©è€—",
    severity=8,
    occurrence=4,
    detection=2,
    current_controls="æµé‡è¨ˆã‚¢ãƒ©ãƒ¼ãƒ ã€äºˆå‚™ãƒãƒ³ãƒ—"
)

fmea.add_failure_mode(
    component="åœ§åŠ›å®‰å…¨å¼",
    failure_mode="ä½œå‹•ä¸è‰¯ï¼ˆé–‹ã‹ãªã„ï¼‰",
    effects="éåœ§ã«ã‚ˆã‚‹å®¹å™¨ç ´è£‚",
    causes="å¼åº§å›ºç€ã€ã‚¹ãƒ—ãƒªãƒ³ã‚°åŠ£åŒ–",
    severity=10,
    occurrence=2,
    detection=8,
    current_controls="å¹´æ¬¡ç‚¹æ¤œã€åœ§åŠ›è©¦é¨“"
)

# åˆ†æçµæœè¡¨ç¤º
analysis_df = fmea.get_analysis()
print("=== FMEAåˆ†æçµæœï¼ˆRPNé †ï¼‰ ===")
print(analysis_df[['Component', 'Failure Mode', 'RPN']].to_string(index=False))
print(f"\nå¹³å‡RPN: {analysis_df['RPN'].mean():.1f}")
print(f"æœ€å¤§RPN: {analysis_df['RPN'].max()}")

# é«˜ãƒªã‚¹ã‚¯é …ç›®ã®æŠ½å‡º
high_risk = fmea.get_high_risk_items(threshold=150)
print(f"\né«˜ãƒªã‚¹ã‚¯é …ç›®ï¼ˆRPNâ‰¥150ï¼‰: {len(high_risk)}ä»¶")
print(high_risk[['Component', 'RPN']].to_string(index=False))

# å‡ºåŠ›ä¾‹:
# === FMEAåˆ†æçµæœï¼ˆRPNé †ï¼‰ ===
# Component        Failure Mode                    RPN
# åœ§åŠ›å®‰å…¨å¼       ä½œå‹•ä¸è‰¯ï¼ˆé–‹ã‹ãªã„ï¼‰            160
# æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼     ã‚»ãƒ³ã‚µãƒ¼æ•…éšœï¼ˆé«˜æ¸©å´ï¼‰          108
# å†·å´æ°´ãƒãƒ³ãƒ—     ãƒãƒ³ãƒ—åœæ­¢                       64
#
# å¹³å‡RPN: 110.7
# æœ€å¤§RPN: 160
#
# é«˜ãƒªã‚¹ã‚¯é …ç›®ï¼ˆRPNâ‰¥150ï¼‰: 1ä»¶
# Component    RPN
# åœ§åŠ›å®‰å…¨å¼   160
</code></pre>

        <h3>3.1.2 è‡¨ç•Œåº¦è§£æï¼ˆCriticality Analysisï¼‰</h3>

        <p>
            è‡¨ç•Œåº¦è§£æã¯ã€FMEAã‚’æ‹¡å¼µã—ã€æ•…éšœãƒ¢ãƒ¼ãƒ‰ã®å½±éŸ¿ã‚’å®šé‡çš„ã«è©•ä¾¡ã—ã¾ã™ã€‚
            å„æ•…éšœãƒ¢ãƒ¼ãƒ‰ã®è‡¨ç•Œåº¦ = ç™ºç”Ÿç¢ºç‡ Ã— æ·±åˆ»åº¦ ã§è¨ˆç®—ã—ã€é‡è¦åº¦ã‚’ãƒ©ãƒ³ã‚¯ä»˜ã‘ã—ã¾ã™ã€‚
        </p>

        <pre><code class="language-python"># Example 2: Criticality Analysis
import matplotlib.pyplot as plt

class CriticalityAnalysis:
    """è‡¨ç•Œåº¦è§£æï¼ˆCriticality Analysisï¼‰

    æ•…éšœãƒ¢ãƒ¼ãƒ‰ã®é‡è¦åº¦ã‚’å®šé‡çš„ã«è©•ä¾¡ã—ã€å„ªå…ˆé †ä½ã‚’æ±ºå®š
    """

    def __init__(self, fmea_data: pd.DataFrame):
        self.data = fmea_data.copy()
        self._calculate_criticality()

    def _calculate_criticality(self):
        """è‡¨ç•Œåº¦ã‚’è¨ˆç®—

        Criticality = (Occurrence/10) * Severity * Î±
        Î±: æ¤œå‡ºæ€§ã«ã‚ˆã‚‹é‡ã¿ä¿‚æ•°ï¼ˆæ¤œå‡ºå›°é›£ã»ã©å¤§ãã„ï¼‰
        """
        # æ¤œå‡ºåº¦ã‹ã‚‰é‡ã¿ä¿‚æ•°ã‚’è¨ˆç®—ï¼ˆæ¤œå‡ºå›°é›£ = ä¿‚æ•°å¤§ï¼‰
        detection_weight = self.data['Detection'] / 10

        # è‡¨ç•Œåº¦ = ç™ºç”Ÿç¢ºç‡ Ã— æ·±åˆ»åº¦ Ã— æ¤œå‡ºå›°é›£åº¦
        self.data['Criticality'] = (
            (self.data['Occurrence'] / 10) *
            self.data['Severity'] *
            detection_weight
        )

        # è‡¨ç•Œåº¦ãƒ©ãƒ³ã‚¯ä»˜ã‘ï¼ˆ1-4ï¼‰
        criticality_values = self.data['Criticality']
        self.data['Criticality Rank'] = pd.cut(
            criticality_values,
            bins=[0, 2, 4, 6, 10],
            labels=['Low', 'Medium', 'High', 'Critical']
        )

    def get_critical_items(self, rank: str = 'Critical') -> pd.DataFrame:
        """è‡¨ç•Œåº¦ãƒ©ãƒ³ã‚¯åˆ¥ã®é …ç›®å–å¾—"""
        return self.data[self.data['Criticality Rank'] == rank]

    def plot_criticality_matrix(self):
        """è‡¨ç•Œåº¦ãƒãƒˆãƒªã‚¯ã‚¹ã‚’ãƒ—ãƒ­ãƒƒãƒˆï¼ˆæ·±åˆ»åº¦ vs ç™ºç”Ÿåº¦ï¼‰"""
        fig, ax = plt.subplots(figsize=(10, 8))

        # ãƒãƒ–ãƒ«ãƒãƒ£ãƒ¼ãƒˆï¼ˆãƒãƒ–ãƒ«ã‚µã‚¤ã‚º = æ¤œå‡ºåº¦ï¼‰
        scatter = ax.scatter(
            self.data['Occurrence'],
            self.data['Severity'],
            s=self.data['Detection'] * 50,  # ãƒãƒ–ãƒ«ã‚µã‚¤ã‚º
            c=self.data['Criticality'],
            cmap='YlOrRd',
            alpha=0.6,
            edgecolors='black'
        )

        # å„ç‚¹ã«ãƒ©ãƒ™ãƒ«ä»˜ã‘
        for idx, row in self.data.iterrows():
            ax.annotate(
                row['Component'],
                (row['Occurrence'], row['Severity']),
                fontsize=8,
                ha='center'
            )

        ax.set_xlabel('Occurrence (ç™ºç”Ÿåº¦)', fontsize=12)
        ax.set_ylabel('Severity (æ·±åˆ»åº¦)', fontsize=12)
        ax.set_title('Criticality Matrix (è‡¨ç•Œåº¦ãƒãƒˆãƒªã‚¯ã‚¹)', fontsize=14)
        ax.grid(True, alpha=0.3)

        # ã‚«ãƒ©ãƒ¼ãƒãƒ¼
        cbar = plt.colorbar(scatter)
        cbar.set_label('Criticality (è‡¨ç•Œåº¦)', fontsize=10)

        return fig

# å®Ÿä½¿ç”¨ä¾‹
ca = CriticalityAnalysis(analysis_df)

print("=== è‡¨ç•Œåº¦è§£æçµæœ ===")
result = ca.data[['Component', 'Criticality', 'Criticality Rank']]
result = result.sort_values('Criticality', ascending=False)
print(result.to_string(index=False))

# ãƒ©ãƒ³ã‚¯åˆ¥ã®çµ±è¨ˆ
print("\n=== è‡¨ç•Œåº¦ãƒ©ãƒ³ã‚¯åˆ¥çµ±è¨ˆ ===")
rank_stats = ca.data['Criticality Rank'].value_counts().sort_index()
print(rank_stats)

# Criticalé …ç›®ã®è©³ç´°
critical_items = ca.get_critical_items('Critical')
if len(critical_items) > 0:
    print(f"\nâš ï¸  Criticalé …ç›®ï¼ˆæœ€å„ªå…ˆå¯¾ç­–ï¼‰: {len(critical_items)}ä»¶")
    print(critical_items[['Component', 'Failure Mode', 'Criticality']].to_string(index=False))

# å‡ºåŠ›ä¾‹:
# === è‡¨ç•Œåº¦è§£æçµæœ ===
# Component        Criticality  Criticality Rank
# åœ§åŠ›å®‰å…¨å¼            1.60            Low
# æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼          1.08            Low
# å†·å´æ°´ãƒãƒ³ãƒ—          0.64            Low
#
# === è‡¨ç•Œåº¦ãƒ©ãƒ³ã‚¯åˆ¥çµ±è¨ˆ ===
# Low         3
# Medium      0
# High        0
# Critical    0
</code></pre>

        <h2>3.2 æ•…éšœã®æœ¨è§£æï¼ˆFTA: Fault Tree Analysisï¼‰</h2>

        <p>
            æ•…éšœã®æœ¨è§£æï¼ˆFTAï¼‰ã¯ã€æœ›ã¾ã—ããªã„äº‹è±¡ï¼ˆãƒˆãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã‹ã‚‰ã€
            ãã®åŸå› ã¨ãªã‚‹åŸºæœ¬äº‹è±¡ã¾ã§ã‚’è«–ç†ã‚²ãƒ¼ãƒˆï¼ˆAND/ORï¼‰ã§çµã‚“ã§æœ¨æ§‹é€ ã§è¡¨ç¾ã—ã¾ã™ã€‚
            ã“ã‚Œã«ã‚ˆã‚Šã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ä¿¡é ¼æ€§ã‚’å®šé‡çš„ã«è©•ä¾¡ã§ãã¾ã™ã€‚
        </p>

        <h3>3.2.1 æ•…éšœã®æœ¨æ§‹ç¯‰</h3>

        <pre><code class="language-python"># Example 3: Fault Tree Construction
from dataclasses import dataclass
from typing import Optional, List
from enum import Enum

class GateType(Enum):
    """è«–ç†ã‚²ãƒ¼ãƒˆã®ç¨®é¡"""
    AND = "AND"  # ã™ã¹ã¦ã®å…¥åŠ›ãŒçœŸã®æ™‚ã«çœŸ
    OR = "OR"    # å°‘ãªãã¨ã‚‚1ã¤ã®å…¥åŠ›ãŒçœŸã®æ™‚ã«çœŸ

@dataclass
class FaultTreeNode:
    """æ•…éšœã®æœ¨ã®ãƒãƒ¼ãƒ‰"""
    name: str
    probability: float = 0.0  # æ•…éšœç¢ºç‡
    gate_type: Optional[GateType] = None
    children: List['FaultTreeNode'] = None

    def __post_init__(self):
        if self.children is None:
            self.children = []

class FaultTree:
    """æ•…éšœã®æœ¨è§£æï¼ˆFTAï¼‰ã‚·ã‚¹ãƒ†ãƒ """

    def __init__(self, top_event: str):
        self.root = FaultTreeNode(name=top_event)

    def add_gate(self, parent_name: str, gate_type: GateType,
                 children: List[tuple]):
        """è«–ç†ã‚²ãƒ¼ãƒˆã‚’è¿½åŠ 

        Args:
            parent_name: è¦ªãƒãƒ¼ãƒ‰å
            gate_type: ã‚²ãƒ¼ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆAND/ORï¼‰
            children: [(å­ãƒãƒ¼ãƒ‰å, æ•…éšœç¢ºç‡), ...]
        """
        parent = self._find_node(self.root, parent_name)
        if parent is None:
            raise ValueError(f"Node '{parent_name}' not found")

        parent.gate_type = gate_type
        for child_name, prob in children:
            child_node = FaultTreeNode(name=child_name, probability=prob)
            parent.children.append(child_node)

    def _find_node(self, node: FaultTreeNode, name: str) -> Optional[FaultTreeNode]:
        """ãƒãƒ¼ãƒ‰ã‚’åå‰ã§æ¤œç´¢"""
        if node.name == name:
            return node
        for child in node.children:
            result = self._find_node(child, name)
            if result:
                return result
        return None

    def calculate_top_event_probability(self) -> float:
        """ãƒˆãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºç”Ÿç¢ºç‡ã‚’è¨ˆç®—"""
        return self._calculate_node_probability(self.root)

    def _calculate_node_probability(self, node: FaultTreeNode) -> float:
        """ãƒãƒ¼ãƒ‰ã®æ•…éšœç¢ºç‡ã‚’å†å¸°çš„ã«è¨ˆç®—"""
        # åŸºæœ¬äº‹è±¡ï¼ˆãƒªãƒ¼ãƒ•ãƒãƒ¼ãƒ‰ï¼‰ã®å ´åˆ
        if not node.children:
            return node.probability

        # å­ãƒãƒ¼ãƒ‰ã®ç¢ºç‡ã‚’è¨ˆç®—
        child_probs = [self._calculate_node_probability(child)
                      for child in node.children]

        # ã‚²ãƒ¼ãƒˆã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦è¨ˆç®—
        if node.gate_type == GateType.AND:
            # ANDã‚²ãƒ¼ãƒˆ: ã™ã¹ã¦ãŒæ•…éšœã™ã‚‹ç¢ºç‡
            node.probability = np.prod(child_probs)
        elif node.gate_type == GateType.OR:
            # ORã‚²ãƒ¼ãƒˆ: å°‘ãªãã¨ã‚‚1ã¤ãŒæ•…éšœã™ã‚‹ç¢ºç‡
            # P(AâˆªB) = 1 - P(A'âˆ©B') = 1 - (1-P(A))(1-P(B))
            node.probability = 1 - np.prod([1 - p for p in child_probs])

        return node.probability

    def print_tree(self, node: Optional[FaultTreeNode] = None,
                   level: int = 0):
        """æ•…éšœã®æœ¨ã‚’è¡¨ç¤º"""
        if node is None:
            node = self.root

        indent = "  " * level
        gate_str = f" [{node.gate_type.value}]" if node.gate_type else ""
        prob_str = f" (P={node.probability:.4f})" if node.probability > 0 else ""

        print(f"{indent}{node.name}{gate_str}{prob_str}")

        for child in node.children:
            self.print_tree(child, level + 1)

# å®Ÿä½¿ç”¨ä¾‹ï¼šåå¿œå™¨éåœ§äº‹æ•…ã®æ•…éšœã®æœ¨
ft = FaultTree(top_event="åå¿œå™¨éåœ§äº‹æ•…")

# ãƒ¬ãƒ™ãƒ«1: éåœ§ã®ç›´æ¥åŸå› ï¼ˆORã‚²ãƒ¼ãƒˆï¼‰
ft.add_gate(
    parent_name="åå¿œå™¨éåœ§äº‹æ•…",
    gate_type=GateType.OR,
    children=[
        ("åå¿œæš´èµ°", 0.0),
        ("åœ§åŠ›åˆ¶å¾¡ç³»æ•…éšœ", 0.0),
        ("å®‰å…¨å¼ä½œå‹•ä¸è‰¯", 0.002)  # å¹´é–“æ•…éšœç¢ºç‡0.2%
    ]
)

# ãƒ¬ãƒ™ãƒ«2: åå¿œæš´èµ°ã®åŸå› ï¼ˆORã‚²ãƒ¼ãƒˆï¼‰
ft.add_gate(
    parent_name="åå¿œæš´èµ°",
    gate_type=GateType.OR,
    children=[
        ("æ¸©åº¦åˆ¶å¾¡å¤±æ•—", 0.0),
        ("åŸæ–™éå‰°æŠ•å…¥", 0.001)
    ]
)

# ãƒ¬ãƒ™ãƒ«3: æ¸©åº¦åˆ¶å¾¡å¤±æ•—ã®åŸå› ï¼ˆANDã‚²ãƒ¼ãƒˆ - ã™ã¹ã¦åŒæ™‚ã«ç™ºç”Ÿï¼‰
ft.add_gate(
    parent_name="æ¸©åº¦åˆ¶å¾¡å¤±æ•—",
    gate_type=GateType.AND,
    children=[
        ("å†·å´ç³»æ•…éšœ", 0.01),      # å¹´é–“1%
        ("æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼æ•…éšœ", 0.005)  # å¹´é–“0.5%
    ]
)

# ãƒ¬ãƒ™ãƒ«3: åœ§åŠ›åˆ¶å¾¡ç³»æ•…éšœã®åŸå› ï¼ˆORã‚²ãƒ¼ãƒˆï¼‰
ft.add_gate(
    parent_name="åœ§åŠ›åˆ¶å¾¡ç³»æ•…éšœ",
    gate_type=GateType.OR,
    children=[
        ("åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼æ•…éšœ", 0.003),
        ("åˆ¶å¾¡å¼æ•…éšœ", 0.004)
    ]
)

# ãƒˆãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆç¢ºç‡ã®è¨ˆç®—
top_prob = ft.calculate_top_event_probability()

print("=== æ•…éšœã®æœ¨è§£æçµæœ ===\n")
ft.print_tree()
print(f"\nã€ãƒˆãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿç¢ºç‡ã€‘")
print(f"åå¿œå™¨éåœ§äº‹æ•…: {top_prob:.6f} (å¹´é–“{top_prob*100:.4f}%)")
print(f"æœŸå¾…ç™ºç”Ÿé »åº¦: {1/top_prob:.1f}å¹´ã«1å›" if top_prob > 0 else "")

# å‡ºåŠ›ä¾‹:
# === æ•…éšœã®æœ¨è§£æçµæœ ===
#
# åå¿œå™¨éåœ§äº‹æ•… [OR] (P=0.0090)
#   åå¿œæš´èµ° [OR] (P=0.0010)
#     æ¸©åº¦åˆ¶å¾¡å¤±æ•— [AND] (P=0.0001)
#       å†·å´ç³»æ•…éšœ (P=0.0100)
#       æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼æ•…éšœ (P=0.0050)
#     åŸæ–™éå‰°æŠ•å…¥ (P=0.0010)
#   åœ§åŠ›åˆ¶å¾¡ç³»æ•…éšœ [OR] (P=0.0070)
#     åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼æ•…éšœ (P=0.0030)
#     åˆ¶å¾¡å¼æ•…éšœ (P=0.0040)
#   å®‰å…¨å¼ä½œå‹•ä¸è‰¯ (P=0.0020)
#
# ã€ãƒˆãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿç¢ºç‡ã€‘
# åå¿œå™¨éåœ§äº‹æ•…: 0.009000 (å¹´é–“0.9000%)
# æœŸå¾…ç™ºç”Ÿé »åº¦: 111.1å¹´ã«1å›
</code></pre>

        <h3>3.2.2 æœ€å°ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆè§£æ</h3>

        <p>
            æœ€å°ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆï¼ˆMinimal Cut Setï¼‰ã¯ã€åŒæ™‚ã«æ•…éšœã™ã‚‹ã¨ãƒˆãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã™ã‚‹
            åŸºæœ¬äº‹è±¡ã®æœ€å°çµ„åˆã›ã§ã™ã€‚ã“ã‚Œã‚’ç‰¹å®šã™ã‚‹ã“ã¨ã§ã€æœ€ã‚‚é‡è¦ãªæ•…éšœçµŒè·¯ã‚’æŠŠæ¡ã§ãã¾ã™ã€‚
        </p>

        <pre><code class="language-python"># Example 4: Minimal Cut Set Analysis
from itertools import combinations

class MinimalCutSetAnalyzer:
    """æœ€å°ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆè§£æ

    ãƒˆãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆã‚’å¼•ãèµ·ã“ã™åŸºæœ¬äº‹è±¡ã®æœ€å°çµ„åˆã›ã‚’å°å‡º
    """

    def __init__(self, fault_tree: FaultTree):
        self.fault_tree = fault_tree
        self.minimal_cut_sets = []

    def find_minimal_cut_sets(self) -> List[List[str]]:
        """æœ€å°ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆã‚’å°å‡º"""
        self.minimal_cut_sets = []
        self._traverse_tree(self.fault_tree.root, [])

        # æœ€å°æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆä»–ã®ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆã®éƒ¨åˆ†é›†åˆã‚’é™¤å¤–ï¼‰
        self.minimal_cut_sets = self._remove_supersets(self.minimal_cut_sets)

        return self.minimal_cut_sets

    def _traverse_tree(self, node: FaultTreeNode, current_path: List[str]):
        """æ•…éšœã®æœ¨ã‚’èµ°æŸ»ã—ã¦ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆã‚’æŠ½å‡º"""
        # ãƒªãƒ¼ãƒ•ãƒãƒ¼ãƒ‰ï¼ˆåŸºæœ¬äº‹è±¡ï¼‰ã«åˆ°é”
        if not node.children:
            self.minimal_cut_sets.append(current_path + [node.name])
            return

        if node.gate_type == GateType.AND:
            # ANDã‚²ãƒ¼ãƒˆ: ã™ã¹ã¦ã®å­ã‚’åŒã˜ãƒ‘ã‚¹ã«è¿½åŠ 
            new_path = current_path.copy()
            for child in node.children:
                if not child.children:  # åŸºæœ¬äº‹è±¡
                    new_path.append(child.name)
                else:
                    self._traverse_tree(child, new_path)

            # ã™ã¹ã¦åŸºæœ¬äº‹è±¡ã®å ´åˆ
            if all(not child.children for child in node.children):
                self.minimal_cut_sets.append(new_path)

        elif node.gate_type == GateType.OR:
            # ORã‚²ãƒ¼ãƒˆ: å„å­ã‚’å€‹åˆ¥ã®ãƒ‘ã‚¹ã¨ã—ã¦å±•é–‹
            for child in node.children:
                self._traverse_tree(child, current_path.copy())

    def _remove_supersets(self, cut_sets: List[List[str]]) -> List[List[str]]:
        """æœ€å°ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆä»¥å¤–ï¼ˆä¸Šä½é›†åˆï¼‰ã‚’é™¤å¤–"""
        minimal = []
        sorted_sets = sorted(cut_sets, key=len)

        for cs in sorted_sets:
            cs_set = set(cs)
            is_minimal = True

            for existing in minimal:
                if set(existing).issubset(cs_set):
                    is_minimal = False
                    break

            if is_minimal:
                minimal.append(cs)

        return minimal

    def calculate_cut_set_probabilities(self) -> pd.DataFrame:
        """å„ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆã®ç™ºç”Ÿç¢ºç‡ã‚’è¨ˆç®—"""
        results = []

        for i, cut_set in enumerate(self.minimal_cut_sets, 1):
            # ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆå†…ã®åŸºæœ¬äº‹è±¡ã®ç¢ºç‡ã‚’å–å¾—
            probabilities = []
            for event_name in cut_set:
                node = self.fault_tree._find_node(
                    self.fault_tree.root, event_name
                )
                if node:
                    probabilities.append(node.probability)

            # ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆç™ºç”Ÿç¢ºç‡ = ã™ã¹ã¦ã®äº‹è±¡ãŒåŒæ™‚ç™ºç”Ÿ
            cut_set_prob = np.prod(probabilities) if probabilities else 0

            results.append({
                'Cut Set ID': f"CS{i}",
                'Events': ' AND '.join(cut_set),
                'Order': len(cut_set),
                'Probability': cut_set_prob
            })

        df = pd.DataFrame(results)
        return df.sort_values('Probability', ascending=False)

    def get_importance_measures(self) -> pd.DataFrame:
        """å„åŸºæœ¬äº‹è±¡ã®é‡è¦åº¦æŒ‡æ¨™ã‚’è¨ˆç®—

        Fussell-Veselyé‡è¦åº¦: ãã®äº‹è±¡ã‚’å«ã‚€ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆã®å¯„ä¸åº¦
        """
        # ã™ã¹ã¦ã®åŸºæœ¬äº‹è±¡ã‚’æŠ½å‡º
        all_events = set()
        for cut_set in self.minimal_cut_sets:
            all_events.update(cut_set)

        # ãƒˆãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆç¢ºç‡
        top_prob = self.fault_tree.calculate_top_event_probability()

        results = []
        for event in all_events:
            # ã“ã®äº‹è±¡ã‚’å«ã‚€ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆã®ç¢ºç‡åˆè¨ˆ
            containing_prob = 0
            for cut_set in self.minimal_cut_sets:
                if event in cut_set:
                    probs = []
                    for e in cut_set:
                        node = self.fault_tree._find_node(
                            self.fault_tree.root, e
                        )
                        if node:
                            probs.append(node.probability)
                    containing_prob += np.prod(probs)

            # Fussell-Veselyé‡è¦åº¦
            fv_importance = containing_prob / top_prob if top_prob > 0 else 0

            results.append({
                'Event': event,
                'FV Importance': fv_importance,
                'Cut Sets': sum(1 for cs in self.minimal_cut_sets if event in cs)
            })

        df = pd.DataFrame(results)
        return df.sort_values('FV Importance', ascending=False)

# å®Ÿä½¿ç”¨ä¾‹
mcs_analyzer = MinimalCutSetAnalyzer(ft)
minimal_cuts = mcs_analyzer.find_minimal_cut_sets()

print("\n=== æœ€å°ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆ ===")
for i, cut_set in enumerate(minimal_cuts, 1):
    print(f"CS{i}: {' AND '.join(cut_set)}")

# ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆç¢ºç‡
cut_set_probs = mcs_analyzer.calculate_cut_set_probabilities()
print("\n=== ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆç™ºç”Ÿç¢ºç‡ ===")
print(cut_set_probs.to_string(index=False))

# é‡è¦åº¦è§£æ
importance = mcs_analyzer.get_importance_measures()
print("\n=== åŸºæœ¬äº‹è±¡ã®é‡è¦åº¦ ===")
print(importance.to_string(index=False))

# å‡ºåŠ›ä¾‹:
# === æœ€å°ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆ ===
# CS1: å†·å´ç³»æ•…éšœ AND æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼æ•…éšœ
# CS2: åŸæ–™éå‰°æŠ•å…¥
# CS3: åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼æ•…éšœ
# CS4: åˆ¶å¾¡å¼æ•…éšœ
# CS5: å®‰å…¨å¼ä½œå‹•ä¸è‰¯
#
# === ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆç™ºç”Ÿç¢ºç‡ ===
# Cut Set ID                         Events  Order  Probability
#       CS2                     åŸæ–™éå‰°æŠ•å…¥      1       0.0010
#       CS4                       åˆ¶å¾¡å¼æ•…éšœ      1       0.0004
#       CS3                   åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼æ•…éšœ      1       0.0003
#       CS5                   å®‰å…¨å¼ä½œå‹•ä¸è‰¯      1       0.0002
#       CS1  å†·å´ç³»æ•…éšœ AND æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼æ•…éšœ      2       0.0001
</code></pre>

        <h3>3.2.3 ä¿¡é ¼æ€§è¨ˆç®—ã®å®Ÿè£…</h3>

        <pre><code class="language-python"># Example 5: Advanced Reliability Calculation
import scipy.stats as stats

class ReliabilityCalculator:
    """ã‚·ã‚¹ãƒ†ãƒ ä¿¡é ¼æ€§è¨ˆç®—

    æ•…éšœç‡ã€MTBFã€ã‚¢ãƒ™ã‚¤ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚’è¨ˆç®—
    """

    @staticmethod
    def failure_rate_to_probability(lambda_rate: float, time: float) -> float:
        """æ•…éšœç‡ã‹ã‚‰æ•…éšœç¢ºç‡ã‚’è¨ˆç®—

        Args:
            lambda_rate: æ•…éšœç‡ [1/hour]
            time: æ™‚é–“ [hour]

        Returns:
            æ•…éšœç¢ºç‡ P(t) = 1 - exp(-Î»t)
        """
        return 1 - np.exp(-lambda_rate * time)

    @staticmethod
    def calculate_mtbf(failure_rate: float) -> float:
        """å¹³å‡æ•…éšœé–“éš”ï¼ˆMTBFï¼‰ã‚’è¨ˆç®—

        Args:
            failure_rate: æ•…éšœç‡ [1/hour]

        Returns:
            MTBF [hour]
        """
        return 1 / failure_rate if failure_rate > 0 else float('inf')

    @staticmethod
    def calculate_availability(mtbf: float, mttr: float) -> float:
        """ã‚¢ãƒ™ã‚¤ãƒ©ãƒ“ãƒªãƒ†ã‚£ï¼ˆç¨¼åƒç‡ï¼‰ã‚’è¨ˆç®—

        Args:
            mtbf: å¹³å‡æ•…éšœé–“éš” [hour]
            mttr: å¹³å‡ä¿®å¾©æ™‚é–“ [hour]

        Returns:
            Availability = MTBF / (MTBF + MTTR)
        """
        return mtbf / (mtbf + mttr)

    @staticmethod
    def weibull_reliability(t: float, beta: float, eta: float) -> float:
        """ãƒ¯ã‚¤ãƒ–ãƒ«åˆ†å¸ƒã«ã‚ˆã‚‹ä¿¡é ¼åº¦é–¢æ•°

        Args:
            t: æ™‚é–“
            beta: å½¢çŠ¶ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆÎ²<1:åˆæœŸæ•…éšœã€Î²=1:ãƒ©ãƒ³ãƒ€ãƒ æ•…éšœã€Î²>1:æ‘©è€—æ•…éšœï¼‰
            eta: å°ºåº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆç‰¹æ€§å¯¿å‘½ï¼‰

        Returns:
            R(t) = exp(-(t/Î·)^Î²)
        """
        return np.exp(-((t / eta) ** beta))

    @staticmethod
    def series_system_reliability(reliabilities: List[float]) -> float:
        """ç›´åˆ—ã‚·ã‚¹ãƒ†ãƒ ã®ä¿¡é ¼åº¦

        R_sys = R1 Ã— R2 Ã— ... Ã— Rn
        """
        return np.prod(reliabilities)

    @staticmethod
    def parallel_system_reliability(reliabilities: List[float]) -> float:
        """ä¸¦åˆ—ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå†—é•·åŒ–ï¼‰ã®ä¿¡é ¼åº¦

        R_sys = 1 - (1-R1) Ã— (1-R2) Ã— ... Ã— (1-Rn)
        """
        return 1 - np.prod([1 - r for r in reliabilities])

# å®Ÿä½¿ç”¨ä¾‹
rc = ReliabilityCalculator()

# æ©Ÿå™¨ä»•æ§˜
equipment = {
    'æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼': {'lambda': 5.7e-6, 'mttr': 4},    # æ•…éšœç‡ [1/h], MTTR [h]
    'åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼': {'lambda': 6.2e-6, 'mttr': 4},
    'åˆ¶å¾¡å¼': {'lambda': 3.8e-6, 'mttr': 8},
    'å†·å´ãƒãƒ³ãƒ—': {'lambda': 1.2e-5, 'mttr': 12}
}

print("=== æ©Ÿå™¨ä¿¡é ¼æ€§è§£æï¼ˆ1å¹´é–“é‹è»¢ï¼‰ ===\n")

operation_time = 8760  # 1å¹´ = 8760æ™‚é–“

for name, spec in equipment.items():
    lambda_rate = spec['lambda']
    mttr = spec['mttr']

    # å„ç¨®æŒ‡æ¨™è¨ˆç®—
    failure_prob = rc.failure_rate_to_probability(lambda_rate, operation_time)
    reliability = 1 - failure_prob
    mtbf = rc.calculate_mtbf(lambda_rate)
    availability = rc.calculate_availability(mtbf, mttr)

    print(f"ã€{name}ã€‘")
    print(f"  æ•…éšœç‡: {lambda_rate:.2e} [1/h]")
    print(f"  MTBF: {mtbf:.0f} h ({mtbf/8760:.1f} å¹´)")
    print(f"  MTTR: {mttr} h")
    print(f"  å¹´é–“æ•…éšœç¢ºç‡: {failure_prob*100:.2f}%")
    print(f"  å¹´é–“ä¿¡é ¼åº¦: {reliability*100:.2f}%")
    print(f"  ã‚¢ãƒ™ã‚¤ãƒ©ãƒ“ãƒªãƒ†ã‚£: {availability*100:.4f}%\n")

# ç›´åˆ—ã‚·ã‚¹ãƒ†ãƒ ï¼ˆã™ã¹ã¦æ­£å¸¸ã§ãªã„ã¨ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒä¸å¯ï¼‰
series_reliabilities = [
    1 - rc.failure_rate_to_probability(spec['lambda'], operation_time)
    for spec in equipment.values()
]
series_reliability = rc.series_system_reliability(series_reliabilities)

print(f"ã€ç›´åˆ—ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã€‘")
print(f"  ã‚·ã‚¹ãƒ†ãƒ å¹´é–“ä¿¡é ¼åº¦: {series_reliability*100:.2f}%")
print(f"  ã‚·ã‚¹ãƒ†ãƒ å¹´é–“æ•…éšœç¢ºç‡: {(1-series_reliability)*100:.2f}%")

# ä¸¦åˆ—ã‚·ã‚¹ãƒ†ãƒ ï¼ˆã‚»ãƒ³ã‚µãƒ¼ã‚’2é‡åŒ–ã—ãŸå ´åˆï¼‰
sensor_reliability = 1 - rc.failure_rate_to_probability(5.7e-6, operation_time)
redundant_reliability = rc.parallel_system_reliability([sensor_reliability, sensor_reliability])

print(f"\nã€æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼2é‡åŒ–ã®åŠ¹æœã€‘")
print(f"  å˜ç‹¬: {sensor_reliability*100:.2f}%")
print(f"  2é‡åŒ–: {redundant_reliability*100:.4f}%")
print(f"  ä¿¡é ¼åº¦å‘ä¸Š: {(redundant_reliability-sensor_reliability)*100:.4f}%")

# å‡ºåŠ›ä¾‹:
# === æ©Ÿå™¨ä¿¡é ¼æ€§è§£æï¼ˆ1å¹´é–“é‹è»¢ï¼‰ ===
#
# ã€æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã€‘
#   æ•…éšœç‡: 5.70e-06 [1/h]
#   MTBF: 175439 h (20.0 å¹´)
#   MTTR: 4 h
#   å¹´é–“æ•…éšœç¢ºç‡: 4.90%
#   å¹´é–“ä¿¡é ¼åº¦: 95.10%
#   ã‚¢ãƒ™ã‚¤ãƒ©ãƒ“ãƒªãƒ†ã‚£: 99.9977%
</code></pre>

        <h3>3.2.4 å…±é€šåŸå› æ•…éšœè§£æ</h3>

        <pre><code class="language-python"># Example 6: Common Cause Failure Analysis
class CommonCauseFailureAnalysis:
    """å…±é€šåŸå› æ•…éšœï¼ˆCCFï¼‰è§£æ

    å†—é•·ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹å…±é€šåŸå› ã«ã‚ˆã‚‹åŒæ™‚æ•…éšœã‚’è©•ä¾¡
    """

    def __init__(self):
        self.beta_factors = {}  # Î²å› å­ï¼ˆCCFç™ºç”Ÿå‰²åˆï¼‰

    def set_beta_factor(self, component: str, beta: float):
        """Î²å› å­ã‚’è¨­å®š

        Args:
            component: å¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            beta: Î²å› å­ï¼ˆ0-1ã€å…¸å‹çš„ã«ã¯0.05-0.15ï¼‰
        """
        if not 0 <= beta <= 1:
            raise ValueError("Î²å› å­ã¯0-1ã®ç¯„å›²ã§æŒ‡å®šã—ã¦ãã ã•ã„")
        self.beta_factors[component] = beta

    def calculate_redundant_reliability_with_ccf(
        self,
        component: str,
        base_reliability: float,
        n_redundant: int = 2
    ) -> float:
        """CCFã‚’è€ƒæ…®ã—ãŸå†—é•·ã‚·ã‚¹ãƒ†ãƒ ã®ä¿¡é ¼åº¦

        Args:
            component: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå
            base_reliability: å˜ä½“ã®ä¿¡é ¼åº¦
            n_redundant: å†—é•·æ•°

        Returns:
            CCFè€ƒæ…®å¾Œã®ã‚·ã‚¹ãƒ†ãƒ ä¿¡é ¼åº¦
        """
        beta = self.beta_factors.get(component, 0)

        # ç‹¬ç«‹æ•…éšœç¢ºç‡
        independent_failure = (1 - base_reliability) * (1 - beta)

        # CCFæ•…éšœç¢ºç‡
        ccf_failure = (1 - base_reliability) * beta

        # å†—é•·ã‚·ã‚¹ãƒ†ãƒ ã®ä¿¡é ¼åº¦
        # R_sys = (ç‹¬ç«‹æ•…éšœã‚’è€ƒæ…®ã—ãŸå†—é•·) Ã— (CCFéç™ºç”Ÿ)
        independent_reliability = 1 - (independent_failure ** n_redundant)
        ccf_reliability = 1 - ccf_failure

        total_reliability = independent_reliability * ccf_reliability

        return total_reliability

    def compare_ccf_impact(
        self,
        component: str,
        base_reliability: float,
        n_redundant: int = 2
    ) -> Dict:
        """CCFã®å½±éŸ¿ã‚’æ¯”è¼ƒ

        Returns:
            CCFè€ƒæ…®å‰å¾Œã®ä¿¡é ¼åº¦æ¯”è¼ƒ
        """
        # CCFç„¡è¦–ã—ãŸå ´åˆã®å†—é•·åŒ–åŠ¹æœ
        without_ccf = 1 - ((1 - base_reliability) ** n_redundant)

        # CCFè€ƒæ…®ã—ãŸå ´åˆ
        with_ccf = self.calculate_redundant_reliability_with_ccf(
            component, base_reliability, n_redundant
        )

        # ä¿¡é ¼åº¦ä½ä¸‹
        degradation = without_ccf - with_ccf

        return {
            'Component': component,
            'Base Reliability': base_reliability,
            'Redundancy': n_redundant,
            'Beta Factor': self.beta_factors.get(component, 0),
            'Without CCF': without_ccf,
            'With CCF': with_ccf,
            'Degradation': degradation,
            'Degradation %': (degradation / without_ccf * 100) if without_ccf > 0 else 0
        }

# å®Ÿä½¿ç”¨ä¾‹
ccf = CommonCauseFailureAnalysis()

# å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®Î²å› å­è¨­å®šï¼ˆç”£æ¥­ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãå…¸å‹å€¤ï¼‰
ccf.set_beta_factor('æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼', beta=0.10)  # 10%ãŒCCF
ccf.set_beta_factor('åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼', beta=0.12)
ccf.set_beta_factor('åˆ¶å¾¡å¼', beta=0.08)

# å˜ä½“ä¿¡é ¼åº¦ï¼ˆ1å¹´é–“ï¼‰
base_reliabilities = {
    'æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼': 0.95,
    'åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼': 0.95,
    'åˆ¶å¾¡å¼': 0.97
}

print("=== å…±é€šåŸå› æ•…éšœï¼ˆCCFï¼‰ã®å½±éŸ¿è©•ä¾¡ ===\n")

results = []
for component, base_rel in base_reliabilities.items():
    comparison = ccf.compare_ccf_impact(component, base_rel, n_redundant=2)
    results.append(comparison)

    print(f"ã€{component}ã€‘ï¼ˆ2é‡åŒ–ï¼‰")
    print(f"  å˜ä½“ä¿¡é ¼åº¦: {comparison['Base Reliability']*100:.2f}%")
    print(f"  Î²å› å­: {comparison['Beta Factor']:.2f}")
    print(f"  CCFç„¡è¦–: {comparison['Without CCF']*100:.4f}%")
    print(f"  CCFè€ƒæ…®: {comparison['With CCF']*100:.4f}%")
    print(f"  ä¿¡é ¼åº¦ä½ä¸‹: {comparison['Degradation']*100:.4f}% "
          f"({comparison['Degradation %']:.2f}%ä½ä¸‹)\n")

# çµæœã‚’DataFrameã§æ¯”è¼ƒ
df_ccf = pd.DataFrame(results)
print("=== CCFå½±éŸ¿ã¾ã¨ã‚ ===")
print(df_ccf[['Component', 'Beta Factor', 'Without CCF', 'With CCF', 'Degradation %']])

# å‡ºåŠ›ä¾‹:
# === å…±é€šåŸå› æ•…éšœï¼ˆCCFï¼‰ã®å½±éŸ¿è©•ä¾¡ ===
#
# ã€æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã€‘ï¼ˆ2é‡åŒ–ï¼‰
#   å˜ä½“ä¿¡é ¼åº¦: 95.00%
#   Î²å› å­: 0.10
#   CCFç„¡è¦–: 99.7500%
#   CCFè€ƒæ…®: 99.2525%
#   ä¿¡é ¼åº¦ä½ä¸‹: 0.4975% (0.50%ä½ä¸‹)
</code></pre>

        <h2>3.3 FMEA/FTAçµ±åˆåˆ†æ</h2>

        <p>
            FMEAã¨FTAã‚’çµ±åˆã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¬ãƒ™ãƒ«ã‹ã‚‰ã‚·ã‚¹ãƒ†ãƒ ãƒ¬ãƒ™ãƒ«ã¾ã§ã®
            åŒ…æ‹¬çš„ãªå®‰å…¨æ€§è©•ä¾¡ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚FMEAã§ç‰¹å®šã—ãŸé«˜ãƒªã‚¹ã‚¯é …ç›®ã‚’FTAã§å®šé‡è©•ä¾¡ã—ã¾ã™ã€‚
        </p>

        <pre><code class="language-python"># Example 7: Integrated FMEA/FTA Analysis System
class IntegratedSafetyAnalysis:
    """FMEA/FTAçµ±åˆå®‰å…¨æ€§è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 

    FMEAã§ç‰¹å®šã—ãŸãƒªã‚¹ã‚¯ã‚’FTAã§å®šé‡è©•ä¾¡ã—ã€æœ€é©ãªå¯¾ç­–ã‚’ææ¡ˆ
    """

    def __init__(self):
        self.fmea = FMEA()
        self.fault_trees = {}
        self.mitigation_strategies = []

    def conduct_fmea(self, components: List[Dict]):
        """FMEAå®Ÿæ–½

        Args:
            components: [{component, failure_mode, ...}, ...]
        """
        for comp in components:
            self.fmea.add_failure_mode(**comp)

    def build_fault_tree_for_high_risk(self, threshold: int = 200):
        """é«˜ãƒªã‚¹ã‚¯é …ç›®ã«å¯¾ã—ã¦æ•…éšœã®æœ¨ã‚’æ§‹ç¯‰"""
        high_risk_items = self.fmea.get_high_risk_items(threshold)

        for _, item in high_risk_items.iterrows():
            component = item['Component']
            failure_mode = item['Failure Mode']

            # æ•…éšœã®æœ¨ã‚’æ§‹ç¯‰ï¼ˆç°¡ç•¥åŒ–ï¼‰
            ft_name = f"{component}_{failure_mode}"
            self.fault_trees[ft_name] = {
                'component': component,
                'failure_mode': failure_mode,
                'rpn': item['RPN'],
                'severity': item['Severity'],
                'occurrence': item['Occurrence'],
                'detection': item['Detection']
            }

    def generate_mitigation_strategies(self) -> pd.DataFrame:
        """ãƒªã‚¹ã‚¯è»½æ¸›ç­–ã‚’ç”Ÿæˆ

        RPNå€¤ã«åŸºã¥ã„ã¦å„ªå…ˆåº¦ä»˜ã‘ã•ã‚ŒãŸå¯¾ç­–ã‚’ææ¡ˆ
        """
        analysis_df = self.fmea.get_analysis()

        strategies = []
        for _, row in analysis_df.iterrows():
            rpn = row['RPN']
            severity = row['Severity']
            occurrence = row['Occurrence']
            detection = row['Detection']

            # å¯¾ç­–ã®å„ªå…ˆé †ä½æ±ºå®š
            if severity >= 8:
                priority = 'Critical'
                action = 'å³åº§ã®è¨­è¨ˆå¤‰æ›´ãƒ»å†—é•·åŒ–'
            elif rpn >= 200:
                priority = 'High'
                action = 'æ¤œå‡ºæ€§å‘ä¸Šãƒ»äºˆé˜²ä¿å…¨å¼·åŒ–'
            elif rpn >= 100:
                priority = 'Medium'
                action = 'å®šæœŸç›£è¦–ãƒ»æ‰‹é †æ”¹å–„'
            else:
                priority = 'Low'
                action = 'ç¾çŠ¶ç¶­æŒãƒ»å®šæœŸãƒ¬ãƒ“ãƒ¥ãƒ¼'

            # å…·ä½“çš„ãªå¯¾ç­–ææ¡ˆ
            specific_actions = []
            if occurrence >= 5:
                specific_actions.append('ç™ºç”Ÿé »åº¦ä½æ¸›: äºˆé˜²ä¿å…¨ã€éƒ¨å“äº¤æ›ã‚µã‚¤ã‚¯ãƒ«çŸ­ç¸®')
            if detection >= 7:
                specific_actions.append('æ¤œå‡ºæ€§å‘ä¸Š: ã‚»ãƒ³ã‚µãƒ¼è¿½åŠ ã€ã‚¢ãƒ©ãƒ¼ãƒ è¨­å®š')
            if severity >= 8:
                specific_actions.append('æ·±åˆ»åº¦ä½æ¸›: å†—é•·åŒ–ã€ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•è¨­è¨ˆ')

            strategies.append({
                'Component': row['Component'],
                'Failure Mode': row['Failure Mode'],
                'Current RPN': rpn,
                'Priority': priority,
                'Recommended Action': action,
                'Specific Measures': '; '.join(specific_actions)
            })

        df = pd.DataFrame(strategies)
        return df.sort_values('Current RPN', ascending=False)

    def calculate_risk_reduction(
        self,
        component: str,
        new_occurrence: int = None,
        new_detection: int = None
    ) -> Dict:
        """å¯¾ç­–å®Ÿæ–½å¾Œã®ãƒªã‚¹ã‚¯ä½æ¸›åŠ¹æœã‚’è¨ˆç®—

        Args:
            component: å¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            new_occurrence: å¯¾ç­–å¾Œã®ç™ºç”Ÿåº¦
            new_detection: å¯¾ç­–å¾Œã®æ¤œå‡ºåº¦

        Returns:
            ãƒªã‚¹ã‚¯ä½æ¸›åŠ¹æœã®åˆ†æçµæœ
        """
        # ç¾åœ¨ã®å€¤ã‚’å–å¾—
        analysis_df = self.fmea.get_analysis()
        current = analysis_df[analysis_df['Component'] == component].iloc[0]

        current_rpn = current['RPN']
        severity = current['Severity']
        current_occ = current['Occurrence']
        current_det = current['Detection']

        # æ–°ã—ã„RPNè¨ˆç®—
        new_occ = new_occurrence if new_occurrence is not None else current_occ
        new_det = new_detection if new_detection is not None else current_det
        new_rpn = severity * new_occ * new_det

        # ãƒªã‚¹ã‚¯ä½æ¸›ç‡
        reduction = ((current_rpn - new_rpn) / current_rpn * 100) if current_rpn > 0 else 0

        return {
            'Component': component,
            'Current RPN': current_rpn,
            'New RPN': new_rpn,
            'Reduction': reduction,
            'Current O-D': f"{current_occ}-{current_det}",
            'New O-D': f"{new_occ}-{new_det}",
            'Status': 'Improved' if new_rpn < current_rpn else 'No Change'
        }

    def generate_safety_report(self) -> str:
        """ç·åˆå®‰å…¨æ€§è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ"""
        analysis_df = self.fmea.get_analysis()
        strategies_df = self.generate_mitigation_strategies()

        report = []
        report.append("=" * 60)
        report.append("ç·åˆå®‰å…¨æ€§è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ")
        report.append("=" * 60)
        report.append("")

        # ã‚µãƒãƒªãƒ¼çµ±è¨ˆ
        report.append("ã€å…¨ä½“çµ±è¨ˆã€‘")
        report.append(f"  è©•ä¾¡é …ç›®æ•°: {len(analysis_df)}")
        report.append(f"  å¹³å‡RPN: {analysis_df['RPN'].mean():.1f}")
        report.append(f"  æœ€å¤§RPN: {analysis_df['RPN'].max()}")
        report.append(f"  é«˜ãƒªã‚¹ã‚¯é …ç›®ï¼ˆRPNâ‰¥200ï¼‰: {len(analysis_df[analysis_df['RPN'] >= 200])}")
        report.append("")

        # å„ªå…ˆåº¦åˆ¥å¯¾ç­–ä»¶æ•°
        report.append("ã€å„ªå…ˆåº¦åˆ¥å¯¾ç­–ä»¶æ•°ã€‘")
        priority_counts = strategies_df['Priority'].value_counts()
        for priority in ['Critical', 'High', 'Medium', 'Low']:
            count = priority_counts.get(priority, 0)
            report.append(f"  {priority}: {count}ä»¶")
        report.append("")

        # Criticalé …ç›®ã®è©³ç´°
        critical = strategies_df[strategies_df['Priority'] == 'Critical']
        if len(critical) > 0:
            report.append("ã€Criticalé …ç›®ï¼ˆå³å¯¾å¿œå¿…è¦ï¼‰ã€‘")
            for _, item in critical.iterrows():
                report.append(f"  âš ï¸  {item['Component']} - {item['Failure Mode']}")
                report.append(f"      RPN: {item['Current RPN']}")
                report.append(f"      å¯¾ç­–: {item['Recommended Action']}")
            report.append("")

        return "\n".join(report)

# å®Ÿä½¿ç”¨ä¾‹ï¼šåå¿œå™¨ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆè§£æ
isa = IntegratedSafetyAnalysis()

# FMEAå®Ÿæ–½ï¼ˆè¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
components_data = [
    {
        'component': 'æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼',
        'failure_mode': 'ã‚»ãƒ³ã‚µãƒ¼æ•…éšœï¼ˆé«˜æ¸©å´ï¼‰',
        'effects': 'åå¿œæš´èµ°ã€åœ§åŠ›ä¸Šæ˜‡',
        'causes': 'ã‚»ãƒ³ã‚µãƒ¼åŠ£åŒ–ã€é…ç·šæ–­ç·š',
        'severity': 9,
        'occurrence': 3,
        'detection': 4,
        'current_controls': 'å†—é•·ã‚»ãƒ³ã‚µãƒ¼ã€å®šæœŸæ ¡æ­£'
    },
    {
        'component': 'å†·å´æ°´ãƒãƒ³ãƒ—',
        'failure_mode': 'ãƒãƒ³ãƒ—åœæ­¢',
        'effects': 'åå¿œå™¨éç†±',
        'causes': 'ãƒ¢ãƒ¼ã‚¿ãƒ¼æ•…éšœã€è»¸å—æ‘©è€—',
        'severity': 8,
        'occurrence': 4,
        'detection': 2,
        'current_controls': 'æµé‡è¨ˆã€äºˆå‚™ãƒãƒ³ãƒ—'
    },
    {
        'component': 'åœ§åŠ›å®‰å…¨å¼',
        'failure_mode': 'ä½œå‹•ä¸è‰¯',
        'effects': 'éåœ§ç ´è£‚',
        'causes': 'å¼åº§å›ºç€',
        'severity': 10,
        'occurrence': 2,
        'detection': 8,
        'current_controls': 'å¹´æ¬¡ç‚¹æ¤œ'
    },
    {
        'component': 'åŸæ–™ä¾›çµ¦å¼',
        'failure_mode': 'å…¨é–‹å›ºç€',
        'effects': 'åŸæ–™éå‰°æŠ•å…¥',
        'causes': 'ã‚¢ã‚¯ãƒãƒ¥ã‚¨ãƒ¼ã‚¿æ•…éšœ',
        'severity': 7,
        'occurrence': 3,
        'detection': 5,
        'current_controls': 'æµé‡åˆ¶å¾¡'
    }
]

isa.conduct_fmea(components_data)

# è»½æ¸›ç­–ã®ç”Ÿæˆ
strategies = isa.generate_mitigation_strategies()
print("=== ãƒªã‚¹ã‚¯è»½æ¸›ç­– ===")
print(strategies[['Component', 'Current RPN', 'Priority', 'Recommended Action']].to_string(index=False))

# å¯¾ç­–åŠ¹æœã®äºˆæ¸¬
print("\n=== å¯¾ç­–åŠ¹æœã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ===")

# æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼: 3é‡åŒ–ã§æ¤œå‡ºåº¦ã‚’4â†’2ã«æ”¹å–„
temp_sensor_effect = isa.calculate_risk_reduction(
    'æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼',
    new_detection=2
)
print(f"ã€æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼3é‡åŒ–ã€‘")
print(f"  æ”¹å–„å‰RPN: {temp_sensor_effect['Current RPN']}")
print(f"  æ”¹å–„å¾ŒRPN: {temp_sensor_effect['New RPN']}")
print(f"  ãƒªã‚¹ã‚¯ä½æ¸›: {temp_sensor_effect['Reduction']:.1f}%")

# å†·å´æ°´ãƒãƒ³ãƒ—: äºˆé˜²ä¿å…¨ã§ç™ºç”Ÿåº¦ã‚’4â†’2ã«æ”¹å–„
pump_effect = isa.calculate_risk_reduction(
    'å†·å´æ°´ãƒãƒ³ãƒ—',
    new_occurrence=2
)
print(f"\nã€å†·å´æ°´ãƒãƒ³ãƒ—äºˆé˜²ä¿å…¨å¼·åŒ–ã€‘")
print(f"  æ”¹å–„å‰RPN: {pump_effect['Current RPN']}")
print(f"  æ”¹å–„å¾ŒRPN: {pump_effect['New RPN']}")
print(f"  ãƒªã‚¹ã‚¯ä½æ¸›: {pump_effect['Reduction']:.1f}%")

# ç·åˆãƒ¬ãƒãƒ¼ãƒˆ
print("\n" + isa.generate_safety_report())

# å‡ºåŠ›ä¾‹:
# === ãƒªã‚¹ã‚¯è»½æ¸›ç­– ===
# Component    Current RPN  Priority                  Recommended Action
# åœ§åŠ›å®‰å…¨å¼           160  Critical  å³åº§ã®è¨­è¨ˆå¤‰æ›´ãƒ»å†—é•·åŒ–
# æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼         108    Medium  å®šæœŸç›£è¦–ãƒ»æ‰‹é †æ”¹å–„
# åŸæ–™ä¾›çµ¦å¼          105    Medium  å®šæœŸç›£è¦–ãƒ»æ‰‹é †æ”¹å–„
# å†·å´æ°´ãƒãƒ³ãƒ—         64       Low  ç¾çŠ¶ç¶­æŒãƒ»å®šæœŸãƒ¬ãƒ“ãƒ¥ãƒ¼
</code></pre>

        <div class="learning-objectives">
            <h2>å­¦ç¿’ç›®æ¨™ã®ç¢ºèª</h2>
            <p>ã“ã®ç« ã‚’å®Œäº†ã™ã‚‹ã¨ã€ä»¥ä¸‹ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š</p>
            <ul>
                <li>âœ… FMEAã‚’å®Ÿè£…ã—ã€RPNã«ã‚ˆã‚‹ãƒªã‚¹ã‚¯è©•ä¾¡ãŒã§ãã‚‹</li>
                <li>âœ… è‡¨ç•Œåº¦è§£æã§æ•…éšœãƒ¢ãƒ¼ãƒ‰ã®é‡è¦åº¦ã‚’å®šé‡è©•ä¾¡ã§ãã‚‹</li>
                <li>âœ… æ•…éšœã®æœ¨ï¼ˆFTAï¼‰ã‚’æ§‹ç¯‰ã—ã€ãƒˆãƒƒãƒ—ã‚¤ãƒ™ãƒ³ãƒˆç¢ºç‡ã‚’è¨ˆç®—ã§ãã‚‹</li>
                <li>âœ… æœ€å°ã‚«ãƒƒãƒˆã‚»ãƒƒãƒˆã‚’å°å‡ºã—ã€é‡è¦ãªæ•…éšœçµŒè·¯ã‚’ç‰¹å®šã§ãã‚‹</li>
                <li>âœ… ä¿¡é ¼æ€§æŒ‡æ¨™ï¼ˆMTBFã€ã‚¢ãƒ™ã‚¤ãƒ©ãƒ“ãƒªãƒ†ã‚£ï¼‰ã‚’è¨ˆç®—ã§ãã‚‹</li>
                <li>âœ… å…±é€šåŸå› æ•…éšœï¼ˆCCFï¼‰ã‚’è€ƒæ…®ã—ãŸå†—é•·ã‚·ã‚¹ãƒ†ãƒ ã‚’è©•ä¾¡ã§ãã‚‹</li>
                <li>âœ… FMEA/FTAã‚’çµ±åˆã—ãŸä½“ç³»çš„å®‰å…¨æ€§è©•ä¾¡ãŒã§ãã‚‹</li>
            </ul>
        </div>

        <div class="navigation">
            <a href="chapter-2.html" class="nav-button">â† ç¬¬2ç« ï¼šå®šé‡çš„ãƒªã‚¹ã‚¯è©•ä¾¡</a>
            <a href="chapter-4.html" class="nav-button">ç¬¬4ç« ï¼šå®‰å…¨æ€§ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚° â†’</a>
        </div>

        <div style="margin-top: 3rem; padding-top: 2rem; border-top: 2px solid var(--color-border); text-align: center; color: var(--color-text-light);">
            <p><a href="index.html">ãƒ—ãƒ­ã‚»ã‚¹å®‰å…¨æ€§è©•ä¾¡å…¥é–€ ç›®æ¬¡ã«æˆ»ã‚‹</a></p>
            <p style="margin-top: 1rem;">
                <a href="../../index.html">PIå®Ÿè·µæŠ€è¡“ãƒˆãƒƒãƒ—</a> |
                <a href="../../../../index.html">Homeã«æˆ»ã‚‹</a>
            </p>
        </div>
    </div>
</body>
</html>
