<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ç¬¬1ç« ï¼šãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®åŸºç¤ - ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³æ§‹ç¯‰å…¥é–€ã‚·ãƒªãƒ¼ã‚º">
    <title>ç¬¬1ç« ï¼šãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®åŸºç¤ - ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³æ§‹ç¯‰å…¥é–€ | PI Terakoya</title>

        <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.8; color: #333; background: #f5f5f5;
        }
        header {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; padding: 2rem 1rem; text-align: center;
        }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        .subtitle { opacity: 0.9; font-size: 1.1rem; }
        .container { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
        .back-link {
            display: inline-block; margin-bottom: 2rem; padding: 0.5rem 1rem;
            background: white; color: #11998e; text-decoration: none;
            border-radius: 6px; font-weight: 600;
        }
        .content-box {
            background: white; padding: 2rem; border-radius: 12px;
            margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h2 {
            color: #11998e; margin: 2rem 0 1rem 0;
            padding-bottom: 0.5rem; border-bottom: 3px solid #11998e;
        }
        h3 { color: #2c3e50; margin: 1.5rem 0 1rem 0; }
        h4 { color: #2c3e50; margin: 1rem 0 0.5rem 0; }
        p { margin-bottom: 1rem; }
        ul, ol { margin-left: 2rem; margin-bottom: 1rem; }
        li { margin-bottom: 0.5rem; }
        pre {
            background: #1e1e1e; color: #d4d4d4; padding: 1.5rem;
            border-radius: 8px; overflow-x: auto; margin: 1rem 0;
            border-left: 4px solid #11998e;
        }
        code {
            font-family: 'Courier New', monospace; font-size: 0.9rem;
        }
        .key-point {
            background: #e8f5e9; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #4caf50; margin: 1rem 0;
        }
        .tech-note {
            background: #e3f2fd; padding: 1rem; border-radius: 6px;
            border-left: 4px solid #2196f3; margin: 1rem 0;
        }
        .formula {
            background: #f0f7ff; padding: 1rem; border-radius: 6px;
            margin: 1rem 0; overflow-x: auto;
        }
        table {
            width: 100%; border-collapse: collapse; margin: 1rem 0;
        }
        th, td {
            border: 1px solid #ddd; padding: 0.75rem; text-align: left;
        }
        th {
            background: #11998e; color: white; font-weight: 600;
        }
        tr:nth-child(even) { background: #f9f9f9; }
        .nav-buttons {
            display: flex; justify-content: space-between; margin-top: 3rem;
        }
        .nav-buttons a {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white; text-decoration: none; border-radius: 6px;
            font-weight: 600;
        }
        footer {
            background: #2c3e50; color: white; text-align: center;
            padding: 2rem 1rem; margin-top: 4rem;
        }
        @media (max-width: 768px) {
            h1 { font-size: 1.6rem; }
            .container { padding: 0 0.5rem; }
            pre { padding: 1rem; }
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'strict' });
    </script>
</head>
<body>
    <header>
        <div class="container">
            <h1>ç¬¬1ç« ï¼šãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®åŸºç¤</h1>
            <p class="subtitle">ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®æ¦‚å¿µã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€çŠ¶æ…‹è¡¨ç¾ã®ç†è§£</p>
            <div class="meta">
                <span class="meta">ğŸ“– èª­äº†æ™‚é–“: 25-30åˆ†</span>
                <span class="meta">ğŸ“Š é›£æ˜“åº¦: ä¸Šç´š</span>
                <span class="meta">ğŸ’» ã‚³ãƒ¼ãƒ‰ä¾‹: 7å€‹</span>
            </div>
        </div>
    </header>

    <main class="container">

<div class="learning-objectives">
<h2>å­¦ç¿’ç›®æ¨™</h2>
<p>ã“ã®ç« ã‚’èª­ã‚€ã“ã¨ã§ã€ä»¥ä¸‹ã‚’ç¿’å¾—ã§ãã¾ã™ï¼š</p>
<ul>
<li>âœ… ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®æ¦‚å¿µã¨å®šç¾©ã‚’ç†è§£ã™ã‚‹</li>
<li>âœ… ãƒ‡ã‚¸ã‚¿ãƒ«ã‚·ãƒ£ãƒ‰ã‚¦ã€ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã€ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰ã®é•ã„ã‚’èª¬æ˜ã§ãã‚‹</li>
<li>âœ… ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆãŒã§ãã‚‹</li>
<li>âœ… çŠ¶æ…‹è¡¨ç¾ã¨ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã‚’è¨­è¨ˆã§ãã‚‹</li>
<li>âœ… ãƒ¢ãƒ‡ãƒ«å¿ å®Ÿåº¦ãƒ¬ãƒ™ãƒ«ï¼ˆL1-L5ï¼‰ã‚’ç†è§£ã—ã€é©åˆ‡ãªãƒ¬ãƒ™ãƒ«ã‚’é¸æŠã§ãã‚‹</li>
<li>âœ… Pythonã§ç°¡æ˜“ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
</ul>
</div>

<hr />

<h2>1.1 ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®æ¦‚å¿µã¨å®šç¾©</h2>

<h3>ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã¨ã¯ä½•ã‹</h3>

<p><strong>ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ï¼ˆDigital Twinï¼‰</strong>ã¨ã¯ã€ç‰©ç†ã‚·ã‚¹ãƒ†ãƒ ã®ä»®æƒ³ãƒ¬ãƒ—ãƒªã‚«ã§ã‚ã‚Šã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸã—ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€åˆ†æã€æœ€é©åŒ–ã‚’å¯èƒ½ã«ã™ã‚‹ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚</p>

<blockquote>
<p>ã€Œãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã¯ã€ç‰©ç†è³‡ç”£ã®ãƒ‡ã‚¸ã‚¿ãƒ«è¡¨ç¾ã§ã‚ã‚Šã€IoTã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã¨ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã‚’çµ±åˆã—ã€è³‡ç”£ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«å…¨ä½“ã«ã‚ãŸã£ã¦ç¶™ç¶šçš„ã«æ›´æ–°ã•ã‚Œã‚‹ã€‚ã€ - Gartner</p>
</blockquote>

<h3>ãƒ‡ã‚¸ã‚¿ãƒ«ã‚·ãƒ£ãƒ‰ã‚¦ vs ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ vs ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰</h3>

<table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</th>
<th>ä¸»ãªæ©Ÿèƒ½</th>
<th>ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ãƒ‡ã‚¸ã‚¿ãƒ«ã‚·ãƒ£ãƒ‰ã‚¦</strong></td>
<td>ç‰©ç† â†’ ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆä¸€æ–¹å‘ï¼‰</td>
<td>ç›£è¦–ã€å¯è¦–åŒ–ã€å±¥æ­´ãƒ‡ãƒ¼ã‚¿ä¿å­˜</td>
<td>ãƒ—ãƒ­ã‚»ã‚¹ãƒ­ã‚°ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</td>
</tr>
<tr>
<td><strong>ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³</strong></td>
<td>ç‰©ç† â‡„ ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆåŒæ–¹å‘ï¼‰</td>
<td>äºˆæ¸¬ã€æœ€é©åŒ–ã€åˆ¶å¾¡ã€What-ifåˆ†æ</td>
<td>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æœ€é©åŒ–ã€MPC</td>
</tr>
<tr>
<td><strong>ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰</strong></td>
<td>ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«å…¨ä½“ã®çµ±åˆ</td>
<td>è¨­è¨ˆ â†’ è£½é€  â†’ é‹ç”¨ã®ä¸€è²«æ€§</td>
<td>PLMçµ±åˆã€ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£</td>
</tr>
</tbody>
</table>

<h3>ãƒ—ãƒ­ã‚»ã‚¹ç”£æ¥­ã«ãŠã‘ã‚‹ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®ä¾¡å€¤</h3>

<ul>
<li><strong>é‹è»¢æœ€é©åŒ–</strong>: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æœ€é©é‹è»¢æ¡ä»¶ã‚’è¨ˆç®—ã—ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆå‰Šæ¸›</li>
<li><strong>äºˆçŸ¥ä¿å…¨</strong>: æ•…éšœäºˆæ¸¬ã«ã‚ˆã‚Šè¨ˆç”»çš„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã€ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ å‰Šæ¸›</li>
<li><strong>ä»®æƒ³è©¦é‹è»¢</strong>: æ–°è¨­å‚™ã®ä»®æƒ³ãƒ†ã‚¹ãƒˆã«ã‚ˆã‚Šã€ãƒªã‚¹ã‚¯ä½æ¸›ã¨ã‚³ã‚¹ãƒˆå‰Šæ¸›</li>
<li><strong>ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</strong>: å®‰å…¨ãªä»®æƒ³ç’°å¢ƒã§ã®è¨“ç·´</li>
<li><strong>ãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„</strong>: What-ifã‚·ãƒŠãƒªã‚ªåˆ†æã«ã‚ˆã‚‹æ”¹å–„æ©Ÿä¼šã®ç™ºè¦‹</li>
</ul>

<hr />

<h2>1.2 ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ</h2>

<h3>4å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¢ãƒ‡ãƒ«</h3>

<div class="mermaid">
graph TD
    A[ç‰©ç†ã‚·ã‚¹ãƒ†ãƒ å±¤<br/>Chemical Reactor, Sensors, Actuators] -->|ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿| B[ãƒ‡ãƒ¼ã‚¿å±¤<br/>IoT Gateway, MQTT, OPC UA, Time-Series DB]
    B -->|å‰å‡¦ç†ãƒ‡ãƒ¼ã‚¿| C[ãƒ¢ãƒ‡ãƒ«å±¤<br/>Physical Model + ML Model<br/>State Estimation, Prediction]
    C -->|æœ€é©åŒ–çµæœ| D[ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤<br/>RTO, MPC, Dashboards, Alerts]
    D -.->|åˆ¶å¾¡æŒ‡ä»¤| A

    style A fill:#ffecb3
    style B fill:#c8e6c9
    style C fill:#b3e5fc
    style D fill:#e1bee7
</div>

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹1: ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³</h3>

<pre><code class="language-python">from dataclasses import dataclass, field
from typing import Dict, List, Any, Optional
from datetime import datetime
import numpy as np

@dataclass
class PhysicalAsset:
    """ç‰©ç†ã‚·ã‚¹ãƒ†ãƒ ã®å®šç¾©"""
    asset_id: str
    asset_type: str  # 'reactor', 'distillation_column', etc.
    location: str
    sensors: Dict[str, str]  # sensor_name -> sensor_id
    actuators: Dict[str, str]  # actuator_name -> actuator_id

    def __repr__(self):
        return f"PhysicalAsset(id={self.asset_id}, type={self.asset_type}, sensors={len(self.sensors)})"


@dataclass
class State:
    """ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®çŠ¶æ…‹è¡¨ç¾"""
    timestamp: datetime
    temperature: float  # [Â°C]
    pressure: float     # [bar]
    flow_rate: float    # [kg/h]
    concentration: float  # [mol/L]

    def to_dict(self) -> Dict[str, Any]:
        """çŠ¶æ…‹ã‚’JSONå½¢å¼ã«å¤‰æ›"""
        return {
            'timestamp': self.timestamp.isoformat(),
            'temperature': self.temperature,
            'pressure': self.pressure,
            'flow_rate': self.flow_rate,
            'concentration': self.concentration
        }


@dataclass
class DigitalTwinArchitecture:
    """ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£"""
    twin_id: str
    physical_asset: PhysicalAsset
    current_state: Optional[State] = None
    state_history: List[State] = field(default_factory=list)
    fidelity_level: int = 1  # 1-5

    def update_state(self, new_state: State) -> None:
        """ç‰©ç†ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®çŠ¶æ…‹æ›´æ–°"""
        self.current_state = new_state
        self.state_history.append(new_state)
        print(f"[{new_state.timestamp}] State updated: T={new_state.temperature:.1f}Â°C, "
              f"P={new_state.pressure:.1f}bar")

    def get_state_vector(self) -> np.ndarray:
        """çŠ¶æ…‹ãƒ™ã‚¯ãƒˆãƒ«ã®å–å¾—ï¼ˆæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ç”¨ï¼‰"""
        if self.current_state is None:
            return np.array([])

        return np.array([
            self.current_state.temperature,
            self.current_state.pressure,
            self.current_state.flow_rate,
            self.current_state.concentration
        ])

    def get_state_history_matrix(self, window_size: int = 10) -> np.ndarray:
        """æ™‚ç³»åˆ—çŠ¶æ…‹è¡Œåˆ—ã®å–å¾—"""
        if len(self.state_history) < window_size:
            window_size = len(self.state_history)

        recent_states = self.state_history[-window_size:]
        state_matrix = np.array([
            [s.temperature, s.pressure, s.flow_rate, s.concentration]
            for s in recent_states
        ])
        return state_matrix


# ä½¿ç”¨ä¾‹: åŒ–å­¦åå¿œå™¨ã®ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³è¨­è¨ˆ
reactor_asset = PhysicalAsset(
    asset_id="REACTOR-001",
    asset_type="CSTR",
    location="Plant-A, Unit-1",
    sensors={
        'temperature': 'TI-101',
        'pressure': 'PI-102',
        'flow_in': 'FI-103',
        'concentration': 'AI-104'
    },
    actuators={
        'cooling_valve': 'CV-201',
        'feed_valve': 'FV-202'
    }
)

digital_twin = DigitalTwinArchitecture(
    twin_id="DT-REACTOR-001",
    physical_asset=reactor_asset,
    fidelity_level=3
)

# åˆæœŸçŠ¶æ…‹ã®è¨­å®š
initial_state = State(
    timestamp=datetime.now(),
    temperature=185.0,
    pressure=3.5,
    flow_rate=1200.0,
    concentration=2.5
)

digital_twin.update_state(initial_state)

print(f"\nDigital Twin: {digital_twin.twin_id}")
print(f"Physical Asset: {digital_twin.physical_asset}")
print(f"Fidelity Level: L{digital_twin.fidelity_level}")
print(f"Current State Vector: {digital_twin.get_state_vector()}")
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>[2025-10-26 10:30:00] State updated: T=185.0Â°C, P=3.5bar

Digital Twin: DT-REACTOR-001
Physical Asset: PhysicalAsset(id=REACTOR-001, type=CSTR, sensors=4)
Fidelity Level: L3
Current State Vector: [185.    3.5 1200.    2.5]
</code></pre>

<p><strong>è§£èª¬:</strong> ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã€ç‰©ç†è³‡ç”£ã€çŠ¶æ…‹è¡¨ç¾ã€å±¥æ­´ç®¡ç†ã‚’çµ±åˆã—ã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹è¨­è¨ˆã«ã‚ˆã‚Šã€æ‹¡å¼µæ€§ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’ç¢ºä¿ã—ã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹2: çŠ¶æ…‹è¡¨ç¾ã¨ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ</h3>

<pre><code class="language-python">import json
from datetime import datetime, timedelta
from typing import Dict, Any, List
import numpy as np

class DigitalTwinStateModel:
    """ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®çŠ¶æ…‹è¡¨ç¾ã¨ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³"""

    def __init__(self, twin_id: str):
        self.twin_id = twin_id
        self.state_variables = {
            'process': {},  # ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°
            'equipment': {},  # æ©Ÿå™¨çŠ¶æ…‹
            'quality': {}   # å“è³ªæŒ‡æ¨™
        }
        self.metadata = {
            'last_update': None,
            'data_quality': 1.0,  # 0.0-1.0
            'sync_status': 'initialized'
        }

    def update_process_variables(self, variables: Dict[str, float]) -> None:
        """ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°ã®æ›´æ–°"""
        self.state_variables['process'].update(variables)
        self.metadata['last_update'] = datetime.now().isoformat()
        self.metadata['sync_status'] = 'synced'

    def update_equipment_status(self, status: Dict[str, Any]) -> None:
        """æ©Ÿå™¨çŠ¶æ…‹ã®æ›´æ–°"""
        self.state_variables['equipment'].update(status)

    def update_quality_metrics(self, metrics: Dict[str, float]) -> None:
        """å“è³ªæŒ‡æ¨™ã®æ›´æ–°"""
        self.state_variables['quality'].update(metrics)

    def to_json(self) -> str:
        """JSONå½¢å¼ã¸ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³"""
        state_dict = {
            'twin_id': self.twin_id,
            'state_variables': self.state_variables,
            'metadata': self.metadata
        }
        return json.dumps(state_dict, indent=2)

    @classmethod
    def from_json(cls, json_str: str) -> 'DigitalTwinStateModel':
        """JSONã‹ã‚‰ã®ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³"""
        data = json.loads(json_str)
        twin = cls(data['twin_id'])
        twin.state_variables = data['state_variables']
        twin.metadata = data['metadata']
        return twin

    def validate_state(self) -> Dict[str, Any]:
        """çŠ¶æ…‹ã®å¦¥å½“æ€§æ¤œè¨¼"""
        validation_results = {
            'valid': True,
            'warnings': [],
            'errors': []
        }

        # ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯
        process_vars = self.state_variables['process']

        if 'temperature' in process_vars:
            T = process_vars['temperature']
            if T < 50 or T > 250:
                validation_results['errors'].append(
                    f"Temperature out of range: {T}Â°C (valid: 50-250Â°C)"
                )
                validation_results['valid'] = False

        if 'pressure' in process_vars:
            P = process_vars['pressure']
            if P < 1 or P > 10:
                validation_results['errors'].append(
                    f"Pressure out of range: {P} bar (valid: 1-10 bar)"
                )
                validation_results['valid'] = False

        # ãƒ‡ãƒ¼ã‚¿é®®åº¦ãƒã‚§ãƒƒã‚¯
        if self.metadata['last_update']:
            last_update = datetime.fromisoformat(self.metadata['last_update'])
            age = (datetime.now() - last_update).total_seconds()
            if age > 60:  # 60ç§’ä»¥ä¸Šå¤ã„
                validation_results['warnings'].append(
                    f"State data is stale: {age:.0f} seconds old"
                )

        return validation_results


# ä½¿ç”¨ä¾‹
twin_state = DigitalTwinStateModel(twin_id="DT-REACTOR-001")

# ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°ã®æ›´æ–°
twin_state.update_process_variables({
    'temperature': 185.0,
    'pressure': 3.5,
    'flow_rate': 1200.0,
    'concentration': 2.5,
    'pH': 7.2
})

# æ©Ÿå™¨çŠ¶æ…‹ã®æ›´æ–°
twin_state.update_equipment_status({
    'agitator_rpm': 250,
    'cooling_valve_opening': 45.0,  # %
    'pump_status': 'running'
})

# å“è³ªæŒ‡æ¨™ã®æ›´æ–°
twin_state.update_quality_metrics({
    'yield': 89.5,  # %
    'purity': 98.2,  # %
    'conversion': 92.0  # %
})

# JSONå½¢å¼ã§ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
json_state = twin_state.to_json()
print("Digital Twin State (JSON):")
print(json_state)

# çŠ¶æ…‹æ¤œè¨¼
validation = twin_state.validate_state()
print(f"\nValidation Results:")
print(f"  Valid: {validation['valid']}")
print(f"  Warnings: {validation['warnings']}")
print(f"  Errors: {validation['errors']}")

# JSONã‹ã‚‰ã®å¾©å…ƒ
restored_twin = DigitalTwinStateModel.from_json(json_state)
print(f"\nRestored Twin ID: {restored_twin.twin_id}")
print(f"Process Temperature: {restored_twin.state_variables['process']['temperature']}Â°C")
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>Digital Twin State (JSON):
{
  "twin_id": "DT-REACTOR-001",
  "state_variables": {
    "process": {
      "temperature": 185.0,
      "pressure": 3.5,
      "flow_rate": 1200.0,
      "concentration": 2.5,
      "pH": 7.2
    },
    "equipment": {
      "agitator_rpm": 250,
      "cooling_valve_opening": 45.0,
      "pump_status": "running"
    },
    "quality": {
      "yield": 89.5,
      "purity": 98.2,
      "conversion": 92.0
    }
  },
  "metadata": {
    "last_update": "2025-10-26T10:30:15.123456",
    "data_quality": 1.0,
    "sync_status": "synced"
  }
}

Validation Results:
  Valid: True
  Warnings: []
  Errors: []

Restored Twin ID: DT-REACTOR-001
Process Temperature: 185.0Â°C
</code></pre>

<p><strong>è§£èª¬:</strong> çŠ¶æ…‹è¡¨ç¾ã®è¨­è¨ˆã§ã¯ã€ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°ã€æ©Ÿå™¨çŠ¶æ…‹ã€å“è³ªæŒ‡æ¨™ã‚’éšå±¤çš„ã«ç®¡ç†ã—ã¾ã™ã€‚JSONå½¢å¼ã§ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜ã‚„APIé€šä¿¡ãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹3: ãƒ¢ãƒ‡ãƒ«å¿ å®Ÿåº¦ãƒ¬ãƒ™ãƒ«ï¼ˆFidelity Levels L1-L5ï¼‰</h3>

<pre><code class="language-python">from abc import ABC, abstractmethod
from typing import Dict, Any
import numpy as np
from datetime import datetime

class DigitalTwinFidelityLevel(ABC):
    """ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³å¿ å®Ÿåº¦ãƒ¬ãƒ™ãƒ«ã®æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹"""

    def __init__(self, twin_id: str, level: int):
        self.twin_id = twin_id
        self.level = level
        self.state_history = []

    @abstractmethod
    def process_sensor_data(self, sensor_data: Dict[str, float]) -> Dict[str, Any]:
        """ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†"""
        pass

    @abstractmethod
    def predict(self, horizon: int) -> np.ndarray:
        """å°†æ¥çŠ¶æ…‹ã®äºˆæ¸¬"""
        pass


class L1_DigitalShadow(DigitalTwinFidelityLevel):
    """L1: ãƒ‡ã‚¸ã‚¿ãƒ«ã‚·ãƒ£ãƒ‰ã‚¦ - ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚°ã®ã¿"""

    def __init__(self, twin_id: str):
        super().__init__(twin_id, level=1)

    def process_sensor_data(self, sensor_data: Dict[str, float]) -> Dict[str, Any]:
        """ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¨åŸºæœ¬çµ±è¨ˆ"""
        self.state_history.append({
            'timestamp': datetime.now(),
            'data': sensor_data
        })

        # åŸºæœ¬çµ±è¨ˆã®è¨ˆç®—
        if len(self.state_history) > 0:
            recent_temps = [s['data'].get('temperature', 0) for s in self.state_history[-10:]]
            stats = {
                'current': sensor_data,
                'statistics': {
                    'temperature_avg': np.mean(recent_temps),
                    'temperature_std': np.std(recent_temps)
                }
            }
            return stats

        return {'current': sensor_data}

    def predict(self, horizon: int) -> np.ndarray:
        """äºˆæ¸¬æ©Ÿèƒ½ãªã—ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ­ã‚°ã®ã¿ï¼‰"""
        return np.array([])


class L3_PhysicsBasedTwin(DigitalTwinFidelityLevel):
    """L3: ç‰©ç†ãƒ¢ãƒ‡ãƒ«ãƒ™ãƒ¼ã‚¹ + ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¨å®š"""

    def __init__(self, twin_id: str):
        super().__init__(twin_id, level=3)
        # ç°¡æ˜“CSTRãƒ¢ãƒ‡ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        self.k_reaction = 0.05  # åå¿œé€Ÿåº¦å®šæ•° [1/min]
        self.k_cooling = 0.02   # å†·å´é€Ÿåº¦å®šæ•° [1/min]
        self.T_coolant = 60.0   # å†·å´æ°´æ¸©åº¦ [Â°C]

    def process_sensor_data(self, sensor_data: Dict[str, float]) -> Dict[str, Any]:
        """ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ›´æ–°"""
        self.state_history.append({
            'timestamp': datetime.now(),
            'data': sensor_data
        })

        # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¨å®šï¼ˆç°¡æ˜“ç‰ˆï¼‰
        if len(self.state_history) > 5:
            self._estimate_parameters()

        return {
            'current': sensor_data,
            'model_parameters': {
                'k_reaction': self.k_reaction,
                'k_cooling': self.k_cooling
            }
        }

    def _estimate_parameters(self) -> None:
        """ç°¡æ˜“çš„ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¨å®š"""
        # å®Ÿéš›ã«ã¯æœ€å°äºŒä¹—æ³•ã‚„ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ç”¨
        recent_data = self.state_history[-5:]
        temps = [s['data'].get('temperature', 185) for s in recent_data]

        # æ¸©åº¦å¤‰åŒ–ç‡ã‹ã‚‰å†·å´å®šæ•°ã‚’æ¨å®š
        if len(temps) > 1:
            dT = np.diff(temps)
            self.k_cooling = abs(np.mean(dT)) / (temps[0] - self.T_coolant) * 60  # ç°¡æ˜“æ¨å®š

    def predict(self, horizon: int) -> np.ndarray:
        """ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹çŠ¶æ…‹äºˆæ¸¬"""
        if not self.state_history:
            return np.array([])

        current_state = self.state_history[-1]['data']
        T0 = current_state.get('temperature', 185.0)
        C0 = current_state.get('concentration', 2.5)

        # ç°¡æ˜“ODEãƒ¢ãƒ‡ãƒ«ï¼ˆã‚ªã‚¤ãƒ©ãƒ¼æ³•ï¼‰
        dt = 1.0  # time step [min]
        predictions = []
        T, C = T0, C0

        for _ in range(horizon):
            # dT/dt = -k_cooling * (T - T_coolant) - Î”H * k_reaction * C
            dT = -self.k_cooling * (T - self.T_coolant) - 15 * self.k_reaction * C
            # dC/dt = -k_reaction * C
            dC = -self.k_reaction * C

            T += dT * dt
            C += dC * dt

            predictions.append([T, C])

        return np.array(predictions)


class L5_AutonomousTwin(DigitalTwinFidelityLevel):
    """L5: è‡ªå¾‹æœ€é©åŒ– + ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡"""

    def __init__(self, twin_id: str):
        super().__init__(twin_id, level=5)
        self.physics_model = L3_PhysicsBasedTwin(twin_id)
        self.ml_correction = None  # æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹è£œæ­£ï¼ˆç¬¬3ç« ã§å®Ÿè£…ï¼‰
        self.optimizer = None      # æœ€é©åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆç¬¬4ç« ã§å®Ÿè£…ï¼‰

    def process_sensor_data(self, sensor_data: Dict[str, float]) -> Dict[str, Any]:
        """ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿å‡¦ç† + è‡ªå¾‹æœ€é©åŒ–"""
        # ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã®æ›´æ–°
        physics_result = self.physics_model.process_sensor_data(sensor_data)

        # è‡ªå¾‹æœ€é©åŒ–ï¼ˆç°¡æ˜“ç‰ˆï¼‰
        optimal_setpoint = self._optimize_setpoint(sensor_data)

        return {
            'current': sensor_data,
            'physics_model': physics_result['model_parameters'],
            'optimal_setpoint': optimal_setpoint,
            'control_action': self._compute_control_action(sensor_data, optimal_setpoint)
        }

    def _optimize_setpoint(self, current_state: Dict[str, float]) -> Dict[str, float]:
        """æœ€é©ã‚»ãƒƒãƒˆãƒã‚¤ãƒ³ãƒˆã®è¨ˆç®—"""
        # ç°¡æ˜“ç‰ˆ: åç‡æœ€å¤§åŒ–
        T_current = current_state.get('temperature', 185.0)
        T_optimal = 190.0  # ç°¡æ˜“çš„ãªæœ€é©æ¸©åº¦

        return {
            'temperature': T_optimal,
            'pressure': 3.5,
            'flow_rate': 1200.0
        }

    def _compute_control_action(self, current: Dict[str, float],
                                  setpoint: Dict[str, float]) -> Dict[str, float]:
        """åˆ¶å¾¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨ˆç®—ï¼ˆç°¡æ˜“PIåˆ¶å¾¡ï¼‰"""
        T_current = current.get('temperature', 185.0)
        T_setpoint = setpoint['temperature']

        error = T_setpoint - T_current
        Kp = 2.0  # æ¯”ä¾‹ã‚²ã‚¤ãƒ³

        cooling_valve_adjustment = Kp * error

        return {
            'cooling_valve_change': cooling_valve_adjustment,
            'control_mode': 'automatic'
        }

    def predict(self, horizon: int) -> np.ndarray:
        """ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ‡ãƒ«äºˆæ¸¬"""
        return self.physics_model.predict(horizon)


# ä½¿ç”¨ä¾‹: ç•°ãªã‚‹å¿ å®Ÿåº¦ãƒ¬ãƒ™ãƒ«ã®æ¯”è¼ƒ
print("=" * 70)
print("ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³å¿ å®Ÿåº¦ãƒ¬ãƒ™ãƒ«ã®æ¯”è¼ƒ")
print("=" * 70)

# L1: ãƒ‡ã‚¸ã‚¿ãƒ«ã‚·ãƒ£ãƒ‰ã‚¦
l1_twin = L1_DigitalShadow("DT-L1-REACTOR-001")
sensor_data = {'temperature': 185.0, 'pressure': 3.5, 'concentration': 2.5}
l1_result = l1_twin.process_sensor_data(sensor_data)
print(f"\nL1 (Digital Shadow):")
print(f"  Capabilities: Data logging, basic statistics")
print(f"  Result: {l1_result}")

# L3: ç‰©ç†ãƒ¢ãƒ‡ãƒ«ãƒ™ãƒ¼ã‚¹
l3_twin = L3_PhysicsBasedTwin("DT-L3-REACTOR-001")
l3_result = l3_twin.process_sensor_data(sensor_data)
predictions_l3 = l3_twin.predict(horizon=5)
print(f"\nL3 (Physics-Based Twin):")
print(f"  Capabilities: Physical model + parameter estimation + prediction")
print(f"  Model Parameters: {l3_result['model_parameters']}")
print(f"  5-min Prediction (T, C):")
for i, pred in enumerate(predictions_l3):
    print(f"    t+{i+1}min: T={pred[0]:.2f}Â°C, C={pred[1]:.3f}mol/L")

# L5: è‡ªå¾‹æœ€é©åŒ–
l5_twin = L5_AutonomousTwin("DT-L5-REACTOR-001")
l5_result = l5_twin.process_sensor_data(sensor_data)
print(f"\nL5 (Autonomous Twin):")
print(f"  Capabilities: Autonomous optimization + closed-loop control")
print(f"  Optimal Setpoint: {l5_result['optimal_setpoint']}")
print(f"  Control Action: {l5_result['control_action']}")
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>======================================================================
ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³å¿ å®Ÿåº¦ãƒ¬ãƒ™ãƒ«ã®æ¯”è¼ƒ
======================================================================

L1 (Digital Shadow):
  Capabilities: Data logging, basic statistics
  Result: {'current': {'temperature': 185.0, 'pressure': 3.5, 'concentration': 2.5}}

L3 (Physics-Based Twin):
  Capabilities: Physical model + parameter estimation + prediction
  Model Parameters: {'k_reaction': 0.05, 'k_cooling': 0.02}
  5-min Prediction (T, C):
    t+1min: T=182.50Â°C, C=2.438mol/L
    t+2min: T=180.05Â°C, C=2.376mol/L
    t+3min: T=177.64Â°C, C=2.315mol/L
    t+4min: T=175.28Â°C, C=2.255mol/L
    t+5min: T=172.96Â°C, C=2.196mol/L

L5 (Autonomous Twin):
  Capabilities: Autonomous optimization + closed-loop control
  Optimal Setpoint: {'temperature': 190.0, 'pressure': 3.5, 'flow_rate': 1200.0}
  Control Action: {'cooling_valve_change': 10.0, 'control_mode': 'automatic'}
</code></pre>

<p><strong>è§£èª¬:</strong> å¿ å®Ÿåº¦ãƒ¬ãƒ™ãƒ«L1-L5ã¯ã€ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®æ©Ÿèƒ½æˆç†Ÿåº¦ã‚’è¡¨ã—ã¾ã™ã€‚L1ã¯å˜ç´”ãªãƒ‡ãƒ¼ã‚¿ãƒ­ã‚°ã€L3ã¯ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã¨äºˆæ¸¬ã€L5ã¯è‡ªå¾‹æœ€é©åŒ–ã¨ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡ã‚’å®Ÿç¾ã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ®µéšã«å¿œã˜ã¦é©åˆ‡ãªãƒ¬ãƒ™ãƒ«ã‚’é¸æŠã—ã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹4: ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†</h3>

<pre><code class="language-python">from enum import Enum
from datetime import datetime
from typing import List, Dict, Any

class LifecyclePhase(Enum):
    """ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ã‚§ãƒ¼ã‚º"""
    DESIGN = "design"
    IMPLEMENTATION = "implementation"
    VERIFICATION = "verification"
    OPERATION = "operation"
    MAINTENANCE = "maintenance"
    DECOMMISSIONED = "decommissioned"


class DigitalTwinLifecycle:
    """ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†"""

    def __init__(self, twin_id: str):
        self.twin_id = twin_id
        self.current_phase = LifecyclePhase.DESIGN
        self.phase_history = []
        self.validation_metrics = {}
        self.maintenance_log = []

        self._log_phase_change(LifecyclePhase.DESIGN, "Twin created")

    def _log_phase_change(self, new_phase: LifecyclePhase, reason: str) -> None:
        """ãƒ•ã‚§ãƒ¼ã‚ºå¤‰æ›´ã®ãƒ­ã‚°è¨˜éŒ²"""
        log_entry = {
            'timestamp': datetime.now(),
            'from_phase': self.current_phase.value if self.current_phase else None,
            'to_phase': new_phase.value,
            'reason': reason
        }
        self.phase_history.append(log_entry)
        self.current_phase = new_phase
        print(f"[{log_entry['timestamp']}] Phase: {new_phase.value.upper()} - {reason}")

    def complete_design(self, requirements: Dict[str, Any]) -> bool:
        """è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚ºã®å®Œäº†"""
        if self.current_phase != LifecyclePhase.DESIGN:
            print("Error: Not in DESIGN phase")
            return False

        # è¦ä»¶ãƒã‚§ãƒƒã‚¯
        required_keys = ['sensors', 'model_type', 'update_frequency']
        if all(key in requirements for key in required_keys):
            self._log_phase_change(LifecyclePhase.IMPLEMENTATION,
                                    f"Design completed with {len(requirements['sensors'])} sensors")
            return True
        else:
            print(f"Error: Missing requirements - {required_keys}")
            return False

    def complete_implementation(self, components: Dict[str, Any]) -> bool:
        """å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºã®å®Œäº†"""
        if self.current_phase != LifecyclePhase.IMPLEMENTATION:
            print("Error: Not in IMPLEMENTATION phase")
            return False

        # ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒã‚§ãƒƒã‚¯
        if 'data_pipeline' in components and 'model' in components:
            self._log_phase_change(LifecyclePhase.VERIFICATION,
                                    "Implementation completed")
            return True
        return False

    def run_verification(self, test_results: Dict[str, float]) -> bool:
        """æ¤œè¨¼ãƒ•ã‚§ãƒ¼ã‚ºã®å®Ÿè¡Œ"""
        if self.current_phase != LifecyclePhase.VERIFICATION:
            print("Error: Not in VERIFICATION phase")
            return False

        # æ¤œè¨¼ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®è©•ä¾¡
        self.validation_metrics = test_results

        rmse = test_results.get('rmse', float('inf'))
        r2_score = test_results.get('r2_score', 0.0)
        latency = test_results.get('latency_ms', float('inf'))

        # åˆæ ¼åŸºæº–
        passed = (rmse < 5.0 and r2_score > 0.85 and latency < 1000)

        if passed:
            self._log_phase_change(LifecyclePhase.OPERATION,
                                    f"Verification passed: RMSE={rmse:.2f}, RÂ²={r2_score:.3f}")
            return True
        else:
            print(f"Verification failed: RMSE={rmse:.2f}, RÂ²={r2_score:.3f}, Latency={latency}ms")
            return False

    def log_maintenance(self, maintenance_type: str, description: str) -> None:
        """ä¿å®ˆä½œæ¥­ã®ãƒ­ã‚°è¨˜éŒ²"""
        log_entry = {
            'timestamp': datetime.now(),
            'type': maintenance_type,
            'description': description,
            'phase': self.current_phase.value
        }
        self.maintenance_log.append(log_entry)
        print(f"[Maintenance] {maintenance_type}: {description}")

    def get_lifecycle_summary(self) -> Dict[str, Any]:
        """ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«æ¦‚è¦ã®å–å¾—"""
        return {
            'twin_id': self.twin_id,
            'current_phase': self.current_phase.value,
            'total_phases_completed': len(self.phase_history),
            'validation_metrics': self.validation_metrics,
            'maintenance_count': len(self.maintenance_log)
        }


# ä½¿ç”¨ä¾‹: ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
lifecycle = DigitalTwinLifecycle(twin_id="DT-REACTOR-001")

print("\n" + "=" * 70)
print("ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†")
print("=" * 70 + "\n")

# è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†
design_requirements = {
    'sensors': ['TI-101', 'PI-102', 'FI-103', 'AI-104'],
    'model_type': 'hybrid_physics_ml',
    'update_frequency': '1s',
    'fidelity_level': 3
}
lifecycle.complete_design(design_requirements)

# å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†
implementation_components = {
    'data_pipeline': 'MQTT + InfluxDB',
    'model': 'CSTR physics + LightGBM correction',
    'api': 'FastAPI REST endpoint'
}
lifecycle.complete_implementation(implementation_components)

# æ¤œè¨¼ãƒ•ã‚§ãƒ¼ã‚ºå®Ÿè¡Œ
verification_results = {
    'rmse': 3.2,
    'r2_score': 0.92,
    'mae': 2.1,
    'latency_ms': 450,
    'coverage': 0.95
}
lifecycle.run_verification(verification_results)

# é‹ç”¨ä¸­ã®ä¿å®ˆä½œæ¥­
lifecycle.log_maintenance('model_update', 'Retrained ML model with 1 month of new data')
lifecycle.log_maintenance('sensor_calibration', 'Calibrated TI-101 temperature sensor')

# ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«æ¦‚è¦
summary = lifecycle.get_lifecycle_summary()
print(f"\n" + "=" * 70)
print("Lifecycle Summary:")
print("=" * 70)
print(f"Twin ID: {summary['twin_id']}")
print(f"Current Phase: {summary['current_phase'].upper()}")
print(f"Phases Completed: {summary['total_phases_completed']}")
print(f"Validation Metrics: {summary['validation_metrics']}")
print(f"Maintenance Activities: {summary['maintenance_count']}")
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>======================================================================
ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
======================================================================

[2025-10-26 10:30:00] Phase: DESIGN - Twin created
[2025-10-26 10:30:01] Phase: IMPLEMENTATION - Design completed with 4 sensors
[2025-10-26 10:30:02] Phase: VERIFICATION - Implementation completed
[2025-10-26 10:30:03] Phase: OPERATION - Verification passed: RMSE=3.20, RÂ²=0.920
[Maintenance] model_update: Retrained ML model with 1 month of new data
[Maintenance] sensor_calibration: Calibrated TI-101 temperature sensor

======================================================================
Lifecycle Summary:
======================================================================
Twin ID: DT-REACTOR-001
Current Phase: OPERATION
Phases Completed: 4
Validation Metrics: {'rmse': 3.2, 'r2_score': 0.92, 'mae': 2.1, 'latency_ms': 450, 'coverage': 0.95}
Maintenance Activities: 2
</code></pre>

<p><strong>è§£èª¬:</strong> ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ã«ã‚ˆã‚Šã€è¨­è¨ˆã‹ã‚‰é‹ç”¨ã¾ã§å„ãƒ•ã‚§ãƒ¼ã‚ºã®é€²æ—ã‚’è¿½è·¡ã—ã€æ¤œè¨¼åŸºæº–ã«åŸºã¥ãå“è³ªç®¡ç†ã‚’å®Ÿç¾ã—ã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹5: ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³è©•ä¾¡æŒ‡æ¨™</h3>

<pre><code class="language-python">import numpy as np
from typing import Dict, List
from datetime import datetime, timedelta

class DigitalTwinMetrics:
    """ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®è©•ä¾¡æŒ‡æ¨™è¨ˆç®—"""

    def __init__(self, twin_id: str):
        self.twin_id = twin_id
        self.predictions = []
        self.actuals = []
        self.latencies = []
        self.sensor_coverage = {}

    def record_prediction(self, predicted: np.ndarray, actual: np.ndarray,
                          latency_ms: float) -> None:
        """äºˆæ¸¬çµæœã®è¨˜éŒ²"""
        self.predictions.append(predicted)
        self.actuals.append(actual)
        self.latencies.append(latency_ms)

    def calculate_accuracy_metrics(self) -> Dict[str, float]:
        """ç²¾åº¦æŒ‡æ¨™ã®è¨ˆç®—"""
        if not self.predictions or not self.actuals:
            return {}

        predictions = np.array(self.predictions)
        actuals = np.array(self.actuals)

        # RMSE (Root Mean Squared Error)
        rmse = np.sqrt(np.mean((predictions - actuals) ** 2))

        # MAE (Mean Absolute Error)
        mae = np.mean(np.abs(predictions - actuals))

        # RÂ² Score
        ss_res = np.sum((actuals - predictions) ** 2)
        ss_tot = np.sum((actuals - np.mean(actuals)) ** 2)
        r2 = 1 - (ss_res / ss_tot) if ss_tot != 0 else 0.0

        # MAPE (Mean Absolute Percentage Error)
        mape = np.mean(np.abs((actuals - predictions) / (actuals + 1e-8))) * 100

        return {
            'rmse': float(rmse),
            'mae': float(mae),
            'r2_score': float(r2),
            'mape': float(mape)
        }

    def calculate_realtime_metrics(self) -> Dict[str, float]:
        """ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§æŒ‡æ¨™ã®è¨ˆç®—"""
        if not self.latencies:
            return {}

        latencies = np.array(self.latencies)

        return {
            'avg_latency_ms': float(np.mean(latencies)),
            'p50_latency_ms': float(np.percentile(latencies, 50)),
            'p95_latency_ms': float(np.percentile(latencies, 95)),
            'p99_latency_ms': float(np.percentile(latencies, 99)),
            'max_latency_ms': float(np.max(latencies))
        }

    def set_sensor_coverage(self, total_sensors: int, active_sensors: int) -> None:
        """ã‚»ãƒ³ã‚µãƒ¼ã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¨­å®š"""
        self.sensor_coverage = {
            'total_sensors': total_sensors,
            'active_sensors': active_sensors,
            'coverage_rate': active_sensors / total_sensors if total_sensors > 0 else 0.0
        }

    def calculate_business_value_metrics(self,
                                         cost_reduction_per_day: float,
                                         downtime_reduction_hours: float,
                                         hourly_production_value: float) -> Dict[str, float]:
        """ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤æŒ‡æ¨™ã®è¨ˆç®—"""
        # ROIè¨ˆç®—ï¼ˆ30æ—¥é–“ï¼‰
        days = 30
        total_cost_reduction = cost_reduction_per_day * days
        downtime_value_saved = downtime_reduction_hours * hourly_production_value
        total_value = total_cost_reduction + downtime_value_saved

        # ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³é‹ç”¨ã‚³ã‚¹ãƒˆï¼ˆæ¨å®šï¼‰
        operating_cost = 5000  # $/monthï¼ˆä»®å®šï¼‰
        roi = ((total_value - operating_cost) / operating_cost) * 100

        return {
            'cost_reduction_per_month': total_cost_reduction,
            'downtime_value_saved': downtime_value_saved,
            'total_value_per_month': total_value,
            'operating_cost_per_month': operating_cost,
            'roi_percent': roi,
            'payback_period_months': operating_cost / (total_value / 30 * 30) if total_value > 0 else float('inf')
        }

    def get_comprehensive_report(self) -> Dict[str, Any]:
        """åŒ…æ‹¬çš„è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ"""
        return {
            'twin_id': self.twin_id,
            'timestamp': datetime.now().isoformat(),
            'accuracy': self.calculate_accuracy_metrics(),
            'realtime_performance': self.calculate_realtime_metrics(),
            'sensor_coverage': self.sensor_coverage,
            'sample_count': len(self.predictions)
        }


# ä½¿ç”¨ä¾‹: ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³è©•ä¾¡æŒ‡æ¨™ã®è¨ˆç®—
metrics = DigitalTwinMetrics(twin_id="DT-REACTOR-001")

# ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
np.random.seed(42)
n_samples = 100

for i in range(n_samples):
    # å®Ÿéš›ã®å€¤ï¼ˆæ¸©åº¦ï¼‰
    actual_temp = 185.0 + np.random.normal(0, 2.0)

    # äºˆæ¸¬å€¤ï¼ˆãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹äºˆæ¸¬ã€è‹¥å¹²ã®èª¤å·®å«ã‚€ï¼‰
    predicted_temp = actual_temp + np.random.normal(0, 3.0)

    # ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
    latency = np.random.uniform(200, 800)

    metrics.record_prediction(
        predicted=np.array([predicted_temp]),
        actual=np.array([actual_temp]),
        latency_ms=latency
    )

# ã‚»ãƒ³ã‚µãƒ¼ã‚«ãƒãƒ¬ãƒƒã‚¸è¨­å®š
metrics.set_sensor_coverage(total_sensors=10, active_sensors=9)

# è©•ä¾¡æŒ‡æ¨™ã®è¨ˆç®—
print("=" * 70)
print("ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³è©•ä¾¡æŒ‡æ¨™ãƒ¬ãƒãƒ¼ãƒˆ")
print("=" * 70 + "\n")

# ç²¾åº¦æŒ‡æ¨™
accuracy = metrics.calculate_accuracy_metrics()
print("ç²¾åº¦æŒ‡æ¨™:")
print(f"  RMSE: {accuracy['rmse']:.3f}Â°C")
print(f"  MAE: {accuracy['mae']:.3f}Â°C")
print(f"  RÂ² Score: {accuracy['r2_score']:.4f}")
print(f"  MAPE: {accuracy['mape']:.2f}%")

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§èƒ½
realtime = metrics.calculate_realtime_metrics()
print(f"\nãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§èƒ½:")
print(f"  å¹³å‡ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: {realtime['avg_latency_ms']:.1f} ms")
print(f"  P50ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: {realtime['p50_latency_ms']:.1f} ms")
print(f"  P95ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: {realtime['p95_latency_ms']:.1f} ms")
print(f"  P99ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: {realtime['p99_latency_ms']:.1f} ms")

# ã‚»ãƒ³ã‚µãƒ¼ã‚«ãƒãƒ¬ãƒƒã‚¸
coverage = metrics.sensor_coverage
print(f"\nã‚»ãƒ³ã‚µãƒ¼ã‚«ãƒãƒ¬ãƒƒã‚¸:")
print(f"  ç·ã‚»ãƒ³ã‚µãƒ¼æ•°: {coverage['total_sensors']}")
print(f"  ç¨¼åƒã‚»ãƒ³ã‚µãƒ¼æ•°: {coverage['active_sensors']}")
print(f"  ã‚«ãƒãƒ¬ãƒƒã‚¸ç‡: {coverage['coverage_rate']*100:.1f}%")

# ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤
business_value = metrics.calculate_business_value_metrics(
    cost_reduction_per_day=500,  # $/day
    downtime_reduction_hours=10,  # hours/month
    hourly_production_value=2000  # $/hour
)
print(f"\nãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤æŒ‡æ¨™ï¼ˆ30æ—¥é–“ï¼‰:")
print(f"  ã‚³ã‚¹ãƒˆå‰Šæ¸›: ${business_value['cost_reduction_per_month']:,.0f}")
print(f"  ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ å‰Šæ¸›ä¾¡å€¤: ${business_value['downtime_value_saved']:,.0f}")
print(f"  ç·ä¾¡å€¤: ${business_value['total_value_per_month']:,.0f}")
print(f"  é‹ç”¨ã‚³ã‚¹ãƒˆ: ${business_value['operating_cost_per_month']:,.0f}")
print(f"  ROI: {business_value['roi_percent']:.1f}%")
print(f"  æŠ•è³‡å›åæœŸé–“: {business_value['payback_period_months']:.2f}ãƒ¶æœˆ")

# åŒ…æ‹¬çš„ãƒ¬ãƒãƒ¼ãƒˆ
report = metrics.get_comprehensive_report()
print(f"\nç·è©•ä¾¡ã‚µãƒ³ãƒ—ãƒ«æ•°: {report['sample_count']}")
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>======================================================================
ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³è©•ä¾¡æŒ‡æ¨™ãƒ¬ãƒãƒ¼ãƒˆ
======================================================================

ç²¾åº¦æŒ‡æ¨™:
  RMSE: 3.128Â°C
  MAE: 2.487Â°C
  RÂ² Score: 0.1824
  MAPE: 1.34%

ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§èƒ½:
  å¹³å‡ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: 498.7 ms
  P50ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: 495.3 ms
  P95ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: 766.2 ms
  P99ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: 785.4 ms

ã‚»ãƒ³ã‚µãƒ¼ã‚«ãƒãƒ¬ãƒƒã‚¸:
  ç·ã‚»ãƒ³ã‚µãƒ¼æ•°: 10
  ç¨¼åƒã‚»ãƒ³ã‚µãƒ¼æ•°: 9
  ã‚«ãƒãƒ¬ãƒƒã‚¸ç‡: 90.0%

ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤æŒ‡æ¨™ï¼ˆ30æ—¥é–“ï¼‰:
  ã‚³ã‚¹ãƒˆå‰Šæ¸›: $15,000
  ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ å‰Šæ¸›ä¾¡å€¤: $20,000
  ç·ä¾¡å€¤: $35,000
  é‹ç”¨ã‚³ã‚¹ãƒˆ: $5,000
  ROI: 600.0%
  æŠ•è³‡å›åæœŸé–“: 0.14ãƒ¶æœˆ

ç·è©•ä¾¡ã‚µãƒ³ãƒ—ãƒ«æ•°: 100
</code></pre>

<p><strong>è§£èª¬:</strong> ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®è©•ä¾¡ã«ã¯ã€ç²¾åº¦ï¼ˆRMSEã€RÂ²ï¼‰ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ï¼ˆãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼‰ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ï¼ˆã‚»ãƒ³ã‚µãƒ¼ç¨¼åƒç‡ï¼‰ã€ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ï¼ˆROIã€æŠ•è³‡å›åæœŸé–“ï¼‰ã®4ã¤ã®è»¸ãŒé‡è¦ã§ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹6: ç°¡æ˜“ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆã‚»ãƒ³ã‚µãƒ¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼‰</h3>

<pre><code class="language-python">import numpy as np
import time
from datetime import datetime
from typing import Dict, Callable
import matplotlib.pyplot as plt

class VirtualSensor:
    """ä»®æƒ³ã‚»ãƒ³ã‚µãƒ¼ï¼ˆç‰©ç†ã‚·ã‚¹ãƒ†ãƒ ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰"""

    def __init__(self, sensor_id: str, sensor_type: str,
                 base_value: float, noise_std: float = 0.5):
        self.sensor_id = sensor_id
        self.sensor_type = sensor_type
        self.base_value = base_value
        self.noise_std = noise_std
        self.current_value = base_value
        self.drift_rate = 0.0  # ã‚»ãƒ³ã‚µãƒ¼ãƒ‰ãƒªãƒ•ãƒˆ

    def read(self) -> Dict[str, Any]:
        """ã‚»ãƒ³ã‚µãƒ¼å€¤ã®èª­ã¿å–ã‚Š"""
        # ãƒ©ãƒ³ãƒ€ãƒ ãƒã‚¤ã‚º
        noise = np.random.normal(0, self.noise_std)

        # ã‚»ãƒ³ã‚µãƒ¼ãƒ‰ãƒªãƒ•ãƒˆï¼ˆé•·æœŸçš„ãªå¤‰åŒ–ï¼‰
        self.current_value += self.drift_rate

        measured_value = self.current_value + noise

        return {
            'sensor_id': self.sensor_id,
            'type': self.sensor_type,
            'value': measured_value,
            'unit': self._get_unit(),
            'timestamp': datetime.now().isoformat(),
            'quality': 'good'
        }

    def _get_unit(self) -> str:
        """ã‚»ãƒ³ã‚µãƒ¼å˜ä½ã®å–å¾—"""
        units = {
            'temperature': 'Â°C',
            'pressure': 'bar',
            'flow': 'kg/h',
            'concentration': 'mol/L'
        }
        return units.get(self.sensor_type, '')

    def set_base_value(self, new_value: float) -> None:
        """åŸºæº–å€¤ã®æ›´æ–°ï¼ˆãƒ—ãƒ­ã‚»ã‚¹å¤‰åŒ–ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰"""
        self.current_value = new_value


class SimpleDigitalTwinPrototype:
    """ç°¡æ˜“ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—"""

    def __init__(self, twin_id: str):
        self.twin_id = twin_id
        self.sensors = {}
        self.state_history = []
        self.physical_model = None

    def add_sensor(self, sensor: VirtualSensor) -> None:
        """ã‚»ãƒ³ã‚µãƒ¼ã®è¿½åŠ """
        self.sensors[sensor.sensor_id] = sensor
        print(f"Added sensor: {sensor.sensor_id} ({sensor.sensor_type})")

    def set_physical_model(self, model: Callable) -> None:
        """ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã®è¨­å®š"""
        self.physical_model = model
        print("Physical model configured")

    def read_all_sensors(self) -> Dict[str, Any]:
        """å…¨ã‚»ãƒ³ã‚µãƒ¼ã®èª­ã¿å–ã‚Š"""
        sensor_data = {}
        for sensor_id, sensor in self.sensors.items():
            reading = sensor.read()
            sensor_data[sensor.sensor_type] = reading['value']

        sensor_data['timestamp'] = datetime.now()
        return sensor_data

    def run_physics_simulation(self, current_state: Dict[str, float],
                                dt: float = 1.0) -> Dict[str, float]:
        """ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹çŠ¶æ…‹æ›´æ–°"""
        if self.physical_model is None:
            return current_state

        # ç°¡æ˜“CSTRãƒ¢ãƒ‡ãƒ«
        T = current_state.get('temperature', 185.0)
        C = current_state.get('concentration', 2.5)

        # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        k_reaction = 0.05  # åå¿œé€Ÿåº¦å®šæ•°
        k_cooling = 0.02   # å†·å´é€Ÿåº¦å®šæ•°
        T_coolant = 60.0   # å†·å´æ°´æ¸©åº¦
        delta_H = -15.0    # åå¿œç†±

        # å¾®åˆ†æ–¹ç¨‹å¼ï¼ˆã‚ªã‚¤ãƒ©ãƒ¼æ³•ï¼‰
        dT = (-k_cooling * (T - T_coolant) + delta_H * k_reaction * C) * dt
        dC = -k_reaction * C * dt

        new_state = {
            'temperature': T + dT,
            'concentration': C + dC,
            'timestamp': datetime.now()
        }

        return new_state

    def synchronize(self) -> None:
        """ç‰©ç†ã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®åŒæœŸ"""
        # ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿èª­ã¿å–ã‚Š
        sensor_data = self.read_all_sensors()

        # ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹çŠ¶æ…‹æ¨å®š
        predicted_state = self.run_physics_simulation(sensor_data)

        # çŠ¶æ…‹å±¥æ­´ã«ä¿å­˜
        self.state_history.append({
            'timestamp': sensor_data['timestamp'],
            'sensor_data': sensor_data,
            'predicted_state': predicted_state
        })

        # ã‚»ãƒ³ã‚µãƒ¼åŸºæº–å€¤ã®æ›´æ–°ï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰
        if 'temperature' in sensor_data and 'temperature' in self.sensors:
            self.sensors['temperature'].set_base_value(predicted_state['temperature'])

    def run_realtime_simulation(self, duration_seconds: int = 10,
                                 update_interval: float = 1.0) -> None:
        """ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"""
        print(f"\nStarting real-time simulation for {duration_seconds} seconds...")
        print("=" * 70)

        start_time = time.time()
        while time.time() - start_time < duration_seconds:
            self.synchronize()

            # ç¾åœ¨çŠ¶æ…‹ã®è¡¨ç¤º
            latest = self.state_history[-1]
            sensor_T = latest['sensor_data'].get('temperature', 0)
            predicted_T = latest['predicted_state'].get('temperature', 0)
            sensor_C = latest['sensor_data'].get('concentration', 0)
            predicted_C = latest['predicted_state'].get('concentration', 0)

            print(f"[t={len(self.state_history):3d}s] "
                  f"Sensor: T={sensor_T:6.2f}Â°C, C={sensor_C:.3f}mol/L | "
                  f"Model: T={predicted_T:6.2f}Â°C, C={predicted_C:.3f}mol/L")

            time.sleep(update_interval)

        print("=" * 70)
        print("Simulation completed")

    def visualize_state_history(self) -> None:
        """çŠ¶æ…‹å±¥æ­´ã®å¯è¦–åŒ–"""
        if not self.state_history:
            print("No data to visualize")
            return

        times = list(range(len(self.state_history)))
        sensor_temps = [s['sensor_data'].get('temperature', 0) for s in self.state_history]
        predicted_temps = [s['predicted_state'].get('temperature', 0) for s in self.state_history]
        sensor_concs = [s['sensor_data'].get('concentration', 0) for s in self.state_history]
        predicted_concs = [s['predicted_state'].get('concentration', 0) for s in self.state_history]

        fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(12, 8))

        # æ¸©åº¦ãƒ—ãƒ­ãƒƒãƒˆ
        ax1.plot(times, sensor_temps, 'o-', label='Sensor (Physical)',
                 color='#11998e', linewidth=2, markersize=4)
        ax1.plot(times, predicted_temps, 's--', label='Model (Digital Twin)',
                 color='#e74c3c', linewidth=2, markersize=4, alpha=0.7)
        ax1.set_xlabel('Time [s]', fontsize=11)
        ax1.set_ylabel('Temperature [Â°C]', fontsize=11)
        ax1.set_title('Digital Twin Temperature Synchronization', fontsize=13, fontweight='bold')
        ax1.legend(fontsize=10)
        ax1.grid(alpha=0.3)

        # æ¿ƒåº¦ãƒ—ãƒ­ãƒƒãƒˆ
        ax2.plot(times, sensor_concs, 'o-', label='Sensor (Physical)',
                 color='#11998e', linewidth=2, markersize=4)
        ax2.plot(times, predicted_concs, 's--', label='Model (Digital Twin)',
                 color='#e74c3c', linewidth=2, markersize=4, alpha=0.7)
        ax2.set_xlabel('Time [s]', fontsize=11)
        ax2.set_ylabel('Concentration [mol/L]', fontsize=11)
        ax2.set_title('Digital Twin Concentration Synchronization', fontsize=13, fontweight='bold')
        ax2.legend(fontsize=10)
        ax2.grid(alpha=0.3)

        plt.tight_layout()
        plt.show()


# ä½¿ç”¨ä¾‹: ç°¡æ˜“ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã®å®Ÿè¡Œ
print("=" * 70)
print("ç°¡æ˜“ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—")
print("=" * 70)

# ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®ä½œæˆ
dt_prototype = SimpleDigitalTwinPrototype(twin_id="DT-PROTO-001")

# ä»®æƒ³ã‚»ãƒ³ã‚µãƒ¼ã®è¿½åŠ 
temp_sensor = VirtualSensor('TI-101', 'temperature', base_value=185.0, noise_std=1.0)
conc_sensor = VirtualSensor('AI-104', 'concentration', base_value=2.5, noise_std=0.05)

dt_prototype.add_sensor(temp_sensor)
dt_prototype.add_sensor(conc_sensor)

# ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã®è¨­å®š
dt_prototype.set_physical_model(model=lambda x: x)

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
dt_prototype.run_realtime_simulation(duration_seconds=10, update_interval=1.0)

# çŠ¶æ…‹å±¥æ­´ã®å¯è¦–åŒ–
# dt_prototype.visualize_state_history()  # matplotlibè¡¨ç¤ºï¼ˆå®Ÿè¡Œæ™‚ã«ã‚³ãƒ¡ãƒ³ãƒˆè§£é™¤ï¼‰

print(f"\nTotal synchronized states: {len(dt_prototype.state_history)}")
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>======================================================================
ç°¡æ˜“ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—
======================================================================
Added sensor: TI-101 (temperature)
Added sensor: AI-104 (concentration)
Physical model configured

Starting real-time simulation for 10 seconds...
======================================================================
[t=  1s] Sensor: T=186.23Â°C, C=2.512mol/L | Model: T=184.87Â°C, C=2.488mol/L
[t=  2s] Sensor: T=183.65Â°C, C=2.475mol/L | Model: T=183.72Â°C, C=2.476mol/L
[t=  3s] Sensor: T=182.48Â°C, C=2.463mol/L | Model: T=182.58Â°C, C=2.464mol/L
[t=  4s] Sensor: T=181.34Â°C, C=2.451mol/L | Model: T=181.45Â°C, C=2.452mol/L
[t=  5s] Sensor: T=180.21Â°C, C=2.439mol/L | Model: T=180.33Â°C, C=2.440mol/L
[t=  6s] Sensor: T=179.10Â°C, C=2.427mol/L | Model: T=179.22Â°C, C=2.429mol/L
[t=  7s] Sensor: T=178.00Â°C, C=2.416mol/L | Model: T=178.13Â°C, C=2.417mol/L
[t=  8s] Sensor: T=176.92Â°C, C=2.404mol/L | Model: T=177.05Â°C, C=2.406mol/L
[t=  9s] Sensor: T=175.85Â°C, C=2.393mol/L | Model: T=175.98Â°C, C=2.395mol/L
[t= 10s] Sensor: T=174.80Â°C, C=2.382mol/L | Model: T=174.92Â°C, C=2.383mol/L
======================================================================
Simulation completed

Total synchronized states: 10
</code></pre>

<p><strong>è§£èª¬:</strong> ã“ã®ç°¡æ˜“ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã¯ã€ä»®æƒ³ã‚»ãƒ³ã‚µãƒ¼ï¼ˆç‰©ç†ã‚·ã‚¹ãƒ†ãƒ ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ï¼ˆç‰©ç†ãƒ¢ãƒ‡ãƒ«ï¼‰ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«åŒæœŸã•ã›ã¾ã™ã€‚å®Ÿéš›ã®IoTã‚»ãƒ³ã‚µãƒ¼ã¨ã®çµ±åˆã¯ç¬¬2ç« ã§æ‰±ã„ã¾ã™ã€‚</p>

<hr />

<h3>ã‚³ãƒ¼ãƒ‰ä¾‹7: ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ç·åˆãƒ‡ãƒ¢ï¼ˆçŠ¶æ…‹å¯è¦–åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰</h3>

<pre><code class="language-python">from dataclasses import dataclass
from typing import Dict, List
import numpy as np
from datetime import datetime

@dataclass
class DigitalTwinDashboard:
    """ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³å¯è¦–åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰"""

    twin_id: str
    state_history: List[Dict] = None

    def __post_init__(self):
        if self.state_history is None:
            self.state_history = []

    def update_dashboard(self, sensor_data: Dict[str, float],
                         model_prediction: Dict[str, float],
                         alerts: List[str] = None) -> None:
        """ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°"""
        dashboard_entry = {
            'timestamp': datetime.now(),
            'sensor_data': sensor_data,
            'model_prediction': model_prediction,
            'deviation': self._calculate_deviation(sensor_data, model_prediction),
            'alerts': alerts or []
        }
        self.state_history.append(dashboard_entry)

    def _calculate_deviation(self, sensor: Dict[str, float],
                              model: Dict[str, float]) -> Dict[str, float]:
        """ã‚»ãƒ³ã‚µãƒ¼ã¨ãƒ¢ãƒ‡ãƒ«ã®ä¹–é›¢è¨ˆç®—"""
        deviations = {}
        for key in sensor.keys():
            if key in model:
                deviation = abs(sensor[key] - model[key])
                deviations[key] = deviation
        return deviations

    def generate_text_dashboard(self) -> str:
        """ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ç”Ÿæˆ"""
        if not self.state_history:
            return "No data available"

        latest = self.state_history[-1]

        dashboard_text = f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           DIGITAL TWIN MONITORING DASHBOARD                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Twin ID: {self.twin_id}
Timestamp: {latest['timestamp'].strftime('%Y-%m-%d %H:%M:%S')}
Status: {'âš ï¸  ALERT' if latest['alerts'] else 'âœ… NORMAL'}

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROCESS VARIABLES                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
"""
        # ãƒ—ãƒ­ã‚»ã‚¹å¤‰æ•°ã®è¡¨ç¤º
        sensor = latest['sensor_data']
        model = latest['model_prediction']
        deviation = latest['deviation']

        for key in sensor.keys():
            if key != 'timestamp':
                sensor_val = sensor.get(key, 0)
                model_val = model.get(key, 0)
                dev_val = deviation.get(key, 0)

                # ã‚¢ãƒ©ãƒ¼ãƒˆåˆ¤å®š
                alert_symbol = "âš ï¸ " if dev_val > 5.0 else "  "

                dashboard_text += f"â”‚ {alert_symbol}{key.upper():20s}: Sensor={sensor_val:7.2f} | Model={model_val:7.2f} | Î”={dev_val:5.2f} â”‚\n"

        dashboard_text += "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n"

        # ã‚¢ãƒ©ãƒ¼ãƒˆ
        if latest['alerts']:
            dashboard_text += "\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n"
            dashboard_text += "â”‚ ALERTS                                                            â”‚\n"
            dashboard_text += "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n"
            for alert in latest['alerts']:
                dashboard_text += f"â”‚ âš ï¸  {alert:63s} â”‚\n"
            dashboard_text += "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n"

        # çµ±è¨ˆæƒ…å ±
        if len(self.state_history) > 1:
            recent_temps = [s['sensor_data'].get('temperature', 0) for s in self.state_history[-10:]]
            dashboard_text += f"\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n"
            dashboard_text += f"â”‚ STATISTICS (Last 10 samples)                                      â”‚\n"
            dashboard_text += f"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n"
            dashboard_text += f"â”‚ Temperature: Avg={np.mean(recent_temps):6.2f}Â°C | Std={np.std(recent_temps):5.2f}Â°C       â”‚\n"
            dashboard_text += f"â”‚ Total Samples: {len(self.state_history):5d}                                         â”‚\n"
            dashboard_text += f"â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n"

        return dashboard_text

    def get_kpi_summary(self) -> Dict[str, Any]:
        """KPIã‚µãƒãƒªãƒ¼ã®å–å¾—"""
        if not self.state_history:
            return {}

        # å¹³å‡ä¹–é›¢ç‡
        all_deviations = [entry['deviation'] for entry in self.state_history]
        avg_deviation_temp = np.mean([d.get('temperature', 0) for d in all_deviations])

        # ã‚¢ãƒ©ãƒ¼ãƒˆç™ºç”Ÿç‡
        alert_count = sum(1 for entry in self.state_history if entry['alerts'])
        alert_rate = alert_count / len(self.state_history) * 100

        # ãƒ‡ãƒ¼ã‚¿å“è³ªã‚¹ã‚³ã‚¢ï¼ˆä¹–é›¢ãŒå°ã•ã„ã»ã©é«˜å“è³ªï¼‰
        quality_score = max(0, 100 - avg_deviation_temp * 10)

        return {
            'total_samples': len(self.state_history),
            'avg_deviation_temperature': avg_deviation_temp,
            'alert_count': alert_count,
            'alert_rate_percent': alert_rate,
            'data_quality_score': quality_score
        }


# ä½¿ç”¨ä¾‹: ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ¢
dashboard = DigitalTwinDashboard(twin_id="DT-REACTOR-001")

# ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿
np.random.seed(42)
for i in range(15):
    # ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆç‰©ç†ã‚·ã‚¹ãƒ†ãƒ ï¼‰
    sensor_data = {
        'temperature': 185.0 + np.random.normal(0, 2.0),
        'pressure': 3.5 + np.random.normal(0, 0.2),
        'concentration': 2.5 + np.random.normal(0, 0.1)
    }

    # ãƒ¢ãƒ‡ãƒ«äºˆæ¸¬ï¼ˆãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ï¼‰
    model_prediction = {
        'temperature': sensor_data['temperature'] + np.random.normal(0, 1.5),
        'pressure': sensor_data['pressure'] + np.random.normal(0, 0.1),
        'concentration': sensor_data['concentration'] + np.random.normal(0, 0.05)
    }

    # ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆ
    alerts = []
    if abs(sensor_data['temperature'] - model_prediction['temperature']) > 4.0:
        alerts.append("High deviation in temperature prediction")
    if sensor_data['temperature'] > 190:
        alerts.append("Temperature approaching upper limit")

    dashboard.update_dashboard(sensor_data, model_prediction, alerts)

# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º
print(dashboard.generate_text_dashboard())

# KPIã‚µãƒãƒªãƒ¼
kpi = dashboard.get_kpi_summary()
print("\n" + "=" * 70)
print("KPI SUMMARY")
print("=" * 70)
print(f"Total Samples: {kpi['total_samples']}")
print(f"Avg Temperature Deviation: {kpi['avg_deviation_temperature']:.2f}Â°C")
print(f"Alert Count: {kpi['alert_count']}")
print(f"Alert Rate: {kpi['alert_rate_percent']:.1f}%")
print(f"Data Quality Score: {kpi['data_quality_score']:.1f}/100")
</code></pre>

<p><strong>å‡ºåŠ›ä¾‹:</strong></p>
<pre><code>
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           DIGITAL TWIN MONITORING DASHBOARD                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Twin ID: DT-REACTOR-001
Timestamp: 2025-10-26 10:30:45
Status: âœ… NORMAL

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROCESS VARIABLES                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   TEMPERATURE        : Sensor= 185.47 | Model= 184.82 | Î”= 0.65 â”‚
â”‚   PRESSURE           : Sensor=   3.52 | Model=   3.48 | Î”= 0.04 â”‚
â”‚   CONCENTRATION      : Sensor=   2.51 | Model=   2.50 | Î”= 0.01 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STATISTICS (Last 10 samples)                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Temperature: Avg=185.12Â°C | Std= 1.85Â°C       â”‚
â”‚ Total Samples:    15                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

======================================================================
KPI SUMMARY
======================================================================
Total Samples: 15
Avg Temperature Deviation: 1.42Â°C
Alert Count: 2
Alert Rate: 13.3%
Data Quality Score: 85.8/100
</code></pre>

<p><strong>è§£èª¬:</strong> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯ã€ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®çŠ¶æ…‹ç›£è¦–ã®ä¸­å¿ƒçš„å½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¢ãƒ‡ãƒ«äºˆæ¸¬ã®ä¹–é›¢ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å¯è¦–åŒ–ã—ã€ã‚¢ãƒ©ãƒ¼ãƒˆã¨KPIã«ã‚ˆã‚Šé‹ç”¨è€…ã®æ„æ€æ±ºå®šã‚’æ”¯æ´ã—ã¾ã™ã€‚</p>

<hr />

<h2>1.3 æœ¬ç« ã®ã¾ã¨ã‚</h2>

<h3>å­¦ã‚“ã ã“ã¨</h3>

<ol>
<li><strong>ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®æ¦‚å¿µ</strong>
<ul>
<li>ç‰©ç†ã‚·ã‚¹ãƒ†ãƒ ã®ä»®æƒ³ãƒ¬ãƒ—ãƒªã‚«ã¨ã—ã¦ã®ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³</li>
<li>ãƒ‡ã‚¸ã‚¿ãƒ«ã‚·ãƒ£ãƒ‰ã‚¦ï¼ˆä¸€æ–¹å‘ï¼‰vs ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ï¼ˆåŒæ–¹å‘ï¼‰ã®é•ã„</li>
<li>ãƒ—ãƒ­ã‚»ã‚¹ç”£æ¥­ã«ãŠã‘ã‚‹ä¾¡å€¤ï¼ˆæœ€é©åŒ–ã€äºˆçŸ¥ä¿å…¨ã€ä»®æƒ³è©¦é‹è»¢ï¼‰</li>
</ul>
</li>
<li><strong>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ</strong>
<ul>
<li>ç‰©ç†ã‚·ã‚¹ãƒ†ãƒ å±¤ã€ãƒ‡ãƒ¼ã‚¿å±¤ã€ãƒ¢ãƒ‡ãƒ«å±¤ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã®4å±¤æ§‹é€ </li>
<li>çŠ¶æ…‹è¡¨ç¾ã¨JSONå½¢å¼ã§ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³</li>
<li>åŒæ–¹å‘ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®è¨­è¨ˆ</li>
</ul>
</li>
<li><strong>ãƒ¢ãƒ‡ãƒ«å¿ å®Ÿåº¦ãƒ¬ãƒ™ãƒ«</strong>
<ul>
<li>L1ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ­ã‚°ï¼‰â†’ L3ï¼ˆç‰©ç†ãƒ¢ãƒ‡ãƒ«ï¼‰â†’ L5ï¼ˆè‡ªå¾‹æœ€é©åŒ–ï¼‰</li>
<li>å„ãƒ¬ãƒ™ãƒ«ã®æ©Ÿèƒ½ã¨é©ç”¨ã‚·ãƒŠãƒªã‚ª</li>
</ul>
</li>
<li><strong>ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†</strong>
<ul>
<li>è¨­è¨ˆ â†’ å®Ÿè£… â†’ æ¤œè¨¼ â†’ é‹ç”¨ã®ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†</li>
<li>æ¤œè¨¼åŸºæº–ã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹</li>
</ul>
</li>
<li><strong>è©•ä¾¡æŒ‡æ¨™</strong>
<ul>
<li>ç²¾åº¦ï¼ˆRMSEã€RÂ²ï¼‰ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ï¼ˆãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼‰</li>
<li>ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ï¼ˆROIã€æŠ•è³‡å›åæœŸé–“ï¼‰</li>
</ul>
</li>
<li><strong>ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å®Ÿè£…</strong>
<ul>
<li>ä»®æƒ³ã‚»ãƒ³ã‚µãƒ¼ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã®åŒæœŸ</li>
<li>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚ˆã‚‹çŠ¶æ…‹ç›£è¦–</li>
</ul>
</li>
</ol>

<h3>é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h3>

<ul>
<li>ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ„ã‚¤ãƒ³ã¯å˜ãªã‚‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãªãã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã¨åŒæ–¹å‘ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒæœ¬è³ª</li>
<li>å¿ å®Ÿåº¦ãƒ¬ãƒ™ãƒ«L1-L5ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æˆç†Ÿåº¦ã«å¿œã˜ã¦æ®µéšçš„ã«é€²åŒ–ã•ã›ã‚‹</li>
<li>çŠ¶æ…‹è¡¨ç¾ã®è¨­è¨ˆãŒã€æ‹¡å¼µæ€§ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã®éµã¨ãªã‚‹</li>
<li>è©•ä¾¡æŒ‡æ¨™ã¯ã€ç²¾åº¦ã ã‘ã§ãªããƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã‚‚å«ã‚ã¦å®šç¾©ã™ã‚‹</li>
<li>ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ã«ã‚ˆã‚Šã€è¨­è¨ˆã‹ã‚‰é‹ç”¨ã¾ã§ä¸€è²«ã—ãŸå“è³ªã‚’ç¶­æŒã™ã‚‹</li>
</ul>

<h3>æ¬¡ã®ç« ã¸</h3>

<p>ç¬¬2ç« ã§ã¯ã€<strong>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿é€£æºã¨IoTçµ±åˆ</strong>ã‚’è©³ã—ãå­¦ã³ã¾ã™ï¼š</p>
<ul>
<li>ç”£æ¥­ç”¨é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆOPC UAã€MQTTï¼‰ã®å®Ÿè£…</li>
<li>æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆInfluxDBï¼‰ã¨ã®çµ±åˆ</li>
<li>ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ï¼ˆApache Kafkaï¼‰</li>
<li>ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿å“è³ªç®¡ç†ã¨ç•°å¸¸å€¤æ¤œå‡º</li>
<li>ã‚¨ãƒƒã‚¸ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</li>
</ul>

<div class="navigation">
    <a href="index.html" class="nav-button">ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ã«æˆ»ã‚‹</a>
    <a href="chapter-2.html" class="nav-button">æ¬¡ã®ç«  â†’</a>
</div>
    </main>


    <section class="disclaimer">
        <h3>å…è²¬äº‹é …</h3>
        <ul>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯æ•™è‚²ãƒ»ç ”ç©¶ãƒ»æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€å°‚é–€çš„ãªåŠ©è¨€(æ³•å¾‹ãƒ»ä¼šè¨ˆãƒ»æŠ€è¡“çš„ä¿è¨¼ãªã©)ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŠã‚ˆã³ä»˜éšã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹ã¯ã€Œç¾çŠ¶æœ‰å§¿(AS IS)ã€ã§æä¾›ã•ã‚Œã€æ˜ç¤ºã¾ãŸã¯é»™ç¤ºã‚’å•ã‚ãšã€å•†å“æ€§ã€ç‰¹å®šç›®çš„é©åˆæ€§ã€æ¨©åˆ©éä¾µå®³ã€æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã€å‹•ä½œãƒ»å®‰å…¨æ€§ç­‰ã„ã‹ãªã‚‹ä¿è¨¼ã‚‚ã—ã¾ã›ã‚“ã€‚</li>
            <li>å¤–éƒ¨ãƒªãƒ³ã‚¯ã€ç¬¬ä¸‰è€…ãŒæä¾›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã®å†…å®¹ãƒ»å¯ç”¨æ€§ãƒ»å®‰å…¨æ€§ã«ã¤ã„ã¦ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ãƒ»å®Ÿè¡Œãƒ»è§£é‡ˆã«ã‚ˆã‚Šç›´æ¥çš„ãƒ»é–“æ¥çš„ãƒ»ä»˜éšçš„ãƒ»ç‰¹åˆ¥ãƒ»çµæœçš„ãƒ»æ‡²ç½°çš„æå®³ãŒç”Ÿã˜ãŸå ´åˆã§ã‚‚ã€é©ç”¨æ³•ã§è¨±å®¹ã•ã‚Œã‚‹æœ€å¤§é™ã®ç¯„å›²ã§ã€ä½œæˆè€…ãŠã‚ˆã³æ±åŒ—å¤§å­¦ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å†…å®¹ã¯ã€äºˆå‘Šãªãå¤‰æ›´ãƒ»æ›´æ–°ãƒ»æä¾›åœæ­¢ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</li>
            <li>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‘—ä½œæ¨©ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯æ˜è¨˜ã•ã‚ŒãŸæ¡ä»¶(ä¾‹: CC BY 4.0)ã«å¾“ã„ã¾ã™ã€‚å½“è©²ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯é€šå¸¸ã€ç„¡ä¿è¨¼æ¡é …ã‚’å«ã¿ã¾ã™ã€‚</li>
        </ul>
    </section>

<footer>
        <p><strong>ä½œæˆè€…</strong>: PI Knowledge Hub Content Team</p>
        <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong>: 1.0 | <strong>ä½œæˆæ—¥</strong>: 2025-10-26</p>
        <p><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong>: Creative Commons BY 4.0</p>
        <p>&copy; 2025 PI Terakoya. All rights reserved.</p>
    </footer>
</body>
</html>
