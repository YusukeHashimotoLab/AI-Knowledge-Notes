<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬5ç« ï¼šPythonå®Ÿè·µï¼šãƒ—ãƒ­ã‚»ã‚¹æœ€é©åŒ–ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ | åˆæˆãƒ»è£½é€ ãƒ—ãƒ­ã‚»ã‚¹å…¥é–€</title>
    <meta name="description" content="ææ–™åˆæˆãƒ—ãƒ­ã‚»ã‚¹ã®æœ€é©åŒ–ã‚’Pythonã§å®Ÿè£…ã€‚ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã€å¤šç›®çš„æœ€é©åŒ–ã€æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹äºˆæ¸¬ã€çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè·µçš„ã«å­¦ã¶ã€‚">
    <meta name="keywords" content="ãƒ—ãƒ­ã‚»ã‚¹æœ€é©åŒ–, Python, å¤šç›®çš„æœ€é©åŒ–, æ©Ÿæ¢°å­¦ç¿’, ææ–™åˆæˆ, ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼">

    <!-- MathJax 3.x Configuration -->
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Mermaid.js for Diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#f093fb',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#f5576c',
                lineColor: '#f5576c',
                secondaryColor: '#ffeaa7',
                tertiaryColor: '#dfe6e9'
            }
        });
    </script>

    <!-- Prism.js for Code Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

    <style>
        :root {
            --gradient-start: #f093fb;
            --gradient-end: #f5576c;
            --primary-dark: #2c3e50;
            --primary-light: #ecf0f1;
            --text-dark: #34495e;
            --text-light: #7f8c8d;
            --code-bg: #2d2d2d;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', Meiryo, sans-serif;
            line-height: 1.8;
            color: var(--text-dark);
            background: linear-gradient(135deg, #ffeaa7 0%, #dfe6e9 100%);
            padding: 2rem 1rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        nav {
            background: var(--primary-dark);
            padding: 1rem;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            transition: background 0.3s ease;
            font-size: 0.95rem;
        }

        nav a:hover {
            background: rgba(255,255,255,0.2);
        }

        main {
            padding: 2rem;
        }

        section {
            margin-bottom: 3rem;
        }

        h2 {
            color: var(--primary-dark);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--gradient-end);
        }

        h3 {
            color: var(--text-dark);
            font-size: 1.4rem;
            margin: 2rem 0 1rem;
        }

        h4 {
            color: var(--text-dark);
            font-size: 1.1rem;
            margin: 1.5rem 0 0.75rem;
        }

        p {
            margin-bottom: 1rem;
            text-align: justify;
        }

        ul, ol {
            margin: 1rem 0 1rem 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        .info-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid var(--gradient-start);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .example-box {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        pre {
            background: var(--code-bg);
            border-radius: 8px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: var(--shadow);
            border-radius: 8px;
            overflow: hidden;
        }

        th {
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .mermaid {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            box-shadow: var(--shadow);
        }

        .equation {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            text-align: center;
            overflow-x: auto;
        }

        details {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid #ddd;
        }

        summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--gradient-end);
            padding: 0.5rem;
            user-select: none;
        }

        summary:hover {
            color: var(--gradient-start);
        }

        .exercise {
            background: linear-gradient(135deg, #fff9e6 0%, #ffe6f0 100%);
            border-left: 4px solid var(--gradient-end);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .exercise-header {
            font-weight: 700;
            color: var(--gradient-end);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .difficulty {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .difficulty.easy {
            background: #c8e6c9;
            color: #2e7d32;
        }

        .difficulty.medium {
            background: #fff9c4;
            color: #f57f17;
        }

        .difficulty.hard {
            background: #ffcdd2;
            color: #c62828;
        }

        .learning-objectives {
            background: linear-gradient(135deg, #e8eaf6 0%, #f3e5f5 100%);
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .learning-objectives h3 {
            color: var(--gradient-end);
            margin-top: 0;
        }

        .objective-level {
            margin: 1.5rem 0;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            border-left: 4px solid var(--gradient-start);
        }

        .objective-level h4 {
            color: var(--gradient-end);
            margin-top: 0;
        }

        footer {
            background: var(--primary-dark);
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        footer a {
            color: var(--gradient-start);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            body {
                padding: 0.5rem;
            }

            header h1 {
                font-size: 1.5rem;
            }

            header p {
                font-size: 1rem;
            }

            nav {
                flex-direction: column;
                align-items: center;
            }

            nav a {
                width: 100%;
                text-align: center;
            }

            main {
                padding: 1rem;
            }

            h2 {
                font-size: 1.5rem;
            }

            h3 {
                font-size: 1.2rem;
            }

            pre {
                font-size: 0.85rem;
                padding: 1rem;
            }

            table {
                font-size: 0.9rem;
            }

            th, td {
                padding: 0.5rem;
            }
        }
    
        /* Breadcrumb styles */
        .breadcrumb {
            background: #f7fafc;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumb-content {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .breadcrumb-separator {
            color: #a0aec0;
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: #4a5568;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
            <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="/wp/knowledge/jp/index.html">AIå¯ºå­å±‹ãƒˆãƒƒãƒ—</a><span class="breadcrumb-separator">â€º</span><a href="/wp/knowledge/jp/MS/index.html">ææ–™ç§‘å­¦</a><span class="breadcrumb-separator">â€º</span><a href="/wp/knowledge/jp/MS/synthesis-processes-introduction/index.html">Synthesis Processes</a><span class="breadcrumb-separator">â€º</span><span class="breadcrumb-current">Chapter 5</span>
        </div>
    </nav>

        <header>
            <h1>ç¬¬5ç« ï¼šPythonå®Ÿè·µï¼šãƒ—ãƒ­ã‚»ã‚¹æœ€é©åŒ–ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</h1>
            <p>çµ±åˆçš„ãªåˆæˆãƒ—ãƒ­ã‚»ã‚¹é¸æŠã¨å¤šç›®çš„æœ€é©åŒ–ã®å®Ÿè£…</p>
        </header>

        <nav>
            <a href="index.html">ãƒˆãƒƒãƒ—</a>
            <a href="chapter-1.html">ç¬¬1ç« </a>
            <a href="chapter-2.html">ç¬¬2ç« </a>
            <a href="chapter-3.html">ç¬¬3ç« </a>
            <a href="chapter-4.html">ç¬¬4ç« </a>
            <a href="chapter-5.html">ç¬¬5ç« </a>
        </nav>

        <main>
            <section id="introduction">
                <h2>5.1 ã¯ã˜ã‚ã«ï¼šçµ±åˆçš„ãƒ—ãƒ­ã‚»ã‚¹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</h2>

                <p>
                    ææ–™åˆæˆã«ãŠã„ã¦ã€ç›®çš„ã®ææ–™ç‰¹æ€§ï¼ˆå¯†åº¦ã€ç²’å¾„ã€çµ„æˆã€çµæ™¶æ€§ãªã©ï¼‰ã‚’é”æˆã™ã‚‹ãŸã‚ã«ã¯ã€è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆå›ºç›¸åå¿œã€æº¶æ¶²åˆæˆã€æ°—ç›¸æˆé•·ã€ç„¼çµï¼‰ã®ä¸­ã‹ã‚‰æœ€é©ãªæ‰‹æ³•ã‚’é¸æŠã—ã€ãã®ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æœ€é©åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æœ¬ç« ã§ã¯ã€ç¬¬1ç« ã‹ã‚‰ç¬¬4ç« ã§å­¦ã‚“ã å„ãƒ—ãƒ­ã‚»ã‚¹ã®ç†è«–ã¨Pythonã‚³ãƒ¼ãƒ‰ã‚’çµ±åˆã—ã€<strong>ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã®æ„æ€æ±ºå®šãƒ„ãƒªãƒ¼</strong>ã€<strong>å¤šç›®çš„æœ€é©åŒ–</strong>ã€<strong>æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«</strong>ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
                </p>

                <div class="info-box">
                    <h4>ğŸ¯ æœ¬ç« ã®å­¦ç¿’ç›®æ¨™</h4>
                    <ul>
                        <li>ææ–™ç‰¹æ€§ã¨åˆ¶ç´„æ¡ä»¶ã‹ã‚‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’é¸æŠã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…</li>
                        <li>è¤‡æ•°ã®ç›®çš„é–¢æ•°ï¼ˆå¯†åº¦ã€ç²’å¾„ã€ã‚³ã‚¹ãƒˆã€æ™‚é–“ï¼‰ã‚’åŒæ™‚ã«æœ€é©åŒ–ã™ã‚‹æ‰‹æ³•</li>
                        <li>å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã€æ–°è¦æ¡ä»¶ã§ã®ç‰¹æ€§ã‚’äºˆæ¸¬</li>
                        <li>çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ã‚ˆã‚‹å®Ÿè·µçš„ãªåˆæˆè¨ˆç”»ã®ç«‹æ¡ˆ</li>
                    </ul>
                </div>

                <div class="mermaid">
                flowchart TD
                    A[ææ–™è¦æ±‚ä»•æ§˜] --> B{ãƒ—ãƒ­ã‚»ã‚¹é¸æŠ}
                    B -->|å›ºç›¸åå¿œ| C[æ¸©åº¦ãƒ»æ™‚é–“æœ€é©åŒ–]
                    B -->|æº¶æ¶²åˆæˆ| D[pHãƒ»æ¿ƒåº¦æœ€é©åŒ–]
                    B -->|æ°—ç›¸æˆé•·| E[åœ§åŠ›ãƒ»å‰é§†ä½“æœ€é©åŒ–]
                    B -->|ç„¼çµ| F[æ¸©åº¦ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æœ€é©åŒ–]
                    C --> G[å¤šç›®çš„æœ€é©åŒ–]
                    D --> G
                    E --> G
                    F --> G
                    G --> H[Paretoæœ€é©è§£ç¾¤]
                    H --> I[å®Ÿé¨“è¨ˆç”»]
                    I --> J[ãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œ]
                    J --> K[ç‰¹æ€§è©•ä¾¡]
                    K --> L{ç›®æ¨™é”æˆ?}
                    L -->|No| M[æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«æ›´æ–°]
                    M --> G
                    L -->|Yes| N[æœ€çµ‚ãƒ—ãƒ­ã‚»ã‚¹ç¢ºå®š]
                </div>

                <p>
                    ä¸Šå›³ã¯ã€ææ–™è¦æ±‚ä»•æ§˜ã‹ã‚‰æœ€çµ‚ãƒ—ãƒ­ã‚»ã‚¹ç¢ºå®šã¾ã§ã®çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ã€å®Ÿé¨“æ¤œè¨¼ã€æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹äºˆæ¸¬ç²¾åº¦å‘ä¸Šã‚’ç¹°ã‚Šè¿”ã™ã“ã¨ã§ã€åŠ¹ç‡çš„ã«ç›®æ¨™ææ–™ã‚’åˆæˆã—ã¾ã™ã€‚
                </p>
            </section>

            <section id="process-selection">
                <h2>5.2 ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </h2>

                <p>
                    ææ–™ç‰¹æ€§ï¼ˆçµ„æˆã€çµæ™¶æ§‹é€ ã€ç²’å¾„ã€å¤šå­”æ€§ãªã©ï¼‰ã¨åˆ¶ç´„æ¡ä»¶ï¼ˆã‚³ã‚¹ãƒˆã€ç”Ÿç”£é‡ã€è¨­å‚™åˆ¶ç´„ï¼‰ã‹ã‚‰ã€æœ€é©ãªåˆæˆãƒ—ãƒ­ã‚»ã‚¹ã‚’é¸æŠã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…ã—ã¾ã™ã€‚æ±ºå®šæœ¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€å®šé‡çš„ãªãƒ—ãƒ­ã‚»ã‚¹é¸æŠãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
                </p>

                <h3>5.2.1 ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã®åˆ¤æ–­åŸºæº–</h3>

                <table>
                    <thead>
                        <tr>
                            <th>ãƒ—ãƒ­ã‚»ã‚¹</th>
                            <th>é©ç”¨ææ–™</th>
                            <th>ç²’å¾„ç¯„å›²</th>
                            <th>æ¸©åº¦ç¯„å›²</th>
                            <th>ç”Ÿç”£ã‚¹ã‚±ãƒ¼ãƒ«</th>
                            <th>ã‚³ã‚¹ãƒˆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>å›ºç›¸åå¿œ</td>
                            <td>ã‚»ãƒ©ãƒŸãƒƒã‚¯ã‚¹ã€è¤‡åˆé…¸åŒ–ç‰©</td>
                            <td>1-100 Î¼m</td>
                            <td>800-1600Â°C</td>
                            <td>kg-ton</td>
                            <td>ä½</td>
                        </tr>
                        <tr>
                            <td>ã‚¾ãƒ«-ã‚²ãƒ«æ³•</td>
                            <td>é…¸åŒ–ç‰©ã€ã‚¬ãƒ©ã‚¹ã€è–„è†œ</td>
                            <td>1-100 nm</td>
                            <td>å®¤æ¸©-500Â°C</td>
                            <td>mg-kg</td>
                            <td>ä¸­</td>
                        </tr>
                        <tr>
                            <td>å…±æ²ˆæ³•</td>
                            <td>æ°´é…¸åŒ–ç‰©ã€ç‚­é…¸å¡©</td>
                            <td>10-500 nm</td>
                            <td>å®¤æ¸©-100Â°C</td>
                            <td>g-kg</td>
                            <td>ä½</td>
                        </tr>
                        <tr>
                            <td>æ°´ç†±åˆæˆ</td>
                            <td>ã‚¼ã‚ªãƒ©ã‚¤ãƒˆã€é›£æº¶æ€§é…¸åŒ–ç‰©</td>
                            <td>50 nm-10 Î¼m</td>
                            <td>100-350Â°C</td>
                            <td>mg-g</td>
                            <td>ä¸­-é«˜</td>
                        </tr>
                        <tr>
                            <td>CVD</td>
                            <td>è–„è†œã€ã‚³ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</td>
                            <td>1 nm-10 Î¼m</td>
                            <td>300-1200Â°C</td>
                            <td>ã‚¦ã‚¨ãƒå˜ä½</td>
                            <td>é«˜</td>
                        </tr>
                        <tr>
                            <td>PVD</td>
                            <td>é‡‘å±ã€ã‚»ãƒ©ãƒŸãƒƒã‚¯è–„è†œ</td>
                            <td>1-100 nm</td>
                            <td>å®¤æ¸©-500Â°C</td>
                            <td>ã‚¦ã‚¨ãƒå˜ä½</td>
                            <td>é«˜</td>
                        </tr>
                        <tr>
                            <td>ç„¼çµ</td>
                            <td>ç·»å¯†åŒ–ã€å½¢çŠ¶åŠ å·¥</td>
                            <td>-</td>
                            <td>1000-1800Â°C</td>
                            <td>å€‹-ãƒ­ãƒƒãƒˆ</td>
                            <td>ä¸­</td>
                        </tr>
                    </tbody>
                </table>

                <h3>5.2.2 ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°é–¢æ•°</h3>

                <pre><code class="language-python">import numpy as np
import pandas as pd
from typing import Dict, List, Tuple

class ProcessSelector:
    """
    ææ–™ç‰¹æ€§ã¨åˆ¶ç´„æ¡ä»¶ã‹ã‚‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’é¸æŠã™ã‚‹ã‚¯ãƒ©ã‚¹

    Attributes:
        processes: åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ­ã‚»ã‚¹ã®ãƒªã‚¹ãƒˆ
        criteria: é¸æŠåŸºæº–ã®é‡ã¿ä»˜ã‘
    """

    def __init__(self):
        self.processes = ['solid_state', 'sol_gel', 'coprecipitation',
                         'hydrothermal', 'cvd', 'pvd', 'sintering']

        # ãƒ—ãƒ­ã‚»ã‚¹ç‰¹æ€§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆä¸Šè¨˜ã®è¡¨ã‚’ãƒ‡ãƒ¼ã‚¿åŒ–ï¼‰
        self.process_db = {
            'solid_state': {
                'grain_size': (1e-6, 100e-6),  # m
                'temp_range': (800, 1600),      # Â°C
                'scale': (1, 1000),             # kg
                'cost': 1.0,                    # normalized
                'materials': ['ceramics', 'oxides', 'composites']
            },
            'sol_gel': {
                'grain_size': (1e-9, 100e-9),
                'temp_range': (25, 500),
                'scale': (0.001, 1),
                'cost': 2.0,
                'materials': ['oxides', 'glass', 'thin_films']
            },
            'coprecipitation': {
                'grain_size': (10e-9, 500e-9),
                'temp_range': (25, 100),
                'scale': (0.01, 1),
                'cost': 1.0,
                'materials': ['hydroxides', 'carbonates', 'oxides']
            },
            'hydrothermal': {
                'grain_size': (50e-9, 10e-6),
                'temp_range': (100, 350),
                'scale': (0.001, 0.1),
                'cost': 2.5,
                'materials': ['zeolites', 'oxides', 'phosphates']
            },
            'cvd': {
                'grain_size': (1e-9, 10e-6),
                'temp_range': (300, 1200),
                'scale': (0.0001, 0.001),  # wafer basis
                'cost': 3.5,
                'materials': ['thin_films', 'coatings', 'semiconductors']
            },
            'pvd': {
                'grain_size': (1e-9, 100e-9),
                'temp_range': (25, 500),
                'scale': (0.0001, 0.001),
                'cost': 3.5,
                'materials': ['metals', 'ceramics', 'thin_films']
            },
            'sintering': {
                'grain_size': (1e-6, 50e-6),
                'temp_range': (1000, 1800),
                'scale': (0.01, 100),
                'cost': 2.0,
                'materials': ['ceramics', 'metals', 'composites']
            }
        }

    def calculate_score(self, process: str, requirements: Dict) -> float:
        """
        ãƒ—ãƒ­ã‚»ã‚¹ã®ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—

        Args:
            process: ãƒ—ãƒ­ã‚»ã‚¹å
            requirements: ææ–™è¦æ±‚ä»•æ§˜
                - grain_size: ç›®æ¨™ç²’å¾„ (m)
                - temp_limit: æœ€å¤§æ¸©åº¦åˆ¶ç´„ (Â°C)
                - scale: ç”Ÿç”£é‡ (kg)
                - cost_weight: ã‚³ã‚¹ãƒˆé‡ã¿ (0-1)
                - material_type: ææ–™ã‚¿ã‚¤ãƒ—

        Returns:
            ã‚¹ã‚³ã‚¢ï¼ˆ0-100ã€é«˜ã„ã»ã©é©åˆï¼‰
        """
        proc = self.process_db[process]
        score = 0.0

        # 1. ç²’å¾„é©åˆæ€§ï¼ˆ30ç‚¹ï¼‰
        grain_size = requirements.get('grain_size', 1e-6)
        if proc['grain_size'][0] <= grain_size <= proc['grain_size'][1]:
            score += 30
        else:
            # ç¯„å›²å¤–ã®å ´åˆã€è·é›¢ã«å¿œã˜ã¦æ¸›ç‚¹
            if grain_size < proc['grain_size'][0]:
                ratio = grain_size / proc['grain_size'][0]
            else:
                ratio = proc['grain_size'][1] / grain_size
            score += 30 * ratio

        # 2. æ¸©åº¦åˆ¶ç´„é©åˆæ€§ï¼ˆ25ç‚¹ï¼‰
        temp_limit = requirements.get('temp_limit', 2000)
        if proc['temp_range'][1] <= temp_limit:
            score += 25
        else:
            score += 25 * (temp_limit / proc['temp_range'][1])

        # 3. ã‚¹ã‚±ãƒ¼ãƒ«é©åˆæ€§ï¼ˆ20ç‚¹ï¼‰
        scale = requirements.get('scale', 1)
        if proc['scale'][0] <= scale <= proc['scale'][1]:
            score += 20
        else:
            if scale < proc['scale'][0]:
                ratio = scale / proc['scale'][0]
            else:
                ratio = proc['scale'][1] / scale
            score += 20 * max(0, ratio)

        # 4. ã‚³ã‚¹ãƒˆé©åˆæ€§ï¼ˆ15ç‚¹ï¼‰
        cost_weight = requirements.get('cost_weight', 0.5)
        cost_score = 15 * (1 - (proc['cost'] / 3.5) * cost_weight)
        score += cost_score

        # 5. ææ–™ã‚¿ã‚¤ãƒ—é©åˆæ€§ï¼ˆ10ç‚¹ï¼‰
        material_type = requirements.get('material_type', 'ceramics')
        if material_type in proc['materials']:
            score += 10

        return max(0, min(100, score))

    def select_process(self, requirements: Dict, top_n: int = 3) -> List[Tuple[str, float]]:
        """
        è¦æ±‚ä»•æ§˜ã‹ã‚‰é©åˆ‡ãªãƒ—ãƒ­ã‚»ã‚¹ã‚’é¸æŠ

        Args:
            requirements: ææ–™è¦æ±‚ä»•æ§˜
            top_n: ä¸Šä½Nå€‹ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¿”ã™

        Returns:
            [(ãƒ—ãƒ­ã‚»ã‚¹å, ã‚¹ã‚³ã‚¢), ...] ã®ãƒªã‚¹ãƒˆï¼ˆã‚¹ã‚³ã‚¢é™é †ï¼‰
        """
        scores = []
        for process in self.processes:
            score = self.calculate_score(process, requirements)
            scores.append((process, score))

        scores.sort(key=lambda x: x[1], reverse=True)
        return scores[:top_n]

# ä½¿ç”¨ä¾‹
selector = ProcessSelector()

# ã‚±ãƒ¼ã‚¹1: ãƒŠãƒç²’å­ã‚»ãƒ©ãƒŸãƒƒã‚¯ã‚¹ï¼ˆ10 nmç›®æ¨™ã€ä½ã‚³ã‚¹ãƒˆå„ªå…ˆï¼‰
requirements1 = {
    'grain_size': 10e-9,        # 10 nm
    'temp_limit': 500,          # 500Â°Cä»¥ä¸‹
    'scale': 0.1,               # 100 g
    'cost_weight': 0.8,         # ã‚³ã‚¹ãƒˆé‡è¦–
    'material_type': 'oxides'
}

print("ã‚±ãƒ¼ã‚¹1: ãƒŠãƒç²’å­é…¸åŒ–ç‰©ï¼ˆ10 nmã€ä½ã‚³ã‚¹ãƒˆï¼‰")
top_processes1 = selector.select_process(requirements1)
for process, score in top_processes1:
    print(f"  {process}: {score:.1f}ç‚¹")

# ã‚±ãƒ¼ã‚¹2: ãƒãƒ«ã‚¯ã‚»ãƒ©ãƒŸãƒƒã‚¯ã‚¹ï¼ˆ1 Î¼mç›®æ¨™ã€å¤§é‡ç”Ÿç”£ï¼‰
requirements2 = {
    'grain_size': 1e-6,         # 1 Î¼m
    'temp_limit': 1600,         # 1600Â°Cä»¥ä¸‹
    'scale': 10,                # 10 kg
    'cost_weight': 0.5,         # ã‚³ã‚¹ãƒˆã¯ä¸­ç¨‹åº¦
    'material_type': 'ceramics'
}

print("\nã‚±ãƒ¼ã‚¹2: ãƒãƒ«ã‚¯ã‚»ãƒ©ãƒŸãƒƒã‚¯ã‚¹ï¼ˆ1 Î¼mã€10 kgï¼‰")
top_processes2 = selector.select_process(requirements2)
for process, score in top_processes2:
    print(f"  {process}: {score:.1f}ç‚¹")

# ã‚±ãƒ¼ã‚¹3: é«˜çµæ™¶æ€§è–„è†œï¼ˆ100 nmã€ç²¾å¯†åˆ¶å¾¡ï¼‰
requirements3 = {
    'grain_size': 100e-9,       # 100 nm
    'temp_limit': 800,          # 800Â°Cä»¥ä¸‹
    'scale': 0.0001,            # ã‚¦ã‚¨ãƒ
    'cost_weight': 0.2,         # ã‚³ã‚¹ãƒˆã¯ä½å„ªå…ˆ
    'material_type': 'thin_films'
}

print("\nã‚±ãƒ¼ã‚¹3: é«˜çµæ™¶æ€§è–„è†œï¼ˆ100 nmã€ã‚¦ã‚¨ãƒï¼‰")
top_processes3 = selector.select_process(requirements3)
for process, score in top_processes3:
    print(f"  {process}: {score:.1f}ç‚¹")
</code></pre>

                <div class="example-box">
                    <h4>ğŸ“Š å®Ÿè¡Œçµæœã®ä¾‹</h4>
                    <pre>ã‚±ãƒ¼ã‚¹1: ãƒŠãƒç²’å­é…¸åŒ–ç‰©ï¼ˆ10 nmã€ä½ã‚³ã‚¹ãƒˆï¼‰
  coprecipitation: 77.5ç‚¹
  sol_gel: 72.0ç‚¹
  hydrothermal: 68.3ç‚¹

ã‚±ãƒ¼ã‚¹2: ãƒãƒ«ã‚¯ã‚»ãƒ©ãƒŸãƒƒã‚¯ã‚¹ï¼ˆ1 Î¼mã€10 kgï¼‰
  solid_state: 95.0ç‚¹
  sintering: 85.0ç‚¹
  hydrothermal: 62.5ç‚¹

ã‚±ãƒ¼ã‚¹3: é«˜çµæ™¶æ€§è–„è†œï¼ˆ100 nmã€ã‚¦ã‚¨ãƒï¼‰
  cvd: 88.6ç‚¹
  pvd: 85.0ç‚¹
  sol_gel: 68.0ç‚¹</pre>
                </div>

                <p>
                    ã“ã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€ææ–™è¦æ±‚ä»•æ§˜ã‹ã‚‰å®šé‡çš„ã«ãƒ—ãƒ­ã‚»ã‚¹ã‚’é¸æŠã§ãã¾ã™ã€‚å®Ÿéš›ã«ã¯ã€è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ„ã¿åˆã‚ã›ã‚‹ï¼ˆä¾‹ï¼šå…±æ²ˆæ³•ã§å‰é§†ä½“åˆæˆâ†’ç„¼çµã§ç·»å¯†åŒ–ï¼‰æˆ¦ç•¥ã‚‚é‡è¦ã§ã™ã€‚
                </p>
            </section>

            <section id="multi-objective">
                <h2>5.3 å¤šç›®çš„æœ€é©åŒ–</h2>

                <p>
                    å®Ÿéš›ã®ææ–™åˆæˆã§ã¯ã€å˜ä¸€ã®ç›®çš„ï¼ˆä¾‹ï¼šå¯†åº¦æœ€å¤§åŒ–ï¼‰ã ã‘ã§ãªãã€è¤‡æ•°ã®ç›®çš„ï¼ˆå¯†åº¦ã€ç²’å¾„ã€ã‚³ã‚¹ãƒˆã€æ™‚é–“ï¼‰ã‚’åŒæ™‚ã«æœ€é©åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®ç›®çš„ã¯äº’ã„ã«ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã®é–¢ä¿‚ã«ã‚ã‚‹ã“ã¨ãŒå¤šãï¼ˆä¾‹ï¼šå¯†åº¦ã‚’ä¸Šã’ã‚‹ã¨æ™‚é–“ãŒã‹ã‹ã‚‹ï¼‰ã€<strong>Paretoæœ€é©è§£</strong>ã®æ¦‚å¿µãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ã€ç„¼çµãƒ—ãƒ­ã‚»ã‚¹ã‚’ä¾‹ã«å¤šç›®çš„æœ€é©åŒ–ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
                </p>

                <h3>5.3.1 ç›®çš„é–¢æ•°ã®å®šç¾©</h3>

                <p>
                    ç„¼çµãƒ—ãƒ­ã‚»ã‚¹ã«ãŠã‘ã‚‹4ã¤ã®ç›®çš„é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ï¼š
                </p>

                <ul>
                    <li><strong>å¯†åº¦</strong>ï¼šç›¸å¯¾å¯†åº¦ Ï<sub>rel</sub> ã‚’æœ€å¤§åŒ–ï¼ˆç†è«–å¯†åº¦ã«å¯¾ã™ã‚‹æ¯”ç‡ã€0-1ï¼‰</li>
                    <li><strong>ç²’å¾„</strong>ï¼šå¹³å‡ç²’å¾„ G ã‚’æœ€å°åŒ–ï¼ˆç²’æˆé•·ã‚’æŠ‘åˆ¶ï¼‰</li>
                    <li><strong>ã‚³ã‚¹ãƒˆ</strong>ï¼šã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ C = âˆ« P(T) dt ã‚’æœ€å°åŒ–ï¼ˆæ¸©åº¦ä¾å­˜é›»åŠ›ï¼‰</li>
                    <li><strong>æ™‚é–“</strong>ï¼šç·ãƒ—ãƒ­ã‚»ã‚¹æ™‚é–“ t<sub>total</sub> ã‚’æœ€å°åŒ–</li>
                </ul>

                <p>
                    ã“ã‚Œã‚‰ã®ç›®çš„é–¢æ•°ã¯ã€ç„¼çµæ¸©åº¦ Tã€ä¿æŒæ™‚é–“ tã€æ˜‡æ¸©é€Ÿåº¦ R ã®é–¢æ•°ã¨ã—ã¦è¡¨ã•ã‚Œã¾ã™ã€‚
                </p>

                <h3>5.3.2 NSGA-II (Non-dominated Sorting Genetic Algorithm II) ã«ã‚ˆã‚‹å¤šç›®çš„æœ€é©åŒ–</h3>

                <pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import differential_evolution
from typing import Tuple, List

class SinteringMultiObjective:
    """
    ç„¼çµãƒ—ãƒ­ã‚»ã‚¹ã®å¤šç›®çš„æœ€é©åŒ–ã‚¯ãƒ©ã‚¹

    ç›®çš„é–¢æ•°:
        1. å¯†åº¦æœ€å¤§åŒ–ï¼ˆÏ_rel â†’ 1ï¼‰
        2. ç²’å¾„æœ€å°åŒ–ï¼ˆG â†’ minï¼‰
        3. ã‚³ã‚¹ãƒˆæœ€å°åŒ–ï¼ˆC â†’ minï¼‰
        4. æ™‚é–“æœ€å°åŒ–ï¼ˆt â†’ minï¼‰

    æ±ºå®šå¤‰æ•°:
        - T_sinter: ç„¼çµæ¸©åº¦ [Â°C] (1000-1600)
        - t_hold: ä¿æŒæ™‚é–“ [min] (10-300)
        - R_heating: æ˜‡æ¸©é€Ÿåº¦ [Â°C/min] (1-20)
    """

    def __init__(self):
        # ææ–™å®šæ•°ï¼ˆã‚¢ãƒ«ãƒŸãƒŠã‚’ä¾‹ã«ï¼‰
        self.D0 = 1e-4          # æ‹¡æ•£ä¿‚æ•°ãƒ—ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ [mÂ²/s]
        self.Q_diff = 400e3     # æ‹¡æ•£æ´»æ€§åŒ–ã‚¨ãƒãƒ«ã‚®ãƒ¼ [J/mol]
        self.R_gas = 8.314      # æ°—ä½“å®šæ•° [J/(molÂ·K)]
        self.k_grain = 1e-15    # ç²’æˆé•·å®šæ•° [mÂ³/s]
        self.Q_grain = 450e3    # ç²’æˆé•·æ´»æ€§åŒ–ã‚¨ãƒãƒ«ã‚®ãƒ¼ [J/mol]
        self.G0 = 500e-9        # åˆæœŸç²’å¾„ [m]
        self.rho0 = 0.55        # åˆæœŸç›¸å¯¾å¯†åº¦
        self.power_base = 5000  # åŸºæº–é›»åŠ› [W] at 1200Â°C

    def density_evolution(self, T: float, t: float) -> float:
        """
        å¯†åº¦ç™ºå±•ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç°¡æ˜“ãƒ¢ãƒ‡ãƒ«ï¼‰

        dÏ/dt = (D/GÂ²) * (1-Ï)^(1/3) * Î³_sv * Î© / (k_B * T)

        Args:
            T: ç„¼çµæ¸©åº¦ [Â°C]
            t: ä¿æŒæ™‚é–“ [min]

        Returns:
            ç›¸å¯¾å¯†åº¦ Ï_rel
        """
        T_K = T + 273.15
        D = self.D0 * np.exp(-self.Q_diff / (self.R_gas * T_K))

        # ç°¡æ˜“åŒ–: Ï(t) = 1 - (1 - Ï0) * exp(-k_dens * t)
        k_dens = D * 1e9  # å¯†åº¦åŒ–é€Ÿåº¦å®šæ•°ï¼ˆæ¸©åº¦ä¾å­˜ï¼‰
        rho = 1 - (1 - self.rho0) * np.exp(-k_dens * t * 60)  # t [min] â†’ [s]

        return min(rho, 0.999)  # ä¸Šé™ã‚’è¨­å®š

    def grain_growth(self, T: float, t: float) -> float:
        """
        ç²’æˆé•·ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

        GÂ³ - G0Â³ = k * exp(-Q/(RT)) * t

        Args:
            T: ç„¼çµæ¸©åº¦ [Â°C]
            t: ä¿æŒæ™‚é–“ [min]

        Returns:
            å¹³å‡ç²’å¾„ G [m]
        """
        T_K = T + 273.15
        k = self.k_grain * np.exp(-self.Q_grain / (self.R_gas * T_K))

        G3 = self.G0**3 + k * t * 60  # t [min] â†’ [s]
        G = G3**(1/3)

        return G

    def energy_cost(self, T: float, t_hold: float, R_heating: float) -> float:
        """
        ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆã®è¨ˆç®—

        C = âˆ« P(T) dt = P_base * (T/1200)^2 * (t_ramp + t_hold)

        Args:
            T: ç„¼çµæ¸©åº¦ [Â°C]
            t_hold: ä¿æŒæ™‚é–“ [min]
            R_heating: æ˜‡æ¸©é€Ÿåº¦ [Â°C/min]

        Returns:
            ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚³ã‚¹ãƒˆ [kWh]
        """
        t_ramp = T / R_heating  # æ˜‡æ¸©æ™‚é–“ [min]

        # ç°¡æ˜“åŒ–: å¹³å‡é›»åŠ› Ã— ç·æ™‚é–“
        P_avg = self.power_base * (T / 1200)**2  # [W]
        t_total = t_ramp + t_hold  # [min]

        energy = P_avg * t_total / 60 / 1000  # [kWh]

        return energy

    def total_time(self, T: float, t_hold: float, R_heating: float) -> float:
        """
        ç·ãƒ—ãƒ­ã‚»ã‚¹æ™‚é–“ã®è¨ˆç®—

        Args:
            T: ç„¼çµæ¸©åº¦ [Â°C]
            t_hold: ä¿æŒæ™‚é–“ [min]
            R_heating: æ˜‡æ¸©é€Ÿåº¦ [Â°C/min]

        Returns:
            ç·æ™‚é–“ [min]
        """
        t_ramp = T / R_heating
        t_cool = T / 5  # å†·å´é€Ÿåº¦ã‚’5Â°C/minã¨ä»®å®š

        return t_ramp + t_hold + t_cool

    def objectives(self, params: np.ndarray) -> Tuple[float, float, float, float]:
        """
        4ã¤ã®ç›®çš„é–¢æ•°ã‚’è¨ˆç®—

        Args:
            params: [T_sinter, t_hold, R_heating]

        Returns:
            (f1, f2, f3, f4) = (-density, grain_size, cost, time)
            â€» æœ€å°åŒ–å•é¡Œã«çµ±ä¸€ã™ã‚‹ãŸã‚ã€å¯†åº¦ã¯è² å€¤
        """
        T_sinter, t_hold, R_heating = params

        rho = self.density_evolution(T_sinter, t_hold)
        G = self.grain_growth(T_sinter, t_hold)
        C = self.energy_cost(T_sinter, t_hold, R_heating)
        t = self.total_time(T_sinter, t_hold, R_heating)

        # æœ€å°åŒ–å•é¡Œã«çµ±ä¸€ï¼ˆå¯†åº¦ã¯æœ€å¤§åŒ–â†’è² å€¤ã«ã—ã¦æœ€å°åŒ–ï¼‰
        return (-rho, G * 1e6, C, t)  # G [Î¼m], C [kWh], t [min]

# Paretoæœ€é©è§£ã®æ¢ç´¢ï¼ˆç°¡æ˜“ç‰ˆï¼šweighted sumæ³•ï¼‰
def multi_objective_optimization(weights: List[float]) -> Tuple[np.ndarray, Tuple]:
    """
    é‡ã¿ä»˜ãå’Œã«ã‚ˆã‚‹å¤šç›®çš„æœ€é©åŒ–

    Args:
        weights: [w1, w2, w3, w4] å„ç›®çš„ã®é‡ã¿ï¼ˆåˆè¨ˆ=1ï¼‰

    Returns:
        (æœ€é©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿, ç›®çš„é–¢æ•°å€¤)
    """
    model = SinteringMultiObjective()

    def weighted_objective(params):
        objs = model.objectives(params)
        return sum(w * obj for w, obj in zip(weights, objs))

    bounds = [(1000, 1600), (10, 300), (1, 20)]  # T, t, R

    result = differential_evolution(
        weighted_objective,
        bounds,
        seed=42,
        maxiter=100,
        popsize=15
    )

    return result.x, model.objectives(result.x)

# è¤‡æ•°ã®é‡ã¿ãƒ™ã‚¯ãƒˆãƒ«ã§Paretoè§£ã‚’æ¢ç´¢
print("å¤šç›®çš„æœ€é©åŒ–ï¼ˆç„¼çµãƒ—ãƒ­ã‚»ã‚¹ï¼‰")
print("ç›®çš„: f1=å¯†åº¦æœ€å¤§åŒ–, f2=ç²’å¾„æœ€å°åŒ–, f3=ã‚³ã‚¹ãƒˆæœ€å°åŒ–, f4=æ™‚é–“æœ€å°åŒ–\n")

# é‡ã¿ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå„ç›®çš„ã‚’é‡è¦–ã—ãŸã‚±ãƒ¼ã‚¹ï¼‰
weight_patterns = [
    ([0.7, 0.1, 0.1, 0.1], "å¯†åº¦é‡è¦–"),
    ([0.1, 0.7, 0.1, 0.1], "ç²’å¾„é‡è¦–"),
    ([0.1, 0.1, 0.7, 0.1], "ã‚³ã‚¹ãƒˆé‡è¦–"),
    ([0.1, 0.1, 0.1, 0.7], "æ™‚é–“é‡è¦–"),
    ([0.25, 0.25, 0.25, 0.25], "ãƒãƒ©ãƒ³ã‚¹å‹")
]

pareto_solutions = []

for weights, label in weight_patterns:
    opt_params, opt_objs = multi_objective_optimization(weights)
    T_opt, t_opt, R_opt = opt_params
    rho_opt, G_opt, C_opt, time_opt = opt_objs

    print(f"{label}:")
    print(f"  æ¸©åº¦: {T_opt:.0f}Â°C, ä¿æŒæ™‚é–“: {t_opt:.0f}min, æ˜‡æ¸©é€Ÿåº¦: {R_opt:.1f}Â°C/min")
    print(f"  å¯†åº¦: {-rho_opt:.3f}, ç²’å¾„: {G_opt:.1f}Î¼m, ã‚³ã‚¹ãƒˆ: {C_opt:.2f}kWh, æ™‚é–“: {time_opt:.0f}min\n")

    pareto_solutions.append((opt_params, opt_objs, label))

# Paretoæœ€é©è§£ã®ãƒ—ãƒ­ãƒƒãƒˆï¼ˆå¯†åº¦ vs ç²’å¾„ï¼‰
fig, ax = plt.subplots(figsize=(10, 6))

for params, objs, label in pareto_solutions:
    rho, G, C, t = objs
    ax.scatter(-rho, G, s=150, label=label, alpha=0.7)

ax.set_xlabel('ç›¸å¯¾å¯†åº¦ [-]', fontsize=12)
ax.set_ylabel('å¹³å‡ç²’å¾„ [Î¼m]', fontsize=12)
ax.set_title('Paretoæœ€é©è§£ï¼ˆç„¼çµãƒ—ãƒ­ã‚»ã‚¹å¤šç›®çš„æœ€é©åŒ–ï¼‰', fontsize=14)
ax.legend(fontsize=10)
ax.grid(True, alpha=0.3)
plt.tight_layout()
plt.savefig('pareto_front_sintering.png', dpi=150)
plt.show()
</code></pre>

                <div class="example-box">
                    <h4>ğŸ“Š å®Ÿè¡Œçµæœã®ä¾‹</h4>
                    <pre>å¤šç›®çš„æœ€é©åŒ–ï¼ˆç„¼çµãƒ—ãƒ­ã‚»ã‚¹ï¼‰
ç›®çš„: f1=å¯†åº¦æœ€å¤§åŒ–, f2=ç²’å¾„æœ€å°åŒ–, f3=ã‚³ã‚¹ãƒˆæœ€å°åŒ–, f4=æ™‚é–“æœ€å°åŒ–

å¯†åº¦é‡è¦–:
  æ¸©åº¦: 1580Â°C, ä¿æŒæ™‚é–“: 245min, æ˜‡æ¸©é€Ÿåº¦: 3.2Â°C/min
  å¯†åº¦: 0.985, ç²’å¾„: 4.8Î¼m, ã‚³ã‚¹ãƒˆ: 95.3kWh, æ™‚é–“: 860min

ç²’å¾„é‡è¦–:
  æ¸©åº¦: 1150Â°C, ä¿æŒæ™‚é–“: 35min, æ˜‡æ¸©é€Ÿåº¦: 15.0Â°C/min
  å¯†åº¦: 0.875, ç²’å¾„: 0.9Î¼m, ã‚³ã‚¹ãƒˆ: 12.5kWh, æ™‚é–“: 345min

ã‚³ã‚¹ãƒˆé‡è¦–:
  æ¸©åº¦: 1100Â°C, ä¿æŒæ™‚é–“: 25min, æ˜‡æ¸©é€Ÿåº¦: 18.5Â°C/min
  å¯†åº¦: 0.850, ç²’å¾„: 0.8Î¼m, ã‚³ã‚¹ãƒˆ: 8.2kWh, æ™‚é–“: 305min

æ™‚é–“é‡è¦–:
  æ¸©åº¦: 1050Â°C, ä¿æŒæ™‚é–“: 10min, æ˜‡æ¸©é€Ÿåº¦: 20.0Â°C/min
  å¯†åº¦: 0.820, ç²’å¾„: 0.7Î¼m, ã‚³ã‚¹ãƒˆ: 5.8kWh, æ™‚é–“: 273min

ãƒãƒ©ãƒ³ã‚¹å‹:
  æ¸©åº¦: 1350Â°C, ä¿æŒæ™‚é–“: 120min, æ˜‡æ¸©é€Ÿåº¦: 8.0Â°C/min
  å¯†åº¦: 0.945, ç²’å¾„: 2.1Î¼m, ã‚³ã‚¹ãƒˆ: 42.5kWh, æ™‚é–“: 565min</pre>
                </div>

                <p>
                    å¤šç›®çš„æœ€é©åŒ–ã«ã‚ˆã‚Šã€ç•°ãªã‚‹å„ªå…ˆåº¦ã«å¿œã˜ãŸè¤‡æ•°ã®æœ€é©è§£ï¼ˆParetoè§£ï¼‰ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚å®Ÿéš›ã®ç”Ÿç”£ã§ã¯ã€ã‚³ã‚¹ãƒˆåˆ¶ç´„ã‚„æ™‚é–“åˆ¶ç´„ã®ä¸­ã§æœ€ã‚‚å¯†åº¦ãŒé«˜ã„æ¡ä»¶ã‚’é¸æŠã™ã‚‹ãªã©ã€å®Ÿç”¨çš„ãªæ„æ€æ±ºå®šãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
                </p>
            </section>

            <section id="machine-learning">
                <h2>5.4 æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«</h2>

                <p>
                    å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ãŒè“„ç©ã•ã‚Œã¦ã„ã‚‹å ´åˆã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã§ã€æ–°è¦ãƒ—ãƒ­ã‚»ã‚¹æ¡ä»¶ã§ã®ææ–™ç‰¹æ€§ã‚’é«˜ç²¾åº¦ã«äºˆæ¸¬ã§ãã¾ã™ã€‚ã“ã“ã§ã¯ã€ç„¼çµãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰<strong>ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°</strong>ã‚’ç”¨ã„ã¦å¯†åº¦äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
                </p>

                <h3>5.4.1 ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæº–å‚™</h3>

                <pre><code class="language-python">import numpy as np
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestRegressor
from sklearn.metrics import mean_squared_error, r2_score
import matplotlib.pyplot as plt

# æ¨¡æ“¬å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆï¼ˆå®Ÿéš›ã«ã¯å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ï¼‰
np.random.seed(42)
n_samples = 200

# å…¥åŠ›ç‰¹å¾´é‡: æ¸©åº¦ã€ä¿æŒæ™‚é–“ã€æ˜‡æ¸©é€Ÿåº¦ã€åˆæœŸå¯†åº¦ã€åˆæœŸç²’å¾„
T_data = np.random.uniform(1000, 1600, n_samples)       # [Â°C]
t_data = np.random.uniform(10, 300, n_samples)          # [min]
R_data = np.random.uniform(1, 20, n_samples)            # [Â°C/min]
rho0_data = np.random.uniform(0.50, 0.60, n_samples)    # åˆæœŸç›¸å¯¾å¯†åº¦
G0_data = np.random.uniform(300, 700, n_samples)        # åˆæœŸç²’å¾„ [nm]

# å‡ºåŠ›ï¼ˆç›®æ¨™å¤‰æ•°ï¼‰: æœ€çµ‚ç›¸å¯¾å¯†åº¦ï¼ˆç‰©ç†ãƒ¢ãƒ‡ãƒ« + ãƒã‚¤ã‚ºï¼‰
model = SinteringMultiObjective()

rho_final = []
for i in range(n_samples):
    # ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å¯†åº¦ã‚’è¨ˆç®—
    T_K = T_data[i] + 273.15
    D = model.D0 * np.exp(-model.Q_diff / (model.R_gas * T_K))
    k_dens = D * 1e9
    rho = 1 - (1 - rho0_data[i]) * np.exp(-k_dens * t_data[i] * 60)

    # ãƒã‚¤ã‚ºã‚’è¿½åŠ ï¼ˆå®Ÿé¨“èª¤å·®ã‚’æ¨¡æ“¬ï¼‰
    rho_noisy = rho + np.random.normal(0, 0.02)
    rho_final.append(np.clip(rho_noisy, 0.5, 0.999))

# DataFrameã«æ ¼ç´
data = pd.DataFrame({
    'Temperature': T_data,
    'Time': t_data,
    'HeatingRate': R_data,
    'InitialDensity': rho0_data,
    'InitialGrainSize': G0_data,
    'FinalDensity': rho_final
})

print("å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‚µãƒ³ãƒ—ãƒ«:")
print(data.head(10))
print(f"\nãƒ‡ãƒ¼ã‚¿æ•°: {len(data)}")
print(f"å¯†åº¦ç¯„å›²: {data['FinalDensity'].min():.3f} - {data['FinalDensity'].max():.3f}")
</code></pre>

                <h3>5.4.2 ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰</h3>

                <pre><code class="language-python"># ç‰¹å¾´é‡ã¨ç›®æ¨™å¤‰æ•°ã®åˆ†é›¢
X = data[['Temperature', 'Time', 'HeatingRate', 'InitialDensity', 'InitialGrainSize']]
y = data['FinalDensity']

# è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã«åˆ†å‰²ï¼ˆ80% / 20%ï¼‰
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42
)

# ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰
rf_model = RandomForestRegressor(
    n_estimators=100,       # æ±ºå®šæœ¨ã®æ•°
    max_depth=15,           # æœ€å¤§æ·±ã•
    min_samples_split=5,    # åˆ†å‰²ã«å¿…è¦ãªæœ€å°ã‚µãƒ³ãƒ—ãƒ«æ•°
    min_samples_leaf=2,     # è‘‰ãƒãƒ¼ãƒ‰ã®æœ€å°ã‚µãƒ³ãƒ—ãƒ«æ•°
    random_state=42,
    n_jobs=-1               # ä¸¦åˆ—å‡¦ç†
)

# è¨“ç·´
rf_model.fit(X_train, y_train)

# äºˆæ¸¬
y_train_pred = rf_model.predict(X_train)
y_test_pred = rf_model.predict(X_test)

# è©•ä¾¡
train_rmse = np.sqrt(mean_squared_error(y_train, y_train_pred))
test_rmse = np.sqrt(mean_squared_error(y_test, y_test_pred))
train_r2 = r2_score(y_train, y_train_pred)
test_r2 = r2_score(y_test, y_test_pred)

print("ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ãƒ¢ãƒ‡ãƒ«ã®æ€§èƒ½:")
print(f"è¨“ç·´ãƒ‡ãƒ¼ã‚¿: RMSE = {train_rmse:.4f}, RÂ² = {train_r2:.4f}")
print(f"ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: RMSE = {test_rmse:.4f}, RÂ² = {test_r2:.4f}")

# ç‰¹å¾´é‡ã®é‡è¦åº¦
feature_importance = pd.DataFrame({
    'Feature': X.columns,
    'Importance': rf_model.feature_importances_
}).sort_values('Importance', ascending=False)

print("\nç‰¹å¾´é‡ã®é‡è¦åº¦:")
print(feature_importance)

# äºˆæ¸¬å€¤ vs å®Ÿæ¸¬å€¤ã®ãƒ—ãƒ­ãƒƒãƒˆ
fig, axes = plt.subplots(1, 2, figsize=(14, 5))

# è¨“ç·´ãƒ‡ãƒ¼ã‚¿
axes[0].scatter(y_train, y_train_pred, alpha=0.5, s=30)
axes[0].plot([0.5, 1], [0.5, 1], 'r--', lw=2)
axes[0].set_xlabel('å®Ÿæ¸¬å€¤ï¼ˆç›¸å¯¾å¯†åº¦ï¼‰', fontsize=12)
axes[0].set_ylabel('äºˆæ¸¬å€¤ï¼ˆç›¸å¯¾å¯†åº¦ï¼‰', fontsize=12)
axes[0].set_title(f'è¨“ç·´ãƒ‡ãƒ¼ã‚¿ (RÂ² = {train_r2:.4f})', fontsize=13)
axes[0].grid(True, alpha=0.3)

# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
axes[1].scatter(y_test, y_test_pred, alpha=0.5, s=30, color='orange')
axes[1].plot([0.5, 1], [0.5, 1], 'r--', lw=2)
axes[1].set_xlabel('å®Ÿæ¸¬å€¤ï¼ˆç›¸å¯¾å¯†åº¦ï¼‰', fontsize=12)
axes[1].set_ylabel('äºˆæ¸¬å€¤ï¼ˆç›¸å¯¾å¯†åº¦ï¼‰', fontsize=12)
axes[1].set_title(f'ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ (RÂ² = {test_r2:.4f})', fontsize=13)
axes[1].grid(True, alpha=0.3)

plt.tight_layout()
plt.savefig('ml_prediction_performance.png', dpi=150)
plt.show()

# ç‰¹å¾´é‡é‡è¦åº¦ã®ãƒ—ãƒ­ãƒƒãƒˆ
fig, ax = plt.subplots(figsize=(8, 5))
ax.barh(feature_importance['Feature'], feature_importance['Importance'])
ax.set_xlabel('é‡è¦åº¦', fontsize=12)
ax.set_title('ç‰¹å¾´é‡ã®é‡è¦åº¦ï¼ˆãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆï¼‰', fontsize=13)
plt.tight_layout()
plt.savefig('feature_importance.png', dpi=150)
plt.show()
</code></pre>

                <div class="example-box">
                    <h4>ğŸ“Š å®Ÿè¡Œçµæœã®ä¾‹</h4>
                    <pre>ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ãƒ¢ãƒ‡ãƒ«ã®æ€§èƒ½:
è¨“ç·´ãƒ‡ãƒ¼ã‚¿: RMSE = 0.0085, RÂ² = 0.9912
ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: RMSE = 0.0195, RÂ² = 0.9543

ç‰¹å¾´é‡ã®é‡è¦åº¦:
          Feature  Importance
0     Temperature    0.485312
1            Time    0.312054
3  InitialDensity    0.128765
4 InitialGrainSize 0.048932
2     HeatingRate    0.024937</pre>
                </div>

                <p>
                    ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«ã¯é«˜ã„äºˆæ¸¬ç²¾åº¦ï¼ˆRÂ² > 0.95ï¼‰ã‚’é”æˆã—ã¦ãŠã‚Šã€æ–°è¦ãƒ—ãƒ­ã‚»ã‚¹æ¡ä»¶ã§ã®å¯†åº¦ã‚’ä¿¡é ¼æ€§é«˜ãäºˆæ¸¬ã§ãã¾ã™ã€‚ç‰¹å¾´é‡é‡è¦åº¦ã®åˆ†æã‹ã‚‰ã€<strong>æ¸©åº¦</strong>ã¨<strong>ä¿æŒæ™‚é–“</strong>ãŒå¯†åº¦ã«æœ€ã‚‚å¤§ããªå½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚
                </p>

                <h3>5.4.3 æœ€é©æ¡ä»¶ã®äºˆæ¸¬ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</h3>

                <pre><code class="language-python"># æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ãŸæœ€é©åŒ–
from scipy.optimize import minimize

def ml_objective(params):
    """
    æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹å¯†åº¦äºˆæ¸¬ã‚’ç›®çš„é–¢æ•°ã¨ã™ã‚‹

    Args:
        params: [Temperature, Time, HeatingRate]

    Returns:
        äºˆæ¸¬å¯†åº¦ã®è² å€¤ï¼ˆæœ€å°åŒ–ã®ãŸã‚ï¼‰
    """
    T, t, R = params

    # å›ºå®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆå¹³å‡çš„ãªåˆæœŸæ¡ä»¶ï¼‰
    rho0 = 0.55
    G0 = 500

    X_new = np.array([[T, t, R, rho0, G0]])
    rho_pred = rf_model.predict(X_new)[0]

    return -rho_pred  # æœ€å¤§åŒ–â†’æœ€å°åŒ–

# æœ€é©åŒ–å®Ÿè¡Œ
bounds_ml = [(1000, 1600), (10, 300), (1, 20)]
result_ml = differential_evolution(
    ml_objective,
    bounds_ml,
    seed=42,
    maxiter=50
)

T_ml_opt, t_ml_opt, R_ml_opt = result_ml.x
rho_ml_opt = -result_ml.fun

print("æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹æœ€é©æ¡ä»¶äºˆæ¸¬:")
print(f"æ¸©åº¦: {T_ml_opt:.0f}Â°C")
print(f"ä¿æŒæ™‚é–“: {t_ml_opt:.0f}min")
print(f"æ˜‡æ¸©é€Ÿåº¦: {R_ml_opt:.1f}Â°C/min")
print(f"äºˆæ¸¬å¯†åº¦: {rho_ml_opt:.4f}")

# ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹æ¤œè¨¼
model_phys = SinteringMultiObjective()
rho_phys, G_phys, C_phys, time_phys = model_phys.objectives([T_ml_opt, t_ml_opt, R_ml_opt])

print(f"\nç‰©ç†ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹æ¤œè¨¼:")
print(f"å¯†åº¦: {-rho_phys:.4f}")
print(f"ç²’å¾„: {G_phys:.2f}Î¼m")
print(f"ã‚³ã‚¹ãƒˆ: {C_phys:.2f}kWh")
print(f"æ™‚é–“: {time_phys:.0f}min")
print(f"\näºˆæ¸¬èª¤å·®: {abs(rho_ml_opt - (-rho_phys)):.4f} ({abs(rho_ml_opt - (-rho_phys))/(-rho_phys)*100:.2f}%)")
</code></pre>

                <p>
                    æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹æœ€é©åŒ–ã¯ã€ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§å®Ÿé¨“å›æ•°ã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã¾ã™ã€‚å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ãŒå¢—ãˆã‚‹ãŸã³ã«ãƒ¢ãƒ‡ãƒ«ã‚’å†è¨“ç·´ã™ã‚‹ã“ã¨ã§ã€äºˆæ¸¬ç²¾åº¦ã‚’ç¶™ç¶šçš„ã«å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
                </p>
            </section>

            <section id="integrated-workflow">
                <h2>5.5 çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼šå®Ÿè·µçš„ãªåˆæˆè¨ˆç”»</h2>

                <p>
                    ã“ã“ã¾ã§ã«å­¦ã‚“ã ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã€å¤šç›®çš„æœ€é©åŒ–ã€æ©Ÿæ¢°å­¦ç¿’äºˆæ¸¬ã‚’çµ±åˆã—ã€å®Ÿè·µçš„ãªåˆæˆè¨ˆç”»ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚¯ãƒ©ã‚¹ã¯ã€ææ–™è¦æ±‚ä»•æ§˜ã‹ã‚‰æœ€çµ‚ãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¾ã§ã‚’è‡ªå‹•ã§å°å‡ºã—ã¾ã™ã€‚
                </p>

                <h3>5.5.1 çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¯ãƒ©ã‚¹</h3>

                <pre><code class="language-python">class IntegratedSynthesisWorkflow:
    """
    ææ–™åˆæˆã®çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

    æ©Ÿèƒ½:
        1. ãƒ—ãƒ­ã‚»ã‚¹é¸æŠï¼ˆProcessSelectorï¼‰
        2. å¤šç›®çš„æœ€é©åŒ–ï¼ˆSinteringMultiObjectiveï¼‰
        3. æ©Ÿæ¢°å­¦ç¿’äºˆæ¸¬ï¼ˆRandomForestRegressorï¼‰
        4. å®Ÿé¨“è¨ˆç”»ã¨å®Ÿè¡Œ
    """

    def __init__(self, ml_model=None):
        self.selector = ProcessSelector()
        self.optimizer = SinteringMultiObjective()
        self.ml_model = ml_model
        self.experiment_log = []

    def plan_synthesis(self, requirements: Dict) -> Dict:
        """
        ææ–™è¦æ±‚ä»•æ§˜ã‹ã‚‰åˆæˆè¨ˆç”»ã‚’ç«‹æ¡ˆ

        Args:
            requirements: ææ–™è¦æ±‚ä»•æ§˜
                - grain_size: ç›®æ¨™ç²’å¾„ [m]
                - density: ç›®æ¨™å¯†åº¦ï¼ˆç›¸å¯¾ï¼‰
                - temp_limit: æ¸©åº¦åˆ¶ç´„ [Â°C]
                - scale: ç”Ÿç”£é‡ [kg]
                - cost_weight: ã‚³ã‚¹ãƒˆé‡ã¿
                - time_weight: æ™‚é–“é‡ã¿
                - material_type: ææ–™ã‚¿ã‚¤ãƒ—

        Returns:
            åˆæˆè¨ˆç”»ï¼ˆãƒ—ãƒ­ã‚»ã‚¹ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€äºˆæ¸¬ç‰¹æ€§ï¼‰
        """
        print("=" * 60)
        print("çµ±åˆåˆæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼")
        print("=" * 60)

        # ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ­ã‚»ã‚¹é¸æŠ
        print("\n[ã‚¹ãƒ†ãƒƒãƒ—1] ãƒ—ãƒ­ã‚»ã‚¹é¸æŠ")
        top_processes = self.selector.select_process(requirements, top_n=3)
        print(f"æ¨å¥¨ãƒ—ãƒ­ã‚»ã‚¹:")
        for process, score in top_processes:
            print(f"  {process}: {score:.1f}ç‚¹")

        selected_process = top_processes[0][0]
        print(f"\né¸æŠãƒ—ãƒ­ã‚»ã‚¹: {selected_process}")

        # ã‚¹ãƒ†ãƒƒãƒ—2: å¤šç›®çš„æœ€é©åŒ–ï¼ˆç„¼çµã‚’ä¾‹ã«ï¼‰
        if 'sintering' in selected_process or selected_process == 'solid_state':
            print("\n[ã‚¹ãƒ†ãƒƒãƒ—2] å¤šç›®çš„æœ€é©åŒ–")

            # é‡ã¿è¨­å®šï¼ˆè¦æ±‚ä»•æ§˜ã‹ã‚‰ï¼‰
            w_density = 0.4
            w_grain = 0.3
            w_cost = requirements.get('cost_weight', 0.2)
            w_time = requirements.get('time_weight', 0.1)

            weights = [w_density, w_grain, w_cost, w_time]
            print(f"ç›®çš„é–¢æ•°ã®é‡ã¿: density={w_density}, grain={w_grain}, cost={w_cost}, time={w_time}")

            opt_params, opt_objs = multi_objective_optimization(weights)
            T_opt, t_opt, R_opt = opt_params
            rho_opt, G_opt, C_opt, time_opt = opt_objs

            print(f"æœ€é©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:")
            print(f"  æ¸©åº¦: {T_opt:.0f}Â°C")
            print(f"  ä¿æŒæ™‚é–“: {t_opt:.0f}min")
            print(f"  æ˜‡æ¸©é€Ÿåº¦: {R_opt:.1f}Â°C/min")
            print(f"äºˆæ¸¬ç‰¹æ€§:")
            print(f"  å¯†åº¦: {-rho_opt:.3f}")
            print(f"  ç²’å¾„: {G_opt:.2f}Î¼m")
            print(f"  ã‚³ã‚¹ãƒˆ: {C_opt:.2f}kWh")
            print(f"  æ™‚é–“: {time_opt:.0f}min")

            # ã‚¹ãƒ†ãƒƒãƒ—3: æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹ç²¾å¯†äºˆæ¸¬ï¼ˆãƒ¢ãƒ‡ãƒ«ãŒã‚ã‚‹å ´åˆï¼‰
            if self.ml_model is not None:
                print("\n[ã‚¹ãƒ†ãƒƒãƒ—3] æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹ç²¾å¯†äºˆæ¸¬")
                rho0 = 0.55
                G0 = requirements.get('grain_size', 500e-9) * 1e9  # [nm]

                X_pred = np.array([[T_opt, t_opt, R_opt, rho0, G0]])
                rho_ml = self.ml_model.predict(X_pred)[0]

                print(f"MLäºˆæ¸¬å¯†åº¦: {rho_ml:.4f}")
                print(f"ç‰©ç†ãƒ¢ãƒ‡ãƒ«å¯†åº¦: {-rho_opt:.4f}")
                print(f"å·®ç•°: {abs(rho_ml - (-rho_opt)):.4f}")

            # åˆæˆè¨ˆç”»ã‚’ã¾ã¨ã‚ã‚‹
            synthesis_plan = {
                'process': selected_process,
                'parameters': {
                    'temperature': T_opt,
                    'time': t_opt,
                    'heating_rate': R_opt
                },
                'predicted_properties': {
                    'density': -rho_opt,
                    'grain_size': G_opt,
                    'cost': C_opt,
                    'total_time': time_opt
                },
                'ml_prediction': rho_ml if self.ml_model else None
            }

        else:
            # ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ã®å ´åˆï¼ˆç°¡æ˜“å®Ÿè£…ï¼‰
            synthesis_plan = {
                'process': selected_process,
                'parameters': {'note': 'Detailed optimization not implemented for this process'},
                'predicted_properties': {}
            }

        print("\n" + "=" * 60)
        print("åˆæˆè¨ˆç”»å®Œäº†")
        print("=" * 60)

        return synthesis_plan

    def execute_experiment(self, plan: Dict, actual_result: Dict = None):
        """
        å®Ÿé¨“å®Ÿè¡Œã¨ãƒ­ã‚°è¨˜éŒ²ï¼ˆå®Ÿéš›ã«ã¯å®Ÿé¨“ã‚’è¡Œã†ï¼‰

        Args:
            plan: åˆæˆè¨ˆç”»
            actual_result: å®Ÿé¨“çµæœï¼ˆå®Ÿæ¸¬å€¤ï¼‰
        """
        self.experiment_log.append({
            'plan': plan,
            'result': actual_result
        })

        print("\nå®Ÿé¨“å®Ÿè¡Œãƒ­ã‚°ã«è¨˜éŒ²ã—ã¾ã—ãŸã€‚")

        if actual_result and self.ml_model:
            # å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã§ãƒ¢ãƒ‡ãƒ«ã‚’æ›´æ–°ï¼ˆç¶™ç¶šå­¦ç¿’ï¼‰
            print("æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã§æ›´æ–°ã—ã¾ã™ã€‚")

# çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œä¾‹
workflow = IntegratedSynthesisWorkflow(ml_model=rf_model)

# ã‚±ãƒ¼ã‚¹: é«˜å¯†åº¦ãƒãƒ«ã‚¯ã‚»ãƒ©ãƒŸãƒƒã‚¯ã‚¹ï¼ˆ1 Î¼mã€ä½ã‚³ã‚¹ãƒˆï¼‰
requirements_case = {
    'grain_size': 1e-6,         # 1 Î¼m
    'density': 0.95,            # ç›¸å¯¾å¯†åº¦95%
    'temp_limit': 1600,         # 1600Â°Cä»¥ä¸‹
    'scale': 5,                 # 5 kg
    'cost_weight': 0.3,         # ã‚³ã‚¹ãƒˆé‡è¦–åº¦
    'time_weight': 0.1,         # æ™‚é–“é‡è¦–åº¦
    'material_type': 'ceramics'
}

synthesis_plan = workflow.plan_synthesis(requirements_case)

# å®Ÿé¨“å®Ÿè¡Œï¼ˆæ¨¡æ“¬ï¼‰
actual_result_sim = {
    'density': 0.948,
    'grain_size': 2.3,  # Î¼m
    'notes': 'Experimental validation completed'
}

workflow.execute_experiment(synthesis_plan, actual_result_sim)
</code></pre>

                <div class="example-box">
                    <h4>ğŸ“Š å®Ÿè¡Œçµæœã®ä¾‹</h4>
                    <pre>============================================================
çµ±åˆåˆæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
============================================================

[ã‚¹ãƒ†ãƒƒãƒ—1] ãƒ—ãƒ­ã‚»ã‚¹é¸æŠ
æ¨å¥¨ãƒ—ãƒ­ã‚»ã‚¹:
  solid_state: 95.0ç‚¹
  sintering: 85.0ç‚¹
  hydrothermal: 62.5ç‚¹

é¸æŠãƒ—ãƒ­ã‚»ã‚¹: solid_state

[ã‚¹ãƒ†ãƒƒãƒ—2] å¤šç›®çš„æœ€é©åŒ–
ç›®çš„é–¢æ•°ã®é‡ã¿: density=0.4, grain=0.3, cost=0.3, time=0.0
æœ€é©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
  æ¸©åº¦: 1420Â°C
  ä¿æŒæ™‚é–“: 160min
  æ˜‡æ¸©é€Ÿåº¦: 6.5Â°C/min
äºˆæ¸¬ç‰¹æ€§:
  å¯†åº¦: 0.962
  ç²’å¾„: 2.5Î¼m
  ã‚³ã‚¹ãƒˆ: 55.3kWh
  æ™‚é–“: 625min

[ã‚¹ãƒ†ãƒƒãƒ—3] æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹ç²¾å¯†äºˆæ¸¬
MLäºˆæ¸¬å¯†åº¦: 0.9585
ç‰©ç†ãƒ¢ãƒ‡ãƒ«å¯†åº¦: 0.9620
å·®ç•°: 0.0035

============================================================
åˆæˆè¨ˆç”»å®Œäº†
============================================================

å®Ÿé¨“å®Ÿè¡Œãƒ­ã‚°ã«è¨˜éŒ²ã—ã¾ã—ãŸã€‚</pre>
                </div>

                <p>
                    ã“ã®çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ã‚ˆã‚Šã€ææ–™è¦æ±‚ä»•æ§˜ã‹ã‚‰å®Ÿé¨“è¨ˆç”»ã¾ã§ã‚’è‡ªå‹•åŒ–ã§ãã¾ã™ã€‚å®Ÿé¨“çµæœã‚’ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã™ã‚‹ã“ã¨ã§ã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®ç²¾åº¦ã‚’ç¶™ç¶šçš„ã«å‘ä¸Šã•ã›ã€ãƒ—ãƒ­ã‚»ã‚¹é–‹ç™ºã®åŠ¹ç‡ã‚’å¤§å¹…ã«æ”¹å–„ã§ãã¾ã™ã€‚
                </p>
            </section>

            <section id="case-studies">
                <h2>5.6 ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£ï¼šå®Ÿè·µçš„ãªåˆæˆè¨ˆç”»</h2>

                <p>
                    çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç”¨ã„ãŸå®Ÿè·µçš„ãªåˆæˆè¨ˆç”»ã®ä¾‹ã‚’2ã¤ç´¹ä»‹ã—ã¾ã™ã€‚
                </p>

                <h3>5.6.1 ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£1ï¼šãƒªãƒã‚¦ãƒ ã‚¤ã‚ªãƒ³é›»æ± æ­£æ¥µææ–™ï¼ˆLiCoOâ‚‚ï¼‰ã®åˆæˆ</h3>

                <div class="info-box">
                    <h4>ææ–™è¦æ±‚ä»•æ§˜</h4>
                    <ul>
                        <li>çµ„æˆ: LiCoOâ‚‚ï¼ˆå±¤çŠ¶æ§‹é€ ï¼‰</li>
                        <li>ç›®æ¨™ç²’å¾„: 500 nmï¼ˆé›»æ± æ€§èƒ½æœ€é©åŒ–ï¼‰</li>
                        <li>ç›®æ¨™å¯†åº¦: ç›¸å¯¾å¯†åº¦ 90%ä»¥ä¸Š</li>
                        <li>çµæ™¶æ€§: é«˜çµæ™¶æ€§ï¼ˆXç·šå›æŠ˜ãƒ”ãƒ¼ã‚¯é‹­ã„ï¼‰</li>
                        <li>ç”Ÿç”£é‡: 100 gï¼ˆå®Ÿé¨“å®¤ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰</li>
                        <li>ã‚³ã‚¹ãƒˆåˆ¶ç´„: ä¸­ç¨‹åº¦</li>
                    </ul>
                </div>

                <pre><code class="language-python"># ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£1: LiCoOâ‚‚æ­£æ¥µææ–™
workflow_battery = IntegratedSynthesisWorkflow(ml_model=rf_model)

requirements_licoo2 = {
    'grain_size': 500e-9,       # 500 nm
    'density': 0.90,
    'temp_limit': 900,          # ç†±åˆ†è§£é˜²æ­¢
    'scale': 0.1,               # 100 g
    'cost_weight': 0.4,
    'time_weight': 0.2,
    'material_type': 'oxides'
}

print("ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£1: LiCoOâ‚‚æ­£æ¥µææ–™")
plan_battery = workflow_battery.plan_synthesis(requirements_licoo2)

# æ¨å¥¨ã•ã‚Œã‚‹å®Ÿé¨“æ‰‹é †
print("\næ¨å¥¨å®Ÿé¨“æ‰‹é †:")
print("1. å‰é§†ä½“åˆæˆ: å…±æ²ˆæ³•ï¼ˆLiå¡© + Coå¡©ã€pH = 11ã€å®¤æ¸©ï¼‰")
print("2. ä¹¾ç‡¥: 80Â°Cã€12æ™‚é–“")
print("3. ä»®ç„¼æˆ: 450Â°Cã€5æ™‚é–“ï¼ˆç‚­é…¸å¡©åˆ†è§£ï¼‰")
print("4. æœ¬ç„¼æˆ: 850Â°Cã€12æ™‚é–“ï¼ˆå±¤çŠ¶æ§‹é€ å½¢æˆï¼‰")
print("5. å†·å´: ç‚‰å†·ï¼ˆçµæ™¶æ€§å‘ä¸Šï¼‰")
print("6. ç²‰ç •: éŠæ˜Ÿãƒœãƒ¼ãƒ«ãƒŸãƒ«ã€2æ™‚é–“")
</code></pre>

                <h3>5.6.2 ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£2ï¼šSOFCé›»è§£è³ªææ–™ï¼ˆYSZ: Yâ‚‚Oâ‚ƒ-ZrOâ‚‚ï¼‰ã®åˆæˆ</h3>

                <div class="info-box">
                    <h4>ææ–™è¦æ±‚ä»•æ§˜</h4>
                    <ul>
                        <li>çµ„æˆ: 8 mol% Yâ‚‚Oâ‚ƒ-ZrOâ‚‚ï¼ˆ8YSZï¼‰</li>
                        <li>ç›®æ¨™å¯†åº¦: ç›¸å¯¾å¯†åº¦ 98%ä»¥ä¸Šï¼ˆã‚¬ã‚¹é®æ–­æ€§ï¼‰</li>
                        <li>ç›®æ¨™ç²’å¾„: 1-3 Î¼m</li>
                        <li>çµæ™¶æ§‹é€ : ç«‹æ–¹æ™¶ï¼ˆã‚¤ã‚ªãƒ³ä¼å°æ€§æœ€å¤§ï¼‰</li>
                        <li>ç”Ÿç”£é‡: 1 kgï¼ˆãƒ‘ã‚¤ãƒ­ãƒƒãƒˆã‚¹ã‚±ãƒ¼ãƒ«ï¼‰</li>
                        <li>æ¸©åº¦åˆ¶ç´„: 1600Â°Cä»¥ä¸‹</li>
                    </ul>
                </div>

                <pre><code class="language-python"># ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£2: 8YSZé›»è§£è³ª
workflow_sofc = IntegratedSynthesisWorkflow(ml_model=rf_model)

requirements_ysz = {
    'grain_size': 2e-6,         # 2 Î¼m
    'density': 0.98,
    'temp_limit': 1600,
    'scale': 1,                 # 1 kg
    'cost_weight': 0.2,         # æ€§èƒ½å„ªå…ˆ
    'time_weight': 0.1,
    'material_type': 'ceramics'
}

print("\nã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£2: 8YSZå›ºä½“é›»è§£è³ª")
plan_sofc = workflow_sofc.plan_synthesis(requirements_ysz)

# æ¨å¥¨ã•ã‚Œã‚‹å®Ÿé¨“æ‰‹é †
print("\næ¨å¥¨å®Ÿé¨“æ‰‹é †:")
print("1. åŸæ–™æ··åˆ: Yâ‚‚Oâ‚ƒç²‰æœ« + ZrOâ‚‚ç²‰æœ«ï¼ˆ8 mol%ï¼‰ã€ã‚¨ã‚¿ãƒãƒ¼ãƒ«åª’ä½“ã€ãƒœãƒ¼ãƒ«ãƒŸãƒ«24æ™‚é–“")
print("2. ä¹¾ç‡¥ãƒ»é€ ç²’: 80Â°Cä¹¾ç‡¥ã€é€ ç²’ï¼ˆãƒ—ãƒ¬ã‚¹ç”¨ï¼‰")
print("3. ãƒ—ãƒ¬ã‚¹æˆå½¢: ä¸€è»¸ãƒ—ãƒ¬ã‚¹ 100 MPaã€CIP 200 MPa")
print("4. äºˆå‚™ç„¼çµ: 1000Â°Cã€2æ™‚é–“ï¼ˆè„±ãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼‰")
print("5. æœ¬ç„¼çµ: 1450Â°Cã€5æ™‚é–“ï¼ˆé«˜å¯†åº¦åŒ–ï¼‰")
print("6. å†·å´: å¾å†· 5Â°C/minï¼ˆç†±å¿œåŠ›ç·©å’Œï¼‰")
print("7. å¯†åº¦æ¸¬å®š: ã‚¢ãƒ«ã‚­ãƒ¡ãƒ‡ã‚¹æ³•ã§ç›¸å¯¾å¯†åº¦ç¢ºèª")
</code></pre>

                <p>
                    ã“ã‚Œã‚‰ã®ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£ã¯ã€çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå®Ÿéš›ã®ææ–™é–‹ç™ºã«ã©ã®ã‚ˆã†ã«é©ç”¨ã•ã‚Œã‚‹ã‹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ã€å®Ÿé¨“è¨ˆç”»ã‚’ç³»çµ±çš„ã«è¡Œã†ã“ã¨ã§ã€è©¦è¡ŒéŒ¯èª¤ã‚’æœ€å°é™ã«æŠ‘ãˆã€åŠ¹ç‡çš„ã«ç›®æ¨™ææ–™ã‚’åˆæˆã§ãã¾ã™ã€‚
                </p>
            </section>

            <section id="summary">
                <h2>5.7 ã¾ã¨ã‚</h2>

                <p>
                    æœ¬ç« ã§ã¯ã€ææ–™åˆæˆãƒ—ãƒ­ã‚»ã‚¹ã®çµ±åˆçš„ãªæœ€é©åŒ–æ‰‹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚ä»¥ä¸‹ã®é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’ã¾ã¨ã‚ã¾ã™ï¼š
                </p>

                <div class="info-box">
                    <h4>æœ¬ç« ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ</h4>
                    <ul>
                        <li><strong>ãƒ—ãƒ­ã‚»ã‚¹é¸æŠ</strong>: ææ–™ç‰¹æ€§ã¨åˆ¶ç´„æ¡ä»¶ã‹ã‚‰æœ€é©ãªãƒ—ãƒ­ã‚»ã‚¹ã‚’å®šé‡çš„ã«é¸æŠã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…</li>
                        <li><strong>å¤šç›®çš„æœ€é©åŒ–</strong>: å¯†åº¦ã€ç²’å¾„ã€ã‚³ã‚¹ãƒˆã€æ™‚é–“ãªã©ã®è¤‡æ•°ã®ç›®çš„ã‚’åŒæ™‚ã«æœ€é©åŒ–ã—ã€Paretoæœ€é©è§£ã‚’æ¢ç´¢</li>
                        <li><strong>æ©Ÿæ¢°å­¦ç¿’äºˆæ¸¬</strong>: å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰é«˜ç²¾åº¦ãªäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã€æ–°è¦æ¡ä»¶ã§ã®ç‰¹æ€§ã‚’äºˆæ¸¬</li>
                        <li><strong>çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</strong>: ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã‹ã‚‰å®Ÿé¨“è¨ˆç”»ã¾ã§ã‚’è‡ªå‹•åŒ–ã—ã€åŠ¹ç‡çš„ãªææ–™é–‹ç™ºã‚’å®Ÿç¾</li>
                        <li><strong>å®Ÿè·µçš„å¿œç”¨</strong>: é›»æ± ææ–™ã€ç‡ƒæ–™é›»æ± ææ–™ãªã©ã®å®Ÿä¾‹ã‚’é€šã˜ã¦ã€å®Ÿç”¨çš„ãªåˆæˆè¨ˆç”»ã‚’ç«‹æ¡ˆ</li>
                    </ul>
                </div>

                <h3>5.7.1 ä»Šå¾Œã®ç™ºå±•æ–¹å‘</h3>

                <ul>
                    <li><strong>ãƒ™ã‚¤ã‚ºæœ€é©åŒ–</strong>: Gaussian Processã‚’ç”¨ã„ãŸåŠ¹ç‡çš„ãªå®Ÿé¨“è¨ˆç”»ï¼ˆå°‘ãªã„å®Ÿé¨“å›æ•°ã§æœ€é©è§£ã‚’æ¢ç´¢ï¼‰</li>
                    <li><strong>æ·±å±¤å­¦ç¿’</strong>: ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚‹éç·šå½¢é–¢ä¿‚ã®å­¦ç¿’ï¼ˆè¤‡é›‘ãªãƒ—ãƒ­ã‚»ã‚¹ã¸ã®å¯¾å¿œï¼‰</li>
                    <li><strong>ãƒãƒ«ãƒãƒ•ã‚£ã‚¸ãƒƒã‚¯ã‚¹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</strong>: FEM/CFDã¨æ©Ÿæ¢°å­¦ç¿’ã®çµ±åˆï¼ˆåå¿œ-æ‹¡æ•£-ç†±è¼¸é€ã®åŒæ™‚è§£æï¼‰</li>
                    <li><strong>è‡ªå¾‹å®Ÿé¨“ã‚·ã‚¹ãƒ†ãƒ </strong>: ãƒ­ãƒœãƒƒãƒˆåˆ¶å¾¡ã¨AIã®çµ±åˆï¼ˆMaterials Genome Initiativeã®å®Ÿç¾ï¼‰</li>
                    <li><strong>ãƒ—ãƒ­ã‚»ã‚¹ãƒã‚§ãƒ¼ãƒ³æœ€é©åŒ–</strong>: è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ã®çµ„ã¿åˆã‚ã›æœ€é©åŒ–ï¼ˆä¾‹ï¼šå…±æ²ˆâ†’ä»®ç„¼æˆâ†’ç„¼çµã®å…¨ä½“æœ€é©åŒ–ï¼‰</li>
                </ul>

                <p>
                    ææ–™åˆæˆãƒ—ãƒ­ã‚»ã‚¹ã®æœ€é©åŒ–ã¯ã€è¨ˆç®—ç§‘å­¦ã€æ©Ÿæ¢°å­¦ç¿’ã€å®Ÿé¨“æŠ€è¡“ã®èåˆã«ã‚ˆã‚Šé£›èºçš„ã«ç™ºå±•ã—ã¦ã„ã¾ã™ã€‚æœ¬ç« ã§å­¦ã‚“ã æ‰‹æ³•ã¯ã€ã‚ã‚‰ã‚†ã‚‹ææ–™ç³»ã«é©ç”¨å¯èƒ½ãªæ±ç”¨çš„ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚Šã€ä»Šå¾Œã®ææ–™ç ”ç©¶ãƒ»é–‹ç™ºã®åŠ¹ç‡åŒ–ã«å¤§ããè²¢çŒ®ã—ã¾ã™ã€‚
                </p>
            </section>

            <section id="references">
                <h2>å‚è€ƒæ–‡çŒ®</h2>
                <ol>
                    <li>S. Curtarolo, G. L. W. Hart, M. B. Nardelli, N. Mingo, S. Sanvito, O. Levy, "The high-throughput highway to computational materials design", <em>Nature Materials</em>, 12 (2013), pp. 191-201. <strong>(ãƒãƒ†ãƒªã‚¢ãƒ«ã‚ºãƒ»ã‚¤ãƒ³ãƒ•ã‚©ãƒãƒ†ã‚£ã‚¯ã‚¹ã®åŸºç¤)</strong></li>

                    <li>K. Deb, A. Pratap, S. Agarwal, T. Meyarivan, "A fast and elitist multiobjective genetic algorithm: NSGA-II", <em>IEEE Transactions on Evolutionary Computation</em>, 6(2) (2002), pp. 182-197. <strong>(å¤šç›®çš„æœ€é©åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )</strong></li>

                    <li>L. Breiman, "Random Forests", <em>Machine Learning</em>, 45 (2001), pp. 5-32. <strong>(ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ã®åŸè«–æ–‡)</strong></li>

                    <li>A. Jain, S. P. Ong, G. Hautier, W. Chen, W. D. Richards, S. Dacek, S. Cholia, D. Gunter, D. Skinner, G. Ceder, K. A. Persson, "Commentary: The Materials Project: A materials genome approach to accelerating materials innovation", <em>APL Materials</em>, 1 (2013), 011002, pp. 1-11. <strong>(Materials Project: å¤§è¦æ¨¡ææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)</strong></li>

                    <li>R. GÃ³mez-Bombarelli, J. N. Wei, D. Duvenaud, J. M. HernÃ¡ndez-Lobato, B. SÃ¡nchez-Lengeling, D. Sheberla, J. Aguilera-Iparraguirre, T. D. Hirzel, R. P. Adams, A. Aspuru-Guzik, "Automatic Chemical Design Using a Data-Driven Continuous Representation of Molecules", <em>ACS Central Science</em>, 4(2) (2018), pp. 268-276. <strong>(åˆ†å­è¨­è¨ˆã¸ã®æ©Ÿæ¢°å­¦ç¿’å¿œç”¨)</strong></li>

                    <li>B. Meredig, A. Agrawal, S. Kirklin, J. E. Saal, J. W. Doak, A. Thompson, K. Zhang, A. Choudhary, C. Wolverton, "Combinatorial screening for new materials in unconstrained composition space with machine learning", <em>Physical Review B</em>, 89 (2014), 094104, pp. 1-7. <strong>(çµ„æˆç©ºé–“ã®æ©Ÿæ¢°å­¦ç¿’æ¢ç´¢)</strong></li>

                    <li>T. Lookman, P. V. Balachandran, D. Xue, R. Yuan (Eds.), <em>Information Science for Materials Discovery and Design</em>, Springer Series in Materials Science, Vol. 225, Springer (2016), pp. 1-340. <strong>(ææ–™è¨­è¨ˆã®ãŸã‚ã®æƒ…å ±ç§‘å­¦)</strong></li>
                </ol>
            </section>

            <section id="exercises">
                <h2>æ¼”ç¿’å•é¡Œ</h2>

                <div class="exercise">
                    <div class="exercise-header">æ¼”ç¿’5.1ï¼šãƒ—ãƒ­ã‚»ã‚¹é¸æŠã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã®æ‹¡å¼µ <span class="difficulty easy">Easy</span></div>
                    <p>
                        <code>ProcessSelector</code>ã‚¯ãƒ©ã‚¹ã«ã€ä»¥ä¸‹ã®è¿½åŠ æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
                    </p>
                    <ul>
                        <li>çµæ™¶æ€§è¦æ±‚ï¼ˆé«˜/ä¸­/ä½ï¼‰ã‚’è¿½åŠ åŸºæº–ã¨ã—ã¦è€ƒæ…®</li>
                        <li>ãƒ—ãƒ­ã‚»ã‚¹ã”ã¨ã®çµæ™¶æ€§é©åˆåº¦ã‚’å®šç¾©ï¼ˆCVD/PVDã¯é«˜ã€å…±æ²ˆæ³•ã¯ä¸­ã€å›ºç›¸åå¿œã¯ä½ãªã©ï¼‰</li>
                        <li>ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°é–¢æ•°ã«çµæ™¶æ€§ã®é …ï¼ˆ10ç‚¹ï¼‰ã‚’è¿½åŠ </li>
                    </ul>

                    <details>
                        <summary>è§£ç­”ä¾‹</summary>
                        <pre><code class="language-python">class ProcessSelectorExtended(ProcessSelector):
    def __init__(self):
        super().__init__()
        # çµæ™¶æ€§é©åˆåº¦ï¼ˆé«˜=1.0, ä¸­=0.6, ä½=0.3ï¼‰
        self.crystallinity_scores = {
            'cvd': 1.0,
            'pvd': 1.0,
            'hydrothermal': 0.8,
            'sol_gel': 0.6,
            'coprecipitation': 0.5,
            'solid_state': 0.7,
            'sintering': 0.8
        }

    def calculate_score(self, process: str, requirements: Dict) -> float:
        # æ—¢å­˜ã®ã‚¹ã‚³ã‚¢è¨ˆç®—
        score = super().calculate_score(process, requirements)

        # çµæ™¶æ€§è¦æ±‚ãŒã‚ã‚‹å ´åˆï¼ˆhigh/medium/lowï¼‰
        crystallinity_req = requirements.get('crystallinity', 'medium')

        crystallinity_weight = {
            'high': 1.0,
            'medium': 0.6,
            'low': 0.3
        }[crystallinity_req]

        # çµæ™¶æ€§ã‚¹ã‚³ã‚¢ï¼ˆ10ç‚¹æº€ç‚¹ï¼‰
        cryst_score = 10 * self.crystallinity_scores.get(process, 0.5) * crystallinity_weight
        score += cryst_score

        return min(100, score)

# ãƒ†ã‚¹ãƒˆ
selector_ext = ProcessSelectorExtended()

requirements_high_cryst = {
    'grain_size': 100e-9,
    'temp_limit': 1000,
    'scale': 0.001,
    'cost_weight': 0.3,
    'material_type': 'thin_films',
    'crystallinity': 'high'  # é«˜çµæ™¶æ€§è¦æ±‚
}

print("é«˜çµæ™¶æ€§è¦æ±‚ã®å ´åˆ:")
top_procs = selector_ext.select_process(requirements_high_cryst)
for proc, score in top_procs:
    print(f"  {proc}: {score:.1f}ç‚¹")</code></pre>
                    </details>
                </div>

                <div class="exercise">
                    <div class="exercise-header">æ¼”ç¿’5.2ï¼šåˆ¶ç´„ä»˜ãå¤šç›®çš„æœ€é©åŒ– <span class="difficulty medium">Medium</span></div>
                    <p>
                        ç„¼çµãƒ—ãƒ­ã‚»ã‚¹ã®å¤šç›®çš„æœ€é©åŒ–ã«ã€ä»¥ä¸‹ã®åˆ¶ç´„æ¡ä»¶ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
                    </p>
                    <ul>
                        <li>å¯†åº¦åˆ¶ç´„: Ï<sub>rel</sub> â‰¥ 0.90ï¼ˆæœ€ä½å¯†åº¦è¦æ±‚ï¼‰</li>
                        <li>ç²’å¾„åˆ¶ç´„: G â‰¤ 5 Î¼mï¼ˆç²’æˆé•·æŠ‘åˆ¶ï¼‰</li>
                        <li>ã‚³ã‚¹ãƒˆåˆ¶ç´„: C â‰¤ 50 kWhï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼äºˆç®—ï¼‰</li>
                    </ul>
                    <p>
                        åˆ¶ç´„æ¡ä»¶ã‚’æº€ãŸã™å®Ÿè¡Œå¯èƒ½è§£ã®ä¸­ã§ã€å¯†åº¦ã‚’æœ€å¤§åŒ–ã™ã‚‹æœ€é©åŒ–å•é¡Œã‚’è§£ã„ã¦ãã ã•ã„ã€‚
                    </p>

                    <details>
                        <summary>è§£ç­”ä¾‹</summary>
                        <pre><code class="language-python">from scipy.optimize import minimize

def constrained_optimization(model: SinteringMultiObjective) -> Tuple[np.ndarray, Tuple]:
    """
    åˆ¶ç´„ä»˜ãå¤šç›®çš„æœ€é©åŒ–

    ç›®çš„: å¯†åº¦æœ€å¤§åŒ–
    åˆ¶ç´„: Ï â‰¥ 0.90, G â‰¤ 5 Î¼m, C â‰¤ 50 kWh
    """

    def objective(params):
        """å¯†åº¦ã®è² å€¤ï¼ˆæœ€å°åŒ–ã®ãŸã‚ï¼‰"""
        rho, G, C, t = model.objectives(params)
        return rho  # æ—¢ã«è² å€¤ãªã®ã§ã€æœ€å°åŒ–=æœ€å¤§åŒ–

    def constraint_density(params):
        """å¯†åº¦åˆ¶ç´„: Ï â‰¥ 0.90 â†’ -Ï + 0.90 â‰¤ 0"""
        rho, _, _, _ = model.objectives(params)
        return -rho - 0.90  # â‰¥ 0ãªã‚‰åˆ¶ç´„æº€è¶³

    def constraint_grain(params):
        """ç²’å¾„åˆ¶ç´„: G â‰¤ 5 Î¼m â†’ G - 5 â‰¤ 0"""
        _, G, _, _ = model.objectives(params)
        return 5 - G  # â‰¥ 0ãªã‚‰åˆ¶ç´„æº€è¶³

    def constraint_cost(params):
        """ã‚³ã‚¹ãƒˆåˆ¶ç´„: C â‰¤ 50 kWh â†’ C - 50 â‰¤ 0"""
        _, _, C, _ = model.objectives(params)
        return 50 - C  # â‰¥ 0ãªã‚‰åˆ¶ç´„æº€è¶³

    constraints = [
        {'type': 'ineq', 'fun': constraint_density},
        {'type': 'ineq', 'fun': constraint_grain},
        {'type': 'ineq', 'fun': constraint_cost}
    ]

    bounds = [(1000, 1600), (10, 300), (1, 20)]
    x0 = [1400, 150, 10]  # åˆæœŸæ¨å®šå€¤

    result = minimize(
        objective,
        x0,
        method='SLSQP',
        bounds=bounds,
        constraints=constraints,
        options={'maxiter': 100}
    )

    return result.x, model.objectives(result.x)

# å®Ÿè¡Œ
model = SinteringMultiObjective()
opt_params, opt_objs = constrained_optimization(model)

T_opt, t_opt, R_opt = opt_params
rho_opt, G_opt, C_opt, time_opt = opt_objs

print("åˆ¶ç´„ä»˜ãæœ€é©åŒ–çµæœ:")
print(f"æ¸©åº¦: {T_opt:.0f}Â°C, ä¿æŒæ™‚é–“: {t_opt:.0f}min, æ˜‡æ¸©é€Ÿåº¦: {R_opt:.1f}Â°C/min")
print(f"å¯†åº¦: {-rho_opt:.3f} (åˆ¶ç´„: â‰¥0.90)")
print(f"ç²’å¾„: {G_opt:.2f}Î¼m (åˆ¶ç´„: â‰¤5.0Î¼m)")
print(f"ã‚³ã‚¹ãƒˆ: {C_opt:.2f}kWh (åˆ¶ç´„: â‰¤50kWh)")
print(f"æ™‚é–“: {time_opt:.0f}min")</code></pre>
                    </details>
                </div>

                <div class="exercise">
                    <div class="exercise-header">æ¼”ç¿’5.3ï¼šãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å›å¸°ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰ <span class="difficulty medium">Medium</span></div>
                    <p>
                        ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆã®ä»£ã‚ã‚Šã«ã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆMulti-Layer Perceptronï¼‰ã‚’ç”¨ã„ã¦å¯†åº¦äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¦ãã ã•ã„ã€‚Kerasã¾ãŸã¯scikit-learnã®<code>MLPRegressor</code>ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
                    </p>
                    <ul>
                        <li>éš ã‚Œå±¤: 2å±¤ï¼ˆ64ãƒ¦ãƒ‹ãƒƒãƒˆã€32ãƒ¦ãƒ‹ãƒƒãƒˆï¼‰</li>
                        <li>æ´»æ€§åŒ–é–¢æ•°: ReLU</li>
                        <li>æœ€é©åŒ–: Adam</li>
                        <li>æå¤±é–¢æ•°: MSE</li>
                        <li>è©•ä¾¡æŒ‡æ¨™: RMSEã€RÂ²</li>
                    </ul>

                    <details>
                        <summary>è§£ç­”ä¾‹</summary>
                        <pre><code class="language-python">from sklearn.neural_network import MLPRegressor
from sklearn.preprocessing import StandardScaler

# ãƒ‡ãƒ¼ã‚¿ã®æ¨™æº–åŒ–ï¼ˆãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã¯é‡è¦ï¼‰
scaler_X = StandardScaler()
scaler_y = StandardScaler()

X_train_scaled = scaler_X.fit_transform(X_train)
X_test_scaled = scaler_X.transform(X_test)
y_train_scaled = scaler_y.fit_transform(y_train.values.reshape(-1, 1)).ravel()
y_test_scaled = scaler_y.transform(y_test.values.reshape(-1, 1)).ravel()

# MLPRegressorã®æ§‹ç¯‰
mlp_model = MLPRegressor(
    hidden_layer_sizes=(64, 32),  # 2å±¤
    activation='relu',
    solver='adam',
    alpha=0.001,                  # L2æ­£å‰‡åŒ–
    batch_size=32,
    learning_rate_init=0.001,
    max_iter=500,
    random_state=42,
    early_stopping=True,
    validation_fraction=0.1,
    n_iter_no_change=20
)

# è¨“ç·´
mlp_model.fit(X_train_scaled, y_train_scaled)

# äºˆæ¸¬ï¼ˆå…ƒã®ã‚¹ã‚±ãƒ¼ãƒ«ã«æˆ»ã™ï¼‰
y_train_pred_scaled = mlp_model.predict(X_train_scaled)
y_test_pred_scaled = mlp_model.predict(X_test_scaled)

y_train_pred_mlp = scaler_y.inverse_transform(y_train_pred_scaled.reshape(-1, 1)).ravel()
y_test_pred_mlp = scaler_y.inverse_transform(y_test_pred_scaled.reshape(-1, 1)).ravel()

# è©•ä¾¡
train_rmse_mlp = np.sqrt(mean_squared_error(y_train, y_train_pred_mlp))
test_rmse_mlp = np.sqrt(mean_squared_error(y_test, y_test_pred_mlp))
train_r2_mlp = r2_score(y_train, y_train_pred_mlp)
test_r2_mlp = r2_score(y_test, y_test_pred_mlp)

print("ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å›å¸°ãƒ¢ãƒ‡ãƒ«ã®æ€§èƒ½:")
print(f"è¨“ç·´ãƒ‡ãƒ¼ã‚¿: RMSE = {train_rmse_mlp:.4f}, RÂ² = {train_r2_mlp:.4f}")
print(f"ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: RMSE = {test_rmse_mlp:.4f}, RÂ² = {test_r2_mlp:.4f}")

print("\nãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆã¨ã®æ¯”è¼ƒ:")
print(f"RF  - ãƒ†ã‚¹ãƒˆRMSE: {test_rmse:.4f}, RÂ²: {test_r2:.4f}")
print(f"MLP - ãƒ†ã‚¹ãƒˆRMSE: {test_rmse_mlp:.4f}, RÂ²: {test_r2_mlp:.4f}")</code></pre>
                    </details>
                </div>

                <div class="exercise">
                    <div class="exercise-header">æ¼”ç¿’5.4ï¼šãƒ™ã‚¤ã‚ºæœ€é©åŒ–ã®å®Ÿè£… <span class="difficulty hard">Hard</span></div>
                    <p>
                        Gaussian Processã‚’ç”¨ã„ãŸãƒ™ã‚¤ã‚ºæœ€é©åŒ–ã«ã‚ˆã‚Šã€ç„¼çµãƒ—ãƒ­ã‚»ã‚¹ã®æœ€é©æ¡ä»¶ã‚’åŠ¹ç‡çš„ã«æ¢ç´¢ã—ã¦ãã ã•ã„ã€‚<code>scikit-optimize</code>ã®<code>gp_minimize</code>ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
                    </p>
                    <ul>
                        <li>ç›®çš„é–¢æ•°: å¯†åº¦ã®è² å€¤ï¼ˆæœ€å¤§åŒ–å•é¡Œã‚’æœ€å°åŒ–å•é¡Œã«å¤‰æ›ï¼‰</li>
                        <li>æ¢ç´¢ç©ºé–“: æ¸©åº¦ï¼ˆ1000-1600Â°Cï¼‰ã€ä¿æŒæ™‚é–“ï¼ˆ10-300 minï¼‰ã€æ˜‡æ¸©é€Ÿåº¦ï¼ˆ1-20Â°C/minï¼‰</li>
                        <li>ç²å¾—é–¢æ•°: Expected Improvement (EI)</li>
                        <li>è©•ä¾¡å›æ•°: 50å›ï¼ˆå®Ÿé¨“å›æ•°å‰Šæ¸›ï¼‰</li>
                        <li>åæŸæ›²ç·šã‚’ãƒ—ãƒ­ãƒƒãƒˆ</li>
                    </ul>

                    <details>
                        <summary>è§£ç­”ä¾‹</summary>
                        <pre><code class="language-python">from skopt import gp_minimize
from skopt.plots import plot_convergence
import matplotlib.pyplot as plt

# ç›®çš„é–¢æ•°ï¼ˆå¯†åº¦æœ€å¤§åŒ– = å¯†åº¦ã®è² å€¤ã‚’æœ€å°åŒ–ï¼‰
model_bo = SinteringMultiObjective()

def objective_bo(params):
    """ãƒ™ã‚¤ã‚ºæœ€é©åŒ–ç”¨ã®ç›®çš„é–¢æ•°"""
    rho, G, C, t = model_bo.objectives(params)
    return rho  # æ—¢ã«è² å€¤

# æ¢ç´¢ç©ºé–“ã®å®šç¾©
search_space = [
    (1000, 1600),  # æ¸©åº¦ [Â°C]
    (10, 300),     # ä¿æŒæ™‚é–“ [min]
    (1, 20)        # æ˜‡æ¸©é€Ÿåº¦ [Â°C/min]
]

# ãƒ™ã‚¤ã‚ºæœ€é©åŒ–å®Ÿè¡Œ
result_bo = gp_minimize(
    objective_bo,
    search_space,
    n_calls=50,             # è©•ä¾¡å›æ•°ï¼ˆå®Ÿé¨“å›æ•°ï¼‰
    acq_func='EI',          # ç²å¾—é–¢æ•°: Expected Improvement
    n_random_starts=10,     # åˆæœŸãƒ©ãƒ³ãƒ€ãƒ æ¢ç´¢
    random_state=42,
    verbose=False
)

# æœ€é©è§£
T_bo, t_bo, R_bo = result_bo.x
rho_bo, G_bo, C_bo, time_bo = model_bo.objectives(result_bo.x)

print("ãƒ™ã‚¤ã‚ºæœ€é©åŒ–çµæœ:")
print(f"æœ€é©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:")
print(f"  æ¸©åº¦: {T_bo:.0f}Â°C")
print(f"  ä¿æŒæ™‚é–“: {t_bo:.0f}min")
print(f"  æ˜‡æ¸©é€Ÿåº¦: {R_bo:.1f}Â°C/min")
print(f"æœ€é©ç‰¹æ€§:")
print(f"  å¯†åº¦: {-rho_bo:.4f}")
print(f"  ç²’å¾„: {G_bo:.2f}Î¼m")
print(f"  ã‚³ã‚¹ãƒˆ: {C_bo:.2f}kWh")
print(f"  æ™‚é–“: {time_bo:.0f}min")
print(f"\nç·è©•ä¾¡å›æ•°: {len(result_bo.func_vals)}")
print(f"æœ€è‰¯è©•ä¾¡å€¤: {result_bo.fun:.4f}")

# åæŸæ›²ç·šã®ãƒ—ãƒ­ãƒƒãƒˆ
fig, ax = plt.subplots(figsize=(10, 6))
plot_convergence(result_bo, ax=ax)
ax.set_title('ãƒ™ã‚¤ã‚ºæœ€é©åŒ–ã®åæŸæ›²ç·š', fontsize=14)
ax.set_xlabel('è©•ä¾¡å›æ•°ï¼ˆå®Ÿé¨“å›æ•°ï¼‰', fontsize=12)
ax.set_ylabel('å¯†åº¦ã®è² å€¤ï¼ˆæœ€å°å€¤ï¼‰', fontsize=12)
plt.tight_layout()
plt.savefig('bayesian_optimization_convergence.png', dpi=150)
plt.show()

# é€šå¸¸ã®æœ€é©åŒ–ã¨ã®æ¯”è¼ƒ
print("\né€šå¸¸ã®æœ€é©åŒ–ï¼ˆdifferential_evolutionï¼‰ã¨ã®æ¯”è¼ƒ:")
print(f"ãƒ™ã‚¤ã‚ºæœ€é©åŒ–: {len(result_bo.func_vals)}å›ã®è©•ä¾¡ã§å¯†åº¦ {-rho_bo:.4f} é”æˆ")
print(f"ï¼ˆé€šå¸¸ã®æœ€é©åŒ–ã§ã¯1000å›ä»¥ä¸Šã®è©•ä¾¡ãŒå¿…è¦ï¼‰")</code></pre>
                    </details>
                </div>

                <div class="exercise">
                    <div class="exercise-header">æ¼”ç¿’5.5ï¼šçµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ‹¡å¼µ <span class="difficulty hard">Hard</span></div>
                    <p>
                        <code>IntegratedSynthesisWorkflow</code>ã‚¯ãƒ©ã‚¹ã‚’æ‹¡å¼µã—ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
                    </p>
                    <ul>
                        <li><strong>è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ã®é€£é–</strong>: ä¾‹ãˆã°ã€Œå…±æ²ˆæ³•ã§å‰é§†ä½“åˆæˆ â†’ ç„¼çµã§ç·»å¯†åŒ–ã€ã¨ã„ã£ãŸ2æ®µéšãƒ—ãƒ­ã‚»ã‚¹ã®æœ€é©åŒ–</li>
                        <li><strong>ã‚³ã‚¹ãƒˆ-ä¾¿ç›Šåˆ†æ</strong>: å„ãƒ—ãƒ­ã‚»ã‚¹ã®ç·ã‚³ã‚¹ãƒˆï¼ˆææ–™è²»+ã‚¨ãƒãƒ«ã‚®ãƒ¼è²»+äººä»¶è²»ï¼‰ã‚’è¨ˆç®—ã—ã€ROIï¼ˆæŠ•è³‡åˆ©ç›Šç‡ï¼‰ã‚’è©•ä¾¡</li>
                        <li><strong>ãƒªã‚¹ã‚¯è©•ä¾¡</strong>: ãƒ—ãƒ­ã‚»ã‚¹ã®å¤±æ•—ç¢ºç‡ï¼ˆä¾‹ï¼šç„¼çµå‰²ã‚Œã€ç²’æˆé•·éå‰°ï¼‰ã‚’è€ƒæ…®ã—ãŸæœŸå¾…å€¤æœ€é©åŒ–</li>
                        <li><strong>å®Ÿé¨“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°</strong>: ä¸¦åˆ—å®Ÿé¨“å¯èƒ½ãªãƒ—ãƒ­ã‚»ã‚¹ã‚’è‡ªå‹•ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã—ã€ç·é–‹ç™ºæ™‚é–“ã‚’æœ€å°åŒ–</li>
                    </ul>

                    <details>
                        <summary>è§£ç­”ä¾‹ï¼ˆéª¨æ ¼ã®ã¿ï¼‰</summary>
                        <pre><code class="language-python">class AdvancedSynthesisWorkflow(IntegratedSynthesisWorkflow):
    """
    æ‹¡å¼µçµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¯: ãƒ©ã‚¹

    è¿½åŠ æ©Ÿèƒ½:
        - è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹é€£é–
        - ã‚³ã‚¹ãƒˆ-ä¾¿ç›Šåˆ†æ
        - ãƒªã‚¹ã‚¯è©•ä¾¡
        - å®Ÿé¨“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°
    """

    def __init__(self, ml_model=None):
        super().__init__(ml_model)

        # ã‚³ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆUSD/kgã€USD/kWhã€USD/hourï¼‰
        self.cost_db = {
            'material_cost': 50,     # åŸæ–™è²»
            'energy_cost': 0.15,     # é›»åŠ›ã‚³ã‚¹ãƒˆ [USD/kWh]
            'labor_cost': 30,        # äººä»¶è²» [USD/hour]
        }

        # ãƒªã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå¤±æ•—ç¢ºç‡ï¼‰
        self.risk_db = {
            'solid_state': {'cracking': 0.05, 'contamination': 0.02},
            'sol_gel': {'gelation_fail': 0.10, 'cracking': 0.15},
            'coprecipitation': {'pH_control': 0.08, 'agglomeration': 0.12},
            'sintering': {'cracking': 0.10, 'warping': 0.05}
        }

    def chain_processes(self, process_chain: List[str], requirements: Dict) -> Dict:
        """
        è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ã®é€£é–æœ€é©åŒ–

        Args:
            process_chain: ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒªã‚¹ãƒˆï¼ˆä¾‹: ['coprecipitation', 'sintering']ï¼‰
            requirements: ææ–™è¦æ±‚ä»•æ§˜

        Returns:
            é€£é–ãƒ—ãƒ­ã‚»ã‚¹ã®æœ€é©è¨ˆç”»
        """
        chain_plan = {'processes': []}

        for i, process in enumerate(process_chain):
            print(f"\nãƒ—ãƒ­ã‚»ã‚¹ {i+1}: {process}")

            # å‰æ®µãƒ—ãƒ­ã‚»ã‚¹ã®å‡ºåŠ›ã‚’æ¬¡æ®µã®å…¥åŠ›ã¨ã™ã‚‹
            if i > 0:
                # å‰æ®µã®å‡ºåŠ›ç‰¹æ€§ã‚’æ¬¡æ®µã®è¦æ±‚ä»•æ§˜ã«åæ˜ 
                prev_output = chain_plan['processes'][-1]['output']
                requirements['grain_size'] = prev_output.get('grain_size', requirements['grain_size'])
                requirements['density'] = prev_output.get('density', requirements.get('density', 0.6))

            # å„ãƒ—ãƒ­ã‚»ã‚¹ã®æœ€é©åŒ–
            if process == 'sintering':
                # ç„¼çµãƒ—ãƒ­ã‚»ã‚¹ã®æœ€é©åŒ–
                weights = [0.5, 0.2, 0.2, 0.1]
                opt_params, opt_objs = multi_objective_optimization(weights)

                process_plan = {
                    'process': process,
                    'parameters': {
                        'temperature': opt_params[0],
                        'time': opt_params[1],
                        'heating_rate': opt_params[2]
                    },
                    'output': {
                        'density': -opt_objs[0],
                        'grain_size': opt_objs[1] * 1e-6,  # Î¼m â†’ m
                        'cost': opt_objs[2],
                        'time': opt_objs[3]
                    }
                }
            else:
                # ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ï¼ˆç°¡æ˜“å®Ÿè£…ï¼‰
                process_plan = {
                    'process': process,
                    'parameters': {'note': 'Simplified implementation'},
                    'output': {
                        'density': 0.6,
                        'grain_size': 100e-9,
                        'cost': 10,
                        'time': 120
                    }
                }

            chain_plan['processes'].append(process_plan)

        # ç·ã‚³ã‚¹ãƒˆãƒ»ç·æ™‚é–“ã®è¨ˆç®—
        chain_plan['total_cost'] = sum(p['output']['cost'] for p in chain_plan['processes'])
        chain_plan['total_time'] = sum(p['output']['time'] for p in chain_plan['processes'])

        return chain_plan

    def cost_benefit_analysis(self, plan: Dict, market_value: float) -> Dict:
        """
        ã‚³ã‚¹ãƒˆ-ä¾¿ç›Šåˆ†æ

        Args:
            plan: åˆæˆè¨ˆç”»
            market_value: è£½å“ã®å¸‚å ´ä¾¡å€¤ [USD/kg]

        Returns:
            ã‚³ã‚¹ãƒˆ-ä¾¿ç›Šåˆ†æçµæœ
        """
        # ç·ã‚³ã‚¹ãƒˆè¨ˆç®—
        material_cost = self.cost_db['material_cost'] * requirements.get('scale', 1)
        energy_cost = plan['predicted_properties'].get('cost', 0) * self.cost_db['energy_cost']
        labor_cost = plan['predicted_properties'].get('total_time', 0) / 60 * self.cost_db['labor_cost']

        total_cost = material_cost + energy_cost + labor_cost

        # åç›Šè¨ˆç®—
        revenue = market_value * requirements.get('scale', 1)
        profit = revenue - total_cost
        roi = (profit / total_cost) * 100 if total_cost > 0 else 0

        return {
            'total_cost': total_cost,
            'material_cost': material_cost,
            'energy_cost': energy_cost,
            'labor_cost': labor_cost,
            'revenue': revenue,
            'profit': profit,
            'roi': roi
        }

    def risk_assessment(self, process: str) -> float:
        """
        ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒªã‚¹ã‚¯è©•ä¾¡

        Args:
            process: ãƒ—ãƒ­ã‚»ã‚¹å

        Returns:
            ç·åˆå¤±æ•—ç¢ºç‡
        """
        risks = self.risk_db.get(process, {})
        # ç‹¬ç«‹äº‹è±¡ã¨ã—ã¦ç·åˆå¤±æ•—ç¢ºç‡ã‚’è¨ˆç®—
        prob_success = 1.0
        for risk_type, prob in risks.items():
            prob_success *= (1 - prob)

        prob_failure = 1 - prob_success
        return prob_failure

# ä½¿ç”¨ä¾‹
workflow_adv = AdvancedSynthesisWorkflow(ml_model=rf_model)

# 2æ®µéšãƒ—ãƒ­ã‚»ã‚¹: å…±æ²ˆâ†’ç„¼çµ
process_chain = ['coprecipitation', 'sintering']
requirements_chain = {
    'grain_size': 1e-6,
    'density': 0.95,
    'temp_limit': 1600,
    'scale': 1,  # 1 kg
    'cost_weight': 0.3,
    'time_weight': 0.1,
    'material_type': 'ceramics'
}

print("è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹é€£é–æœ€é©åŒ–:")
chain_plan = workflow_adv.chain_processes(process_chain, requirements_chain)

print(f"\nç·ã‚³ã‚¹ãƒˆ: {chain_plan['total_cost']:.2f} kWh")
print(f"ç·æ™‚é–“: {chain_plan['total_time']:.0f} min")

# ã‚³ã‚¹ãƒˆ-ä¾¿ç›Šåˆ†æ
market_value = 500  # USD/kg
cba = workflow_adv.cost_benefit_analysis(chain_plan['processes'][-1], market_value)

print(f"\nã‚³ã‚¹ãƒˆ-ä¾¿ç›Šåˆ†æ:")
print(f"ç·ã‚³ã‚¹ãƒˆ: ${cba['total_cost']:.2f}")
print(f"åç›Š: ${cba['revenue']:.2f}")
print(f"åˆ©ç›Š: ${cba['profit']:.2f}")
print(f"ROI: {cba['roi']:.1f}%")

# ãƒªã‚¹ã‚¯è©•ä¾¡
for process in process_chain:
    risk = workflow_adv.risk_assessment(process)
    print(f"{process}ã®å¤±æ•—ç¢ºç‡: {risk*100:.1f}%")</code></pre>
                    </details>
                </div>

                <div class="exercise">
                    <div class="exercise-header">æ¼”ç¿’5.6ï¼šå®Ÿãƒ‡ãƒ¼ã‚¿ã¸ã®é©ç”¨ <span class="difficulty hard">Hard</span></div>
                    <p>
                        å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ææ–™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆä¾‹ï¼šMaterials Projectã€NIMS MatNaviï¼‰ã‹ã‚‰å®Ÿéš›ã®ç„¼çµãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æœ¬ç« ã§å­¦ã‚“ã æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ãƒ»è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚
                    </p>
                    <ul>
                        <li>ãƒ‡ãƒ¼ã‚¿å–å¾—: Materials Project APIã¾ãŸã¯CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</li>
                        <li>å‰å‡¦ç†: æ¬ æå€¤å‡¦ç†ã€å¤–ã‚Œå€¤é™¤å»ã€æ­£è¦åŒ–</li>
                        <li>ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°: å…ƒç´ ç‰¹æ€§ï¼ˆåŸå­åŠå¾„ã€é›»æ°—é™°æ€§åº¦ï¼‰ã®è¿½åŠ </li>
                        <li>ãƒ¢ãƒ‡ãƒ«æ§‹ç¯‰: ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆã€XGBoostã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ¯”è¼ƒ</li>
                        <li>è©•ä¾¡: äº¤å·®æ¤œè¨¼ã€RMSEã€RÂ²ã€ç‰¹å¾´é‡é‡è¦åº¦åˆ†æ</li>
                    </ul>

                    <details>
                        <summary>ãƒ’ãƒ³ãƒˆ</summary>
                        <p>
                            Materials Project APIã®ä½¿ç”¨ä¾‹ï¼š
                        </p>
                        <pre><code class="language-python">from pymatgen.ext.matproj import MPRester

# APIã‚­ãƒ¼ã‚’å–å¾—ï¼ˆhttps://materialsproject.org/ï¼‰
API_KEY = "your_api_key_here"

with MPRester(API_KEY) as mpr:
    # ä¾‹: Al2O3ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
    data = mpr.query(
        {"pretty_formula": "Al2O3"},
        ["material_id", "pretty_formula", "density", "formation_energy_per_atom"]
    )

    print(f"å–å¾—ãƒ‡ãƒ¼ã‚¿æ•°: {len(data)}")
    print(data[0])</code></pre>
                        <p>
                            ã¾ãŸã¯ã€NIMS MatNaviã‹ã‚‰CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€pandasã§èª­ã¿è¾¼ã‚€æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚
                        </p>
                    </details>
                </div>
            </section>

            <section id="learning-objectives">
                <div class="learning-objectives">
                    <h3>å­¦ç¿’ç›®æ¨™ã®ç¢ºèª</h3>
                    <p>ä»¥ä¸‹ã®é …ç›®ã«ã¤ã„ã¦ã€è‡ªå·±è©•ä¾¡ã—ã¦ãã ã•ã„ï¼ˆ1: ã¾ã ç†è§£ãŒä¸ååˆ†ã€2: åŸºæœ¬ã¯ç†è§£ã€3: å¿œç”¨ã§ãã‚‹ï¼‰ã€‚</p>

                    <div class="objective-level">
                        <h4>ãƒ¬ãƒ™ãƒ«1ï¼šåŸºæœ¬ç†è§£</h4>
                        <ul>
                            <li>â–¡ ãƒ—ãƒ­ã‚»ã‚¹é¸æŠã®åˆ¤æ–­åŸºæº–ï¼ˆç²’å¾„ã€æ¸©åº¦ã€ã‚¹ã‚±ãƒ¼ãƒ«ã€ã‚³ã‚¹ãƒˆï¼‰ã‚’èª¬æ˜ã§ãã‚‹</li>
                            <li>â–¡ å¤šç›®çš„æœ€é©åŒ–ã¨Paretoæœ€é©è§£ã®æ¦‚å¿µã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
                            <li>â–¡ æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰æ‰‹é †ã‚’èª¬æ˜ã§ãã‚‹</li>
                            <li>â–¡ çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å„ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆé¸æŠâ†’æœ€é©åŒ–â†’äºˆæ¸¬â†’å®Ÿé¨“ï¼‰ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
                        </ul>
                    </div>

                    <div class="objective-level">
                        <h4>ãƒ¬ãƒ™ãƒ«2ï¼šå®Ÿè·µã‚¹ã‚­ãƒ«</h4>
                        <ul>
                            <li>â–¡ ProcessSelectorã‚’ç”¨ã„ã¦ã€ææ–™è¦æ±‚ä»•æ§˜ã‹ã‚‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’é¸æŠã§ãã‚‹</li>
                            <li>â–¡ weighted sumæ³•ã§å¤šç›®çš„æœ€é©åŒ–ã‚’å®Ÿè£…ã§ãã‚‹</li>
                            <li>â–¡ ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã€å¯†åº¦äºˆæ¸¬ãŒã§ãã‚‹</li>
                            <li>â–¡ ç‰¹å¾´é‡é‡è¦åº¦ã‚’åˆ†æã—ã€æ”¯é…çš„ãªãƒ—ãƒ­ã‚»ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç‰¹å®šã§ãã‚‹</li>
                            <li>â–¡ çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç”¨ã„ã¦ã€å®Ÿè·µçš„ãªåˆæˆè¨ˆç”»ã‚’ç«‹æ¡ˆã§ãã‚‹</li>
                        </ul>
                    </div>

                    <div class="objective-level">
                        <h4>ãƒ¬ãƒ™ãƒ«3ï¼šå¿œç”¨åŠ›</h4>
                        <ul>
                            <li>â–¡ åˆ¶ç´„æ¡ä»¶ã‚’è€ƒæ…®ã—ãŸå¤šç›®çš„æœ€é©åŒ–ï¼ˆNSGA-IIã€åˆ¶ç´„ä»˜ãæœ€é©åŒ–ï¼‰ã‚’å®Ÿè£…ã§ãã‚‹</li>
                            <li>â–¡ ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€XGBoostã€ãƒ™ã‚¤ã‚ºæœ€é©åŒ–ãªã©ã®é«˜åº¦ãªæ‰‹æ³•ã‚’é©ç”¨ã§ãã‚‹</li>
                            <li>â–¡ è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ã®é€£é–æœ€é©åŒ–ã‚’å®Ÿè£…ã—ã€å…¨ä½“æœ€é©ã‚’é”æˆã§ãã‚‹</li>
                            <li>â–¡ ã‚³ã‚¹ãƒˆ-ä¾¿ç›Šåˆ†æã€ãƒªã‚¹ã‚¯è©•ä¾¡ã‚’å«ã‚€ç·åˆçš„ãªæ„æ€æ±ºå®šãŒã§ãã‚‹</li>
                            <li>â–¡ å®Ÿãƒ‡ãƒ¼ã‚¿ï¼ˆMaterials Projectã€NIMS MatNaviï¼‰ã‚’ç”¨ã„ãŸå®Ÿç”¨çš„ãªãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã§ãã‚‹</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 Materials Science Dojo. All rights reserved.</p>
            <p><a href="../index.html">ã‚·ãƒªãƒ¼ã‚ºä¸€è¦§ã«æˆ»ã‚‹</a> | <a href="index.html">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</a></p>
        </footer>
    </div>
</body>
</html>