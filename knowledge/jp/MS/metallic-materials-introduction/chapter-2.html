<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 2: åˆé‡‘ã®çŠ¶æ…‹å›³ã¨ç›¸å¤‰æ…‹ - é‡‘å±ææ–™å…¥é–€ | MS Dojo</title>
    <meta name="description" content="åˆé‡‘ã®çŠ¶æ…‹å›³ã€ç›¸å¾‹ã€å›ºæº¶ä½“ã€é‡‘å±é–“åŒ–åˆç‰©ã€å…±æåå¿œã«ã¤ã„ã¦å­¦ã³ã¾ã™ã€‚Pythonã§çŠ¶æ…‹å›³è¨ˆç®—ã¨ç›¸å¤‰æ…‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè·µã—ã¾ã™ã€‚">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="../../../assets/css/variables.css">
    <link rel="stylesheet" href="../../../assets/css/reset.css">
    <link rel="stylesheet" href="../../../assets/css/base.css">
    <link rel="stylesheet" href="../../../assets/css/components.css">
    <link rel="stylesheet" href="../../../assets/css/layout.css">
    <link rel="stylesheet" href="../../../assets/css/responsive.css">

    <!-- MathJax 3.x -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>

    <!-- Mermaid -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'neutral',
            themeVariables: {
                primaryColor: '#f093fb',
                primaryTextColor: '#1a252f',
                primaryBorderColor: '#f5576c',
                lineColor: '#f5576c',
                secondaryColor: '#fbc2eb',
                tertiaryColor: '#fff'
            }
        });
    </script>

    <!-- Prism.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

    <style>
        :root {
            --ms-gradient-start: #f093fb;
            --ms-gradient-end: #f5576c;
        }

        .chapter-header {
            background: linear-gradient(135deg, var(--ms-gradient-start) 0%, var(--ms-gradient-end) 100%);
            color: white;
            padding: 3rem 2rem;
            margin-bottom: 2rem;
            border-radius: 8px;
        }

        .chapter-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .chapter-header .subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
        }

        .section {
            margin-bottom: 3rem;
        }

        .section h2 {
            color: var(--ms-gradient-end);
            font-size: 2rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--ms-gradient-start);
        }

        .section h3 {
            color: var(--ms-gradient-start);
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        .equation-block {
            background: #f8f9fa;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--ms-gradient-start);
            border-radius: 4px;
            overflow-x: auto;
        }

        .code-example {
            margin: 2rem 0;
        }

        .code-example h4 {
            color: var(--ms-gradient-end);
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .code-example pre {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 1.5rem;
            overflow-x: auto;
        }

        .code-example code {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .exercise-section {
            background: linear-gradient(135deg, rgba(240, 147, 251, 0.1) 0%, rgba(245, 87, 108, 0.1) 100%);
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 8px;
            border: 2px solid var(--ms-gradient-start);
        }

        .exercise-section h3 {
            color: var(--ms-gradient-end);
            margin-top: 0;
        }

        .exercise {
            background: white;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 6px;
            border-left: 4px solid var(--ms-gradient-start);
        }

        .exercise-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .difficulty {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .difficulty.easy {
            background: #d4edda;
            color: #155724;
        }

        .difficulty.medium {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty.hard {
            background: #f8d7da;
            color: #721c24;
        }

        details {
            margin-top: 1rem;
        }

        summary {
            cursor: pointer;
            color: var(--ms-gradient-end);
            font-weight: 600;
            padding: 0.5rem;
            background: #f8f9fa;
            border-radius: 4px;
            user-select: none;
        }

        summary:hover {
            background: #e9ecef;
        }

        .learning-objectives {
            background: #f8f9fa;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 8px;
            border: 2px solid var(--ms-gradient-start);
        }

        .learning-objectives h3 {
            color: var(--ms-gradient-end);
            margin-top: 0;
        }

        .objective-level {
            margin: 1.5rem 0;
        }

        .objective-level h4 {
            color: var(--ms-gradient-start);
            margin-bottom: 0.75rem;
        }

        .objective-level ul {
            list-style: none;
            padding-left: 0;
        }

        .objective-level li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .objective-level li::before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: var(--ms-gradient-end);
            font-weight: bold;
        }

        .references {
            margin-top: 3rem;
            padding: 2rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .references h2 {
            color: var(--ms-gradient-end);
            margin-top: 0;
        }

        .references ol {
            padding-left: 1.5rem;
        }

        .references li {
            margin: 1rem 0;
            line-height: 1.6;
        }

        .mermaid {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .info-box h4 {
            color: #1976D2;
            margin-top: 0;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .chapter-header h1 {
                font-size: 1.8rem;
            }

            .chapter-header {
                padding: 2rem 1rem;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }
    </style>

    <style>
        /* Locale Switcher Styles */
        .locale-switcher {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 6px;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .current-locale {
            font-weight: 600;
            color: #7b2cbf;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .locale-separator {
            color: #adb5bd;
            font-weight: 300;
        }

        .locale-link {
            color: #f093fb;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
        }

        .locale-link:hover {
            background: rgba(240, 147, 251, 0.1);
            color: #d07be8;
            transform: translateY(-1px);
        }

        .locale-meta {
            color: #868e96;
            font-size: 0.85rem;
            font-style: italic;
            margin-left: auto;
        }

        @media (max-width: 768px) {
            .locale-switcher {
                font-size: 0.85rem;
                padding: 0.4rem 0.8rem;
            }
            .locale-meta {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="locale-switcher">
<span class="current-locale">ğŸŒ JP</span>
<span class="locale-separator">|</span>
<a href="../../../en/MS/metallic-materials-introduction/chapter-2.html" class="locale-link">ğŸ‡¬ğŸ‡§ EN</a>
<span class="locale-separator">|</span>
<span class="locale-meta">Last sync: 2025-11-16</span>
</div>
<nav class="breadcrumb" aria-label="ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ">
        <a href="../../../index.html">ãƒ›ãƒ¼ãƒ </a> &gt;
        <a href="../../../jp/knowledge/index.html">çŸ¥è­˜ãƒ™ãƒ¼ã‚¹</a> &gt;
        <a href="../../index.html">ææ–™ç§‘å­¦ (MS)</a> &gt;
        <a href="./index.html">é‡‘å±ææ–™å…¥é–€</a> &gt;
        <span>Chapter 2</span>
    </nav>

    <main class="container">
        <div class="chapter-header">
            <h1>Chapter 2: åˆé‡‘ã®çŠ¶æ…‹å›³ã¨ç›¸å¤‰æ…‹</h1>
            <p class="subtitle">ç›¸å¾‹ã€çŠ¶æ…‹å›³ã®èª­ã¿æ–¹ã€å›ºæº¶ä½“ã€é‡‘å±é–“åŒ–åˆç‰©ã€å…±æãƒ»åŒ…æåå¿œ</p>
        </div>

        <section class="section">
            <h2>2.1 åˆé‡‘ã¨çŠ¶æ…‹å›³ã®åŸºç¤</h2>

            <p>åˆé‡‘ï¼ˆalloyï¼‰ã¯ã€2ç¨®é¡ä»¥ä¸Šã®å…ƒç´ ã‚’æ··åˆã—ã¦ä½œã‚‰ã‚ŒãŸé‡‘å±ææ–™ã§ã™ã€‚ç´”é‡‘å±ã«æ¯”ã¹ã¦ã€åˆé‡‘ã¯å¼·åº¦ã€è€é£Ÿæ€§ã€è€ç†±æ€§ãªã©ã®ç‰¹æ€§ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚åˆé‡‘ã®æ€§è³ªã‚’ç†è§£ã™ã‚‹ã«ã¯ã€<strong>çŠ¶æ…‹å›³ï¼ˆç›¸å›³ã€phase diagramï¼‰</strong>ãŒä¸å¯æ¬ ã§ã™ã€‚</p>

            <h3>2.1.1 ç›¸å¾‹ï¼ˆGibbs ã®ç›¸å¾‹ï¼‰</h3>

            <p>ç†±åŠ›å­¦å¹³è¡¡çŠ¶æ…‹ã«ãŠã„ã¦ã€ç³»ã®è‡ªç”±åº¦ã‚’æ±ºå®šã™ã‚‹åŸºæœ¬æ³•å‰‡ãŒ<strong>Gibbsã®ç›¸å¾‹</strong>ã§ã™ã€‚</p>

            <div class="equation-block">
                <p><strong>Gibbsã®ç›¸å¾‹ï¼š</strong></p>
                $$F = C - P + 2$$
                <p>ã“ã“ã§ã€</p>
                <ul>
                    <li>$F$: è‡ªç”±åº¦ï¼ˆtemperature, pressure, compositionãªã©ã®ç‹¬ç«‹å¤‰æ•°ã®æ•°ï¼‰</li>
                    <li>$C$: æˆåˆ†æ•°ï¼ˆelements ã®æ•°ï¼‰</li>
                    <li>$P$: ç›¸ã®æ•°ï¼ˆphases ã®æ•°ï¼‰</li>
                </ul>
            </div>

            <p>2æˆåˆ†ç³»ï¼ˆ$C = 2$ï¼‰ã€ä¸€å®šåœ§åŠ›ï¼ˆé€šå¸¸1æ°—åœ§ï¼‰ã®å ´åˆã€åœ§åŠ›ã‚’å›ºå®šã™ã‚‹ãŸã‚è‡ªç”±åº¦ã¯1æ¸›ã£ã¦ï¼š</p>

            <div class="equation-block">
                $$F = C - P + 1 = 2 - P + 1 = 3 - P$$
            </div>

            <p><strong>ä¾‹ï¼š</strong></p>
            <ul>
                <li>å˜ç›¸é ˜åŸŸï¼ˆ$P = 1$ï¼‰: $F = 2$ â†’ æ¸©åº¦ã¨çµ„æˆã®ä¸¡æ–¹ã‚’ç‹¬ç«‹ã«å¤‰ãˆã‚‰ã‚Œã‚‹</li>
                <li>äºŒç›¸å…±å­˜é ˜åŸŸï¼ˆ$P = 2$ï¼‰: $F = 1$ â†’ æ¸©åº¦ã‚’æ±ºã‚ã‚Œã°ã€å„ç›¸ã®çµ„æˆãŒä¸€æ„ã«æ±ºã¾ã‚‹</li>
                <li>ä¸‰ç›¸å…±å­˜ç‚¹ï¼ˆ$P = 3$ï¼‰: $F = 0$ â†’ æ¸©åº¦ã‚‚çµ„æˆã‚‚å›ºå®šï¼ˆä¸å¤‰ç‚¹ï¼‰</li>
            </ul>

            <div class="mermaid">
flowchart TD
    A[Gibbsã®ç›¸å¾‹: F = C - P + 2] --> B[2æˆåˆ†ç³», åœ§åŠ›ä¸€å®š]
    B --> C[F = 3 - P]
    C --> D[å˜ç›¸é ˜åŸŸ P=1]
    C --> E[äºŒç›¸å…±å­˜ P=2]
    C --> F[ä¸‰ç›¸å…±å­˜ç‚¹ P=3]
    D --> G[F = 2: æ¸©åº¦ãƒ»çµ„æˆã‚’è‡ªç”±ã«é¸ã¹ã‚‹]
    E --> H[F = 1: æ¸©åº¦ã‚’æ±ºã‚ã‚Œã°çµ„æˆãŒæ±ºã¾ã‚‹]
    F --> I[F = 0: æ¸©åº¦ãƒ»çµ„æˆã¨ã‚‚ã«å›ºå®š]
</mermaid>

            <h3>2.1.2 çŠ¶æ…‹å›³ã®åŸºæœ¬è¦ç´ </h3>

            <p>çŠ¶æ…‹å›³ã¯ã€æ¸©åº¦ã¨çµ„æˆã‚’è»¸ã¨ã—ã€ç•°ãªã‚‹ç›¸ãŒå®‰å®šãªé ˜åŸŸã‚’ç¤ºã—ãŸå›³ã§ã™ã€‚</p>

            <ul>
                <li><strong>ç›¸å¢ƒç•Œç·šï¼ˆPhase boundaryï¼‰</strong>: ç•°ãªã‚‹ç›¸ã®å®‰å®šé ˜åŸŸã‚’åŒºåˆ‡ã‚‹ç·š</li>
                <li><strong>æ¶²ç›¸ç·šï¼ˆLiquidusï¼‰</strong>: ã“ã‚Œã‚ˆã‚Šä¸Šã§ã¯å®Œå…¨ã«æ¶²ä½“</li>
                <li><strong>å›ºç›¸ç·šï¼ˆSolidusï¼‰</strong>: ã“ã‚Œã‚ˆã‚Šä¸‹ã§ã¯å®Œå…¨ã«å›ºä½“</li>
                <li><strong>å›ºæº¶ä½“ï¼ˆSolid solutionï¼‰</strong>: 1ã¤ã®ç›¸ã«2ç¨®é¡ä»¥ä¸Šã®å…ƒç´ ãŒæº¶ã‘è¾¼ã‚“ã çŠ¶æ…‹</li>
                <li><strong>å…±æ™¶ç‚¹ï¼ˆEutectic pointï¼‰</strong>: æ¶²ç›¸ã‹ã‚‰2ã¤ã®å›ºç›¸ãŒåŒæ™‚ã«æ™¶å‡ºã™ã‚‹ç‚¹</li>
                <li><strong>å…±æç‚¹ï¼ˆEutectoid pointï¼‰</strong>: å›ºç›¸ã‹ã‚‰2ã¤ã®ç•°ãªã‚‹å›ºç›¸ãŒåŒæ™‚ã«ç”Ÿæˆã™ã‚‹ç‚¹</li>
            </ul>

            <h3>2.1.3 å›ºæº¶ä½“ã®ç¨®é¡</h3>

            <p>å›ºæº¶ä½“ã«ã¯ã€åŸå­ã®é…ç½®æ§˜å¼ã«ã‚ˆã‚Š2ç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚</p>

            <ul>
                <li><strong>ç½®æ›å‹å›ºæº¶ä½“ï¼ˆSubstitutional solid solutionï¼‰</strong>: æº¶è³ªåŸå­ãŒæº¶åª’åŸå­ã®æ ¼å­ç‚¹ã‚’ç½®æ›
                    <ul>
                        <li>æ¡ä»¶ï¼ˆHume-Rotheryã®æ³•å‰‡ï¼‰ï¼šåŸå­åŠå¾„ã®å·® &lt; 15%ã€çµæ™¶æ§‹é€ ãŒåŒã˜ã€é›»æ°—é™°æ€§åº¦ãŒè¿‘ã„ã€åŸå­ä¾¡ãŒè¿‘ã„</li>
                        <li>ä¾‹ï¼šCu-Niã€Au-Agã€Fe-Cr</li>
                    </ul>
                </li>
                <li><strong>ä¾µå…¥å‹å›ºæº¶ä½“ï¼ˆInterstitial solid solutionï¼‰</strong>: æº¶è³ªåŸå­ãŒæ ¼å­ã®éš™é–“ï¼ˆintersticeï¼‰ã«ä¾µå…¥
                    <ul>
                        <li>æ¡ä»¶ï¼šæº¶è³ªåŸå­ãŒå°ã•ã„ï¼ˆC, N, H, O ãªã©ï¼‰</li>
                        <li>ä¾‹ï¼šFe-Cï¼ˆé‹¼ï¼‰ã€Ti-O</li>
                    </ul>
                </li>
            </ul>

            <div class="code-example">
                <h4>ã‚³ãƒ¼ãƒ‰ä¾‹1: 2æˆåˆ†ç³»çŠ¶æ…‹å›³ã®åŸºæœ¬æ§‹é€ ã‚’å¯è¦–åŒ–</h4>
                <pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

def plot_simple_phase_diagram():
    """
    å˜ç´”ãª2æˆåˆ†ç³»çŠ¶æ…‹å›³ï¼ˆå…±æ™¶å‹ï¼‰ã‚’æç”»

    ã“ã®ä¾‹ã§ã¯ã€ç†æƒ³åŒ–ã•ã‚ŒãŸå…±æ™¶å‹çŠ¶æ…‹å›³ã‚’ç¤ºã—ã¾ã™ã€‚
    å®Ÿéš›ã®çŠ¶æ…‹å›³ã¯å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‚„ç†±åŠ›å­¦è¨ˆç®—ã§æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚
    """
    # çµ„æˆç¯„å›²ï¼ˆå…ƒç´ Bã®è³ªé‡%ï¼‰
    composition_B = np.linspace(0, 100, 300)

    # æ¶²ç›¸ç·šï¼ˆLiquidusï¼‰ã®å®šç¾©ï¼ˆç°¡ç•¥åŒ–ã—ãŸå½¢çŠ¶ï¼‰
    T_melt_A = 1000  # å…ƒç´ Aã®èç‚¹ (Â°C)
    T_melt_B = 900   # å…ƒç´ Bã®èç‚¹ (Â°C)
    T_eutectic = 700  # å…±æ™¶æ¸©åº¦ (Â°C)
    C_eutectic = 60   # å…±æ™¶çµ„æˆ (è³ªé‡% B)

    # æ¶²ç›¸ç·šã®è¨ˆç®—ï¼ˆæ”¾ç‰©ç·šè¿‘ä¼¼ï¼‰
    liquidus = np.where(
        composition_B <= C_eutectic,
        T_melt_A - (T_melt_A - T_eutectic) * (composition_B / C_eutectic)**1.5,
        T_melt_B - (T_melt_B - T_eutectic) * ((100 - composition_B) / (100 - C_eutectic))**1.5
    )

    # å›ºç›¸ç·šï¼ˆSolidusï¼‰ã®å®šç¾©ï¼ˆç°¡ç•¥åŒ–ï¼‰
    # Î±ç›¸ã®å›ºæº¶é™ã¨Î²ç›¸ã®å›ºæº¶é™
    C_alpha_max = 20   # Î±ç›¸ã®æœ€å¤§å›ºæº¶åº¦ (è³ªé‡% B)
    C_beta_min = 85    # Î²ç›¸ã®æœ€å°å›ºæº¶åº¦ (è³ªé‡% B)

    solidus_alpha = T_eutectic * np.ones_like(composition_B)
    solidus_beta = T_eutectic * np.ones_like(composition_B)

    # å›ºæº¶é™ã®æ¸©åº¦ä¾å­˜æ€§ï¼ˆç°¡ç•¥åŒ–ï¼‰
    for i, c in enumerate(composition_B):
        if c <= C_alpha_max:
            solidus_alpha[i] = T_eutectic + (T_melt_A - T_eutectic) * (1 - c / C_alpha_max)**2
        if c >= C_beta_min:
            solidus_beta[i] = T_eutectic + (T_melt_B - T_eutectic) * (1 - (100 - c) / (100 - C_beta_min))**2

    # ãƒ—ãƒ­ãƒƒãƒˆ
    fig, ax = plt.subplots(figsize=(12, 8))

    # æ¶²ç›¸ç·š
    ax.plot(composition_B, liquidus, 'r-', linewidth=2.5, label='æ¶²ç›¸ç·š (Liquidus)')

    # å›ºç›¸ç·š
    ax.plot(composition_B[:len(composition_B)//3], solidus_alpha[:len(composition_B)//3],
            'b-', linewidth=2.5, label='å›ºç›¸ç·š (Solidus, Î±ç›¸)')
    ax.plot(composition_B[2*len(composition_B)//3:], solidus_beta[2*len(composition_B)//3:],
            'g-', linewidth=2.5, label='å›ºç›¸ç·š (Solidus, Î²ç›¸)')

    # å…±æ™¶æ¸©åº¦ã®æ°´å¹³ç·š
    ax.axhline(T_eutectic, color='purple', linestyle='--', linewidth=2, alpha=0.7)
    ax.text(50, T_eutectic - 30, f'å…±æ™¶æ¸©åº¦ ({T_eutectic}Â°C)',
            fontsize=11, ha='center', bbox=dict(boxstyle='round', facecolor='wheat', alpha=0.8))

    # å…±æ™¶ç‚¹ã®ãƒãƒ¼ã‚«ãƒ¼
    ax.plot(C_eutectic, T_eutectic, 'ko', markersize=12, label='å…±æ™¶ç‚¹')

    # é ˜åŸŸã®ãƒ©ãƒ™ãƒ«
    ax.text(10, 950, 'æ¶²ç›¸ (L)', fontsize=13, fontweight='bold', color='red')
    ax.text(10, 800, 'Î±å›ºæº¶ä½“', fontsize=12, fontweight='bold', color='blue')
    ax.text(50, 650, 'Î± + Î²', fontsize=12, fontweight='bold', color='purple')
    ax.text(90, 800, 'Î²å›ºæº¶ä½“', fontsize=12, fontweight='bold', color='green')
    ax.text(50, 850, 'L + Î±', fontsize=11, fontweight='bold', color='orange', alpha=0.7)
    ax.text(75, 850, 'L + Î²', fontsize=11, fontweight='bold', color='orange', alpha=0.7)

    # è»¸è¨­å®š
    ax.set_xlabel('çµ„æˆ (è³ªé‡% B)', fontsize=13, fontweight='bold')
    ax.set_ylabel('æ¸©åº¦ (Â°C)', fontsize=13, fontweight='bold')
    ax.set_title('2æˆåˆ†ç³»çŠ¶æ…‹å›³ï¼ˆå…±æ™¶å‹ï¼‰ã®åŸºæœ¬æ§‹é€ ', fontsize=15, fontweight='bold', pad=15)
    ax.set_xlim(0, 100)
    ax.set_ylim(600, 1100)
    ax.grid(True, alpha=0.3, linestyle='--')
    ax.legend(fontsize=11, loc='upper right')

    plt.tight_layout()
    plt.savefig('simple_phase_diagram.png', dpi=300, bbox_inches='tight')
    plt.show()

    print("=" * 70)
    print("2æˆåˆ†ç³»çŠ¶æ…‹å›³ã®åŸºæœ¬è¦ç´ ")
    print("=" * 70)
    print("\nã€ä¸»è¦ãªç‰¹å¾´ã€‘")
    print(f"  å…ƒç´ Aã®èç‚¹:    {T_melt_A}Â°C")
    print(f"  å…ƒç´ Bã®èç‚¹:    {T_melt_B}Â°C")
    print(f"  å…±æ™¶æ¸©åº¦:        {T_eutectic}Â°C")
    print(f"  å…±æ™¶çµ„æˆ:        {C_eutectic} è³ªé‡% B")
    print("\nã€ç›¸é ˜åŸŸã€‘")
    print("  L:        æ¶²ç›¸")
    print("  Î±:        Aå…ƒç´ ãŒä¸»ä½“ã®å›ºæº¶ä½“")
    print("  Î²:        Bå…ƒç´ ãŒä¸»ä½“ã®å›ºæº¶ä½“")
    print("  L + Î±:    æ¶²ç›¸ã¨Î±ç›¸ã®äºŒç›¸å…±å­˜")
    print("  L + Î²:    æ¶²ç›¸ã¨Î²ç›¸ã®äºŒç›¸å…±å­˜")
    print("  Î± + Î²:    Î±ç›¸ã¨Î²ç›¸ã®äºŒç›¸å…±å­˜")
    print("\nã€Gibbsã®ç›¸å¾‹ã«ã‚ˆã‚‹è‡ªç”±åº¦ã€‘")
    print("  å˜ç›¸é ˜åŸŸ (L, Î±, Î²):     F = 2 (æ¸©åº¦ã¨çµ„æˆã‚’è‡ªç”±ã«é¸ã¹ã‚‹)")
    print("  äºŒç›¸å…±å­˜é ˜åŸŸ:           F = 1 (æ¸©åº¦ã‚’æ±ºã‚ã‚‹ã¨çµ„æˆãŒæ±ºã¾ã‚‹)")
    print("  å…±æ™¶ç‚¹:                 F = 0 (æ¸©åº¦ãƒ»çµ„æˆã¨ã‚‚ã«å›ºå®š)")
    print("=" * 70)

    print("\nâœ“ ã‚°ãƒ©ãƒ•ã‚’ 'simple_phase_diagram.png' ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸ")

# å®Ÿè¡Œ
plot_simple_phase_diagram()
</code></pre>
            </div>
        </section>

        <section class="section">
            <h2>2.2 Fe-CçŠ¶æ…‹å›³ã¨é‹¼ã®çµ„ç¹”</h2>

            <p>é‰„-ç‚­ç´ ï¼ˆFe-Cï¼‰çŠ¶æ…‹å›³ã¯ã€ææ–™ç§‘å­¦ã«ãŠã„ã¦æœ€ã‚‚é‡è¦ãªçŠ¶æ…‹å›³ã®1ã¤ã§ã™ã€‚é‹¼ï¼ˆsteelï¼‰ã®æ€§è³ªã¯ã€ç‚­ç´ å«æœ‰é‡ã¨ç†±å‡¦ç†ã«ã‚ˆã£ã¦å¤§ããå¤‰åŒ–ã—ã€ã“ã‚Œã¯Fe-CçŠ¶æ…‹å›³ã§èª¬æ˜ã§ãã¾ã™ã€‚</p>

            <h3>2.2.1 Fe-CçŠ¶æ…‹å›³ã®ä¸»è¦ãªç›¸</h3>

            <ul>
                <li><strong>ãƒ•ã‚§ãƒ©ã‚¤ãƒˆï¼ˆÎ±-Fe, Ferriteï¼‰</strong>: BCCæ§‹é€ ã€ç‚­ç´ ã®å›ºæº¶åº¦ãŒæ¥µã‚ã¦ä½ã„ï¼ˆæœ€å¤§0.022è³ªé‡%ã€727Â°Cï¼‰</li>
                <li><strong>ã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆï¼ˆÎ³-Fe, Austeniteï¼‰</strong>: FCCæ§‹é€ ã€ç‚­ç´ ã®å›ºæº¶åº¦ãŒé«˜ã„ï¼ˆæœ€å¤§2.14è³ªé‡%ã€1147Â°Cï¼‰</li>
                <li><strong>ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆï¼ˆFeâ‚ƒC, Cementiteï¼‰</strong>: é‡‘å±é–“åŒ–åˆç‰©ã€ç‚­ç´ å«æœ‰é‡6.67è³ªé‡%ã€ç¡¬ãã¦è„†ã„</li>
                <li><strong>ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆï¼ˆPearliteï¼‰</strong>: ãƒ•ã‚§ãƒ©ã‚¤ãƒˆã¨ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã®å±¤çŠ¶çµ„ç¹”ï¼ˆå…±æçµ„ç¹”ï¼‰</li>
                <li><strong>ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆï¼ˆMartensiteï¼‰</strong>: ã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆã®æ€¥å†·ã§ç”Ÿæˆã™ã‚‹éé£½å’Œå›ºæº¶ä½“ï¼ˆéå¹³è¡¡ç›¸ï¼‰</li>
            </ul>

            <h3>2.2.2 å…±æåå¿œã¨å…±æ™¶åå¿œ</h3>

            <div class="equation-block">
                <p><strong>å…±æåå¿œï¼ˆEutectoid reactionï¼‰</strong></p>
                <p>727Â°Cã€0.76è³ªé‡% Cã®å…±æç‚¹ã§èµ·ã“ã‚‹åå¿œï¼š</p>
                $$\gamma \text{ï¼ˆã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆï¼‰} \rightarrow \alpha \text{ï¼ˆãƒ•ã‚§ãƒ©ã‚¤ãƒˆï¼‰} + \text{Fe}_3\text{C} \text{ï¼ˆã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆï¼‰}$$
                <p>ã“ã®åå¿œã§ç”Ÿæˆã™ã‚‹å±¤çŠ¶çµ„ç¹”ã‚’<strong>ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ</strong>ã¨å‘¼ã³ã¾ã™ã€‚</p>
            </div>

            <div class="equation-block">
                <p><strong>å…±æ™¶åå¿œï¼ˆEutectic reactionï¼‰</strong></p>
                <p>1147Â°Cã€4.3è³ªé‡% Cã®å…±æ™¶ç‚¹ã§èµ·ã“ã‚‹åå¿œï¼š</p>
                $$L \text{ï¼ˆæ¶²ç›¸ï¼‰} \rightarrow \gamma \text{ï¼ˆã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆï¼‰} + \text{Fe}_3\text{C} \text{ï¼ˆã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆï¼‰}$$
                <p>ã“ã®åå¿œã§ç”Ÿæˆã™ã‚‹çµ„ç¹”ã‚’<strong>ãƒ¬ãƒ‡ãƒ–ãƒ©ã‚¤ãƒˆï¼ˆLedeburiteï¼‰</strong>ã¨å‘¼ã³ã¾ã™ï¼ˆé‹³é‰„ã«å‡ºç¾ï¼‰ã€‚</p>
            </div>

            <h3>2.2.3 é‹¼ã®åˆ†é¡</h3>

            <p>ç‚­ç´ å«æœ‰é‡ã«ã‚ˆã‚Šã€é‰„-ç‚­ç´ åˆé‡‘ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ†é¡ã•ã‚Œã¾ã™ï¼š</p>

            <ul>
                <li><strong>äºœå…±æé‹¼ï¼ˆHypoeutectoid steelï¼‰</strong>: 0.022 ï½ 0.76è³ªé‡% C â†’ åˆæãƒ•ã‚§ãƒ©ã‚¤ãƒˆ + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ</li>
                <li><strong>å…±æé‹¼ï¼ˆEutectoid steelï¼‰</strong>: 0.76è³ªé‡% C â†’ å®Œå…¨ã«ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆçµ„ç¹”</li>
                <li><strong>éå…±æé‹¼ï¼ˆHypereutectoid steelï¼‰</strong>: 0.76 ï½ 2.14è³ªé‡% C â†’ åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ</li>
                <li><strong>é‹³é‰„ï¼ˆCast ironï¼‰</strong>: 2.14 ï½ 6.67è³ªé‡% C â†’ ãƒ¬ãƒ‡ãƒ–ãƒ©ã‚¤ãƒˆçµ„ç¹”</li>
            </ul>

            <div class="code-example">
                <h4>ã‚³ãƒ¼ãƒ‰ä¾‹2: Fe-CçŠ¶æ…‹å›³ã®ä½œæˆï¼ˆç°¡ç•¥ç‰ˆï¼‰</h4>
                <pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

def plot_fe_c_diagram():
    """
    Fe-CçŠ¶æ…‹å›³ï¼ˆç°¡ç•¥ç‰ˆï¼‰ã‚’æç”»

    å®Ÿéš›ã®Fe-CçŠ¶æ…‹å›³ã¯éå¸¸ã«è¤‡é›‘ã§ã™ãŒã€ã“ã“ã§ã¯ä¸»è¦ãªç‰¹å¾´ã‚’
    ç°¡ç•¥åŒ–ã—ã¦ç¤ºã—ã¾ã™ã€‚
    """
    # ä¸»è¦ãªç‚¹ã®å®šç¾©
    # æ¸©åº¦ (Â°C)
    T_alpha_max = 912    # Î±â†’Î³å¤‰æ…‹æ¸©åº¦ï¼ˆç´”é‰„ï¼‰
    T_gamma_max = 1394   # Î³â†’Î´å¤‰æ…‹æ¸©åº¦ï¼ˆç´”é‰„ï¼‰
    T_eutectoid = 727    # å…±ææ¸©åº¦
    T_eutectic = 1147    # å…±æ™¶æ¸©åº¦

    # çµ„æˆ (è³ªé‡% C)
    C_eutectoid = 0.76   # å…±æçµ„æˆ
    C_eutectic = 4.3     # å…±æ™¶çµ„æˆ
    C_max_austenite = 2.14  # Î³ç›¸ã®æœ€å¤§ç‚­ç´ å›ºæº¶åº¦
    C_max_ferrite = 0.022   # Î±ç›¸ã®æœ€å¤§ç‚­ç´ å›ºæº¶åº¦

    # ãƒ—ãƒ­ãƒƒãƒˆ
    fig, ax = plt.subplots(figsize=(14, 10))

    # å…±ææ¸©åº¦ã®æ°´å¹³ç·š
    ax.axhline(T_eutectoid, color='purple', linestyle='--', linewidth=2, alpha=0.7, label='å…±ææ¸©åº¦ (727Â°C)')

    # å…±æç‚¹
    ax.plot(C_eutectoid, T_eutectoid, 'ro', markersize=15, label=f'å…±æç‚¹ ({C_eutectoid}% C, {T_eutectoid}Â°C)')

    # å…±æ™¶ç‚¹
    ax.plot(C_eutectic, T_eutectic, 'bs', markersize=15, label=f'å…±æ™¶ç‚¹ ({C_eutectic}% C, {T_eutectic}Â°C)')

    # Î±/Î³å¢ƒç•Œï¼ˆç°¡ç•¥ç‰ˆï¼‰
    C_alpha_gamma = np.linspace(0, C_max_ferrite, 50)
    T_alpha_gamma = T_alpha_max + (T_eutectoid - T_alpha_max) * (C_alpha_gamma / C_max_ferrite)**0.5
    ax.plot(C_alpha_gamma, T_alpha_gamma, 'b-', linewidth=2.5, label='Î±/Î³å¢ƒç•Œ')

    # Î³ç›¸é ˜åŸŸã®å³å´å¢ƒç•Œï¼ˆÎ³/Î³+Feâ‚ƒCï¼‰
    C_gamma_right = np.linspace(C_eutectoid, C_max_austenite, 50)
    T_gamma_right = T_eutectoid + (T_eutectic - T_eutectoid) * (C_gamma_right - C_eutectoid) / (C_max_austenite - C_eutectoid)
    ax.plot(C_gamma_right, T_gamma_right, 'g-', linewidth=2.5, label='Î³/Î³+Feâ‚ƒCå¢ƒç•Œ')

    # æ¶²ç›¸ç·šï¼ˆç°¡ç•¥ç‰ˆï¼‰
    C_liquidus = np.linspace(0, C_eutectic, 100)
    T_liquidus = 1538 - 200 * C_liquidus  # ç°¡ç•¥åŒ–ã—ãŸç›´ç·šè¿‘ä¼¼
    ax.plot(C_liquidus, T_liquidus, 'r-', linewidth=2.5, label='æ¶²ç›¸ç·š')

    # ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã®å‚ç›´ç·š
    ax.axvline(6.67, color='black', linestyle='-', linewidth=2, alpha=0.5, label='ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ (Feâ‚ƒC)')

    # é ˜åŸŸã®ãƒ©ãƒ™ãƒ«
    ax.text(0.1, 1200, 'Î³\n(ã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆ)', fontsize=14, fontweight='bold', ha='center', color='darkgreen')
    ax.text(0.3, 600, 'Î± + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ', fontsize=12, fontweight='bold', ha='center', color='blue')
    ax.text(1.5, 600, 'ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ\n+ Feâ‚ƒC', fontsize=12, fontweight='bold', ha='center', color='purple')
    ax.text(C_eutectoid, 820, 'ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ', fontsize=11, fontweight='bold', ha='center',
            bbox=dict(boxstyle='round', facecolor='yellow', alpha=0.7))

    # é‹¼ã®åˆ†é¡é ˜åŸŸã‚’ç¤ºã™
    ax.axvspan(0, C_eutectoid, alpha=0.15, color='blue', label='äºœå…±æé‹¼')
    ax.axvspan(C_eutectoid, C_max_austenite, alpha=0.15, color='red', label='éå…±æé‹¼')
    ax.axvspan(C_max_austenite, 6.67, alpha=0.15, color='gray', label='é‹³é‰„')

    # è»¸è¨­å®š
    ax.set_xlabel('ç‚­ç´ å«æœ‰é‡ (è³ªé‡% C)', fontsize=14, fontweight='bold')
    ax.set_ylabel('æ¸©åº¦ (Â°C)', fontsize=14, fontweight='bold')
    ax.set_title('Fe-CçŠ¶æ…‹å›³ï¼ˆç°¡ç•¥ç‰ˆï¼‰', fontsize=16, fontweight='bold', pad=20)
    ax.set_xlim(0, 7)
    ax.set_ylim(500, 1600)
    ax.grid(True, alpha=0.3, linestyle='--')
    ax.legend(fontsize=10, loc='upper right')

    # é‡è¦ãªçµ„æˆä½ç½®ã«ç¸¦ç·š
    ax.axvline(C_eutectoid, color='purple', linestyle=':', linewidth=1.5, alpha=0.5)
    ax.axvline(C_max_austenite, color='green', linestyle=':', linewidth=1.5, alpha=0.5)

    plt.tight_layout()
    plt.savefig('fe_c_phase_diagram_simplified.png', dpi=300, bbox_inches='tight')
    plt.show()

    # æƒ…å ±å‡ºåŠ›
    print("=" * 80)
    print("Fe-CçŠ¶æ…‹å›³ã®ä¸»è¦ãªç‚¹")
    print("=" * 80)
    print(f"\nå…±æç‚¹:       {C_eutectoid}è³ªé‡% C, {T_eutectoid}Â°C")
    print(f"  åå¿œ: Î³ â†’ Î± + Feâ‚ƒC (ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆç”Ÿæˆ)")
    print(f"\nå…±æ™¶ç‚¹:       {C_eutectic}è³ªé‡% C, {T_eutectic}Â°C")
    print(f"  åå¿œ: L â†’ Î³ + Feâ‚ƒC (ãƒ¬ãƒ‡ãƒ–ãƒ©ã‚¤ãƒˆç”Ÿæˆ)")
    print(f"\nÎ±ç›¸ã®æœ€å¤§ç‚­ç´ å›ºæº¶åº¦: {C_max_ferrite}è³ªé‡% C ({T_eutectoid}Â°C)")
    print(f"Î³ç›¸ã®æœ€å¤§ç‚­ç´ å›ºæº¶åº¦: {C_max_austenite}è³ªé‡% C ({T_eutectic}Â°C)")
    print("\nã€é‹¼ã®åˆ†é¡ã€‘")
    print(f"  äºœå…±æé‹¼:     0 ï½ {C_eutectoid}è³ªé‡% C")
    print(f"  å…±æé‹¼:       {C_eutectoid}è³ªé‡% C")
    print(f"  éå…±æé‹¼:     {C_eutectoid} ï½ {C_max_austenite}è³ªé‡% C")
    print(f"  é‹³é‰„:         {C_max_austenite} ï½ 6.67è³ªé‡% C")
    print("=" * 80)

    print("\nâœ“ ã‚°ãƒ©ãƒ•ã‚’ 'fe_c_phase_diagram_simplified.png' ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸ")

# å®Ÿè¡Œ
plot_fe_c_diagram()
</code></pre>
            </div>

            <div class="code-example">
                <h4>ã‚³ãƒ¼ãƒ‰ä¾‹3: ã¦ã“ã®æ³•å‰‡ã«ã‚ˆã‚‹ç›¸åˆ†ç‡è¨ˆç®—</h4>
                <pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

def lever_rule_calculation(C_total, C_alpha, C_beta, T):
    """
    ã¦ã“ã®æ³•å‰‡ï¼ˆLever ruleï¼‰ã§å„ç›¸ã®è³ªé‡åˆ†ç‡ã‚’è¨ˆç®—

    Parameters:
    -----------
    C_total : float
        å…¨ä½“ã®çµ„æˆ (è³ªé‡% B)
    C_alpha : float
        Î±ç›¸ã®çµ„æˆ (è³ªé‡% B)
    C_beta : float
        Î²ç›¸ã®çµ„æˆ (è³ªé‡% B)
    T : float
        æ¸©åº¦ (Â°C)

    Returns:
    --------
    f_alpha : float
        Î±ç›¸ã®è³ªé‡åˆ†ç‡
    f_beta : float
        Î²ç›¸ã®è³ªé‡åˆ†ç‡
    """
    # ã¦ã“ã®æ³•å‰‡
    # f_Î± = (C_Î² - C_total) / (C_Î² - C_Î±)
    # f_Î² = (C_total - C_Î±) / (C_Î² - C_Î±)

    if C_alpha == C_beta:
        # å˜ç›¸é ˜åŸŸã®å ´åˆ
        if abs(C_total - C_alpha) < 1e-6:
            return 1.0, 0.0
        else:
            raise ValueError("çµ„æˆãŒç›¸å¢ƒç•Œå¤–ã§ã™")

    f_alpha = (C_beta - C_total) / (C_beta - C_alpha)
    f_beta = (C_total - C_alpha) / (C_beta - C_alpha)

    # åˆ†ç‡ã¯0ï½1ã®ç¯„å›²
    f_alpha = np.clip(f_alpha, 0, 1)
    f_beta = np.clip(f_beta, 0, 1)

    return f_alpha, f_beta

# ä¾‹é¡Œï¼šFe-0.4% Cé‹¼ã‚’800Â°Cã‹ã‚‰å®¤æ¸©ã¾ã§å†·å´
print("=" * 80)
print("ã¦ã“ã®æ³•å‰‡ã«ã‚ˆã‚‹ç›¸åˆ†ç‡è¨ˆç®—ã®ä¾‹é¡Œ")
print("=" * 80)
print("\nã€å•é¡Œè¨­å®šã€‘")
print("Fe-0.4è³ªé‡% Cé‹¼ï¼ˆäºœå…±æé‹¼ï¼‰ã‚’727Â°Cç›´ä¸‹ã¾ã§å†·å´ã—ãŸã¨ãã€")
print("ãƒ•ã‚§ãƒ©ã‚¤ãƒˆã¨ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆã®è³ªé‡åˆ†ç‡ã‚’è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚")

# ä¸ãˆã‚‰ã‚ŒãŸå€¤
C_steel = 0.4        # é‹¼ã®ç‚­ç´ å«æœ‰é‡ (è³ªé‡% C)
C_ferrite = 0.022    # ãƒ•ã‚§ãƒ©ã‚¤ãƒˆã®ç‚­ç´ å«æœ‰é‡ (è³ªé‡% C)
C_eutectoid = 0.76   # å…±æçµ„æˆï¼ˆãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆï¼‰ (è³ªé‡% C)
T = 727              # æ¸©åº¦ (Â°C)

# ã¦ã“ã®æ³•å‰‡ã§è¨ˆç®—
f_ferrite, f_pearlite = lever_rule_calculation(C_steel, C_ferrite, C_eutectoid, T)

print(f"\nã€ä¸ãˆã‚‰ã‚ŒãŸå€¤ã€‘")
print(f"  é‹¼ã®çµ„æˆ:           {C_steel}è³ªé‡% C")
print(f"  ãƒ•ã‚§ãƒ©ã‚¤ãƒˆã®çµ„æˆ:   {C_ferrite}è³ªé‡% C")
print(f"  ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆã®çµ„æˆ:   {C_eutectoid}è³ªé‡% Cï¼ˆå…±æçµ„æˆï¼‰")
print(f"  æ¸©åº¦:               {T}Â°Cï¼ˆå…±ææ¸©åº¦ç›´ä¸‹ï¼‰")

print(f"\nã€ã¦ã“ã®æ³•å‰‡ã®é©ç”¨ã€‘")
print(f"  f_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ = (C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ - C_é‹¼) / (C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ - C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ)")
print(f"               = ({C_eutectoid} - {C_steel}) / ({C_eutectoid} - {C_ferrite})")
print(f"               = {f_ferrite:.4f} = {f_ferrite * 100:.2f}%")
print(f"  ")
print(f"  f_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ = (C_é‹¼ - C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ) / (C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ - C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ)")
print(f"               = ({C_steel} - {C_ferrite}) / ({C_eutectoid} - {C_ferrite})")
print(f"               = {f_pearlite:.4f} = {f_pearlite * 100:.2f}%")

print(f"\nã€æ¤œç®—ã€‘")
print(f"  f_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ + f_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ = {f_ferrite + f_pearlite:.4f} âœ“")

# å¯è¦–åŒ–
fig, ax = plt.subplots(figsize=(12, 6))

# çµ„æˆè»¸
compositions = [C_ferrite, C_steel, C_eutectoid]
labels = ['ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ\n(Î±)', 'é‹¼ã®çµ„æˆ\n(0.4% C)', 'ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ\n(å…±æçµ„æˆ)']
colors = ['blue', 'red', 'purple']

for c, label, color in zip(compositions, labels, colors):
    ax.axvline(c, color=color, linestyle='--', linewidth=2, alpha=0.7)
    ax.text(c, 0.9, label, ha='center', fontsize=11, fontweight='bold',
            bbox=dict(boxstyle='round', facecolor=color, alpha=0.3))

# ã¦ã“ã®æ³•å‰‡ã®å¯è¦–åŒ–
ax.plot([C_ferrite, C_eutectoid], [0.5, 0.5], 'k-', linewidth=3, label='ã¦ã“')
ax.plot(C_steel, 0.5, 'ro', markersize=15, label='æ”¯ç‚¹ï¼ˆé‹¼ã®çµ„æˆï¼‰')

# è·é›¢ã®è¡¨ç¤º
ax.annotate('', xy=(C_ferrite, 0.35), xytext=(C_steel, 0.35),
            arrowprops=dict(arrowstyle='<->', color='blue', lw=2))
ax.text((C_ferrite + C_steel) / 2, 0.3, f'{C_steel - C_ferrite:.3f}%',
        ha='center', fontsize=10, color='blue', fontweight='bold')

ax.annotate('', xy=(C_steel, 0.35), xytext=(C_eutectoid, 0.35),
            arrowprops=dict(arrowstyle='<->', color='purple', lw=2))
ax.text((C_steel + C_eutectoid) / 2, 0.3, f'{C_eutectoid - C_steel:.3f}%',
        ha='center', fontsize=10, color='purple', fontweight='bold')

# è³ªé‡åˆ†ç‡ã®è¡¨ç¤º
ax.text(C_ferrite - 0.1, 0.7, f'è³ªé‡åˆ†ç‡\n{f_ferrite * 100:.1f}%',
        ha='center', fontsize=12, fontweight='bold',
        bbox=dict(boxstyle='round', facecolor='lightblue', alpha=0.8))
ax.text(C_eutectoid + 0.1, 0.7, f'è³ªé‡åˆ†ç‡\n{f_pearlite * 100:.1f}%',
        ha='center', fontsize=12, fontweight='bold',
        bbox=dict(boxstyle='round', facecolor='lightcoral', alpha=0.8))

ax.set_xlabel('ç‚­ç´ å«æœ‰é‡ (è³ªé‡% C)', fontsize=13, fontweight='bold')
ax.set_ylabel('', fontsize=13)
ax.set_title('ã¦ã“ã®æ³•å‰‡ã«ã‚ˆã‚‹ç›¸åˆ†ç‡è¨ˆç®—ï¼ˆFe-0.4% Cé‹¼ï¼‰', fontsize=15, fontweight='bold', pad=15)
ax.set_xlim(0, 1.0)
ax.set_ylim(0, 1)
ax.set_yticks([])
ax.legend(fontsize=11, loc='upper left')
ax.grid(axis='x', alpha=0.3)

plt.tight_layout()
plt.savefig('lever_rule_example.png', dpi=300, bbox_inches='tight')
plt.show()

print("\n" + "=" * 80)
print("ã€çµè«–ã€‘")
print("=" * 80)
print(f"Fe-0.4è³ªé‡% Cé‹¼ã‚’å…±ææ¸©åº¦ç›´ä¸‹ã¾ã§å†·å´ã™ã‚‹ã¨ã€")
print(f"  ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ:  {f_ferrite * 100:.1f}è³ªé‡%")
print(f"  ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ:  {f_pearlite * 100:.1f}è³ªé‡%")
print(f"ã®çµ„ç¹”ã¨ãªã‚Šã¾ã™ã€‚")
print("\nã“ã‚Œã¯å…¸å‹çš„ãªäºœå…±æé‹¼ã®çµ„ç¹”ã§ã‚ã‚Šã€")
print("åˆæãƒ•ã‚§ãƒ©ã‚¤ãƒˆï¼ˆç™½è‰²ã€è»Ÿã‚‰ã‹ã„ï¼‰ã¨ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆï¼ˆå±¤çŠ¶çµ„ç¹”ï¼‰ã‹ã‚‰")
print("æ§‹æˆã•ã‚Œã¾ã™ã€‚ç‚­ç´ å«æœ‰é‡ãŒå¢—ãˆã‚‹ã»ã©ã€ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆåˆ†ç‡ãŒå¢—åŠ ã—ã€")
print("å¼·åº¦ãƒ»ç¡¬åº¦ãŒä¸Šæ˜‡ã—ã¾ã™ã€‚")
print("=" * 80)

print("\nâœ“ ã‚°ãƒ©ãƒ•ã‚’ 'lever_rule_example.png' ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸ")
</code></pre>
            </div>
        </section>

        <section class="section">
            <h2>2.3 ç›¸å¤‰æ…‹ã®ç†±åŠ›å­¦</h2>

            <p>ç›¸å¤‰æ…‹ï¼ˆphase transformationï¼‰ã¯ã€æ¸©åº¦ã‚„åœ§åŠ›ã®å¤‰åŒ–ã«ã‚ˆã‚Šã€ã‚ã‚‹ç›¸ã‹ã‚‰åˆ¥ã®ç›¸ã¸ã¨å¤‰åŒ–ã™ã‚‹ç¾è±¡ã§ã™ã€‚ç›¸å¤‰æ…‹ã‚’ç†è§£ã™ã‚‹ã«ã¯ã€Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®æ¦‚å¿µãŒé‡è¦ã§ã™ã€‚</p>

            <h3>2.3.1 Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼</h3>

            <div class="equation-block">
                <p><strong>Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å®šç¾©ï¼š</strong></p>
                $$G = H - TS$$
                <p>ã“ã“ã§ã€$G$: Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã€$H$: ã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼ã€$T$: æ¸©åº¦ã€$S$: ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼</p>
            </div>

            <p>å¹³è¡¡çŠ¶æ…‹ã§ã¯ã€ç³»ã®Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæœ€å°ã«ãªã‚Šã¾ã™ã€‚æ¸©åº¦ãŒå¤‰åŒ–ã™ã‚‹ã¨ã€æœ€ã‚‚Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä½ã„ç›¸ãŒå®‰å®šç›¸ã¨ãªã‚Šã€ç›¸å¤‰æ…‹ãŒèµ·ã“ã‚Šã¾ã™ã€‚</p>

            <h3>2.3.2 ç›¸å¤‰æ…‹ã®é§†å‹•åŠ›</h3>

            <p>ç›¸å¤‰æ…‹ãŒèµ·ã“ã‚‹ãŸã‚ã®é§†å‹•åŠ›ã¯ã€2ã¤ã®ç›¸ã®Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·®ã§ã™ã€‚</p>

            <div class="equation-block">
                $$\Delta G = G_{\beta} - G_{\alpha}$$
                <p>$\Delta G < 0$ ã®ã¨ãã€Î±ç›¸ã‹ã‚‰Î²ç›¸ã¸ã®å¤‰æ…‹ãŒç†±åŠ›å­¦çš„ã«æœ‰åˆ©ã§ã™ã€‚</p>
            </div>

            <div class="code-example">
                <h4>ã‚³ãƒ¼ãƒ‰ä¾‹4: Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ç›¸å®‰å®šæ€§ã®å¯è¦–åŒ–</h4>
                <pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

def gibbs_energy_phases(T):
    """
    2ã¤ã®ç›¸ï¼ˆÎ±ã¨Î²ï¼‰ã®Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ¸©åº¦ã®é–¢æ•°ã¨ã—ã¦è¨ˆç®—

    ç°¡ç•¥åŒ–ã—ãŸãƒ¢ãƒ‡ãƒ«:
    G_Î± = H_Î± - T * S_Î±
    G_Î² = H_Î² - T * S_Î²

    ã“ã“ã§ã¯ã€Î²ç›¸ãŒã‚ˆã‚Šé«˜ã„ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã‚’æŒã¤ã¨ä»®å®š
    """
    # ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆä»»æ„å˜ä½ï¼‰
    H_alpha = 1000  # Î±ç›¸ã®ã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼
    H_beta = 1200   # Î²ç›¸ã®ã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼ï¼ˆÎ±ç›¸ã‚ˆã‚Šé«˜ã„ï¼‰
    S_alpha = 5     # Î±ç›¸ã®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼
    S_beta = 8      # Î²ç›¸ã®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ï¼ˆÎ±ç›¸ã‚ˆã‚Šé«˜ã„ï¼‰

    G_alpha = H_alpha - T * S_alpha
    G_beta = H_beta - T * S_beta

    return G_alpha, G_beta

# æ¸©åº¦ç¯„å›²
temperatures = np.linspace(0, 500, 1000)

# å„æ¸©åº¦ã§ã®Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è¨ˆç®—
G_alpha_values = []
G_beta_values = []

for T in temperatures:
    G_alpha, G_beta = gibbs_energy_phases(T)
    G_alpha_values.append(G_alpha)
    G_beta_values.append(G_beta)

G_alpha_values = np.array(G_alpha_values)
G_beta_values = np.array(G_beta_values)

# å¹³è¡¡æ¸©åº¦ï¼ˆG_Î± = G_Î² ã¨ãªã‚‹æ¸©åº¦ï¼‰
# H_Î± - T_eq * S_Î± = H_Î² - T_eq * S_Î²
# T_eq = (H_Î² - H_Î±) / (S_Î² - S_Î±)
H_alpha = 1000
H_beta = 1200
S_alpha = 5
S_beta = 8
T_equilibrium = (H_beta - H_alpha) / (S_beta - S_alpha)

print("=" * 70)
print("Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ç›¸å¤‰æ…‹")
print("=" * 70)
print(f"\nãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:")
print(f"  Î±ç›¸: H_Î± = {H_alpha}, S_Î± = {S_alpha}")
print(f"  Î²ç›¸: H_Î² = {H_beta}, S_Î² = {S_beta}")
print(f"\nå¹³è¡¡æ¸©åº¦ T_eq = (H_Î² - H_Î±) / (S_Î² - S_Î±)")
print(f"             = ({H_beta} - {H_alpha}) / ({S_beta} - {S_alpha})")
print(f"             = {T_equilibrium:.2f}")
print(f"\nç›¸ã®å®‰å®šæ€§:")
print(f"  T < {T_equilibrium:.2f}: G_Î± < G_Î² â†’ Î±ç›¸ãŒå®‰å®š")
print(f"  T = {T_equilibrium:.2f}: G_Î± = G_Î² â†’ å¹³è¡¡")
print(f"  T > {T_equilibrium:.2f}: G_Î± > G_Î² â†’ Î²ç›¸ãŒå®‰å®š")
print("=" * 70)

# ãƒ—ãƒ­ãƒƒãƒˆ
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 6))

# å·¦å›³: Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®æ¸©åº¦ä¾å­˜æ€§
ax1.plot(temperatures, G_alpha_values, 'b-', linewidth=2.5, label='Î±ç›¸')
ax1.plot(temperatures, G_beta_values, 'r-', linewidth=2.5, label='Î²ç›¸')
ax1.axvline(T_equilibrium, color='green', linestyle='--', linewidth=2, label=f'å¹³è¡¡æ¸©åº¦ ({T_equilibrium:.1f})')

# å®‰å®šç›¸ã®é ˜åŸŸã‚’è‰²åˆ†ã‘
ax1.fill_between(temperatures, G_alpha_values.min(), G_alpha_values.max(),
                  where=(temperatures < T_equilibrium),
                  alpha=0.2, color='blue', label='Î±ç›¸å®‰å®šé ˜åŸŸ')
ax1.fill_between(temperatures, G_alpha_values.min(), G_alpha_values.max(),
                  where=(temperatures >= T_equilibrium),
                  alpha=0.2, color='red', label='Î²ç›¸å®‰å®šé ˜åŸŸ')

# å¹³è¡¡ç‚¹
ax1.plot(T_equilibrium, gibbs_energy_phases(T_equilibrium)[0], 'go', markersize=12)

ax1.set_xlabel('æ¸©åº¦ (K)', fontsize=13, fontweight='bold')
ax1.set_ylabel('Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ G (ä»»æ„å˜ä½)', fontsize=13, fontweight='bold')
ax1.set_title('Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®æ¸©åº¦ä¾å­˜æ€§', fontsize=14, fontweight='bold')
ax1.legend(fontsize=11)
ax1.grid(True, alpha=0.3)

# å³å›³: Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·® Î”G = G_Î² - G_Î±
delta_G = G_beta_values - G_alpha_values

ax2.plot(temperatures, delta_G, 'purple', linewidth=2.5, label='Î”G = G_Î² - G_Î±')
ax2.axhline(0, color='black', linestyle='-', linewidth=1, alpha=0.5)
ax2.axvline(T_equilibrium, color='green', linestyle='--', linewidth=2, label=f'å¹³è¡¡æ¸©åº¦ ({T_equilibrium:.1f})')

# Î”G < 0 ã¨ Î”G > 0 ã®é ˜åŸŸ
ax2.fill_between(temperatures, 0, delta_G, where=(delta_G < 0),
                  alpha=0.3, color='blue', label='Î”G < 0 (Î±â†’Î²ä¸åˆ©)')
ax2.fill_between(temperatures, 0, delta_G, where=(delta_G >= 0),
                  alpha=0.3, color='red', label='Î”G > 0 (Î±â†’Î²æœ‰åˆ©)')

ax2.set_xlabel('æ¸©åº¦ (K)', fontsize=13, fontweight='bold')
ax2.set_ylabel('Î”G = G_Î² - G_Î± (ä»»æ„å˜ä½)', fontsize=13, fontweight='bold')
ax2.set_title('ç›¸å¤‰æ…‹ã®é§†å‹•åŠ›ï¼ˆGibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·®ï¼‰', fontsize=14, fontweight='bold')
ax2.legend(fontsize=11)
ax2.grid(True, alpha=0.3)

plt.tight_layout()
plt.savefig('gibbs_energy_phase_transformation.png', dpi=300, bbox_inches='tight')
plt.show()

print("\nâœ“ ã‚°ãƒ©ãƒ•ã‚’ 'gibbs_energy_phase_transformation.png' ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸ")

print("\nã€ç‰©ç†çš„è§£é‡ˆã€‘")
print("-" * 70)
print("Î²ç›¸ã¯Î±ç›¸ã‚ˆã‚Šã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼ãŒé«˜ã„ï¼ˆH_Î² > H_Î±ï¼‰ãŸã‚ã€")
print("ä½æ¸©ã§ã¯ã‚¨ãƒãƒ«ã‚®ãƒ¼çš„ã«ä¸åˆ©ã§ã™ã€‚")
print("")
print("ã—ã‹ã—ã€Î²ç›¸ã¯ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ãŒé«˜ã„ï¼ˆS_Î² > S_Î±ï¼‰ãŸã‚ã€")
print("é«˜æ¸©ã§ã¯ -TS é …ã®å¯„ä¸ã«ã‚ˆã‚Š Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä½ä¸‹ã—ã€")
print("Î²ç›¸ãŒå®‰å®šã¨ãªã‚Šã¾ã™ã€‚")
print("")
print("ã“ã‚Œã¯ã€å›ºä½“â†’æ¶²ä½“å¤‰æ…‹ï¼ˆèè§£ï¼‰ã‚„ã€BCCâ†’FCCå¤‰æ…‹ãªã©ã®")
print("å®Ÿéš›ã®ç›¸å¤‰æ…‹ã§è¦³å¯Ÿã•ã‚Œã‚‹æŒ™å‹•ã¨ä¸€è‡´ã—ã¾ã™ã€‚")
print("-" * 70)
</code></pre>
            </div>
        </section>

        <section class="section">
            <h2>2.4 pycalphadã«ã‚ˆã‚‹çŠ¶æ…‹å›³è¨ˆç®—</h2>

            <p>å®Ÿéš›ã®ææ–™ç ”ç©¶ã§ã¯ã€<strong>CALPHADï¼ˆCALculation of PHAse Diagramsï¼‰</strong>æ³•ã‚’ç”¨ã„ã¦ã€ç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰çŠ¶æ…‹å›³ã‚’è¨ˆç®—ã—ã¾ã™ã€‚Pythonã§ã¯<code>pycalphad</code>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã“ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>

            <div class="info-box">
                <h4>pycalphadã¨ã¯ï¼Ÿ</h4>
                <p><code>pycalphad</code>ã¯ã€å¤šæˆåˆ†ç³»ã®çŠ¶æ…‹å›³è¨ˆç®—ã€ç›¸å¹³è¡¡è¨ˆç®—ã€ç†±åŠ›å­¦çš„æ€§è³ªã®è¨ˆç®—ã‚’è¡Œã†Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚å•†ç”¨ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ï¼ˆThermo-Calcã€FactSageãªã©ï¼‰ã¨åŒç­‰ã®æ©Ÿèƒ½ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã§æä¾›ã—ã¾ã™ã€‚</p>
            </div>

            <div class="code-example">
                <h4>ã‚³ãƒ¼ãƒ‰ä¾‹5: pycalphadã«ã‚ˆã‚‹Al-Cuç³»çŠ¶æ…‹å›³ã®è¨ˆç®—</h4>
                <pre><code class="language-python">"""
pycalphadã‚’ä½¿ã£ãŸAl-Cuç³»çŠ¶æ…‹å›³ã®è¨ˆç®—

æ³¨: pycalphadã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã§ã™
pip install pycalphad

ã¾ãŸã€ç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆTDBãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ãŒå¿…è¦ã§ã™
ã“ã“ã§ã¯ç°¡æ˜“çš„ãªãƒ‡ãƒ¢ã‚’ç¤ºã—ã¾ã™
"""

try:
    from pycalphad import Database, equilibrium, variables as v
    from pycalphad.plot.binary import binplot
    import matplotlib.pyplot as plt
    import numpy as np

    print("=" * 80)
    print("pycalphadã«ã‚ˆã‚‹Al-Cuç³»çŠ¶æ…‹å›³è¨ˆç®—ã®ãƒ‡ãƒ¢")
    print("=" * 80)

    # ãƒ‡ãƒ¢ç”¨ã®ç°¡æ˜“çš„ãªç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆTDBå½¢å¼æ–‡å­—åˆ—ï¼‰
    # å®Ÿéš›ã®è¨ˆç®—ã§ã¯ã€è©³ç´°ãªTDBãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™
    tdb_string = """
    ELEMENT AL FCC_A1 26.98 4540.0 28.3 !
    ELEMENT CU FCC_A1 63.546 5004.0 33.15 !

    PHASE FCC_A1  %  2 1   1 !
    CONSTITUENT FCC_A1  :AL,CU : VA :  !

    PHASE LIQUID  %  1  1.0  !
    CONSTITUENT LIQUID  :AL,CU :  !

    FUNCTION GHSERAL  298.15
       -7976.15+137.093038*T-24.3671976*T*LN(T)
       -1.884662E-3*T**2-0.877664E-6*T**3+74092*T**(-1);  700.00  Y
       -11276.24+223.048446*T-38.5844296*T*LN(T)
       +18.531982E-3*T**2-5.764227E-6*T**3+74092*T**(-1);  933.47  Y
       -11278.378+188.684153*T-31.748192*T*LN(T)
       -1.234264E28*T**(-9);  2900.00  N !

    FUNCTION GHSERCU  298.15
       -7770.458+130.485235*T-24.112392*T*LN(T)
       -2.65684E-3*T**2+0.129223E-6*T**3+52478*T**(-1);  1357.77  Y
       -13542.026+183.803828*T-31.38*T*LN(T)
       +3.64167E29*T**(-9);  3200.00  N !

    PARAMETER G(FCC_A1,AL:VA;0)  298.15  +GHSERAL; 6000 N !
    PARAMETER G(FCC_A1,CU:VA;0)  298.15  +GHSERCU; 6000 N !
    PARAMETER G(FCC_A1,AL,CU:VA;0)  298.15  -53520+7.2*T; 6000 N !

    PARAMETER G(LIQUID,AL;0)  298.15  +11005.553-11.840873*T+GHSERAL+7.934E-20*T**7; 933.47 Y
       +10481.974-11.252014*T+GHSERAL+1.234264E28*T**(-9); 6000 N !
    PARAMETER G(LIQUID,CU;0)  298.15  +12964.735-9.511904*T+GHSERCU-5.8489E-21*T**7; 1357.77 Y
       +13495.481-9.922344*T+GHSERCU-3.64167E29*T**(-9); 3200 N !
    PARAMETER G(LIQUID,AL,CU;0)  298.15  -66220+7.5*T; 6000 N !
    """

    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã¿
    db = Database(tdb_string)

    # è¨ˆç®—æ¡ä»¶
    components = ['AL', 'CU', 'VA']
    phases = ['FCC_A1', 'LIQUID']

    # æ¸©åº¦ç¯„å›²
    T_range = (500, 1500, 10)  # 500-1500K, 10Kåˆ»ã¿

    # çµ„æˆç¯„å›²ï¼ˆCUã®ãƒ¢ãƒ«åˆ†ç‡ï¼‰
    X_range = (0, 1, 0.01)  # 0-1, 0.01åˆ»ã¿

    print("\nè¨ˆç®—æ¡ä»¶:")
    print(f"  æˆåˆ†: {components}")
    print(f"  ç›¸: {phases}")
    print(f"  æ¸©åº¦ç¯„å›²: {T_range[0]}-{T_range[1]} K")
    print(f"  çµ„æˆç¯„å›²: X(CU) = {X_range[0]}-{X_range[1]}")
    print("\nè¨ˆç®—ã‚’é–‹å§‹ã—ã¾ã™ï¼ˆæ•°åˆ†ã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼‰...")

    # å¹³è¡¡è¨ˆç®—
    # æ³¨: å®Ÿéš›ã®è¨ˆç®—ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™
    eq_result = equilibrium(db, components, phases,
                             {v.X('CU'): X_range, v.T: T_range, v.P: 101325})

    print("âœ“ è¨ˆç®—ãŒå®Œäº†ã—ã¾ã—ãŸ")

    # çŠ¶æ…‹å›³ã‚’ãƒ—ãƒ­ãƒƒãƒˆ
    fig = plt.figure(figsize=(12, 8))
    ax = fig.gca()

    # pycalphadã®å†…è”µãƒ—ãƒ­ãƒƒãƒˆé–¢æ•°ã‚’ä½¿ç”¨
    binplot(db, components, phases, {v.X('CU'): X_range, v.T: T_range, v.P: 101325},
            eq_result=eq_result, ax=ax)

    ax.set_xlabel('çµ„æˆ X(Cu)', fontsize=13, fontweight='bold')
    ax.set_ylabel('æ¸©åº¦ (K)', fontsize=13, fontweight='bold')
    ax.set_title('Al-Cuç³»çŠ¶æ…‹å›³ï¼ˆpycalphadã«ã‚ˆã‚‹è¨ˆç®—ï¼‰', fontsize=15, fontweight='bold', pad=15)
    ax.grid(True, alpha=0.3)

    plt.tight_layout()
    plt.savefig('al_cu_phase_diagram_pycalphad.png', dpi=300, bbox_inches='tight')
    plt.show()

    print("\nâœ“ ã‚°ãƒ©ãƒ•ã‚’ 'al_cu_phase_diagram_pycalphad.png' ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸ")

    print("\n" + "=" * 80)
    print("ã€Al-Cuç³»ã®ç‰¹å¾´ã€‘")
    print("=" * 80)
    print("Al-Cuç³»ã¯ã€ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ åˆé‡‘ï¼ˆã‚¸ãƒ¥ãƒ©ãƒ«ãƒŸãƒ³ãªã©ï¼‰ã®åŸºç¤ã¨ãªã‚‹ç³»ã§ã™ã€‚")
    print("ä¸»è¦ãªç‰¹å¾´:")
    print("  - Al-richã§ã¯FCCå›ºæº¶ä½“ï¼ˆÎ±-Alï¼‰ãŒå½¢æˆ")
    print("  - Cu-richã§ã¯FCCå›ºæº¶ä½“ï¼ˆÎ±-Cuï¼‰ãŒå½¢æˆ")
    print("  - ä¸­é–“çµ„æˆã§ã¯è¤‡æ•°ã®é‡‘å±é–“åŒ–åˆç‰©ãŒç”Ÿæˆ")
    print("  - æ™‚åŠ¹ç¡¬åŒ–å‡¦ç†ã«ã‚ˆã‚Šé«˜å¼·åº¦åŒ–ãŒå¯èƒ½ï¼ˆæå‡ºç¡¬åŒ–ï¼‰")
    print("=" * 80)

except ImportError:
    print("ã‚¨ãƒ©ãƒ¼: pycalphadãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“")
    print("ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•: pip install pycalphad")
    print("\npycalphadã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™:")
    print("  - å¤šæˆåˆ†ç³»çŠ¶æ…‹å›³ã®è¨ˆç®—")
    print("  - ç›¸å¹³è¡¡è¨ˆç®—")
    print("  - ç†±åŠ›å­¦çš„æ€§è³ªï¼ˆã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼ã€ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ãªã©ï¼‰ã®è¨ˆç®—")
    print("  - æå‡ºç›¸ã®å®‰å®šæ€§è©•ä¾¡")
    print("\nä»£æ›¿æ‰‹æ®µã¨ã—ã¦ã€æ‰‹å‹•ã§çŠ¶æ…‹å›³ã‚’æç”»ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼ˆã‚³ãƒ¼ãƒ‰ä¾‹2å‚ç…§ï¼‰")
except Exception as e:
    print(f"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
    print("pycalphadã®è¨ˆç®—ã«ã¯ç†±åŠ›å­¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆTDBï¼‰ãŒå¿…è¦ã§ã™")
    print("è©³ç´°ãªTDBãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€NISTã€GTT-Technologiesã€Thermo-Calcãªã©ã‹ã‚‰å…¥æ‰‹ã§ãã¾ã™")
</code></pre>
            </div>
        </section>

        <section class="exercise-section">
            <h3>æ¼”ç¿’å•é¡Œ</h3>

            <div class="exercise">
                <div class="exercise-header">
                    <h4>æ¼”ç¿’ 2.1</h4>
                    <span class="difficulty easy">Easy</span>
                </div>
                <p><strong>å•é¡Œï¼š</strong>2æˆåˆ†ç³»ã€ä¸€å®šåœ§åŠ›ã®çŠ¶æ…‹å›³ã«ãŠã„ã¦ã€æ¬¡ã®å ´åˆã®è‡ªç”±åº¦ $F$ ã‚’è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚</p>
                <ol>
                    <li>å˜ç›¸é ˜åŸŸï¼ˆæ¶²ç›¸ã®ã¿ï¼‰</li>
                    <li>äºŒç›¸å…±å­˜é ˜åŸŸï¼ˆæ¶²ç›¸ + Î±å›ºç›¸ï¼‰</li>
                    <li>å…±æ™¶ç‚¹ï¼ˆæ¶²ç›¸ + Î±å›ºç›¸ + Î²å›ºç›¸ï¼‰</li>
                </ol>

                <details>
                    <summary>è§£ç­”ã‚’è¡¨ç¤º</summary>
                    <div class="solution">
                        <pre><code class="language-python">print("=" * 70)
print("Gibbsã®ç›¸å¾‹ã«ã‚ˆã‚‹è‡ªç”±åº¦ã®è¨ˆç®—")
print("=" * 70)

# Gibbsã®ç›¸å¾‹: F = C - P + 2
# 2æˆåˆ†ç³»ã€ä¸€å®šåœ§åŠ›ã®å ´åˆ: F = C - P + 1 = 2 - P + 1 = 3 - P

C = 2  # æˆåˆ†æ•°
pressure_fixed = True  # åœ§åŠ›ã‚’å›ºå®š

print(f"\nGibbsã®ç›¸å¾‹: F = C - P + 2")
print(f"æˆåˆ†æ•° C = {C}")
print(f"åœ§åŠ›å›ºå®šã®å ´åˆ: F = C - P + 1 = 3 - P")

cases = [
    ("å˜ç›¸é ˜åŸŸï¼ˆæ¶²ç›¸ã®ã¿ï¼‰", 1),
    ("äºŒç›¸å…±å­˜é ˜åŸŸï¼ˆæ¶²ç›¸ + Î±å›ºç›¸ï¼‰", 2),
    ("å…±æ™¶ç‚¹ï¼ˆæ¶²ç›¸ + Î±å›ºç›¸ + Î²å›ºç›¸ï¼‰", 3)
]

print("\n" + "=" * 70)
print("ã€è¨ˆç®—çµæœã€‘")
print("=" * 70)

for i, (description, P) in enumerate(cases, 1):
    F = 3 - P
    print(f"\n({i}) {description}")
    print(f"    ç›¸ã®æ•° P = {P}")
    print(f"    è‡ªç”±åº¦ F = 3 - {P} = {F}")

    if F == 2:
        print(f"    â†’ æ¸©åº¦ã¨çµ„æˆã®ä¸¡æ–¹ã‚’ç‹¬ç«‹ã«å¤‰ãˆã‚‰ã‚Œã‚‹")
    elif F == 1:
        print(f"    â†’ æ¸©åº¦ã‚’æ±ºã‚ã‚Œã°ã€å„ç›¸ã®çµ„æˆãŒä¸€æ„ã«æ±ºã¾ã‚‹")
        print(f"       ï¼ˆã¾ãŸã¯çµ„æˆã‚’æ±ºã‚ã‚Œã°ã€æ¸©åº¦ãŒæ±ºã¾ã‚‹ï¼‰")
    elif F == 0:
        print(f"    â†’ æ¸©åº¦ã‚‚çµ„æˆã‚‚å›ºå®šï¼ˆä¸å¤‰ç‚¹ï¼‰")

print("\n" + "=" * 70)
print("ã€ç‰©ç†çš„æ„å‘³ã€‘")
print("=" * 70)
print("\nè‡ªç”±åº¦ F ã¯ã€ç³»ã®çŠ¶æ…‹ã‚’æŒ‡å®šã™ã‚‹ãŸã‚ã«å¿…è¦ãªç‹¬ç«‹å¤‰æ•°ã®æ•°ã§ã™ã€‚")
print("")
print("F = 2: å˜ç›¸é ˜åŸŸã§ã¯ã€æ¸©åº¦ã¨çµ„æˆã‚’è‡ªç”±ã«é¸ã¹ã¾ã™ã€‚")
print("       çŠ¶æ…‹å›³ä¸Šã§é¢ï¼ˆ2æ¬¡å…ƒé ˜åŸŸï¼‰ã¨ã—ã¦è¡¨ç¾ã•ã‚Œã¾ã™ã€‚")
print("")
print("F = 1: äºŒç›¸å…±å­˜é ˜åŸŸã§ã¯ã€æ¸©åº¦ã‚’æ±ºã‚ã‚‹ã¨å„ç›¸ã®çµ„æˆãŒ")
print("       ç†±åŠ›å­¦çš„ã«ä¸€æ„ã«æ±ºã¾ã‚Šã¾ã™ï¼ˆã¦ã“ã®æ³•å‰‡ã§åˆ†ç‡ã¯æ±ºã¾ã‚‹ï¼‰ã€‚")
print("       çŠ¶æ…‹å›³ä¸Šã§ç·šï¼ˆ1æ¬¡å…ƒï¼‰ã¨ã—ã¦è¡¨ç¾ã•ã‚Œã¾ã™ã€‚")
print("")
print("F = 0: ä¸‰ç›¸å…±å­˜ç‚¹ã§ã¯ã€æ¸©åº¦ã‚‚çµ„æˆã‚‚å›ºå®šã•ã‚Œã¾ã™ã€‚")
print("       çŠ¶æ…‹å›³ä¸Šã§ç‚¹ï¼ˆ0æ¬¡å…ƒï¼‰ã¨ã—ã¦è¡¨ç¾ã•ã‚Œã¾ã™ã€‚")
print("       ä¾‹: å…±æ™¶ç‚¹ã€å…±æç‚¹ã€åŒ…æ™¶ç‚¹")
print("=" * 70)

# å›³ç¤º
import matplotlib.pyplot as plt
import numpy as np

fig, ax = plt.subplots(figsize=(10, 8))

# ç°¡ç•¥åŒ–ã—ãŸçŠ¶æ…‹å›³
composition = np.linspace(0, 100, 300)
T_liquidus_1 = 1000 - 5 * composition[:150]
T_liquidus_2 = 250 + 5 * (composition[150:] - 50)
liquidus = np.concatenate([T_liquidus_1, T_liquidus_2])

ax.plot(composition, liquidus, 'r-', linewidth=3, label='æ¶²ç›¸ç·š')
ax.axhline(250, color='blue', linestyle='--', linewidth=2, label='å…±æ™¶æ¸©åº¦')

# é ˜åŸŸã®ãƒ©ãƒ™ãƒ«
ax.text(50, 800, 'F = 2\nï¼ˆå˜ç›¸é ˜åŸŸï¼‰', fontsize=14, fontweight='bold',
        ha='center', bbox=dict(boxstyle='round', facecolor='yellow', alpha=0.7))
ax.text(25, 400, 'F = 1\nï¼ˆäºŒç›¸å…±å­˜ï¼‰', fontsize=13, fontweight='bold',
        ha='center', bbox=dict(boxstyle='round', facecolor='lightblue', alpha=0.7))
ax.text(75, 400, 'F = 1\nï¼ˆäºŒç›¸å…±å­˜ï¼‰', fontsize=13, fontweight='bold',
        ha='center', bbox=dict(boxstyle='round', facecolor='lightgreen', alpha=0.7))
ax.plot(50, 250, 'ko', markersize=15, label='å…±æ™¶ç‚¹ (F=0)')

ax.set_xlabel('çµ„æˆ (è³ªé‡% B)', fontsize=13, fontweight='bold')
ax.set_ylabel('æ¸©åº¦ (Â°C)', fontsize=13, fontweight='bold')
ax.set_title('è‡ªç”±åº¦ã¨çŠ¶æ…‹å›³ã®é–¢ä¿‚', fontsize=15, fontweight='bold', pad=15)
ax.set_xlim(0, 100)
ax.set_ylim(200, 1100)
ax.legend(fontsize=12)
ax.grid(True, alpha=0.3)

plt.tight_layout()
plt.savefig('gibbs_phase_rule_degrees_of_freedom.png', dpi=300, bbox_inches='tight')
plt.show()

print("\nâœ“ ã‚°ãƒ©ãƒ•ã‚’ 'gibbs_phase_rule_degrees_of_freedom.png' ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸ")
</code></pre>
                    </div>
                </details>
            </div>

            <div class="exercise">
                <div class="exercise-header">
                    <h4>æ¼”ç¿’ 2.2</h4>
                    <span class="difficulty medium">Medium</span>
                </div>
                <p><strong>å•é¡Œï¼š</strong>Fe-0.6è³ªé‡% Cé‹¼ã‚’900Â°Cã‹ã‚‰å®¤æ¸©ã¾ã§å¾å†·ã—ã¾ã—ãŸã€‚727Â°Cç›´ä¸‹ã§ã®çµ„ç¹”ã‚’ã€ã¦ã“ã®æ³•å‰‡ã‚’ç”¨ã„ã¦è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚</p>
                <p>ä¸ãˆã‚‰ã‚ŒãŸå€¤ï¼š</p>
                <ul>
                    <li>é‹¼ã®ç‚­ç´ å«æœ‰é‡: 0.6è³ªé‡% C</li>
                    <li>ãƒ•ã‚§ãƒ©ã‚¤ãƒˆã®ç‚­ç´ å«æœ‰é‡ï¼ˆ727Â°Cï¼‰: 0.022è³ªé‡% C</li>
                    <li>å…±æçµ„æˆ: 0.76è³ªé‡% C</li>
                </ul>

                <details>
                    <summary>è§£ç­”ã‚’è¡¨ç¤º</summary>
                    <div class="solution">
                        <pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

# ä¸ãˆã‚‰ã‚ŒãŸå€¤
C_steel = 0.6        # é‹¼ã®ç‚­ç´ å«æœ‰é‡ (è³ªé‡% C)
C_ferrite = 0.022    # ãƒ•ã‚§ãƒ©ã‚¤ãƒˆã®ç‚­ç´ å«æœ‰é‡ (è³ªé‡% C)
C_pearlite = 0.76    # å…±æçµ„æˆï¼ˆãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆï¼‰ (è³ªé‡% C)
T = 727              # æ¸©åº¦ (Â°C)

print("=" * 80)
print("Fe-0.6è³ªé‡% Cé‹¼ã®çµ„ç¹”è¨ˆç®—ï¼ˆã¦ã“ã®æ³•å‰‡ï¼‰")
print("=" * 80)

print("\nã€å•é¡Œè¨­å®šã€‘")
print(f"é‹¼ã®çµ„æˆ: {C_steel}è³ªé‡% Cï¼ˆäºœå…±æé‹¼ï¼‰")
print(f"å†·å´æ¸©åº¦: 900Â°C â†’ å®¤æ¸©")
print(f"è©•ä¾¡æ¸©åº¦: {T}Â°Cç›´ä¸‹ï¼ˆå…±ææ¸©åº¦ç›´ä¸‹ï¼‰")

print("\nã€ä¸ãˆã‚‰ã‚ŒãŸå€¤ã€‘")
print(f"  C_é‹¼:           {C_steel}è³ªé‡% C")
print(f"  C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ:   {C_ferrite}è³ªé‡% C")
print(f"  C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ:   {C_pearlite}è³ªé‡% Cï¼ˆå…±æçµ„æˆï¼‰")

# ã¦ã“ã®æ³•å‰‡ã®é©ç”¨
# f_Î± = (C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ - C_é‹¼) / (C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ - C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ)
# f_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ = (C_é‹¼ - C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ) / (C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ - C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ)

f_ferrite = (C_pearlite - C_steel) / (C_pearlite - C_ferrite)
f_pearlite = (C_steel - C_ferrite) / (C_pearlite - C_ferrite)

print("\nã€ã¦ã“ã®æ³•å‰‡ã®è¨ˆç®—ã€‘")
print("\nãƒ•ã‚§ãƒ©ã‚¤ãƒˆã®è³ªé‡åˆ†ç‡:")
print(f"  f_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ = (C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ - C_é‹¼) / (C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ - C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ)")
print(f"               = ({C_pearlite} - {C_steel}) / ({C_pearlite} - {C_ferrite})")
print(f"               = {C_pearlite - C_steel:.2f} / {C_pearlite - C_ferrite:.3f}")
print(f"               = {f_ferrite:.4f}")
print(f"               = {f_ferrite * 100:.2f}%")

print("\nãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆã®è³ªé‡åˆ†ç‡:")
print(f"  f_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ = (C_é‹¼ - C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ) / (C_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ - C_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ)")
print(f"               = ({C_steel} - {C_ferrite}) / ({C_pearlite} - {C_ferrite})")
print(f"               = {C_steel - C_ferrite:.3f} / {C_pearlite - C_ferrite:.3f}")
print(f"               = {f_pearlite:.4f}")
print(f"               = {f_pearlite * 100:.2f}%")

print("\nã€æ¤œç®—ã€‘")
total = f_ferrite + f_pearlite
print(f"  f_ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ + f_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ = {f_ferrite:.4f} + {f_pearlite:.4f}")
print(f"                               = {total:.4f}")
if abs(total - 1.0) < 1e-6:
    print("  âœ“ åˆè¨ˆãŒ1.0ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª")
else:
    print(f"  âš  èª¤å·®: {total - 1.0:.6f}")

# ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆçµ„ç¹”å†…ã®ãƒ•ã‚§ãƒ©ã‚¤ãƒˆã¨ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã®æ¯”ç‡
# ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ = ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ(0.022% C) + ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ(6.67% C)
# ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆã®çµ„æˆ = 0.76% C

C_cementite = 6.67  # ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã®ç‚­ç´ å«æœ‰é‡

f_ferrite_in_pearlite = (C_cementite - C_pearlite) / (C_cementite - C_ferrite)
f_cementite_in_pearlite = (C_pearlite - C_ferrite) / (C_cementite - C_ferrite)

print("\nã€ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆçµ„ç¹”ã®è©³ç´°ã€‘")
print("ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆã¯ãƒ•ã‚§ãƒ©ã‚¤ãƒˆã¨ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã®å±¤çŠ¶çµ„ç¹”ã§ã™ã€‚")
print(f"\nãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå†…ã®ãƒ•ã‚§ãƒ©ã‚¤ãƒˆåˆ†ç‡:")
print(f"  = ({C_cementite} - {C_pearlite}) / ({C_cementite} - {C_ferrite})")
print(f"  = {f_ferrite_in_pearlite:.4f} = {f_ferrite_in_pearlite * 100:.2f}%")
print(f"\nãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå†…ã®ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆåˆ†ç‡:")
print(f"  = ({C_pearlite} - {C_ferrite}) / ({C_cementite} - {C_ferrite})")
print(f"  = {f_cementite_in_pearlite:.4f} = {f_cementite_in_pearlite * 100:.2f}%")

# é‹¼å…¨ä½“ã§ã®å„ç›¸ã®è³ªé‡åˆ†ç‡
f_ferrite_total = f_ferrite + f_pearlite * f_ferrite_in_pearlite
f_cementite_total = f_pearlite * f_cementite_in_pearlite

print("\nã€é‹¼å…¨ä½“ã§ã®å„ç›¸ã®è³ªé‡åˆ†ç‡ã€‘")
print(f"  åˆæãƒ•ã‚§ãƒ©ã‚¤ãƒˆ:              {f_ferrite * 100:.2f}%")
print(f"  ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ:                  {f_pearlite * 100:.2f}%")
print(f"    â”” ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå†…ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ:  {f_pearlite * f_ferrite_in_pearlite * 100:.2f}%")
print(f"    â”” ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ:            {f_cementite_total * 100:.2f}%")
print(f"  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€")
print(f"  å…¨ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ:                {f_ferrite_total * 100:.2f}%")
print(f"  å…¨ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ:              {f_cementite_total * 100:.2f}%")

# å¯è¦–åŒ–
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 6))

# å·¦å›³: ã¦ã“ã®æ³•å‰‡ã®å›³è§£
compositions = [C_ferrite, C_steel, C_pearlite]
labels = ['ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ\n(Î±)', 'é‹¼ã®çµ„æˆ\n(0.6% C)', 'ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ\n(å…±æçµ„æˆ)']
colors = ['blue', 'red', 'purple']

for c, label, color in zip(compositions, labels, colors):
    ax1.axvline(c, color=color, linestyle='--', linewidth=2, alpha=0.7)
    ax1.text(c, 0.9, label, ha='center', fontsize=12, fontweight='bold',
            bbox=dict(boxstyle='round', facecolor=color, alpha=0.3))

ax1.plot([C_ferrite, C_pearlite], [0.5, 0.5], 'k-', linewidth=3)
ax1.plot(C_steel, 0.5, 'ro', markersize=15, label='æ”¯ç‚¹')

ax1.annotate('', xy=(C_ferrite, 0.35), xytext=(C_steel, 0.35),
            arrowprops=dict(arrowstyle='<->', color='blue', lw=2.5))
ax1.text((C_ferrite + C_steel) / 2, 0.28, f'{C_steel - C_ferrite:.3f}%',
        ha='center', fontsize=11, color='blue', fontweight='bold')

ax1.annotate('', xy=(C_steel, 0.35), xytext=(C_pearlite, 0.35),
            arrowprops=dict(arrowstyle='<->', color='purple', lw=2.5))
ax1.text((C_steel + C_pearlite) / 2, 0.28, f'{C_pearlite - C_steel:.2f}%',
        ha='center', fontsize=11, color='purple', fontweight='bold')

ax1.text(C_ferrite - 0.1, 0.7, f'è³ªé‡åˆ†ç‡\n{f_ferrite * 100:.1f}%',
        ha='center', fontsize=13, fontweight='bold',
        bbox=dict(boxstyle='round', facecolor='lightblue', alpha=0.9))
ax1.text(C_pearlite + 0.1, 0.7, f'è³ªé‡åˆ†ç‡\n{f_pearlite * 100:.1f}%',
        ha='center', fontsize=13, fontweight='bold',
        bbox=dict(boxstyle='round', facecolor='lightcoral', alpha=0.9))

ax1.set_xlabel('ç‚­ç´ å«æœ‰é‡ (è³ªé‡% C)', fontsize=13, fontweight='bold')
ax1.set_title('ã¦ã“ã®æ³•å‰‡ã«ã‚ˆã‚‹è¨ˆç®—', fontsize=15, fontweight='bold', pad=15)
ax1.set_xlim(0, 1.0)
ax1.set_ylim(0, 1)
ax1.set_yticks([])
ax1.grid(axis='x', alpha=0.3)

# å³å›³: çµ„ç¹”ã®å††ã‚°ãƒ©ãƒ•
phases = ['åˆæãƒ•ã‚§ãƒ©ã‚¤ãƒˆ', f'ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ\n({f_pearlite * 100:.1f}%)']
sizes = [f_ferrite * 100, f_pearlite * 100]
colors_pie = ['lightblue', 'lightcoral']
explode = (0.05, 0.05)

wedges, texts, autotexts = ax2.pie(sizes, explode=explode, labels=phases, colors=colors_pie,
                                     autopct='%1.1f%%', startangle=90, textprops={'fontsize': 12, 'fontweight': 'bold'})

for autotext in autotexts:
    autotext.set_color('white')
    autotext.set_fontweight('bold')
    autotext.set_fontsize(14)

ax2.set_title('Fe-0.6% Cé‹¼ã®çµ„ç¹”æ§‹æˆ', fontsize=15, fontweight='bold', pad=15)

plt.tight_layout()
plt.savefig('fe_06c_microstructure_calculation.png', dpi=300, bbox_inches='tight')
plt.show()

print("\n" + "=" * 80)
print("ã€çµè«–ã€‘")
print("=" * 80)
print(f"Fe-{C_steel}è³ªé‡% Cé‹¼ã‚’å…±ææ¸©åº¦ç›´ä¸‹ã¾ã§å¾å†·ã™ã‚‹ã¨ã€")
print(f"  åˆæãƒ•ã‚§ãƒ©ã‚¤ãƒˆ:  {f_ferrite * 100:.1f}è³ªé‡%")
print(f"  ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ:      {f_pearlite * 100:.1f}è³ªé‡%")
print(f"ã®çµ„ç¹”ã¨ãªã‚Šã¾ã™ã€‚")
print("")
print("ã“ã‚Œã¯å…¸å‹çš„ãªäºœå…±æé‹¼ã®çµ„ç¹”ã§ã™ã€‚")
print("åˆæãƒ•ã‚§ãƒ©ã‚¤ãƒˆã¯ç™½è‰²ã§è»Ÿã‚‰ã‹ãã€ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆã¯å±¤çŠ¶çµ„ç¹”ã§ç¡¬ã„ãŸã‚ã€")
print(f"ã“ã®é‹¼ã¯ä¸­ç¨‹åº¦ã®å¼·åº¦ãƒ»ç¡¬åº¦ã‚’æŒã¡ã¾ã™ã€‚")
print("")
print(f"ç‚­ç´ å«æœ‰é‡ãŒ0.76%ï¼ˆå…±æé‹¼ï¼‰ã«è¿‘ã¥ãã»ã©ã€ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆåˆ†ç‡ãŒå¢—åŠ ã—ã€")
print("å¼·åº¦ãƒ»ç¡¬åº¦ãŒä¸Šæ˜‡ã—ã¾ã™ã€‚")
print("=" * 80)

print("\nâœ“ ã‚°ãƒ©ãƒ•ã‚’ 'fe_06c_microstructure_calculation.png' ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸ")
</code></pre>
                    </div>
                </details>
            </div>

            <div class="exercise">
                <div class="exercise-header">
                    <h4>æ¼”ç¿’ 2.3</h4>
                    <span class="difficulty hard">Hard</span>
                </div>
                <p><strong>å•é¡Œï¼š</strong>Fe-CçŠ¶æ…‹å›³ã«ãŠã„ã¦ã€Fe-1.2è³ªé‡% Cé‹¼ï¼ˆéå…±æé‹¼ï¼‰ã‚’1000Â°Cã‹ã‚‰å®¤æ¸©ã¾ã§å¾å†·ã—ãŸã¨ãã®çµ„ç¹”å¤‰åŒ–ã‚’ã€å„æ¸©åº¦ç¯„å›²ã§èª¬æ˜ã—ã¦ãã ã•ã„ã€‚ã¾ãŸã€727Â°Cç›´ä¸‹ã§ã®çµ„ç¹”ï¼ˆåˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã¨ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆã®è³ªé‡åˆ†ç‡ï¼‰ã‚’ã¦ã“ã®æ³•å‰‡ã§è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚</p>

                <details>
                    <summary>è§£ç­”ã‚’è¡¨ç¤º</summary>
                    <div class="solution">
                        <pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

# ä¸ãˆã‚‰ã‚ŒãŸå€¤
C_steel = 1.2         # é‹¼ã®ç‚­ç´ å«æœ‰é‡ (è³ªé‡% C) - éå…±æé‹¼
C_eutectoid = 0.76    # å…±æçµ„æˆ (è³ªé‡% C)
C_cementite = 6.67    # ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã®ç‚­ç´ å«æœ‰é‡ (è³ªé‡% C)
T_eutectoid = 727     # å…±ææ¸©åº¦ (Â°C)

print("=" * 80)
print("Fe-1.2è³ªé‡% Cé‹¼ï¼ˆéå…±æé‹¼ï¼‰ã®å†·å´éç¨‹ã¨çµ„ç¹”å¤‰åŒ–")
print("=" * 80)

print("\nã€é‹¼ã®åˆ†é¡ã€‘")
print(f"ç‚­ç´ å«æœ‰é‡: {C_steel}è³ªé‡% C")
print(f"åˆ†é¡: éå…±æé‹¼ï¼ˆ{C_eutectoid}è³ªé‡% C < C < 2.14è³ªé‡% Cï¼‰")

print("\nã€å†·å´éç¨‹ã®çµ„ç¹”å¤‰åŒ–ã€‘")
print("=" * 80)

# å†·å´éç¨‹ã®å„æ®µéš
cooling_stages = [
    ("1000Â°C", "Î³ç›¸ï¼ˆã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆï¼‰å˜ç›¸", "ã™ã¹ã¦ã®ç‚­ç´ ãŒÎ³ç›¸ã«å›ºæº¶"),
    ("1000Â°C â†’ ç´„850Â°C", "Î³ç›¸ã®ã¾ã¾å†·å´", "Î³ç›¸å†…ã§ç‚­ç´ ãŒå‡ä¸€åˆ†å¸ƒ"),
    ("ç´„850Â°C", "åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆæå‡ºé–‹å§‹", "Î³/Î³+Feâ‚ƒCå¢ƒç•Œç·šã«åˆ°é”ã€éå‰°ãªç‚­ç´ ãŒFeâ‚ƒCã¨ã—ã¦æå‡º"),
    ("850Â°C â†’ 727Â°C", "åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆæå‡ºç¶™ç¶š", "Î³ç›¸ã®ç‚­ç´ æ¿ƒåº¦ãŒå¾ã€…ã«å…±æçµ„æˆã¸"),
    ("727Â°Cï¼ˆå…±ææ¸©åº¦ï¼‰", "å…±æåå¿œç™ºç”Ÿ", "æ®‹å­˜Î³ç›¸ãŒãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆï¼ˆÎ±+Feâ‚ƒCå±¤çŠ¶çµ„ç¹”ï¼‰ã«å¤‰æ…‹"),
    ("727Â°Cä»¥ä¸‹", "åˆæFeâ‚ƒC + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ", "æœ€çµ‚çµ„ç¹”ã€å®¤æ¸©ã¾ã§å¤‰åŒ–ãªã—")
]

for i, (temp_range, phase, description) in enumerate(cooling_stages, 1):
    print(f"\n{i}. {temp_range}")
    print(f"   ç›¸: {phase}")
    print(f"   èª¬æ˜: {description}")

print("\n" + "=" * 80)
print("ã€727Â°Cç›´ä¸‹ã§ã®çµ„ç¹”è¨ˆç®—ï¼ˆã¦ã“ã®æ³•å‰‡ï¼‰ã€‘")
print("=" * 80)

# 727Â°Cç›´ä¸‹ã§ã¯ã€åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã¨ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆãŒå…±å­˜
# Î³ç›¸ã®çµ„æˆã¯å…±æçµ„æˆï¼ˆ0.76% Cï¼‰ã«ãªã£ã¦ã„ã‚‹
# å…¨ä½“ã®çµ„æˆ 1.2% C = åˆæFeâ‚ƒC (6.67% C) + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ (0.76% C)

print(f"\näºŒç›¸å…±å­˜çŠ¶æ…‹:")
print(f"  ç›¸1: åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ (Feâ‚ƒC), C = {C_cementite}è³ªé‡%")
print(f"  ç›¸2: ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆï¼ˆÎ³â†’Î±+Feâ‚ƒCï¼‰, C = {C_eutectoid}è³ªé‡%")
print(f"  å…¨ä½“ã®çµ„æˆ: {C_steel}è³ªé‡% C")

# ã¦ã“ã®æ³•å‰‡
# f_Feâ‚ƒC = (C_é‹¼ - C_å…±æ) / (C_Feâ‚ƒC - C_å…±æ)
# f_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ = (C_Feâ‚ƒC - C_é‹¼) / (C_Feâ‚ƒC - C_å…±æ)

f_cementite = (C_steel - C_eutectoid) / (C_cementite - C_eutectoid)
f_pearlite = (C_cementite - C_steel) / (C_cementite - C_eutectoid)

print(f"\nåˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã®è³ªé‡åˆ†ç‡:")
print(f"  f_Feâ‚ƒC = (C_é‹¼ - C_å…±æ) / (C_Feâ‚ƒC - C_å…±æ)")
print(f"         = ({C_steel} - {C_eutectoid}) / ({C_cementite} - {C_eutectoid})")
print(f"         = {C_steel - C_eutectoid:.2f} / {C_cementite - C_eutectoid:.2f}")
print(f"         = {f_cementite:.4f}")
print(f"         = {f_cementite * 100:.2f}%")

print(f"\nãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆã®è³ªé‡åˆ†ç‡:")
print(f"  f_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ = (C_Feâ‚ƒC - C_é‹¼) / (C_Feâ‚ƒC - C_å…±æ)")
print(f"               = ({C_cementite} - {C_steel}) / ({C_cementite} - {C_eutectoid})")
print(f"               = {C_cementite - C_steel:.2f} / {C_cementite - C_eutectoid:.2f}")
print(f"               = {f_pearlite:.4f}")
print(f"               = {f_pearlite * 100:.2f}%")

print(f"\nã€æ¤œç®—ã€‘")
total = f_cementite + f_pearlite
print(f"  f_Feâ‚ƒC + f_ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ = {f_cementite:.4f} + {f_pearlite:.4f} = {total:.4f}")
if abs(total - 1.0) < 1e-6:
    print("  âœ“ åˆè¨ˆãŒ1.0ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª")

# å¯è¦–åŒ–
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 7))

# å·¦å›³: å†·å´æ›²ç·šã¨çµ„ç¹”å¤‰åŒ–
temperatures = [1000, 900, 850, 800, 727, 500, 25]
time = np.arange(len(temperatures))

ax1.plot(time, temperatures, 'ro-', linewidth=2.5, markersize=10)
ax1.axhline(T_eutectoid, color='purple', linestyle='--', linewidth=2, alpha=0.7, label='å…±ææ¸©åº¦ (727Â°C)')
ax1.axhline(850, color='green', linestyle='--', linewidth=1.5, alpha=0.5, label='Feâ‚ƒCæå‡ºé–‹å§‹æ¸©åº¦')

# çµ„ç¹”å¤‰åŒ–ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
ax1.text(0.5, 1050, 'Î³å˜ç›¸', fontsize=12, fontweight='bold', ha='center',
         bbox=dict(boxstyle='round', facecolor='yellow', alpha=0.7))
ax1.text(2, 900, 'Î³ + åˆæFeâ‚ƒC', fontsize=11, fontweight='bold', ha='center',
         bbox=dict(boxstyle='round', facecolor='lightgreen', alpha=0.7))
ax1.text(4, 650, 'åˆæFeâ‚ƒC\n+ ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ', fontsize=11, fontweight='bold', ha='center',
         bbox=dict(boxstyle='round', facecolor='lightcoral', alpha=0.7))

ax1.set_xlabel('å†·å´æ™‚é–“ï¼ˆä»»æ„å˜ä½ï¼‰', fontsize=13, fontweight='bold')
ax1.set_ylabel('æ¸©åº¦ (Â°C)', fontsize=13, fontweight='bold')
ax1.set_title('Fe-1.2% Cé‹¼ã®å†·å´æ›²ç·šã¨çµ„ç¹”å¤‰åŒ–', fontsize=15, fontweight='bold', pad=15)
ax1.set_ylim(0, 1100)
ax1.legend(fontsize=11)
ax1.grid(True, alpha=0.3)

# å³å›³: æœ€çµ‚çµ„ç¹”ã®å††ã‚°ãƒ©ãƒ•
phases = ['åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ', f'ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ\n({f_pearlite * 100:.1f}%)']
sizes = [f_cementite * 100, f_pearlite * 100]
colors_pie = ['darkgray', 'lightcoral']
explode = (0.1, 0)

wedges, texts, autotexts = ax2.pie(sizes, explode=explode, labels=phases, colors=colors_pie,
                                     autopct='%1.2f%%', startangle=90,
                                     textprops={'fontsize': 12, 'fontweight': 'bold'})

for autotext in autotexts:
    autotext.set_color('white')
    autotext.set_fontweight('bold')
    autotext.set_fontsize(14)

ax2.set_title('Fe-1.2% Cé‹¼ã®æœ€çµ‚çµ„ç¹”ï¼ˆ727Â°Cç›´ä¸‹ï¼‰', fontsize=15, fontweight='bold', pad=15)

plt.tight_layout()
plt.savefig('fe_12c_hypereutectoid_cooling.png', dpi=300, bbox_inches='tight')
plt.show()

print("\n" + "=" * 80)
print("ã€æœ€çµ‚çµ„ç¹”ã®ç‰¹å¾´ã€‘")
print("=" * 80)
print(f"Fe-{C_steel}è³ªé‡% Cé‹¼ã‚’å¾å†·ã™ã‚‹ã¨ã€")
print(f"  åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ:  {f_cementite * 100:.2f}è³ªé‡%")
print(f"  ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ:        {f_pearlite * 100:.2f}è³ªé‡%")
print(f"ã®çµ„ç¹”ã¨ãªã‚Šã¾ã™ã€‚")
print("")
print("ã€éå…±æé‹¼ã®ç‰¹æ€§ã€‘")
print("  - åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã¯Î³ç²’ç•Œã«ç¶²ç›®çŠ¶ã«æå‡º")
print("  - ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã¯æ¥µã‚ã¦ç¡¬ã„ï¼ˆHV 800ç¨‹åº¦ï¼‰ãŒè„†ã„")
print("  - ç²’ç•Œã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã«ã‚ˆã‚Šã€é‹¼å…¨ä½“ã®é­æ€§ãŒä½ä¸‹")
print("  - é«˜ç¡¬åº¦ãƒ»ä½é­æ€§ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹å·¥å…·é‹¼ãªã©ã«ä½¿ç”¨")
print("  - çƒçŠ¶åŒ–ç„¼éˆã«ã‚ˆã‚Šã€ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆã‚’çƒçŠ¶åŒ–ã—ã¦é­æ€§æ”¹å–„å¯èƒ½")
print("")
print("ã€äºœå…±æé‹¼ã¨ã®æ¯”è¼ƒã€‘")
print("  äºœå…±æé‹¼: åˆæãƒ•ã‚§ãƒ©ã‚¤ãƒˆï¼ˆè»Ÿï¼‰ + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ â†’ å»¶æ€§é«˜ã„")
print("  éå…±æé‹¼: åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆï¼ˆç¡¬ãƒ»è„†ï¼‰ + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ â†’ ç¡¬åº¦é«˜ã„ã€é­æ€§ä½ã„")
print("=" * 80)

print("\nâœ“ ã‚°ãƒ©ãƒ•ã‚’ 'fe_12c_hypereutectoid_cooling.png' ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸ")

# è¿½åŠ : å…±æåå¿œã®è©³ç´°
print("\nã€å…±æåå¿œã®è©³ç´°ã€‘")
print("=" * 80)
print(f"727Â°Cã§èµ·ã“ã‚‹åå¿œ:")
print(f"  Î³({C_eutectoid}% C) â†’ Î±({0.022}% C) + Feâ‚ƒC({C_cementite}% C)")
print(f"")
print(f"ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå†…ã®ç›¸åˆ†ç‡:")
C_ferrite_eutectoid = 0.022
f_ferrite_in_pearlite = (C_cementite - C_eutectoid) / (C_cementite - C_ferrite_eutectoid)
f_cementite_in_pearlite = (C_eutectoid - C_ferrite_eutectoid) / (C_cementite - C_ferrite_eutectoid)
print(f"  ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ: {f_ferrite_in_pearlite * 100:.2f}è³ªé‡%")
print(f"  ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ: {f_cementite_in_pearlite * 100:.2f}è³ªé‡%")
print("")
print(f"é‹¼å…¨ä½“ã§ã®ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆé‡:")
total_cementite = f_cementite + f_pearlite * f_cementite_in_pearlite
print(f"  åˆæã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ: {f_cementite * 100:.2f}%")
print(f"  ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå†…ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ: {f_pearlite * f_cementite_in_pearlite * 100:.2f}%")
print(f"  åˆè¨ˆ: {total_cementite * 100:.2f}%")
print("=" * 80)
</code></pre>
                    </div>
                </details>
            </div>
        </section>

        <section class="learning-objectives">
            <h3>å­¦ç¿’ç›®æ¨™ã®ç¢ºèª</h3>

            <div class="objective-level">
                <h4>ãƒ¬ãƒ™ãƒ«1: åŸºæœ¬ç†è§£ï¼ˆçŸ¥è­˜ã®ç¿’å¾—ï¼‰</h4>
                <ul>
                    <li>Gibbsã®ç›¸å¾‹ã®æ„å‘³ã¨é©ç”¨æ–¹æ³•ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
                    <li>çŠ¶æ…‹å›³ã®åŸºæœ¬è¦ç´ ï¼ˆæ¶²ç›¸ç·šã€å›ºç›¸ç·šã€å…±æ™¶ç‚¹ã€å…±æç‚¹ï¼‰ã‚’èª¬æ˜ã§ãã‚‹</li>
                    <li>ç½®æ›å‹å›ºæº¶ä½“ã¨ä¾µå…¥å‹å›ºæº¶ä½“ã®é•ã„ã‚’èª¬æ˜ã§ãã‚‹</li>
                    <li>Fe-CçŠ¶æ…‹å›³ã®ä¸»è¦ãªç›¸ï¼ˆãƒ•ã‚§ãƒ©ã‚¤ãƒˆã€ã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆã€ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆï¼‰ã‚’ç†è§£ã—ã¦ã„ã‚‹</li>
                    <li>äºœå…±æé‹¼ã€å…±æé‹¼ã€éå…±æé‹¼ã®é•ã„ã‚’èª¬æ˜ã§ãã‚‹</li>
                </ul>
            </div>

            <div class="objective-level">
                <h4>ãƒ¬ãƒ™ãƒ«2: å®Ÿè·µã‚¹ã‚­ãƒ«ï¼ˆè¨ˆç®—ã¨å¿œç”¨ï¼‰</h4>
                <ul>
                    <li>Gibbsã®ç›¸å¾‹ã§è‡ªç”±åº¦ã‚’è¨ˆç®—ã§ãã‚‹</li>
                    <li>ã¦ã“ã®æ³•å‰‡ã‚’ä½¿ã£ã¦å„ç›¸ã®è³ªé‡åˆ†ç‡ã‚’è¨ˆç®—ã§ãã‚‹</li>
                    <li>Fe-CçŠ¶æ…‹å›³ã‹ã‚‰é‹¼ã®çµ„ç¹”ã‚’äºˆæ¸¬ã§ãã‚‹</li>
                    <li>Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ç›¸å®‰å®šæ€§ã®é–¢ä¿‚ã‚’èª¬æ˜ã§ãã‚‹</li>
                    <li>Pythonã§ç°¡æ˜“çš„ãªçŠ¶æ…‹å›³ã‚’ä½œæˆã§ãã‚‹</li>
                    <li>pycalphadã‚’ä½¿ã£ã¦çŠ¶æ…‹å›³è¨ˆç®—ãŒã§ãã‚‹ï¼ˆåŸºç¤ãƒ¬ãƒ™ãƒ«ï¼‰</li>
                </ul>
            </div>

            <div class="objective-level">
                <h4>ãƒ¬ãƒ™ãƒ«3: å¿œç”¨åŠ›ï¼ˆå•é¡Œè§£æ±ºã¨æœ€é©åŒ–ï¼‰</h4>
                <ul>
                    <li>è¤‡é›‘ãªåˆé‡‘ç³»ã®çŠ¶æ…‹å›³ã‚’è§£é‡ˆã—ã€çµ„ç¹”äºˆæ¸¬ãŒã§ãã‚‹</li>
                    <li>å†·å´é€Ÿåº¦ã«ã‚ˆã‚‹çµ„ç¹”å¤‰åŒ–ã‚’äºˆæ¸¬ã§ãã‚‹</li>
                    <li>ç†±å‡¦ç†æ¡ä»¶ã‚’è¨­è¨ˆã—ã€ç›®çš„ã®çµ„ç¹”ãƒ»ç‰¹æ€§ã‚’å¾—ã‚‰ã‚Œã‚‹</li>
                    <li>pycalphadã‚„CALPHADæ³•ã‚’ä½¿ã£ãŸé«˜åº¦ãªçŠ¶æ…‹å›³è¨ˆç®—ãŒã§ãã‚‹</li>
                    <li>å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã¨ç†±åŠ›å­¦è¨ˆç®—ã‚’çµ„ã¿åˆã‚ã›ã¦ææ–™è¨­è¨ˆãŒã§ãã‚‹</li>
                </ul>
            </div>
        </section>

        <section class="references">
            <h2>å‚è€ƒæ–‡çŒ®</h2>
            <ol>
                <li>Porter, D.A., Easterling, K.E., Sherif, M.Y. (2009). <em>Phase Transformations in Metals and Alloys</em>, 3rd ed. CRC Press, pp. 1-102, 215-289.</li>
                <li>Callister, W.D., Jr., Rethwisch, D.G. (2020). <em>Materials Science and Engineering: An Introduction</em>, 10th ed. Wiley, pp. 269-345.</li>
                <li>Krauss, G. (2015). <em>Steels: Processing, Structure, and Performance</em>, 2nd ed. ASM International, pp. 1-89, 155-234.</li>
                <li>Hillert, M. (2008). <em>Phase Equilibria, Phase Diagrams and Phase Transformations: Their Thermodynamic Basis</em>, 2nd ed. Cambridge University Press, pp. 1-78, 234-301.</li>
                <li>Massalski, T.B., ed. (1990). <em>Binary Alloy Phase Diagrams</em>, 2nd ed. ASM International.</li>
                <li>Otis, R., Liu, Z.-K. (2017). "pycalphad: CALPHAD-based Computational Thermodynamics in Python". <em>Journal of Open Research Software</em>, 5(1), p.1. DOI: 10.5334/jors.140</li>
                <li>pycalphad documentation. <a href="https://pycalphad.org/" target="_blank">https://pycalphad.org/</a></li>
            </ol>
        </section>

        <nav class="chapter-nav">
            <a href="./chapter-1.html" class="btn-secondary">â† Chapter 1: é‡‘å±çµåˆã¨çµæ™¶æ§‹é€ </a>
            <a href="./chapter-3.html" class="btn-primary">Chapter 3: é‡‘å±ææ–™ã®å¼·åŒ–æ©Ÿæ§‹ â†’</a>
        </nav>
    </main>

    <footer>
        <p>&copy; 2025 MS Dojo. All rights reserved.</p>
    </footer>
</body>
</html>