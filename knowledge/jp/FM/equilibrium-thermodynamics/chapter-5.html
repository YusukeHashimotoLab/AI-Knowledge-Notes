<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬5ç« : ææ–™ç§‘å­¦ã¸ã®å¿œç”¨ | åŸºç¤æ•°ç†é“å ´ - å¹³è¡¡ç†±åŠ›å­¦ã¨ç›¸è»¢ç§»</title>
    <meta name="description" content="å›ºæº¶ä½“ãƒ»é‡‘å±é–“åŒ–åˆç‰©ã€å…±æ™¶ãƒ»åŒ…æ™¶åå¿œã€é‰„é‹¼ææ–™ã®ç›¸å¤‰æ…‹ï¼ˆÎ±-Î³å¤‰æ…‹ã€ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹ï¼‰ã€TTTå›³ãƒ»CCTå›³ã€é«˜ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼åˆé‡‘ã‚’å­¦ã³ã¾ã™ã€‚">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.8;
            color: #333;
            background: #f5f5f5;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 1rem;
            text-align: center;
        }
        .breadcrumb {
            max-width: 1200px;
            margin: 1rem auto;
            padding: 0 1rem;
            font-size: 0.9rem;
        }
        .breadcrumb a { color: #667eea; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        .content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        h1 { font-size: 2rem; margin-bottom: 1rem; }
        h2 {
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #764ba2;
            color: #667eea;
        }
        h3 { font-size: 1.2rem; margin: 1.5rem 0 1rem; color: #555; }
        p { margin-bottom: 1rem; }
        ul, ol { margin: 1rem 0 1rem 2rem; }
        li { margin-bottom: 0.5rem; }
        .theory-box {
            background: linear-gradient(to right, #f0f4ff, #faf5ff);
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }
        .code-example {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            white-space: pre-wrap;
}
        .code-title {
            background: #667eea;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px 6px 0 0;
            font-weight: 600;
            margin-top: 1.5rem;
        }
        .exercise {
            background: #fff9e6;
            border-left: 4px solid #f59e0b;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            gap: 1rem;
        }
        .nav-button {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: transform 0.3s;
        }
        .nav-button:hover { transform: translateY(-2px); }
        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 4rem;
        }
        @media (max-width: 768px) {
            .content { padding: 1.5rem; }
            h1 { font-size: 1.5rem; }
            h2 { font-size: 1.3rem; }
            .navigation { flex-direction: column; }
        }
    </style>
</head>
<body>
    <header>
        <h1>ğŸ”¥ ç¬¬5ç« : ææ–™ç§‘å­¦ã¸ã®å¿œç”¨</h1>
        <p>Applications to Materials Science</p>
    </header>

    <div class="breadcrumb">
        <a href="../../index.html">ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹</a> &gt;
        <a href="../index.html">åŸºç¤æ•°ç†é“å ´</a> &gt;
        <a href="index.html">å¹³è¡¡ç†±åŠ›å­¦ã¨ç›¸è»¢ç§»</a> &gt;
        ç¬¬5ç« 
    </div>

    <div class="container">
        <div class="content">
            <h2>ğŸ¯ å­¦ç¿’ç›®æ¨™</h2>
            <ul>
                <li>å›ºæº¶ä½“ã¨é‡‘å±é–“åŒ–åˆç‰©ã®é•ã„ã‚’ç†è§£ã™ã‚‹</li>
                <li>å…±æ™¶åå¿œãƒ»åŒ…æ™¶åå¿œã®ææ–™ç§‘å­¦çš„æ„ç¾©ã‚’èª¬æ˜ã§ãã‚‹</li>
                <li>Fe-Cç³»ç›¸å›³ã‚’èª­ã¿ã€é‹¼ã®çµ„ç¹”ã‚’äºˆæ¸¬ã§ãã‚‹</li>
                <li>Î±-Î³å¤‰æ…‹ï¼ˆãƒ•ã‚§ãƒ©ã‚¤ãƒˆ-ã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆå¤‰æ…‹ï¼‰ã®ç†±åŠ›å­¦ã‚’ç†è§£ã™ã‚‹</li>
                <li>ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’èª¬æ˜ã§ãã‚‹</li>
                <li>TTTå›³ãƒ»CCTå›³ã‚’ç”¨ã„ã¦ç†±å‡¦ç†ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¨­è¨ˆã§ãã‚‹</li>
                <li>é«˜ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼åˆé‡‘ï¼ˆHEAï¼‰ã®é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã‚’è¨ˆç®—ã§ãã‚‹</li>
            </ul>
        </div>

        <div class="content">
            <h2>ğŸ“– å›ºæº¶ä½“ã¨é‡‘å±é–“åŒ–åˆç‰©</h2>

            <div class="theory-box">
                <h3>å›ºæº¶ä½“ï¼ˆSolid Solutionï¼‰</h3>
                <p>2ç¨®ä»¥ä¸Šã®å…ƒç´ ãŒçµæ™¶æ ¼å­ä¸­ã§ãƒ©ãƒ³ãƒ€ãƒ ã«æ··åˆã—ãŸå˜ä¸€ç›¸ã®å›ºä½“</p>

                <p><strong>ç½®æ›å‹å›ºæº¶ä½“</strong>: æº¶è³ªåŸå­ãŒæº¶åª’åŸå­ã®æ ¼å­ç‚¹ã‚’ç½®æ›</p>
                <ul>
                    <li>Hume-Rotheryå‰‡: åŸå­åŠå¾„å·®<15%ã€çµæ™¶æ§‹é€ åŒä¸€ã€é›»æ°—é™°æ€§åº¦é¡ä¼¼</li>
                    <li>ä¾‹: Cu-Niï¼ˆå…¨ç‡å›ºæº¶ï¼‰ã€Fe-Crï¼ˆã‚¹ãƒ†ãƒ³ãƒ¬ã‚¹é‹¼ï¼‰</li>
                </ul>

                <p><strong>ä¾µå…¥å‹å›ºæº¶ä½“</strong>: æº¶è³ªåŸå­ãŒæ ¼å­é–“éš™ã«ä¾µå…¥</p>
                <ul>
                    <li>æº¶è³ªåŸå­ã¯å°ã•ã„ï¼ˆC, N, H, Bï¼‰</li>
                    <li>ä¾‹: Fe-Cï¼ˆé‹¼ï¼‰ã€Ti-O</li>
                </ul>

                <h3>é‡‘å±é–“åŒ–åˆç‰©ï¼ˆIntermetallic Compoundï¼‰</h3>
                <p>ç‰¹å®šã®åŒ–å­¦é‡è«–æ¯”ã§å½¢æˆã•ã‚Œã‚‹è¦å‰‡æ§‹é€ </p>
                <ul>
                    <li>ä¾‹: Feâ‚ƒCï¼ˆã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆï¼‰ã€Niâ‚ƒAlã€TiAl</li>
                    <li>ç‰¹å¾´: é«˜å¼·åº¦ãƒ»é«˜è„†æ€§ãƒ»é«˜èç‚¹</li>
                </ul>
            </div>
        </div>

        <div class="content">
            <h2>ğŸ’» ä¾‹é¡Œ5.1: Fe-Cç³»ç›¸å›³ã®è§£æ</h2>

            <div class="code-title">Pythonå®Ÿè£…: Fe-Cç³»ç›¸å›³ã®æç”»ã¨èª­ã¿æ–¹</div>
            <div class="code-example">import numpy as np
import matplotlib.pyplot as plt

def fe_c_phase_diagram():
    """Fe-Cç³»ç›¸å›³ã®ç°¡ç•¥ãƒ¢ãƒ‡ãƒ«"""

    # çµ„æˆï¼ˆC wt%ï¼‰
    # æ¶²ç›¸ç·š
    x_liquidus = np.array([0, 0.5, 2.11, 4.3, 6.69])
    T_liquidus = np.array([1538, 1500, 1148, 1148, 1130])

    # Î³ç›¸ï¼ˆã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆï¼‰å›ºç›¸ç·š
    x_gamma_solidus = np.array([0, 0.5, 2.11])
    T_gamma_solidus = np.array([1495, 1450, 1148])

    # Î±ç›¸ï¼ˆãƒ•ã‚§ãƒ©ã‚¤ãƒˆï¼‰å¢ƒç•Œ
    x_alpha = np.array([0, 0.022, 0.022, 0, 0])
    T_alpha = np.array([912, 727, 1495, 1538, 912])

    # Î³ç›¸å¢ƒç•Œ
    x_gamma_boundary = np.array([0.022, 0.77, 2.11, 2.11, 0.77, 0.022])
    T_gamma_boundary = np.array([727, 727, 1148, 1495, 1495, 1495])

    # ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆå¢ƒç•Œ
    x_cementite = np.array([6.69, 6.69])
    T_cementite = np.array([727, 1130])

    # å…±æ™¶ç‚¹ãƒ»å…±æç‚¹
    eutectic_point = (4.3, 1148)  # L â†’ Î³ + Feâ‚ƒC
    eutectoid_point = (0.77, 727)  # Î³ â†’ Î± + Feâ‚ƒC

    return {
        'liquidus': (x_liquidus, T_liquidus),
        'gamma_solidus': (x_gamma_solidus, T_gamma_solidus),
        'alpha': (x_alpha, T_alpha),
        'gamma_boundary': (x_gamma_boundary, T_gamma_boundary),
        'cementite': (x_cementite, T_cementite),
        'eutectic': eutectic_point,
        'eutectoid': eutectoid_point
    }

# ç›¸å›³ã®æç”»
phase_data = fe_c_phase_diagram()

fig, ax = plt.subplots(figsize=(12, 8))

# æ¶²ç›¸ç·š
x_liq, T_liq = phase_data['liquidus']
ax.plot(x_liq, T_liq, 'r-', linewidth=2.5, label='æ¶²ç›¸ç·š')

# Î³ç›¸å›ºç›¸ç·š
x_g_sol, T_g_sol = phase_data['gamma_solidus']
ax.plot(x_g_sol, T_g_sol, 'b-', linewidth=2.5)

# Î±ç›¸å¢ƒç•Œ
x_a, T_a = phase_data['alpha']
ax.plot(x_a, T_a, 'g-', linewidth=2.5, label='Î±ç›¸ï¼ˆãƒ•ã‚§ãƒ©ã‚¤ãƒˆï¼‰')

# Î³ç›¸å¢ƒç•Œ
x_g, T_g = phase_data['gamma_boundary']
ax.plot(x_g, T_g, 'b-', linewidth=2.5, label='Î³ç›¸ï¼ˆã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆï¼‰')

# ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆå¢ƒç•Œ
x_cem, T_cem = phase_data['cementite']
ax.plot([6.69], [1130], 'ko', markersize=8)
ax.axvline(6.69, color='purple', linestyle='--', linewidth=1.5,
          label='Feâ‚ƒCï¼ˆã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆï¼‰')

# é‡è¦ç‚¹
eutectic = phase_data['eutectic']
eutectoid = phase_data['eutectoid']

ax.plot(eutectic[0], eutectic[1], 'ro', markersize=12, label=f'å…±æ™¶ç‚¹ï¼ˆC {eutectic[0]:.1f}%, {eutectic[1]}Â°Cï¼‰')
ax.plot(eutectoid[0], eutectoid[1], 'mo', markersize=12, label=f'å…±æç‚¹ï¼ˆC {eutectoid[0]:.2f}%, {eutectoid[1]}Â°Cï¼‰')

# é ˜åŸŸãƒ©ãƒ™ãƒ«
ax.text(0.2, 1000, 'Î´-Fe', fontsize=12, ha='center')
ax.text(0.2, 1300, 'Lï¼ˆæ¶²ç›¸ï¼‰', fontsize=13, ha='center', fontweight='bold')
ax.text(0.5, 1000, 'Î³\n(ã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆ)', fontsize=12, ha='center')
ax.text(0.01, 850, 'Î±\n(ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ)', fontsize=12, ha='center')
ax.text(0.4, 650, 'Î± + Feâ‚ƒC\n(ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ)', fontsize=11, ha='center')
ax.text(3.0, 1000, 'L + Î³', fontsize=11, ha='center')
ax.text(5.0, 1000, 'L + Feâ‚ƒC', fontsize=11, ha='center')

# é‡è¦ãªç‚­ç´ æ¿ƒåº¦ã‚’ç¤ºã™å‚ç›´ç·š
ax.axvline(0.022, color='gray', linestyle=':', alpha=0.5)
ax.text(0.022, 500, '0.022%\n(Î±æœ€å¤§å›ºæº¶)', fontsize=9, ha='center')

ax.axvline(0.77, color='gray', linestyle=':', alpha=0.5)
ax.text(0.77, 500, '0.77%\n(å…±æç‚¹)', fontsize=9, ha='center')

ax.axvline(2.11, color='gray', linestyle=':', alpha=0.5)
ax.text(2.11, 500, '2.11%\n(Î³æœ€å¤§å›ºæº¶)', fontsize=9, ha='center')

ax.set_xlabel('ç‚­ç´ æ¿ƒåº¦ (wt%)', fontsize=13)
ax.set_ylabel('æ¸©åº¦ (Â°C)', fontsize=13)
ax.set_title('Fe-Cç³»ç›¸å›³ï¼ˆé‰„-ç‚­ç´ ç³»ï¼‰', fontsize=15, fontweight='bold')
ax.set_xlim([0, 7])
ax.set_ylim([400, 1600])
ax.legend(loc='upper right', fontsize=10)
ax.grid(True, alpha=0.3)

plt.tight_layout()
plt.savefig('materials_fe_c_phase_diagram.png', dpi=300, bbox_inches='tight')
plt.show()

# Fe-Cç³»ã®åˆ†é¡
print("=== Fe-Cç³»ã®åˆ†é¡ ===\n")
print(f"{'ç¨®é¡':<15} {'ç‚­ç´ æ¿ƒåº¦ (wt%)':<20} {'ä¸»è¦çµ„ç¹”':<30}")
print("-" * 65)
print(f"{'ç´”é‰„':<15} {'< 0.008':<20} {'Î±-Feï¼ˆãƒ•ã‚§ãƒ©ã‚¤ãƒˆï¼‰':<30}")
print(f"{'é‹¼ï¼ˆSteelï¼‰':<15} {'0.008 - 2.11':<20} {'ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ + ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ':<30}")
print(f"{'  äºœå…±æé‹¼':<15} {'< 0.77':<20} {'ãƒ•ã‚§ãƒ©ã‚¤ãƒˆä¸» + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ':<30}")
print(f"{'  å…±æé‹¼':<15} {'= 0.77':<20} {'ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆï¼ˆå±¤çŠ¶çµ„ç¹”ï¼‰':<30}")
print(f"{'  éå…±æé‹¼':<15} {'0.77 - 2.11':<20} {'ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ':<30}")
print(f"{'é‹³é‰„ï¼ˆCast Ironï¼‰':<15} {'2.11 - 6.69':<20} {'Î³ + ã‚°ãƒ©ãƒ•ã‚¡ã‚¤ãƒˆ/Feâ‚ƒC':<30}")
print()

print("é‡è¦ãªç›¸å¤‰æ…‹æ¸©åº¦:")
print(f"  Aâ‚: 727Â°Cï¼ˆå…±ææ¸©åº¦ã€Î³ â†’ Î± + Feâ‚ƒCï¼‰")
print(f"  Aâ‚ƒ: 912Â°Cï¼ˆÎ± â†’ Î³ å¤‰æ…‹é–‹å§‹ï¼‰")
print(f"  èç‚¹: 1538Â°Cï¼ˆç´”é‰„ï¼‰")
</div>
        </div>

        <div class="content">
            <h2>ğŸ’» ä¾‹é¡Œ5.2: Î±-Î³å¤‰æ…‹æ¸©åº¦ã®è¨ˆç®—</h2>

            <div class="theory-box">
                <h3>Î±-Î³å¤‰æ…‹ï¼ˆãƒ•ã‚§ãƒ©ã‚¤ãƒˆ-ã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆå¤‰æ…‹ï¼‰</h3>
                <p>é‰„ã®åŒç´ å¤‰æ…‹ï¼š</p>
                <p>\[
                \text{Î±-Fe (BCC)} \xrightarrow{912Â°C} \text{Î³-Fe (FCC)}
                \]</p>

                <p><strong>ç›¸å¹³è¡¡æ¡ä»¶</strong>: åŒ–å­¦ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ãŒç­‰ã—ã„</p>
                <p>\[
                \mu^\alpha(T, P) = \mu^\gamma(T, P)
                \]</p>

                <p>Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·®ï¼š</p>
                <p>\[
                \Delta G^{\gamma \to \alpha} = \Delta H - T \Delta S
                \]</p>
            </div>

            <div class="code-title">Pythonå®Ÿè£…: Î±-Î³å¤‰æ…‹ã®ç†±åŠ›å­¦è¨ˆç®—</div>
            <div class="code-example">import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import fsolve

# Î±-Î³å¤‰æ…‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆç´”é‰„ï¼‰
def gibbs_alpha_gamma(T):
    """Î±ç›¸ã¨Î³ç›¸ã®Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·®

    Args:
        T: æ¸©åº¦ (K)

    Returns:
        Î”G^(Î³â†’Î±): Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·® (J/mol)
    """
    # å®Ÿé¨“å€¤ã«åŸºã¥ããƒ¢ãƒ‡ãƒ«
    # Î”H â‰ˆ -900 J/mol, Î”S â‰ˆ -1.0 J/(molÂ·K) ï¼ˆç°¡ç•¥åŒ–ï¼‰

    T_eq = 1185  # 912Â°C = 1185 Kï¼ˆÎ±-Î³å¤‰æ…‹ç‚¹ï¼‰
    DH = -900  # J/molï¼ˆå¤‰æ…‹ã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼ï¼‰
    DS = DH / T_eq  # J/(molÂ·K)

    DG = DH - T * DS

    return DG

# æ¸©åº¦ç¯„å›²
T_range = np.linspace(800, 1400, 100)  # K
DG_values = [gibbs_alpha_gamma(T) for T in T_range]

# å¤‰æ…‹ç‚¹ã®è¨ˆç®—
T_transformation = fsolve(gibbs_alpha_gamma, 1185)[0]

# å¯è¦–åŒ–
fig, axes = plt.subplots(1, 2, figsize=(14, 6))

# Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼å·®
ax1 = axes[0]
ax1.plot(T_range - 273.15, DG_values, 'b-', linewidth=2.5)
ax1.axhline(0, color='r', linestyle='--', linewidth=2, label='Î”G = 0ï¼ˆå¹³è¡¡ï¼‰')
ax1.axvline(T_transformation - 273.15, color='g', linestyle='--',
           linewidth=2, label=f'å¤‰æ…‹ç‚¹ {T_transformation - 273.15:.0f}Â°C')

# å®‰å®šç›¸ã®é ˜åŸŸ
ax1.fill_between(T_range - 273.15, -2000, 0,
                where=(T_range < T_transformation),
                color='lightblue', alpha=0.3, label='Î±ç›¸å®‰å®š')
ax1.fill_between(T_range - 273.15, 0, 2000,
                where=(T_range > T_transformation),
                color='lightcoral', alpha=0.3, label='Î³ç›¸å®‰å®š')

ax1.set_xlabel('Temperature (Â°C)')
ax1.set_ylabel('Î”G^(Î³â†’Î±) (J/mol)')
ax1.set_title('Î±-Î³å¤‰æ…‹ã®Gibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼')
ax1.legend()
ax1.grid(True, alpha=0.3)

# ç‚­ç´ æ¿ƒåº¦ã«ã‚ˆã‚‹å¤‰æ…‹ç‚¹ã®å¤‰åŒ–
# ç°¡ç•¥ãƒ¢ãƒ‡ãƒ«: T_Î³â†’Î± = 912Â°C - kÂ·[C%]
C_range = np.linspace(0, 1.5, 50)  # C wt%
k = 200  # Â°C/wt%ï¼ˆçµŒé¨“å‰‡ï¼‰
T_gamma_alpha = 912 - k * C_range

ax2 = axes[1]
ax2.plot(C_range, T_gamma_alpha, 'r-', linewidth=2.5, label='Aâ‚ƒç·šï¼ˆÎ±-Î³å¤‰æ…‹é–‹å§‹ï¼‰')
ax2.axhline(727, color='purple', linestyle='--', linewidth=2, label='Aâ‚ç·šï¼ˆå…±ææ¸©åº¦ï¼‰')

# é‡è¦ãªçµ„æˆ
ax2.axvline(0.77, color='gray', linestyle=':', alpha=0.5)
ax2.text(0.77, 650, 'å…±æçµ„æˆ\n0.77%', fontsize=10, ha='center')

# é ˜åŸŸãƒ©ãƒ™ãƒ«
ax2.text(0.3, 850, 'Î³ç›¸\n(ã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆ)', fontsize=12, ha='center',
        bbox=dict(boxstyle='round', facecolor='lightcoral', alpha=0.5))
ax2.text(0.3, 750, 'Î± + Î³', fontsize=11, ha='center')
ax2.text(0.3, 650, 'Î± + Feâ‚ƒC\n(ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ+ã‚»ãƒ¡ãƒ³ã‚¿ã‚¤ãƒˆ)', fontsize=11, ha='center',
        bbox=dict(boxstyle='round', facecolor='lightblue', alpha=0.5))

ax2.set_xlabel('ç‚­ç´ æ¿ƒåº¦ (wt%)')
ax2.set_ylabel('æ¸©åº¦ (Â°C)')
ax2.set_title('ç‚­ç´ æ¿ƒåº¦ã¨Î±-Î³å¤‰æ…‹æ¸©åº¦')
ax2.set_xlim([0, 1.5])
ax2.set_ylim([600, 950])
ax2.legend()
ax2.grid(True, alpha=0.3)

plt.tight_layout()
plt.savefig('materials_alpha_gamma_transformation.png', dpi=300, bbox_inches='tight')
plt.show()

# è¨ˆç®—çµæœ
print("=== Î±-Î³å¤‰æ…‹ã®ç†±åŠ›å­¦ ===\n")
print(f"å¤‰æ…‹ç‚¹ï¼ˆè¨ˆç®—ï¼‰: {T_transformation - 273.15:.2f}Â°C")
print(f"å®Ÿé¨“å€¤: 912Â°C")
print()
print("ç‚­ç´ æ¿ƒåº¦ã«ã‚ˆã‚‹å¤‰æ…‹ç‚¹é™ä¸‹:")
print(f"{'Cæ¿ƒåº¦ (wt%)':<15} {'å¤‰æ…‹æ¸©åº¦ (Â°C)':<20}")
print("-" * 35)
for C in [0, 0.2, 0.4, 0.6, 0.77]:
    T = 912 - k * C
    print(f"{C:<15.2f} {T:<20.0f}")

print("\nç‰©ç†çš„æ„ç¾©:")
print("  - Î±ç›¸ï¼ˆBCCï¼‰ã¯ç‚­ç´ å›ºæº¶åº¦ãŒä½ã„ï¼ˆ0.022% at 727Â°Cï¼‰")
print("  - Î³ç›¸ï¼ˆFCCï¼‰ã¯ç‚­ç´ å›ºæº¶åº¦ãŒé«˜ã„ï¼ˆ2.11% at 1148Â°Cï¼‰")
print("  - ç‚­ç´ æ·»åŠ ã§Î³ç›¸ãŒå®‰å®šåŒ– â†’ å¤‰æ…‹æ¸©åº¦ä½ä¸‹")
</div>
        </div>

        <div class="content">
            <h2>ğŸ’» ä¾‹é¡Œ5.3: ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹ã®ç†±åŠ›å­¦</h2>

            <div class="theory-box">
                <h3>ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹</h3>
                <p><strong>ç„¡æ‹¡æ•£å‹å¤‰æ…‹</strong>: Î³ç›¸ï¼ˆFCCï¼‰ã‹ã‚‰æ€¥å†·ã«ã‚ˆã‚Šå½¢æˆã•ã‚Œã‚‹éé£½å’Œå›ºæº¶ä½“</p>

                <p><strong>ç‰¹å¾´</strong>:</p>
                <ul>
                    <li>æ‹¡æ•£ãªã—ï¼ˆåŸå­ã®å”èª¿çš„å‰ªæ–­å¤‰å½¢ï¼‰</li>
                    <li>æº–å®‰å®šç›¸ï¼ˆéå¹³è¡¡ï¼‰</li>
                    <li>é«˜ç¡¬åº¦ãƒ»é«˜è„†æ€§</li>
                    <li>çµæ™¶æ§‹é€ : BCTï¼ˆä½“å¿ƒæ­£æ–¹æ ¼å­ï¼‰</li>
                </ul>

                <p><strong>Msç‚¹ï¼ˆMartensite startï¼‰</strong>: ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹é–‹å§‹æ¸©åº¦</p>
                <p>\[
                M_s = 539 - 423[\text{C}] - 30.4[\text{Mn}] - 12.1[\text{Cr}] - 17.7[\text{Ni}] \quad (Â°C)
                \]</p>
            </div>

            <div class="code-title">Pythonå®Ÿè£…: Msç‚¹ã®è¨ˆç®—ã¨å†·å´æ›²ç·š</div>
            <div class="code-example">import numpy as np
import matplotlib.pyplot as plt

def calculate_Ms(C, Mn=0, Cr=0, Ni=0):
    """ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹é–‹å§‹æ¸©åº¦ï¼ˆMsç‚¹ï¼‰ã®è¨ˆç®—

    Andrewså¼ã«ã‚ˆã‚‹çµŒé¨“å‰‡

    Args:
        C: ç‚­ç´ æ¿ƒåº¦ (wt%)
        Mn: ãƒãƒ³ã‚¬ãƒ³æ¿ƒåº¦ (wt%)
        Cr: ã‚¯ãƒ­ãƒ æ¿ƒåº¦ (wt%)
        Ni: ãƒ‹ãƒƒã‚±ãƒ«æ¿ƒåº¦ (wt%)

    Returns:
        Ms: ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹é–‹å§‹æ¸©åº¦ (Â°C)
    """
    Ms = 539 - 423*C - 30.4*Mn - 12.1*Cr - 17.7*Ni
    return Ms

# ç‚­ç´ æ¿ƒåº¦ã«ã‚ˆã‚‹Msç‚¹ã®å¤‰åŒ–
C_range = np.linspace(0.1, 1.2, 50)
Ms_values = [calculate_Ms(C) for C in C_range]

# åˆé‡‘å…ƒç´ ã®å½±éŸ¿
Mn_range = [0, 1.0, 2.0]
Ni_range = [0, 2.0, 4.0]

fig, axes = plt.subplots(1, 2, figsize=(14, 6))

# ç‚­ç´ æ¿ƒåº¦ã®å½±éŸ¿
ax1 = axes[0]
ax1.plot(C_range, Ms_values, 'b-', linewidth=2.5, label='Plain carbon steel')

# Mnæ·»åŠ ã®å½±éŸ¿
for Mn in Mn_range[1:]:
    Ms_Mn = [calculate_Ms(C, Mn=Mn) for C in C_range]
    ax1.plot(C_range, Ms_Mn, '--', linewidth=2,
            label=f'+ {Mn:.1f}% Mn')

ax1.axhline(0, color='red', linestyle=':', linewidth=1.5, label='å®¤æ¸©')
ax1.set_xlabel('ç‚­ç´ æ¿ƒåº¦ (wt%)')
ax1.set_ylabel('Msç‚¹ (Â°C)')
ax1.set_title('ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹é–‹å§‹æ¸©åº¦ï¼ˆMsç‚¹ï¼‰')
ax1.legend()
ax1.grid(True, alpha=0.3)
ax1.set_ylim([-100, 550])

# å†·å´æ›²ç·šã¨ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆåˆ†ç‡
ax2 = axes[1]

# Koistinen-Marburgerå¼: f_M = 1 - exp(-Î±(Ms - T))
def martensite_fraction(T, Ms, alpha=0.011):
    """ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆåˆ†ç‡

    Args:
        T: æ¸©åº¦ (Â°C)
        Ms: Msç‚¹ (Â°C)
        alpha: å®šæ•°ï¼ˆé€šå¸¸ 0.011ï¼‰

    Returns:
        f_M: ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆåˆ†ç‡
    """
    if T >= Ms:
        return 0
    else:
        f_M = 1 - np.exp(-alpha * (Ms - T))
        return f_M

# ç•°ãªã‚‹ç‚­ç´ æ¿ƒåº¦ã§ã®ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆåˆ†ç‡
T_range = np.linspace(-100, 800, 200)
C_values = [0.3, 0.6, 0.9]
colors = ['blue', 'green', 'red']

for C, color in zip(C_values, colors):
    Ms = calculate_Ms(C)
    f_M = [martensite_fraction(T, Ms) for T in T_range]
    ax2.plot(T_range, f_M, color=color, linewidth=2.5,
            label=f'C {C:.1f}% (Ms={Ms:.0f}Â°C)')

ax2.axvline(25, color='purple', linestyle='--', linewidth=1.5, label='å®¤æ¸©')
ax2.set_xlabel('æ¸©åº¦ (Â°C)')
ax2.set_ylabel('ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆåˆ†ç‡')
ax2.set_title('ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆåˆ†ç‡ã®æ¸©åº¦ä¾å­˜æ€§')
ax2.legend()
ax2.grid(True, alpha=0.3)
ax2.set_xlim([-100, 800])
ax2.set_ylim([0, 1])

plt.tight_layout()
plt.savefig('materials_martensite_transformation.png', dpi=300, bbox_inches='tight')
plt.show()

# è¨ˆç®—ä¾‹
print("=== ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹ã®Msç‚¹ ===\n")
steels = [
    ("ä½ç‚­ç´ é‹¼", 0.2, 0, 0, 0),
    ("ä¸­ç‚­ç´ é‹¼", 0.6, 0, 0, 0),
    ("é«˜ç‚­ç´ é‹¼", 1.0, 0, 0, 0),
    ("Mné‹¼", 0.6, 2.0, 0, 0),
    ("Cr-Nié‹¼", 0.6, 1.0, 12.0, 8.0),
]

print(f"{'é‹¼ç¨®':<15} {'C%':<6} {'Mn%':<6} {'Cr%':<6} {'Ni%':<6} {'Msç‚¹ (Â°C)':<12}")
print("-" * 60)

for name, C, Mn, Cr, Ni in steels:
    Ms = calculate_Ms(C, Mn, Cr, Ni)
    print(f"{name:<15} {C:<6.1f} {Mn:<6.1f} {Cr:<6.1f} {Ni:<6.1f} {Ms:<12.0f}")

print("\nå®¤æ¸©ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆåˆ†ç‡ï¼ˆ25Â°Cï¼‰:")
for name, C, Mn, Cr, Ni in steels:
    Ms = calculate_Ms(C, Mn, Cr, Ni)
    f_M = martensite_fraction(25, Ms)
    print(f"  {name}: {f_M*100:.1f}%")

print("\né‡è¦ãªçŸ¥è¦‹:")
print("  - ç‚­ç´ â†‘ â†’ Msç‚¹â†“ï¼ˆãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå½¢æˆã—ã«ãã„ï¼‰")
print("  - åˆé‡‘å…ƒç´ ï¼ˆMn, Cr, Niï¼‰ã‚‚Msç‚¹ã‚’ä¸‹ã’ã‚‹")
print("  - Ms < å®¤æ¸©ã®å ´åˆã€æ®‹ç•™ã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆãŒæ®‹ã‚‹")
</div>
        </div>

        <div class="content">
            <h2>ğŸ’» ä¾‹é¡Œ5.4: TTTå›³ï¼ˆTime-Temperature-Transformationï¼‰ã®æç”»</h2>

            <div class="theory-box">
                <h3>TTTå›³ã¨ã¯</h3>
                <p><strong>æ’æ¸©å¤‰æ…‹å›³</strong>: ç­‰æ¸©ä¿æŒã§ã®å¤‰æ…‹é–‹å§‹ãƒ»çµ‚äº†æ™‚é–“ã‚’ç¤ºã™</p>

                <p><strong>ä¸»è¦ãªå¤‰æ…‹</strong>:</p>
                <ul>
                    <li>ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå¤‰æ…‹: æ‹¡æ•£å‹ã€å±¤çŠ¶çµ„ç¹”ï¼ˆÎ± + Feâ‚ƒCï¼‰</li>
                    <li>ãƒ™ã‚¤ãƒŠã‚¤ãƒˆå¤‰æ…‹: ä¸­é–“çš„ã€é‡çŠ¶çµ„ç¹”</li>
                    <li>ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹: ç„¡æ‹¡æ•£å‹ã€æ€¥å†·ã«ã‚ˆã‚Šå½¢æˆ</li>
                </ul>

                <p><strong>ç”¨é€”</strong>: ç†±å‡¦ç†ãƒ—ãƒ­ã‚»ã‚¹è¨­è¨ˆã€çµ„ç¹”äºˆæ¸¬</p>
            </div>

            <div class="code-title">Pythonå®Ÿè£…: TTTå›³ã®æ¨¡æ“¬ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ</div>
            <div class="code-example">import numpy as np
import matplotlib.pyplot as plt

def generate_TTT_diagram(C_content=0.8):
    """TTTå›³ã®æ¨¡æ“¬ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ

    Args:
        C_content: ç‚­ç´ æ¿ƒåº¦ (wt%)

    Returns:
        TTT diagram data
    """
    # æ¸©åº¦ç¯„å›²
    T_range = np.linspace(200, 700, 100)

    # ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå¤‰æ…‹ï¼ˆCæ›²ç·šï¼‰
    # é¼»ç‚¹ï¼ˆæœ€çŸ­å¤‰æ…‹æ™‚é–“ï¼‰: ~550Â°C, ~1ç§’
    T_pearlite_nose = 550
    t_pearlite_nose = 1.0  # ç§’

    def pearlite_curve(T, factor):
        """ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå¤‰æ…‹æ›²ç·šï¼ˆJohnson-Mehl-Avramiå¼ã«åŸºã¥ãï¼‰"""
        if T < 500 or T > 727:
            return 1e10  # å¤‰æ…‹ã—ãªã„
        else:
            # Cæ›²ç·šã®å½¢çŠ¶
            t = t_pearlite_nose * factor * np.exp(abs(T - T_pearlite_nose) / 50)
            return t

    t_pearlite_start = [pearlite_curve(T, 1) for T in T_range]
    t_pearlite_finish = [pearlite_curve(T, 10) for T in T_range]

    # ãƒ™ã‚¤ãƒŠã‚¤ãƒˆå¤‰æ…‹
    T_bainite_nose = 350
    t_bainite_nose = 10.0

    def bainite_curve(T, factor):
        if T < 250 or T > 500:
            return 1e10
        else:
            t = t_bainite_nose * factor * np.exp(abs(T - T_bainite_nose) / 30)
            return t

    t_bainite_start = [bainite_curve(T, 1) for T in T_range]
    t_bainite_finish = [bainite_curve(T, 10) for T in T_range]

    # ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆï¼ˆç¬é–“çš„ï¼‰
    Ms = calculate_Ms(C_content)
    Mf = Ms - 215  # Mfç‚¹ï¼ˆãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹çµ‚äº†ï¼‰

    return {
        'T_range': T_range,
        'pearlite_start': t_pearlite_start,
        'pearlite_finish': t_pearlite_finish,
        'bainite_start': t_bainite_start,
        'bainite_finish': t_bainite_finish,
        'Ms': Ms,
        'Mf': Mf
    }

# TTTå›³ã®æç”»
C = 0.8  # å…±æé‹¼
ttt_data = generate_TTT_diagram(C)

fig, ax = plt.subplots(figsize=(12, 8))

T = ttt_data['T_range']
t_p_s = np.array(ttt_data['pearlite_start'])
t_p_f = np.array(ttt_data['pearlite_finish'])
t_b_s = np.array(ttt_data['bainite_start'])
t_b_f = np.array(ttt_data['bainite_finish'])

# æ™‚é–“ã‚’æœ‰åŠ¹ç¯„å›²ã§ãƒã‚¹ã‚¯
valid_p_s = t_p_s < 1e6
valid_p_f = t_p_f < 1e6
valid_b_s = t_b_s < 1e6
valid_b_f = t_b_f < 1e6

# ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ
ax.semilogx(t_p_s[valid_p_s], T[valid_p_s], 'b-', linewidth=2.5, label='ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå¤‰æ…‹é–‹å§‹')
ax.semilogx(t_p_f[valid_p_f], T[valid_p_f], 'b--', linewidth=2.5, label='ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå¤‰æ…‹çµ‚äº†')
ax.fill_betweenx(T[valid_p_s], t_p_s[valid_p_s], t_p_f[valid_p_f],
                 where=valid_p_s & valid_p_f,
                 color='lightblue', alpha=0.3)

# ãƒ™ã‚¤ãƒŠã‚¤ãƒˆ
ax.semilogx(t_b_s[valid_b_s], T[valid_b_s], 'g-', linewidth=2.5, label='ãƒ™ã‚¤ãƒŠã‚¤ãƒˆå¤‰æ…‹é–‹å§‹')
ax.semilogx(t_b_f[valid_b_f], T[valid_b_f], 'g--', linewidth=2.5, label='ãƒ™ã‚¤ãƒŠã‚¤ãƒˆå¤‰æ…‹çµ‚äº†')
ax.fill_betweenx(T[valid_b_s], t_b_s[valid_b_s], t_b_f[valid_b_f],
                 where=valid_b_s & valid_b_f,
                 color='lightgreen', alpha=0.3)

# ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆ
Ms = ttt_data['Ms']
Mf = ttt_data['Mf']
ax.axhline(Ms, color='red', linestyle='-', linewidth=2.5, label=f'Ms = {Ms:.0f}Â°C')
ax.axhline(Mf, color='red', linestyle='--', linewidth=2, label=f'Mf = {Mf:.0f}Â°C')
ax.fill_between([1e-2, 1e6], Mf, Ms, color='lightcoral', alpha=0.3)

# å†·å´æ›²ç·šã®ä¾‹
# å¾å†·: ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå½¢æˆ
t_cool_slow = np.logspace(-1, 3, 50)
T_cool_slow = 900 - 100 * np.log10(t_cool_slow + 1)
ax.plot(t_cool_slow, T_cool_slow, 'purple', linewidth=2, linestyle=':',
       label='å¾å†·ï¼ˆç‚‰å†·ï¼‰â†’ ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ')

# æ€¥å†·: ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå½¢æˆ
t_cool_fast = np.logspace(-2, 0, 30)
T_cool_fast = 900 - 800 * t_cool_fast
ax.plot(t_cool_fast, T_cool_fast, 'orange', linewidth=2, linestyle=':',
       label='æ€¥å†·ï¼ˆæ°´å†·ï¼‰â†’ ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆ')

# ãƒ©ãƒ™ãƒ«
ax.text(10, 600, 'ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ', fontsize=14, fontweight='bold',
       bbox=dict(boxstyle='round', facecolor='lightblue', alpha=0.7))
ax.text(100, 350, 'ãƒ™ã‚¤ãƒŠã‚¤ãƒˆ', fontsize=14, fontweight='bold',
       bbox=dict(boxstyle='round', facecolor='lightgreen', alpha=0.7))
ax.text(0.5, Ms-50, 'ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆ', fontsize=14, fontweight='bold',
       bbox=dict(boxstyle='round', facecolor='lightcoral', alpha=0.7))

ax.set_xlabel('æ™‚é–“ (ç§’)', fontsize=13)
ax.set_ylabel('æ¸©åº¦ (Â°C)', fontsize=13)
ax.set_title(f'TTTå›³ï¼ˆTime-Temperature-Transformationï¼‰\nC {C}% é‹¼', fontsize=15, fontweight='bold')
ax.set_xlim([1e-2, 1e6])
ax.set_ylim([0, 800])
ax.legend(loc='upper right', fontsize=10)
ax.grid(True, alpha=0.3, which='both')

plt.tight_layout()
plt.savefig('materials_TTT_diagram.png', dpi=300, bbox_inches='tight')
plt.show()

print("=== TTTå›³ã®èª­ã¿æ–¹ ===\n")
print("1. ç¸¦è»¸: æ¸©åº¦ï¼ˆã‚ªãƒ¼ã‚¹ãƒ†ãƒŠã‚¤ãƒˆåŒ–æ¸©åº¦ã‹ã‚‰å†·å´ï¼‰")
print("2. æ¨ªè»¸: æ™‚é–“ï¼ˆå¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰")
print("3. Cæ›²ç·š: å¤‰æ…‹é–‹å§‹ãƒ»çµ‚äº†æ™‚é–“")
print()
print("çµ„ç¹”ã®æ±ºå®š:")
print("  - å¾å†·ï¼ˆæ›²ç·šã‚’æ¨ªåˆ‡ã‚‹ï¼‰â†’ ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ")
print("  - ä¸­é€Ÿå†·å´ â†’ ãƒ™ã‚¤ãƒŠã‚¤ãƒˆ")
print("  - æ€¥å†·ï¼ˆæ›²ç·šã‚’é¿ã‘ã¦Msä»¥ä¸‹ï¼‰â†’ ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆ")
print()
print("å®Ÿç”¨ä¾‹:")
print("  - ç„¼å…¥ã‚Œ: æ€¥å†·ã—ã¦ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆï¼ˆé«˜ç¡¬åº¦ï¼‰")
print("  - ç„¼ãªã¾ã—: å¾å†·ã—ã¦ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆï¼ˆè»ŸåŒ–ï¼‰")
print("  - ç„¼æˆ»ã—: ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆã‚’åŠ ç†±ã—ã¦é­æ€§æ”¹å–„")
</div>
        </div>

        <div class="content">
            <h2>ğŸ’» ä¾‹é¡Œ5.5: CCTå›³ï¼ˆContinuous Cooling Transformationï¼‰ã®è¨ˆç®—</h2>

            <div class="code-title">Pythonå®Ÿè£…: CCTå›³ã¨å†·å´é€Ÿåº¦</div>
            <div class="code-example">import numpy as np
import matplotlib.pyplot as plt

def generate_CCT_diagram(C_content=0.4):
    """CCTå›³ã®æ¨¡æ“¬ãƒ‡ãƒ¼ã‚¿ï¼ˆé€£ç¶šå†·å´å¤‰æ…‹å›³ï¼‰

    Args:
        C_content: ç‚­ç´ æ¿ƒåº¦ (wt%)
    """
    # TTTå›³ã«æ¯”ã¹ã¦æ›²ç·šãŒå³ã«ã‚·ãƒ•ãƒˆ
    T_range = np.linspace(200, 750, 100)

    # ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ+ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆå¤‰æ…‹
    T_fp_nose = 600
    t_fp_nose = 10.0

    def fp_curve(T, factor):
        if T < 500 or T > 750:
            return 1e10
        else:
            t = t_fp_nose * factor * np.exp(abs(T - T_fp_nose) / 60)
            return t

    t_fp_start = [fp_curve(T, 1) for T in T_range]
    t_fp_finish = [fp_curve(T, 50) for T in T_range]

    # ãƒ™ã‚¤ãƒŠã‚¤ãƒˆ
    T_b_nose = 400
    t_b_nose = 100.0

    def b_curve(T, factor):
        if T < 300 or T > 550:
            return 1e10
        else:
            t = t_b_nose * factor * np.exp(abs(T - T_b_nose) / 40)
            return t

    t_b_start = [b_curve(T, 1) for T in T_range]
    t_b_finish = [b_curve(T, 50) for T in T_range]

    # ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆ
    Ms = calculate_Ms(C_content)
    Mf = Ms - 215

    return {
        'T_range': T_range,
        'fp_start': t_fp_start,
        'fp_finish': t_fp_finish,
        'b_start': t_b_start,
        'b_finish': t_b_finish,
        'Ms': Ms,
        'Mf': Mf
    }

# å†·å´æ›²ç·šã®ç”Ÿæˆ
def cooling_curve(cooling_rate, T_start=900, T_final=25):
    """å†·å´æ›²ç·š

    Args:
        cooling_rate: å†·å´é€Ÿåº¦ (Â°C/s)
        T_start: åˆæœŸæ¸©åº¦ (Â°C)
        T_final: æœ€çµ‚æ¸©åº¦ (Â°C)

    Returns:
        t, T: æ™‚é–“ã€æ¸©åº¦
    """
    t_total = (T_start - T_final) / cooling_rate
    t = np.linspace(0, t_total, 200)
    T = T_start - cooling_rate * t
    T = np.maximum(T, T_final)
    return t, T

# CCTå›³ã®æç”»
C = 0.4  # ä¸­ç‚­ç´ é‹¼
cct_data = generate_CCT_diagram(C)

fig, ax = plt.subplots(figsize=(12, 8))

T = cct_data['T_range']
t_fp_s = np.array(cct_data['fp_start'])
t_fp_f = np.array(cct_data['fp_finish'])
t_b_s = np.array(cct_data['b_start'])
t_b_f = np.array(cct_data['b_finish'])

# æœ‰åŠ¹ç¯„å›²
valid_fp_s = t_fp_s < 1e6
valid_fp_f = t_fp_f < 1e6
valid_b_s = t_b_s < 1e6
valid_b_f = t_b_f < 1e6

# ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ+ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ
ax.semilogx(t_fp_s[valid_fp_s], T[valid_fp_s], 'b-', linewidth=2.5, label='F+Pé–‹å§‹')
ax.semilogx(t_fp_f[valid_fp_f], T[valid_fp_f], 'b--', linewidth=2.5, label='F+Pçµ‚äº†')
ax.fill_betweenx(T, t_fp_s, t_fp_f, where=valid_fp_s & valid_fp_f,
                 color='lightblue', alpha=0.3)

# ãƒ™ã‚¤ãƒŠã‚¤ãƒˆ
ax.semilogx(t_b_s[valid_b_s], T[valid_b_s], 'g-', linewidth=2.5, label='Bé–‹å§‹')
ax.semilogx(t_b_f[valid_b_f], T[valid_b_f], 'g--', linewidth=2.5, label='Bçµ‚äº†')
ax.fill_betweenx(T, t_b_s, t_b_f, where=valid_b_s & valid_b_f,
                 color='lightgreen', alpha=0.3)

# ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆ
Ms = cct_data['Ms']
Mf = cct_data['Mf']
ax.axhline(Ms, color='red', linestyle='-', linewidth=2.5, label=f'Ms = {Ms:.0f}Â°C')
ax.axhline(Mf, color='red', linestyle='--', linewidth=2, label=f'Mf = {Mf:.0f}Â°C')

# æ§˜ã€…ãªå†·å´é€Ÿåº¦
cooling_rates = [0.5, 5, 50, 500]  # Â°C/s
colors = ['purple', 'orange', 'brown', 'magenta']
microstructures = ['F+P', 'F+P+B', 'B+M', 'M']

for i, (cr, color, micro) in enumerate(zip(cooling_rates, colors, microstructures)):
    t_cool, T_cool = cooling_curve(cr)
    ax.plot(t_cool, T_cool, color=color, linewidth=2, linestyle=':',
           label=f'{cr} Â°C/s â†’ {micro}')

# è‡¨ç•Œå†·å´é€Ÿåº¦ã®è¡¨ç¤º
ax.axvline(1, color='gray', linestyle='--', alpha=0.5)
ax.text(1, 100, 'è‡¨ç•Œå†·å´é€Ÿåº¦\nï¼ˆã“ã®é€Ÿåº¦ä»¥ä¸Šã§\nãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå½¢æˆï¼‰',
       fontsize=10, ha='center',
       bbox=dict(boxstyle='round', facecolor='yellow', alpha=0.6))

ax.set_xlabel('æ™‚é–“ (ç§’)', fontsize=13)
ax.set_ylabel('æ¸©åº¦ (Â°C)', fontsize=13)
ax.set_title(f'CCTå›³ï¼ˆContinuous Cooling Transformationï¼‰\nC {C}% é‹¼', fontsize=15, fontweight='bold')
ax.set_xlim([1e-1, 1e4])
ax.set_ylim([0, 900])
ax.legend(loc='upper right', fontsize=9)
ax.grid(True, alpha=0.3, which='both')

plt.tight_layout()
plt.savefig('materials_CCT_diagram.png', dpi=300, bbox_inches='tight')
plt.show()

# å†·å´é€Ÿåº¦ã¨çµ„ç¹”ã®é–¢ä¿‚
print("=== CCTå›³ã¨å†·å´é€Ÿåº¦ ===\n")
print(f"{'å†·å´é€Ÿåº¦ (Â°C/s)':<20} {'å†·å´æ™‚é–“ (900â†’25Â°C)':<25} {'çµ„ç¹”':<30}")
print("-" * 75)

for cr in cooling_rates:
    t_total = (900 - 25) / cr
    # çµ„ç¹”åˆ¤å®šï¼ˆç°¡ç•¥ï¼‰
    if cr < 1:
        micro = "ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ"
    elif cr < 10:
        micro = "ãƒ•ã‚§ãƒ©ã‚¤ãƒˆ + ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆ + ãƒ™ã‚¤ãƒŠã‚¤ãƒˆ"
    elif cr < 100:
        micro = "ãƒ™ã‚¤ãƒŠã‚¤ãƒˆ + ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆ"
    else:
        micro = "ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆ"

    print(f"{cr:<20.1f} {t_total:<25.1f} {micro:<30}")

print("\nå†·å´æ–¹æ³•ã¨å†·å´é€Ÿåº¦:")
print("  - ç‚‰å†·ï¼ˆFurnace coolingï¼‰: ~0.1-1 Â°C/s")
print("  - ç©ºå†·ï¼ˆAir coolingï¼‰: ~1-10 Â°C/s")
print("  - æ²¹å†·ï¼ˆOil quenchingï¼‰: ~10-100 Â°C/s")
print("  - æ°´å†·ï¼ˆWater quenchingï¼‰: ~100-1000 Â°C/s")
print()
print("TTTå›³ vs CCTå›³:")
print("  - TTT: ç­‰æ¸©å¤‰æ…‹ï¼ˆå®Ÿé¨“å®¤çš„ï¼‰")
print("  - CCT: é€£ç¶šå†·å´å¤‰æ…‹ï¼ˆå®Ÿç”¨çš„ï¼‰")
print("  - CCTæ›²ç·šã¯TTTæ›²ç·šã‚ˆã‚Šå³å´ï¼ˆé…ã„æ™‚é–“ï¼‰")
</div>
        </div>

        <div class="content">
            <h2>ğŸ’» ä¾‹é¡Œ5.6: åˆé‡‘ã®æ··åˆã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼è¨ˆç®—</h2>

            <div class="code-title">Pythonå®Ÿè£…: äºŒå…ƒç³»ã®æ··åˆã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼</div>
            <div class="code-example">import numpy as np
import matplotlib.pyplot as plt

def mixing_enthalpy(x_B, H_AB, omega=0):
    """äºŒå…ƒåˆé‡‘A-Bã®æ··åˆã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼

    æ­£å‰‡æº¶ä½“ãƒ¢ãƒ‡ãƒ«: Î”H_mix = Î© x_A x_B

    Args:
        x_B: BåŸå­åˆ†ç‡
        H_AB: ç›¸äº’ä½œç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆA-Bçµåˆã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼‰
        omega: ç›¸äº’ä½œç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ Î© = z(Îµ_AB - (Îµ_AA + Îµ_BB)/2)

    Returns:
        Î”H_mix: æ··åˆã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼ (J/mol)
    """
    x_A = 1 - x_B
    if omega == 0:
        omega = H_AB

    DH_mix = omega * x_A * x_B
    return DH_mix

def mixing_entropy(x_B, R=8.314):
    """ç†æƒ³æº¶ä½“ã®é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼

    Args:
        x_B: BåŸå­åˆ†ç‡
        R: æ°—ä½“å®šæ•° (J/(molÂ·K))

    Returns:
        Î”S_mix: æ··åˆã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ (J/(molÂ·K))
    """
    x_A = 1 - x_B
    if x_A == 0 or x_B == 0:
        return 0
    else:
        DS_mix = -R * (x_A * np.log(x_A) + x_B * np.log(x_B))
        return DS_mix

def mixing_gibbs(x_B, T, omega, R=8.314):
    """æ··åˆGibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼

    Î”G_mix = Î”H_mix - T Î”S_mix

    Args:
        x_B: BåŸå­åˆ†ç‡
        T: æ¸©åº¦ (K)
        omega: ç›¸äº’ä½œç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ (J/mol)
        R: æ°—ä½“å®šæ•°

    Returns:
        Î”G_mix: æ··åˆGibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ (J/mol)
    """
    DH = mixing_enthalpy(x_B, 0, omega)
    DS = mixing_entropy(x_B, R)
    DG = DH - T * DS
    return DG

# çµ„æˆç¯„å›²
x_B_range = np.linspace(0.001, 0.999, 200)

# ç›¸äº’ä½œç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆç•°ãªã‚‹ç³»ï¼‰
omega_values = {
    'ç†æƒ³æº¶ä½“ï¼ˆÎ©=0ï¼‰': 0,
    'å¼±ã„å¸å¼•ï¼ˆÎ©=-5kJ/molï¼‰': -5000,
    'å¼·ã„åç™ºï¼ˆÎ©=+20kJ/molï¼‰': 20000,
}

fig, axes = plt.subplots(2, 2, figsize=(14, 10))

# æ··åˆã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼
ax1 = axes[0, 0]
for name, omega in omega_values.items():
    DH_values = [mixing_enthalpy(x, 0, omega) for x in x_B_range]
    ax1.plot(x_B_range, np.array(DH_values) / 1000, linewidth=2.5, label=name)

ax1.set_xlabel('çµ„æˆ x_B')
ax1.set_ylabel('Î”H_mix (kJ/mol)')
ax1.set_title('æ··åˆã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼')
ax1.legend()
ax1.grid(True, alpha=0.3)
ax1.axhline(0, color='black', linestyle='--', linewidth=1)

# æ··åˆã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼
ax2 = axes[0, 1]
DS_values = [mixing_entropy(x) for x in x_B_range]
ax2.plot(x_B_range, DS_values, 'g-', linewidth=2.5)
ax2.set_xlabel('çµ„æˆ x_B')
ax2.set_ylabel('Î”S_mix (J/(molÂ·K))')
ax2.set_title('æ··åˆã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ï¼ˆç†æƒ³æº¶ä½“ï¼‰')
ax2.grid(True, alpha=0.3)

# æ··åˆGibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆæ¸©åº¦ä¾å­˜ï¼‰
ax3 = axes[1, 0]
T_values = [300, 600, 1000, 1500]
omega_example = 20000  # åç™ºç³»

for T in T_values:
    DG_values = [mixing_gibbs(x, T, omega_example) for x in x_B_range]
    ax3.plot(x_B_range, np.array(DG_values) / 1000, linewidth=2.5, label=f'T = {T} K')

ax3.set_xlabel('çµ„æˆ x_B')
ax3.set_ylabel('Î”G_mix (kJ/mol)')
ax3.set_title(f'æ··åˆGibbsè‡ªç”±ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆÎ© = {omega_example/1000:.0f} kJ/molï¼‰')
ax3.legend()
ax3.grid(True, alpha=0.3)
ax3.axhline(0, color='black', linestyle='--', linewidth=1)

# ç›¸åˆ†é›¢ã®åˆ¤å®šï¼ˆâˆ‚Â²Î”G/âˆ‚xÂ² < 0 ã§ã‚¹ãƒ”ãƒãƒ¼ãƒ€ãƒ«ï¼‰
ax4 = axes[1, 1]
T = 600
omega_spinodal = 20000

DG_values = [mixing_gibbs(x, T, omega_spinodal) for x in x_B_range]
ax4.plot(x_B_range, np.array(DG_values) / 1000, 'b-', linewidth=2.5, label='Î”G_mix')

# æ¥ç·šï¼ˆå…±é€šæ¥ç·šæ³•ã§ç›¸åˆ†é›¢çµ„æˆã‚’æ±‚ã‚ã‚‹ - ç°¡ç•¥åŒ–ï¼‰
# ã“ã“ã§ã¯è¦–è¦šçš„ã«è¡¨ç¤º
ax4.axhline(0, color='gray', linestyle='--', linewidth=1, alpha=0.5)
ax4.text(0.5, 3, f'T = {T} K\né«˜æ¸©ã§ç›¸åˆ†é›¢å‚¾å‘', fontsize=11, ha='center',
        bbox=dict(boxstyle='round', facecolor='yellow', alpha=0.6))

ax4.set_xlabel('çµ„æˆ x_B')
ax4.set_ylabel('Î”G_mix (kJ/mol)')
ax4.set_title('ç›¸åˆ†é›¢ã¨å…±é€šæ¥ç·š')
ax4.legend()
ax4.grid(True, alpha=0.3)

plt.tight_layout()
plt.savefig('materials_mixing_enthalpy.png', dpi=300, bbox_inches='tight')
plt.show()

# è§£æ
print("=== æ··åˆã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼ã¨ç›¸å®‰å®šæ€§ ===\n")
print("ç›¸äº’ä½œç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ Î© ã®æ„å‘³:")
print("  Î© < 0: A-BçµåˆãŒ A-A, B-B ã‚ˆã‚Šå¼·ã„ â†’ å¸å¼•ã€å›ºæº¶å‚¾å‘")
print("  Î© = 0: ç†æƒ³æº¶ä½“ï¼ˆå®Œå…¨ã«ãƒ©ãƒ³ãƒ€ãƒ ï¼‰")
print("  Î© > 0: A-BçµåˆãŒå¼±ã„ â†’ åç™ºã€ç›¸åˆ†é›¢å‚¾å‘")
print()

print("Î”G_mix = Î”H_mix - T Î”S_mix ã®ç«¶åˆ:")
print("  - ä½æ¸©: Î”H_mixãŒæ”¯é… â†’ Î©>0ãªã‚‰ç›¸åˆ†é›¢")
print("  - é«˜æ¸©: -TÎ”S_mixãŒæ”¯é… â†’ ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼é …ã§æ··åˆ")
print()

# è‡¨ç•Œæ¸©åº¦ã®è¨ˆç®—ï¼ˆç°¡ç•¥åŒ–ï¼‰
omega_critical = 20000
R = 8.314
T_critical = omega_critical / (2 * R)  # æ­£å‰‡æº¶ä½“ã®è‡¨ç•Œæ¸©åº¦

print(f"è‡¨ç•Œæ¸©åº¦ï¼ˆæ­£å‰‡æº¶ä½“ãƒ¢ãƒ‡ãƒ«ï¼‰:")
print(f"  T_c = Î© / (2R) = {omega_critical/1000:.0f} / (2 Ã— 8.314)")
print(f"  T_c â‰ˆ {T_critical:.0f} K = {T_critical - 273:.0f} Â°C")
print(f"  T > T_c: å…¨ç‡å›ºæº¶")
print(f"  T < T_c: ç›¸åˆ†é›¢ï¼ˆãƒŸã‚¹ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚®ãƒ£ãƒƒãƒ—ï¼‰")
</div>
        </div>

        <div class="content">
            <h2>ğŸ’» ä¾‹é¡Œ5.7: é«˜ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼åˆé‡‘ï¼ˆHEAï¼‰ã®é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼</h2>

            <div class="code-title">Pythonå®Ÿè£…: å¤šå…ƒç³»ã®é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼</div>
            <div class="code-example">import numpy as np
import matplotlib.pyplot as plt
from itertools import combinations

def configurational_entropy_multicomponent(composition, R=8.314):
    """å¤šå…ƒç³»ã®é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼

    Î”S_conf = -R Î£ x_i ln(x_i)

    Args:
        composition: å„å…ƒç´ ã®åŸå­åˆ†ç‡ï¼ˆãƒªã‚¹ãƒˆï¼‰
        R: æ°—ä½“å®šæ•° (J/(molÂ·K))

    Returns:
        Î”S_conf: é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ (J/(molÂ·K))
    """
    x = np.array(composition)
    x = x[x > 0]  # ã‚¼ãƒ­ã‚’é™¤ã

    if np.sum(x) != 1.0:
        x = x / np.sum(x)  # è¦æ ¼åŒ–

    DS_conf = -R * np.sum(x * np.log(x))
    return DS_conf

# ä»£è¡¨çš„ãªé«˜ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼åˆé‡‘ï¼ˆHEAï¼‰
HEAs = {
    'CoCrFeMnNiï¼ˆCantoråˆé‡‘ï¼‰': [0.2, 0.2, 0.2, 0.2, 0.2],  # ç­‰åŸå­æ¯”5å…ƒç³»
    'AlCoCrFeNi': [0.2, 0.2, 0.2, 0.2, 0.2],
    'CoCrFeNi': [0.25, 0.25, 0.25, 0.25],  # 4å…ƒç³»
    'TiZrHfNbTa': [0.2, 0.2, 0.2, 0.2, 0.2],  # é›£èæ€§HEA
}

# ä¼çµ±çš„åˆé‡‘ï¼ˆæ¯”è¼ƒç”¨ï¼‰
traditional_alloys = {
    'ã‚¹ãƒ†ãƒ³ãƒ¬ã‚¹é‹¼ï¼ˆSUS304ï¼‰': [0.70, 0.18, 0.08, 0.04],  # Fe, Cr, Ni, Mnï¼ˆç°¡ç•¥ï¼‰
    'Alåˆé‡‘ï¼ˆ7075ï¼‰': [0.90, 0.05, 0.03, 0.02],  # Al, Zn, Mg, Cuï¼ˆç°¡ç•¥ï¼‰
    'çœŸé®ï¼ˆé»„éŠ…ï¼‰': [0.70, 0.30],  # Cu, Zn
}

print("=== é«˜ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼åˆé‡‘ï¼ˆHEAï¼‰ã®é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ ===\n")
print(f"{'åˆé‡‘':<30} {'å…ƒç´ æ•°':<10} {'Î”S_conf (J/(molÂ·K))':<25}")
print("-" * 65)

# HEAã®è¨ˆç®—
for name, comp in HEAs.items():
    n_elements = len(comp)
    DS = configurational_entropy_multicomponent(comp)
    print(f"{name:<30} {n_elements:<10} {DS:<25.4f}")

print("\nä¼çµ±çš„åˆé‡‘ï¼ˆæ¯”è¼ƒï¼‰:")
for name, comp in traditional_alloys.items():
    n_elements = len(comp)
    DS = configurational_entropy_multicomponent(comp)
    print(f"{name:<30} {n_elements:<10} {DS:<25.4f}")

# ç†è«–çš„æœ€å¤§å€¤
R = 8.314
print("\nç†è«–çš„æœ€å¤§å€¤:")
for n in [2, 3, 4, 5, 6]:
    DS_max = R * np.log(n)
    print(f"  {n}å…ƒç³»ï¼ˆç­‰åŸå­æ¯”ï¼‰: Î”S_conf = R ln({n}) = {DS_max:.4f} J/(molÂ·K)")

# å¯è¦–åŒ–
fig, axes = plt.subplots(1, 2, figsize=(14, 6))

# å…ƒç´ æ•°ã¨æœ€å¤§ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼
ax1 = axes[0]
n_range = np.arange(2, 11)
DS_max_range = R * np.log(n_range)

ax1.plot(n_range, DS_max_range, 'bo-', markersize=8, linewidth=2.5,
        label='ç†è«–æœ€å¤§å€¤ï¼ˆç­‰åŸå­æ¯”ï¼‰')

# HEAã¨ä¼çµ±çš„åˆé‡‘ã‚’ãƒ—ãƒ­ãƒƒãƒˆ
all_alloys = {**HEAs, **traditional_alloys}
for name, comp in all_alloys.items():
    n = len(comp)
    DS = configurational_entropy_multicomponent(comp)
    marker = 's' if name in HEAs else '^'
    color = 'red' if name in HEAs else 'green'
    ax1.plot(n, DS, marker, markersize=10, color=color)

ax1.plot([], [], 'rs', markersize=10, label='HEA')
ax1.plot([], [], 'g^', markersize=10, label='ä¼çµ±çš„åˆé‡‘')

ax1.set_xlabel('å…ƒç´ æ•°')
ax1.set_ylabel('Î”S_conf (J/(molÂ·K))')
ax1.set_title('é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã¨å…ƒç´ æ•°')
ax1.legend()
ax1.grid(True, alpha=0.3)
ax1.set_xticks(n_range)

# çµ„æˆã®å½±éŸ¿ï¼ˆ5å…ƒç³»ã§1å…ƒç´ ã®æ¿ƒåº¦ã‚’å¤‰åŒ–ï¼‰
ax2 = axes[1]
x_vary = np.linspace(0.05, 0.85, 50)

DS_vary = []
for x1 in x_vary:
    # æ®‹ã‚Š4å…ƒç´ ã‚’ç­‰åˆ†
    x_rest = (1 - x1) / 4
    comp = [x1, x_rest, x_rest, x_rest, x_rest]
    DS = configurational_entropy_multicomponent(comp)
    DS_vary.append(DS)

ax2.plot(x_vary, DS_vary, 'b-', linewidth=2.5)
ax2.axvline(0.2, color='red', linestyle='--', linewidth=2,
           label='ç­‰åŸå­æ¯”ï¼ˆx=0.2ï¼‰')
ax2.axhline(R * np.log(5), color='red', linestyle='--', linewidth=1.5, alpha=0.5)

ax2.set_xlabel('ç¬¬1å…ƒç´ ã®åŸå­åˆ†ç‡ xâ‚')
ax2.set_ylabel('Î”S_conf (J/(molÂ·K))')
ax2.set_title('é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã®çµ„æˆä¾å­˜æ€§ï¼ˆ5å…ƒç³»ï¼‰')
ax2.legend()
ax2.grid(True, alpha=0.3)

plt.tight_layout()
plt.savefig('materials_HEA_entropy.png', dpi=300, bbox_inches='tight')
plt.show()

# HEAã®å®šç¾©
print("\n=== é«˜ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼åˆé‡‘ï¼ˆHEAï¼‰ã®å®šç¾© ===")
print("Î”S_conf â‰¥ 1.5R ã‚’æº€ãŸã™å¤šå…ƒç³»åˆé‡‘")
print(f"  1.5R = 1.5 Ã— 8.314 = {1.5*R:.4f} J/(molÂ·K)")
print()
print("HEAã®ç‰¹å¾´:")
print("  1. é«˜ã„é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ â†’ å›ºæº¶ä½“å®‰å®šåŒ–")
print("  2. å¤šå…ƒç³»ï¼ˆé€šå¸¸5å…ƒç´ ä»¥ä¸Šï¼‰")
print("  3. æ ¼å­æ­ªã¿åŠ¹æœ â†’ é«˜å¼·åº¦")
print("  4. ã‚«ã‚¯ãƒ†ãƒ«åŠ¹æœï¼ˆç›¸ä¹—åŠ¹æœï¼‰")
print()
print("å¿œç”¨ä¾‹:")
print("  - CoCrFeMnNi: æ¥µä½æ¸©ã§ã®å„ªã‚ŒãŸé­æ€§")
print("  - TiZrHfNbTa: è¶…é«˜æ¸©è€æ€§ï¼ˆé›£èæ€§HEAï¼‰")
print("  - AlCoCrFeNi: é«˜æ¸©å¼·åº¦ã¨è€é…¸åŒ–æ€§")
</div>
        </div>

        <div class="content">
            <h2>ğŸ“š ã¾ã¨ã‚</h2>
            <ul>
                <li><strong>å›ºæº¶ä½“</strong>ï¼ˆç½®æ›å‹ãƒ»ä¾µå…¥å‹ï¼‰ã¨<strong>é‡‘å±é–“åŒ–åˆç‰©</strong>ã®é•ã„ã‚’ç†è§£</li>
                <li><strong>Fe-Cç³»ç›¸å›³</strong>ã¯é‹¼ã®çµ„ç¹”åˆ¶å¾¡ã®åŸºç¤ï¼ˆå…±æç‚¹0.77%, 727Â°Cï¼‰</li>
                <li><strong>Î±-Î³å¤‰æ…‹</strong>ã¯é‰„ã®åŒç´ å¤‰æ…‹ï¼ˆBCC â‡„ FCCã€912Â°Cï¼‰</li>
                <li><strong>ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆå¤‰æ…‹</strong>ã¯ç„¡æ‹¡æ•£å‹ã®ç›¸è»¢ç§»ï¼ˆé«˜ç¡¬åº¦çµ„ç¹”ï¼‰</li>
                <li><strong>Msç‚¹</strong>ã¯ç‚­ç´ ãƒ»åˆé‡‘å…ƒç´ ã§ä½ä¸‹ï¼ˆAndrewså¼ï¼‰</li>
                <li><strong>TTTå›³</strong>ã¯ç­‰æ¸©å¤‰æ…‹ã€<strong>CCTå›³</strong>ã¯é€£ç¶šå†·å´å¤‰æ…‹ã‚’è¨˜è¿°</li>
                <li>å†·å´é€Ÿåº¦ã«ã‚ˆã‚Šçµ„ç¹”ãŒåˆ¶å¾¡å¯èƒ½ï¼ˆãƒ‘ãƒ¼ãƒ©ã‚¤ãƒˆãƒ»ãƒ™ã‚¤ãƒŠã‚¤ãƒˆãƒ»ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆï¼‰</li>
                <li><strong>æ··åˆã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼</strong>ï¼ˆæ­£å‰‡æº¶ä½“ãƒ¢ãƒ‡ãƒ«ï¼‰ã§ç›¸å®‰å®šæ€§ã‚’è©•ä¾¡</li>
                <li><strong>é«˜ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼åˆé‡‘</strong>ï¼ˆHEAï¼‰ã¯é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã§å›ºæº¶ä½“ã‚’å®‰å®šåŒ–</li>
            </ul>
        </div>

        <div class="exercise">
            <h3>ğŸ’¡ æ¼”ç¿’å•é¡Œ</h3>
            <ol>
                <li><strong>[Easy]</strong> Fe-Cç³»ã§ç‚­ç´ æ¿ƒåº¦0.4%ã®é‹¼ã‚’800Â°Cã‹ã‚‰å¾å†·ã™ã‚‹ã¨ã€ã©ã®çµ„ç¹”ãŒå¾—ã‚‰ã‚Œã‚‹ã‹ã€‚ç›¸å›³ã‚’ç”¨ã„ã¦èª¬æ˜ã›ã‚ˆã€‚</li>

                <li><strong>[Easy]</strong> Andrewså¼ã‚’ç”¨ã„ã¦ã€C 0.8%, Mn 1.0% ã®é‹¼ã®Msç‚¹ã‚’è¨ˆç®—ã›ã‚ˆã€‚</li>

                <li><strong>[Medium]</strong> Koistinen-Marburgerå¼ \(f_M = 1 - \exp(-0.011(M_s - T))\) ã‚’ç”¨ã„ã¦ã€Ms=350Â°Cã®é‹¼ã‚’25Â°Cã¾ã§å†·å´ã—ãŸã¨ãã®ãƒãƒ«ãƒ†ãƒ³ã‚µã‚¤ãƒˆåˆ†ç‡ã‚’æ±‚ã‚ã‚ˆã€‚</li>

                <li><strong>[Medium]</strong> æ­£å‰‡æº¶ä½“ãƒ¢ãƒ‡ãƒ«ã§ç›¸äº’ä½œç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿Î©=20 kJ/molã®äºŒå…ƒç³»ã®è‡¨ç•Œæ¸©åº¦ã‚’è¨ˆç®—ã›ã‚ˆã€‚ãŸã ã— \(T_c = \Omega / (2R)\) ã¨ã™ã‚‹ã€‚</li>

                <li><strong>[Hard]</strong> 5å…ƒç³»ç­‰åŸå­æ¯”åˆé‡‘ï¼ˆå„20%ï¼‰ã¨ã€ä¸»æˆåˆ†80%+4å…ƒç´ å„5%ã®åˆé‡‘ã®é…ç½®ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã‚’è¨ˆç®—ã—ã€ã©ã¡ã‚‰ãŒé«˜ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼åˆé‡‘ã®å®šç¾©ï¼ˆÎ”S â‰¥ 1.5Rï¼‰ã‚’æº€ãŸã™ã‹åˆ¤å®šã›ã‚ˆã€‚</li>
            </ol>
        </div>

        <div class="navigation">
            <a href="chapter-4.html" class="nav-button">â† ç¬¬4ç« : è‡¨ç•Œç¾è±¡ã¨ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ç†è«–</a>
            <a href="index.html" class="nav-button">ã‚·ãƒªãƒ¼ã‚ºTOP</a>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 AI Terakoya - Equilibrium Thermodynamics and Phase Transitions</p>
    </footer>
</body>
</html>
